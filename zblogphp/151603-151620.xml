<files codepage='65001' xmlns:dt='urn:schemas-microsoft-com:datatypes'>
	<file name='zb_system\function\c_system_event.php' crc32='92EF71D3'  dt:dt='bin.base64'>PD9waHANCi8qKg0KICog5LqL5Lu255u45YWz5Ye95pWwDQogKiBAcGFja2FnZSBaLUJsb2dQSFANCiAqIEBzdWJwYWNrYWdlIFN5c3RlbVxFdmVudCDmk43kvZzkuovku7YNCiAqIEBjb3B5cmlnaHQgKEMpIFJhaW5ib3dTb2Z0IFN0dWRpbw0KICovDQoNCiMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMNCi8qKg0KICog6aqM6K+B55m75b2VDQogKiBAcmV0dXJuIGJvb2wNCiAqLw0KZnVuY3Rpb24gVmVyaWZ5TG9naW4oKSB7DQogICAgZ2xvYmFsICR6YnA7DQogICAgJG0gPSBudWxsOw0KICAgICR1ID0gdHJpbShHZXRWYXJzKCd1c2VybmFtZScsICdQT1NUJykpOw0KICAgICRwID0gdHJpbShHZXRWYXJzKCdwYXNzd29yZCcsICdQT1NUJykpOw0KICAgIGlmICgkemJwLT5WZXJpZnlfTUQ1KEdldFZhcnMoJ3VzZXJuYW1lJywgJ1BPU1QnKSwgR2V0VmFycygncGFzc3dvcmQnLCAnUE9TVCcpLCAkbSkpIHsNCiAgICAgICAgJHpicC0+dXNlciA9ICRtOw0KICAgICAgICAkdW4gPSAkbS0+TmFtZTsNCiAgICAgICAgJHBzID0gJG0tPlBhc3NXb3JkX01ENVBhdGg7DQogICAgICAgICRzZCA9IChpbnQpIEdldFZhcnMoJ3NhdmVkYXRlJyk7DQogICAgICAgICRhZGRpbmZvID0gYXJyYXkoKTsNCiAgICAgICAgJGFkZGluZm9bJ2Rpc2h0bWw1J10gPSAoaW50KSBHZXRWYXJzKCdkaXNodG1sNScsICdQT1NUJyk7DQogICAgICAgICRhZGRpbmZvWydjaGthZG1pbiddID0gKGludCkgJHpicC0+Q2hlY2tSaWdodHMoJ2FkbWluJyk7DQogICAgICAgICRhZGRpbmZvWydjaGthcnRpY2xlJ10gPSAoaW50KSAkemJwLT5DaGVja1JpZ2h0cygnQXJ0aWNsZUVkdCcpOw0KICAgICAgICAkYWRkaW5mb1snbGV2ZWxuYW1lJ10gPSAkbS0+TGV2ZWxOYW1lOw0KICAgICAgICAkYWRkaW5mb1sndXNlcmlkJ10gPSAkbS0+SUQ7DQogICAgICAgICRhZGRpbmZvWyd1c2VyYWxpYXMnXSA9ICRtLT5TdGF0aWNOYW1lOw0KDQogICAgICAgIGlmICgkc2QgPT0gMCkNCiAgICAgICAgICAgICRzZHQgPSAwOw0KICAgICAgICBlbHNlDQogICAgICAgICAgICAkc2R0ID0gdGltZSgpICsgMzYwMCAqIDI0ICogJHNkOw0KDQogICAgICAgIGlmKEhUVFBfU0NIRU1FID09ICdodHRwczovLycpew0KICAgICAgICAgICAgc2V0Y29va2llKCJ1c2VybmFtZSIsICR1biwgJHNkdCwgJHpicC0+Y29va2llc3BhdGgsICcnLCB0cnVlLCBmYWxzZSk7DQogICAgICAgICAgICBzZXRjb29raWUoInBhc3N3b3JkIiwgJHBzLCAkc2R0LCAkemJwLT5jb29raWVzcGF0aCwgJycsIHRydWUsIHRydWUpOw0KICAgICAgICAgICAgc2V0Y29va2llKCJhZGRpbmZvIiAuIHN0cl9yZXBsYWNlKCcvJywgJycsICR6YnAtPmNvb2tpZXNwYXRoKSwganNvbl9lbmNvZGUoJGFkZGluZm8pLCAkc2R0LCAkemJwLT5jb29raWVzcGF0aCwgJycsIHRydWUsIGZhbHNlKTsNCg0KICAgICAgICB9ZWxzZXsNCiAgICAgICAgICAgIHNldGNvb2tpZSgidXNlcm5hbWUiLCAkdW4sICRzZHQsICR6YnAtPmNvb2tpZXNwYXRoKTsNCiAgICAgICAgICAgIHNldGNvb2tpZSgicGFzc3dvcmQiLCAkcHMsICRzZHQsICR6YnAtPmNvb2tpZXNwYXRoKTsNCiAgICAgICAgICAgIHNldGNvb2tpZSgiYWRkaW5mbyIgLiBzdHJfcmVwbGFjZSgnLycsICcnLCAkemJwLT5jb29raWVzcGF0aCksIGpzb25fZW5jb2RlKCRhZGRpbmZvKSwgJHNkdCwgJHpicC0+Y29va2llc3BhdGgpOw0KICAgICAgICB9DQoNCiAgICAgICAgcmV0dXJuIHRydWU7DQogICAgfSBlbHNlIHsNCiAgICAgICAgJHpicC0+U2hvd0Vycm9yKDgsIF9fRklMRV9fLCBfX0xJTkVfXyk7DQogICAgfQ0KfQ0KDQovKioNCiAqIOazqOmUgOeZu+W9lQ0KICovDQpmdW5jdGlvbiBMb2dvdXQoKSB7DQogICAgZ2xvYmFsICR6YnA7DQoNCiAgICBzZXRjb29raWUoJ3VzZXJuYW1lJywgJycsIHRpbWUoKSAtIDM2MDAsICR6YnAtPmNvb2tpZXNwYXRoKTsNCiAgICBzZXRjb29raWUoJ3Bhc3N3b3JkJywgJycsIHRpbWUoKSAtIDM2MDAsICR6YnAtPmNvb2tpZXNwYXRoKTsNCiAgICBzZXRjb29raWUoImFkZGluZm8iIC4gc3RyX3JlcGxhY2UoJy8nLCAnJywgJHpicC0+Y29va2llc3BhdGgpLCAnJywgdGltZSgpIC0gMzYwMCwgJHpicC0+Y29va2llc3BhdGgpOw0KDQp9DQoNCiMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMNCi8qKg0KICog6I635Y+W5paH56ugDQogKiBAcGFyYW0gbWl4ZWQgJGlkb3JuYW1lIOaWh+eroGlkIOaIliDlkI3np7DjgIHliKvlkI0NCiAqIEBwYXJhbSBhcnJheSAkb3B0aW9ufG51bGwNCiAqIEByZXR1cm4gUG9zdA0KICovDQpmdW5jdGlvbiBHZXRQb3N0KCRpZG9ybmFtZSwgJG9wdGlvbiA9IG51bGwpIHsNCiAgICBnbG9iYWwgJHpicDsNCiAgICAkcG9zdCA9IG51bGw7DQoNCiAgICBpZiAoIWlzX2FycmF5KCRvcHRpb24pKSB7DQogICAgICAgICRvcHRpb24gPSBhcnJheSgpOw0KICAgIH0NCg0KICAgIGlmICghaXNzZXQoJG9wdGlvblsnb25seV9hcnRpY2xlJ10pKSB7DQogICAgICAgICRvcHRpb25bJ29ubHlfYXJ0aWNsZSddID0gZmFsc2U7DQogICAgfQ0KDQogICAgaWYgKCFpc3NldCgkb3B0aW9uWydvbmx5X3BhZ2UnXSkpIHsNCiAgICAgICAgJG9wdGlvblsnb25seV9wYWdlJ10gPSBmYWxzZTsNCiAgICB9DQoNCiAgICBpZiAoaXNfc3RyaW5nKCRpZG9ybmFtZSkpIHsNCiAgICAgICAgJHdbXSA9IGFycmF5KCdhcnJheScsIGFycmF5KGFycmF5KCdsb2dfQWxpYXMnLCAkaWRvcm5hbWUpLCBhcnJheSgnbG9nX1RpdGxlJywgJGlkb3JuYW1lKSkpOw0KICAgICAgICBpZiAoJG9wdGlvblsnb25seV9hcnRpY2xlJ10gPT0gdHJ1ZSkgew0KICAgICAgICAgICAgJHdbXSA9IGFycmF5KCc9JywgJ2xvZ19UeXBlJywgJzAnKTsNCiAgICAgICAgfSBlbHNlaWYgKCRvcHRpb25bJ29ubHlfcGFnZSddID09IHRydWUpIHsNCiAgICAgICAgICAgICR3W10gPSBhcnJheSgnPScsICdsb2dfVHlwZScsICcxJyk7DQogICAgICAgIH0NCiAgICAgICAgJGFydGljbGVzID0gJHpicC0+R2V0UG9zdExpc3QoJyonLCAkdywgbnVsbCwgMSwgbnVsbCk7DQogICAgICAgIGlmIChjb3VudCgkYXJ0aWNsZXMpID09IDApIHsNCiAgICAgICAgICAgICRwb3N0ID0gbmV3IFBvc3Q7DQogICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICAkcG9zdCA9ICRhcnRpY2xlc1swXTsNCiAgICAgICAgfQ0KDQogICAgfSBlbHNlaWYgKGlzX2ludGVnZXIoJGlkb3JuYW1lKSkgew0KICAgICAgICAkcG9zdCA9ICR6YnAtPkdldFBvc3RCeUlEKCRpZG9ybmFtZSk7DQogICAgfQ0KDQogICAgZm9yZWFjaCAoJEdMT0JBTFNbJ2hvb2tzJ11bJ0ZpbHRlcl9QbHVnaW5fR2V0UG9zdF9SZXN1bHQnXSBhcyAkZnBuYW1lID0+ICYkZnBzaWduYWwpIHsNCiAgICAgICAgJGZwcmV0dXJuID0gJGZwbmFtZSgkcG9zdCk7DQogICAgfQ0KDQogICAgcmV0dXJuICRwb3N0Ow0KfQ0KDQovKioNCiAqIOiOt+WPluaWh+eroOWIl+ihqA0KICogQHBhcmFtIGludCAkY291bnQg5pWw6YePDQogKiBAcGFyYW0gbnVsbCAkY2F0ZSDliIbnsbtJRA0KICogQHBhcmFtIG51bGwgJGF1dGgg55So5oi3SUQNCiAqIEBwYXJhbSBudWxsICRkYXRlIOaXpeacnw0KICogQHBhcmFtIG51bGwgJHRhZ3Mg5qCH562+DQogKiBAcGFyYW0gbnVsbCAkc2VhcmNoIOaQnOe0ouWFs+mUruivjQ0KICogQHBhcmFtIG51bGwgJG9wdGlvbg0KICogQHJldHVybiBhcnJheXxtaXhlZA0KICovDQpmdW5jdGlvbiBHZXRMaXN0KCRjb3VudCA9IDEwLCAkY2F0ZSA9IG51bGwsICRhdXRoID0gbnVsbCwgJGRhdGUgPSBudWxsLCAkdGFncyA9IG51bGwsICRzZWFyY2ggPSBudWxsLCAkb3B0aW9uID0gbnVsbCkgew0KICAgIGdsb2JhbCAkemJwOw0KICAgICRsaXN0ID0gYXJyYXkoKTsNCg0KICAgIGlmICghaXNfYXJyYXkoJG9wdGlvbikpIHsNCiAgICAgICAgJG9wdGlvbiA9IGFycmF5KCk7DQogICAgfQ0KDQogICAgaWYgKCFpc3NldCgkb3B0aW9uWydvbmx5X29udG9wJ10pKSB7DQogICAgICAgICRvcHRpb25bJ29ubHlfb250b3AnXSA9IGZhbHNlOw0KICAgIH0NCg0KICAgIGlmICghaXNzZXQoJG9wdGlvblsnb25seV9ub3Rfb250b3AnXSkpIHsNCiAgICAgICAgJG9wdGlvblsnb25seV9ub3Rfb250b3AnXSA9IGZhbHNlOw0KICAgIH0NCg0KICAgIGlmICghaXNzZXQoJG9wdGlvblsnaGFzX3N1YmNhdGUnXSkpIHsNCiAgICAgICAgJG9wdGlvblsnaGFzX3N1YmNhdGUnXSA9IGZhbHNlOw0KICAgIH0NCg0KICAgIGlmICghaXNzZXQoJG9wdGlvblsnaXNfcmVsYXRlZCddKSkgew0KICAgICAgICAkb3B0aW9uWydpc19yZWxhdGVkJ10gPSBmYWxzZTsNCiAgICB9DQoNCiAgICBpZiAoJG9wdGlvblsnaXNfcmVsYXRlZCddKSB7DQogICAgICAgICRhdCA9ICR6YnAtPkdldFBvc3RCeUlEKCRvcHRpb25bJ2lzX3JlbGF0ZWQnXSk7DQogICAgICAgICR0YWdzID0gJGF0LT5UYWdzOw0KICAgICAgICBpZiAoISR0YWdzKSB7DQogICAgICAgICAgICByZXR1cm4gYXJyYXkoKTsNCiAgICAgICAgfQ0KDQogICAgICAgICRjb3VudCA9ICRjb3VudCArIDE7DQogICAgfQ0KDQogICAgJHcgPSBhcnJheSgpOw0KDQogICAgaWYgKCRvcHRpb25bJ29ubHlfb250b3AnXSA9PSB0cnVlKSB7DQogICAgICAgICR3W10gPSBhcnJheSgnPScsICdsb2dfSXNUb3AnLCAxKTsNCiAgICB9IGVsc2VpZiAoJG9wdGlvblsnb25seV9ub3Rfb250b3AnXSA9PSB0cnVlKSB7DQogICAgICAgICR3W10gPSBhcnJheSgnPScsICdsb2dfSXNUb3AnLCAwKTsNCiAgICB9DQoNCiAgICAkd1tdID0gYXJyYXkoJz0nLCAnbG9nX1N0YXR1cycsIDApOw0KDQogICAgaWYgKCFpc19udWxsKCRjYXRlKSkgew0KICAgICAgICAkY2F0ZWdvcnkgPSBuZXcgQ2F0ZWdvcnk7DQogICAgICAgICRjYXRlZ29yeSA9ICR6YnAtPkdldENhdGVnb3J5QnlJRCgkY2F0ZSk7DQoNCiAgICAgICAgaWYgKCRjYXRlZ29yeS0+SUQgPiAwKSB7DQoNCiAgICAgICAgICAgIGlmICghJG9wdGlvblsnaGFzX3N1YmNhdGUnXSkgew0KICAgICAgICAgICAgICAgICR3W10gPSBhcnJheSgnPScsICdsb2dfQ2F0ZUlEJywgJGNhdGVnb3J5LT5JRCk7DQogICAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgICAgICRhcnlzdWJjYXRlID0gYXJyYXkoKTsNCiAgICAgICAgICAgICAgICAkYXJ5c3ViY2F0ZVtdID0gYXJyYXkoJ2xvZ19DYXRlSUQnLCAkY2F0ZWdvcnktPklEKTsNCiAgICAgICAgICAgICAgICBmb3JlYWNoICgkemJwLT5jYXRlZ29yaWVzWyRjYXRlZ29yeS0+SURdLT5DaGlsZHJlbkNhdGVnb3JpZXMgYXMgJHN1YmNhdGUpIHsNCiAgICAgICAgICAgICAgICAgICAgJGFyeXN1YmNhdGVbXSA9IGFycmF5KCdsb2dfQ2F0ZUlEJywgJHN1YmNhdGUtPklEKTsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgJHdbXSA9IGFycmF5KCdhcnJheScsICRhcnlzdWJjYXRlKTsNCg0KICAgICAgICAgICAgfQ0KDQogICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICByZXR1cm4gYXJyYXkoKTsNCiAgICAgICAgfQ0KICAgIH0NCg0KICAgIGlmICghaXNfbnVsbCgkYXV0aCkpIHsNCiAgICAgICAgJGF1dGhvciA9IG5ldyBNZW1iZXI7DQogICAgICAgICRhdXRob3IgPSAkemJwLT5HZXRNZW1iZXJCeUlEKCRhdXRoKTsNCg0KICAgICAgICBpZiAoJGF1dGhvci0+SUQgPiAwKSB7DQogICAgICAgICAgICAkd1tdID0gYXJyYXkoJz0nLCAnbG9nX0F1dGhvcklEJywgJGF1dGhvci0+SUQpOw0KICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgcmV0dXJuIGFycmF5KCk7DQogICAgICAgIH0NCiAgICB9DQoNCiAgICBpZiAoIWlzX251bGwoJGRhdGUpKSB7DQogICAgICAgICRkYXRldGltZSA9IHN0cnRvdGltZSgkZGF0ZSk7DQogICAgICAgIGlmICgkZGF0ZXRpbWUpIHsNCiAgICAgICAgICAgICRkYXRldGl0bGUgPSBzdHJfcmVwbGFjZShhcnJheSgnJXklJywgJyVtJScpLCBhcnJheShkYXRlKCdZJywgJGRhdGV0aW1lKSwgZGF0ZSgnbicsICRkYXRldGltZSkpLCAkemJwLT5sYW5nWydtc2cnXVsneWVhcl9tb250aCddKTsNCiAgICAgICAgICAgICR3W10gPSBhcnJheSgnQkVUV0VFTicsICdsb2dfUG9zdFRpbWUnLCAkZGF0ZXRpbWUsIHN0cnRvdGltZSgnKzEgbW9udGgnLCAkZGF0ZXRpbWUpKTsNCiAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgIHJldHVybiBhcnJheSgpOw0KICAgICAgICB9DQogICAgfQ0KDQogICAgaWYgKCFpc19udWxsKCR0YWdzKSkgew0KICAgICAgICAkdGFnID0gbmV3IFRhZzsNCiAgICAgICAgaWYgKGlzX2FycmF5KCR0YWdzKSkgew0KICAgICAgICAgICAgJHRhID0gYXJyYXkoKTsNCiAgICAgICAgICAgIGZvcmVhY2ggKCR0YWdzIGFzICR0KSB7DQogICAgICAgICAgICAgICAgJHRhW10gPSBhcnJheSgnbG9nX1RhZycsICcleycgLiAkdC0+SUQgLiAnfSUnKTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgICR3W10gPSBhcnJheSgnYXJyYXlfbGlrZScsICR0YSk7DQogICAgICAgICAgICB1bnNldCgkdGEpOw0KICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgaWYgKGlzX2ludCgkdGFncykpIHsNCiAgICAgICAgICAgICAgICAkdGFnID0gJHpicC0+R2V0VGFnQnlJRCgkdGFncyk7DQogICAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgICAgICR0YWcgPSAkemJwLT5HZXRUYWdCeUFsaWFzT3JOYW1lKCR0YWdzKTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIGlmICgkdGFnLT5JRCA+IDApIHsNCiAgICAgICAgICAgICAgICAkd1tdID0gYXJyYXkoJ0xJS0UnLCAnbG9nX1RhZycsICcleycgLiAkdGFnLT5JRCAuICd9JScpOw0KICAgICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgICAgICByZXR1cm4gYXJyYXkoKTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgfQ0KICAgIH0NCg0KICAgIGlmIChpc19zdHJpbmcoJHNlYXJjaCkpIHsNCiAgICAgICAgJHNlYXJjaCA9IHRyaW0oJHNlYXJjaCk7DQogICAgICAgIGlmICgkc2VhcmNoICE9PSAnJykgew0KICAgICAgICAgICAgJHdbXSA9IGFycmF5KCdzZWFyY2gnLCAnbG9nX0NvbnRlbnQnLCAnbG9nX0ludHJvJywgJ2xvZ19UaXRsZScsICRzZWFyY2gpOw0KICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgcmV0dXJuIGFycmF5KCk7DQogICAgICAgIH0NCiAgICB9DQoNCiAgICAkc2VsZWN0ID0gJyonOw0KICAgICRvcmRlciA9IGFycmF5KCdsb2dfUG9zdFRpbWUnID0+ICdERVNDJyk7DQoNCiAgICBmb3JlYWNoICgkR0xPQkFMU1snaG9va3MnXVsnRmlsdGVyX1BsdWdpbl9MYXJnZURhdGFfR2V0TGlzdCddIGFzICRmcG5hbWUgPT4gJiRmcHNpZ25hbCkgew0KICAgICAgICAkZnByZXR1cm4gPSAkZnBuYW1lKCRzZWxlY3QsICR3LCAkb3JkZXIsICRjb3VudCwgJG9wdGlvbik7DQogICAgfQ0KDQogICAgJGxpc3QgPSAkemJwLT5HZXRBcnRpY2xlTGlzdCgkc2VsZWN0LCAkdywgJG9yZGVyLCAkY291bnQsIG51bGwsIGZhbHNlKTsNCg0KICAgIGlmICgkb3B0aW9uWydpc19yZWxhdGVkJ10pIHsNCiAgICAgICAgZm9yZWFjaCAoJGxpc3QgYXMgJGsgPT4gJGEpIHsNCiAgICAgICAgICAgIGlmICgkYS0+SUQgPT0gJG9wdGlvblsnaXNfcmVsYXRlZCddKSB7DQogICAgICAgICAgICAgICAgdW5zZXQoJGxpc3RbJGtdKTsNCiAgICAgICAgICAgIH0NCg0KICAgICAgICB9DQogICAgICAgIGlmIChjb3VudCgkbGlzdCkgPT0gJGNvdW50KSB7DQogICAgICAgICAgICBhcnJheV9wb3AoJGxpc3QpOw0KICAgICAgICB9DQogICAgfQ0KDQogICAgZm9yZWFjaCAoJEdMT0JBTFNbJ2hvb2tzJ11bJ0ZpbHRlcl9QbHVnaW5fR2V0TGlzdF9SZXN1bHQnXSBhcyAkZnBuYW1lID0+ICYkZnBzaWduYWwpIHsNCiAgICAgICAgJGZwcmV0dXJuID0gJGZwbmFtZSgkbGlzdCk7DQogICAgfQ0KDQogICAgcmV0dXJuICRsaXN0Ow0KDQp9DQoNCiMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMNCi8qKg0KICogVmlld0luZGV4LOmmlumhte+8jOaQnOe0oumhte+8jGZlZWTpobXnmoTkuLvlh73mlbANCiAqIEBhcGkgRmlsdGVyX1BsdWdpbl9WaWV3SW5kZXhfQmVnaW4NCiAqIEByZXR1cm4gbWl4ZWQNCiAqLw0KZnVuY3Rpb24gVmlld0luZGV4KCkgew0KICAgIGdsb2JhbCAkemJwLCAkYWN0aW9uOw0KDQogICAgZm9yZWFjaCAoJEdMT0JBTFNbJ2hvb2tzJ11bJ0ZpbHRlcl9QbHVnaW5fVmlld0luZGV4X0JlZ2luJ10gYXMgJGZwbmFtZSA9PiAmJGZwc2lnbmFsKSB7DQogICAgICAgICRmcHJldHVybiA9ICRmcG5hbWUoKTsNCiAgICAgICAgaWYgKCRmcHNpZ25hbCA9PSBQTFVHSU5fRVhJVFNJR05BTF9SRVRVUk4pIHsNCiAgICAgICAgICAgICRmcHNpZ25hbCA9IFBMVUdJTl9FWElUU0lHTkFMX05PTkU7DQoNCiAgICAgICAgICAgIHJldHVybiAkZnByZXR1cm47DQogICAgICAgIH0NCiAgICB9DQoNCiAgICBpZiAoJHpicC0+dGVtcGxhdGUtPmhhc1RlbXBsYXRlKCc0MDQnKSkgew0KICAgICAgICAgQWRkX0ZpbHRlcl9QbHVnaW4oJ0ZpbHRlcl9QbHVnaW5fWmJwX1Nob3dFcnJvcicsICdJbmNsdWRlX1Nob3dFcnJvcjQwNCcpOw0KICAgIH0NCg0KICAgIHN3aXRjaCAoJGFjdGlvbikgew0KICAgIGNhc2UgJ2ZlZWQnOg0KICAgICAgICBWaWV3RmVlZCgpOw0KICAgICAgICBicmVhazsNCiAgICBjYXNlICdzZWFyY2gnOg0KICAgICAgICBWaWV3U2VhcmNoKCk7DQogICAgICAgIGJyZWFrOw0KICAgIGNhc2UgJyc6DQogICAgZGVmYXVsdDoNCiAgICAgICAgaWYgKCR6YnAtPmN1cnJlbnR1cmwgPT0gJHpicC0+Y29va2llc3BhdGggfHwNCiAgICAgICAgICAgICR6YnAtPmN1cnJlbnR1cmwgPT0gJHpicC0+Y29va2llc3BhdGggLiAnaW5kZXgucGhwJykgew0KICAgICAgICAgICAgVmlld0xpc3QobnVsbCwgbnVsbCwgbnVsbCwgbnVsbCwgbnVsbCk7DQogICAgICAgIH0gZWxzZWlmICgoJHpicC0+b3B0aW9uWydaQ19TVEFUSUNfTU9ERSddID09ICdBQ1RJVkUnIHx8IGlzc2V0KCRfR0VUWydyZXdyaXRlJ10pKSAmJg0KICAgICAgICAgICAgKGlzc2V0KCRfR0VUWydpZCddKSB8fCBpc3NldCgkX0dFVFsnYWxpYXMnXSkpKSB7DQogICAgICAgICAgICBWaWV3UG9zdChHZXRWYXJzKCdpZCcsICdHRVQnKSwgR2V0VmFycygnYWxpYXMnLCAnR0VUJykpOw0KICAgICAgICB9IGVsc2VpZiAoKCR6YnAtPm9wdGlvblsnWkNfU1RBVElDX01PREUnXSA9PSAnQUNUSVZFJyB8fCBpc3NldCgkX0dFVFsncmV3cml0ZSddKSkgJiYNCiAgICAgICAgICAgIChpc3NldCgkX0dFVFsncGFnZSddKSB8fCBpc3NldCgkX0dFVFsnY2F0ZSddKSB8fCBpc3NldCgkX0dFVFsnYXV0aCddKSB8fCBpc3NldCgkX0dFVFsnZGF0ZSddKSB8fCBpc3NldCgkX0dFVFsndGFncyddKSkpIHsNCiAgICAgICAgICAgIFZpZXdMaXN0KEdldFZhcnMoJ3BhZ2UnLCAnR0VUJyksIEdldFZhcnMoJ2NhdGUnLCAnR0VUJyksIEdldFZhcnMoJ2F1dGgnLCAnR0VUJyksIEdldFZhcnMoJ2RhdGUnLCAnR0VUJyksIEdldFZhcnMoJ3RhZ3MnLCAnR0VUJykpOw0KICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgVmlld0F1dG8oJHpicC0+Y3VycmVudHVybCk7DQogICAgICAgIH0NCiAgICB9DQp9DQoNCi8qKg0KICog5pi+56S6UlNTMkZlZWQNCiAqIEBhcGkgRmlsdGVyX1BsdWdpbl9WaWV3RmVlZF9CZWdpbg0KICogQHJldHVybiBtaXhlZA0KICovDQpmdW5jdGlvbiBWaWV3RmVlZCgpIHsNCiAgICBnbG9iYWwgJHpicDsNCg0KICAgIGZvcmVhY2ggKCRHTE9CQUxTWydob29rcyddWydGaWx0ZXJfUGx1Z2luX1ZpZXdGZWVkX0JlZ2luJ10gYXMgJGZwbmFtZSA9PiAmJGZwc2lnbmFsKSB7DQogICAgICAgICRmcHJldHVybiA9ICRmcG5hbWUoKTsNCiAgICAgICAgaWYgKCRmcHNpZ25hbCA9PSBQTFVHSU5fRVhJVFNJR05BTF9SRVRVUk4pIHsNCiAgICAgICAgICAgICRmcHNpZ25hbCA9IFBMVUdJTl9FWElUU0lHTkFMX05PTkU7DQoNCiAgICAgICAgICAgIHJldHVybiAkZnByZXR1cm47DQogICAgICAgIH0NCiAgICB9DQoNCiAgICBpZiAoISR6YnAtPkNoZWNrUmlnaHRzKCRHTE9CQUxTWydhY3Rpb24nXSkpIHtIdHRwNDA0KCk7ZGllO30NCg0KICAgICRyc3MyID0gbmV3IFJzczIoJHpicC0+bmFtZSwgJHpicC0+aG9zdCwgJHpicC0+c3VibmFtZSk7DQoNCiAgICAkdyA9IGFycmF5KGFycmF5KCc9JywgJ2xvZ19TdGF0dXMnLCAwKSk7DQoNCiAgICBmb3JlYWNoICgkR0xPQkFMU1snaG9va3MnXVsnRmlsdGVyX1BsdWdpbl9WaWV3RmVlZF9Db3JlJ10gYXMgJGZwbmFtZSA9PiAmJGZwc2lnbmFsKSB7DQogICAgICAgICRmcG5hbWUoJHcpOw0KICAgIH0NCg0KICAgICRhcnRpY2xlcyA9ICR6YnAtPkdldEFydGljbGVMaXN0KA0KICAgICAgICAnKicsDQogICAgICAgICR3LA0KICAgICAgICBhcnJheSgnbG9nX1Bvc3RUaW1lJyA9PiAnREVTQycpLA0KICAgICAgICAkemJwLT5vcHRpb25bJ1pDX1JTUzJfQ09VTlQnXSwNCiAgICAgICAgbnVsbA0KICAgICk7DQoNCiAgICBmb3JlYWNoICgkYXJ0aWNsZXMgYXMgJGFydGljbGUpIHsNCiAgICAgICAgJHJzczItPmFkZEl0ZW0oJGFydGljbGUtPlRpdGxlLCAkYXJ0aWNsZS0+VXJsLCAoJHpicC0+b3B0aW9uWydaQ19SU1NfRVhQT1JUX1dIT0xFJ10gPT0gdHJ1ZSA/ICRhcnRpY2xlLT5Db250ZW50IDogJGFydGljbGUtPkludHJvKSwgJGFydGljbGUtPlBvc3RUaW1lKTsNCiAgICB9DQoNCiAgICBoZWFkZXIoIkNvbnRlbnQtdHlwZTp0ZXh0L3htbDsgQ2hhcnNldD11dGYtOCIpOw0KDQogICAgZWNobyAkcnNzMi0+c2F2ZVhNTCgpOw0KDQp9DQoNCi8qKg0KICog5bGV56S65pCc57Si57uT5p6cDQogKiBAYXBpIEZpbHRlcl9QbHVnaW5fVmlld1NlYXJjaF9CZWdpbg0KICogQGFwaSBGaWx0ZXJfUGx1Z2luX1ZpZXdQb3N0X1RlbXBsYXRlDQogKiBAcmV0dXJuIG1peGVkDQogKi8NCmZ1bmN0aW9uIFZpZXdTZWFyY2goKSB7DQogICAgZ2xvYmFsICR6YnA7DQoNCiAgICBmb3JlYWNoICgkR0xPQkFMU1snaG9va3MnXVsnRmlsdGVyX1BsdWdpbl9WaWV3U2VhcmNoX0JlZ2luJ10gYXMgJGZwbmFtZSA9PiAmJGZwc2lnbmFsKSB7DQogICAgICAgICRmcHJldHVybiA9ICRmcG5hbWUoKTsNCiAgICAgICAgaWYgKCRmcHNpZ25hbCA9PSBQTFVHSU5fRVhJVFNJR05BTF9SRVRVUk4pIHsNCiAgICAgICAgICAgICRmcHNpZ25hbCA9IFBMVUdJTl9FWElUU0lHTkFMX05PTkU7DQoNCiAgICAgICAgICAgIHJldHVybiAkZnByZXR1cm47DQogICAgICAgIH0NCiAgICB9DQoNCiAgICBpZiAoISR6YnAtPkNoZWNrUmlnaHRzKCRHTE9CQUxTWydhY3Rpb24nXSkpIHtSZWRpcmVjdCgnLi8nKTt9DQoNCiAgICAkcSA9IHRyaW0oaHRtbHNwZWNpYWxjaGFycyhHZXRWYXJzKCdxJywgJ0dFVCcpKSk7DQogICAgJHBhZ2UgPSBHZXRWYXJzKCdwYWdlJywgJ0dFVCcpOw0KICAgICRwYWdlID0gKGludCkgJHBhZ2UgPT0gMCA/IDEgOiAoaW50KSAkcGFnZTsNCg0KICAgICRhcnRpY2xlID0gbmV3IFBvc3Q7DQogICAgJGFydGljbGUtPklEID0gMDsNCiAgICAkYXJ0aWNsZS0+VGl0bGUgPSAkemJwLT5sYW5nWydtc2cnXVsnc2VhcmNoJ10gLiAnICZxdW90OycgLiAkcSAuICcmcXVvdDsnOw0KICAgICRhcnRpY2xlLT5Jc0xvY2sgPSB0cnVlOw0KICAgICRhcnRpY2xlLT5UeXBlID0gWkNfUE9TVF9UWVBFX1BBR0U7DQoNCiAgICBpZiAoJHpicC0+dGVtcGxhdGUtPmhhc1RlbXBsYXRlKCdzZWFyY2gnKSkgew0KICAgICAgICAkYXJ0aWNsZS0+VGVtcGxhdGUgPSAnc2VhcmNoJzsNCiAgICB9DQoNCiAgICAkdyA9IGFycmF5KCk7DQogICAgJHdbXSA9IGFycmF5KCc9JywgJ2xvZ19UeXBlJywgJzAnKTsNCiAgICBpZiAoJHEpIHsNCiAgICAgICAgJHdbXSA9IGFycmF5KCdzZWFyY2gnLCAnbG9nX0NvbnRlbnQnLCAnbG9nX0ludHJvJywgJ2xvZ19UaXRsZScsICRxKTsNCiAgICB9IGVsc2Ugew0KICAgICAgICBSZWRpcmVjdCgnLi8nKTsNCiAgICB9DQoNCiAgICBpZiAoISgkemJwLT5DaGVja1JpZ2h0cygnQXJ0aWNsZUFsbCcpICYmICR6YnAtPkNoZWNrUmlnaHRzKCdQYWdlQWxsJykpKSB7DQogICAgICAgICR3W10gPSBhcnJheSgnPScsICdsb2dfU3RhdHVzJywgMCk7DQogICAgfQ0KDQogICAgJHBhZ2ViYXIgPSBuZXcgUGFnZWJhcigkemJwLT5vcHRpb25bJ1pDX1NFQVJDSF9SRUdFWCddLCB0cnVlKTsNCiAgICAkcGFnZWJhci0+UGFnZUNvdW50ID0gJHpicC0+c2VhcmNoY291bnQ7DQogICAgJHBhZ2ViYXItPlBhZ2VOb3cgPSAkcGFnZTsNCiAgICAkcGFnZWJhci0+UGFnZUJhckNvdW50ID0gJHpicC0+cGFnZWJhcmNvdW50Ow0KICAgICRwYWdlYmFyLT5VcmxSdWxlLT5SdWxlc1sneyVwYWdlJX0nXSA9ICRwYWdlOw0KICAgICRwYWdlYmFyLT5VcmxSdWxlLT5SdWxlc1sneyVxJX0nXSA9IHJhd3VybGVuY29kZSgkcSk7DQoNCiAgICBmb3JlYWNoICgkR0xPQkFMU1snaG9va3MnXVsnRmlsdGVyX1BsdWdpbl9WaWV3U2VhcmNoX0NvcmUnXSBhcyAkZnBuYW1lID0+ICYkZnBzaWduYWwpIHsNCiAgICAgICAgJGZwbmFtZSgkcSwgJHBhZ2UsICR3LCAkcGFnZWJhcik7DQogICAgfQ0KDQogICAgJGFycmF5ID0gJHpicC0+R2V0QXJ0aWNsZUxpc3QoDQogICAgICAgICcnLA0KICAgICAgICAkdywNCiAgICAgICAgYXJyYXkoJ2xvZ19Qb3N0VGltZScgPT4gJ0RFU0MnKSwNCiAgICAgICAgYXJyYXkoKCRwYWdlYmFyLT5QYWdlTm93IC0gMSkgKiAkcGFnZWJhci0+UGFnZUNvdW50LCAkcGFnZWJhci0+UGFnZUNvdW50KSwNCiAgICAgICAgYXJyYXkoJ3BhZ2ViYXInID0+ICRwYWdlYmFyKSwNCiAgICAgICAgZmFsc2UNCiAgICApOw0KDQogICAgZm9yZWFjaCAoJGFycmF5IGFzICRhKSB7DQogICAgICAgICRhcnRpY2xlLT5Db250ZW50IC49ICc8cD48YSBocmVmPSInIC4gJGEtPlVybCAuICciPicgLiBzdHJfcmVwbGFjZSgkcSwgJzxzdHJvbmc+JyAuICRxIC4gJzwvc3Ryb25nPicsICRhLT5UaXRsZSkgLiAnPC9hPjxici8+JzsNCiAgICAgICAgJHMgPSBzdHJpcF90YWdzKCRhLT5JbnRybykgLiAnJyAuIHN0cmlwX3RhZ3MoJGEtPkNvbnRlbnQpOw0KICAgICAgICAkaSA9IHN0cnBvcygkcywgJHEsIDApOw0KICAgICAgICBpZiAoJGkgIT09IGZhbHNlKSB7DQogICAgICAgICAgICBpZiAoJGkgPiA1MCkgew0KICAgICAgICAgICAgICAgICR0ID0gU3ViU3RyVVRGOF9TdGFydCgkcywgJGkgLSA1MCwgMTAwKTsNCiAgICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICAgICAgJHQgPSBTdWJTdHJVVEY4X1N0YXJ0KCRzLCAwLCAxMDApOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgJGFydGljbGUtPkNvbnRlbnQgLj0gc3RyX3JlcGxhY2UoJHEsICc8c3Ryb25nPicgLiAkcSAuICc8L3N0cm9uZz4nLCAkdCkgLiAnPGJyLz4nOw0KICAgICAgICB9DQogICAgICAgICRhcnRpY2xlLT5Db250ZW50IC49ICc8YSBocmVmPSInIC4gJGEtPlVybCAuICciPicgLiAkYS0+VXJsIC4gJzwvYT48YnIvPjwvcD4nOw0KICAgIH0NCg0KICAgICR6YnAtPmhlYWRlciAuPSAnPG1ldGEgbmFtZT0icm9ib3RzIiBjb250ZW50PSJub2luZGV4LGZvbGxvdyIgLz4nIC4gIlxyXG4iOw0KICAgICR6YnAtPnRlbXBsYXRlLT5TZXRUYWdzKCd0aXRsZScsICRhcnRpY2xlLT5UaXRsZSk7DQogICAgJHpicC0+dGVtcGxhdGUtPlNldFRhZ3MoJ2FydGljbGUnLCAkYXJ0aWNsZSk7DQogICAgJHpicC0+dGVtcGxhdGUtPlNldFRhZ3MoJ3NlYXJjaCcsICRxKTsNCiAgICAkemJwLT50ZW1wbGF0ZS0+U2V0VGFncygnYXJ0aWNsZXMnLCAkYXJyYXkpOw0KICAgICR6YnAtPnRlbXBsYXRlLT5TZXRUYWdzKCd0eXBlJywgJGFydGljbGUtPlR5cGVOYW1lKTsNCiAgICAkemJwLT50ZW1wbGF0ZS0+U2V0VGFncygncGFnZScsICRwYWdlKTsNCiAgICAkemJwLT50ZW1wbGF0ZS0+U2V0VGFncygncGFnZWJhcicsICRwYWdlYmFyKTsNCiAgICAkemJwLT50ZW1wbGF0ZS0+U2V0VGFncygnY29tbWVudHMnLCBhcnJheSgpKTsNCiAgICAkemJwLT50ZW1wbGF0ZS0+U2V0VGVtcGxhdGUoJGFydGljbGUtPlRlbXBsYXRlKTsNCg0KICAgIGZvcmVhY2ggKCRHTE9CQUxTWydob29rcyddWydGaWx0ZXJfUGx1Z2luX1ZpZXdQb3N0X1RlbXBsYXRlJ10gYXMgJGZwbmFtZSA9PiAmJGZwc2lnbmFsKSB7DQogICAgICAgICRmcHJldHVybiA9ICRmcG5hbWUoJHpicC0+dGVtcGxhdGUpOw0KICAgIH0NCg0KICAgICR6YnAtPnRlbXBsYXRlLT5EaXNwbGF5KCk7DQoNCn0NCg0KIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIw0KLyoqDQogKiDmoLnmja5SZXdyaXRlX3VybOinhOWImeaYvuekuumhtemdog0KICogQGFwaSBGaWx0ZXJfUGx1Z2luX1ZpZXdBdXRvX0JlZ2luDQogKiBAYXBpIEZpbHRlcl9QbHVnaW5fVmlld0F1dG9fRW5kDQogKiBAcGFyYW0gc3RyaW5nICRpbnB1cmwg6aG16Z2idXJsDQogKiBAcmV0dXJuIG51bGx8c3RyaW5nDQogKi8NCmZ1bmN0aW9uIFZpZXdBdXRvKCRpbnB1cmwpIHsNCiAgICBnbG9iYWwgJHpicDsNCg0KICAgIGZvcmVhY2ggKCRHTE9CQUxTWydob29rcyddWydGaWx0ZXJfUGx1Z2luX1ZpZXdBdXRvX0JlZ2luJ10gYXMgJGZwbmFtZSA9PiAmJGZwc2lnbmFsKSB7DQogICAgICAgICRmcHJldHVybiA9ICRmcG5hbWUoJGlucHVybCk7DQogICAgICAgIGlmICgkZnBzaWduYWwgPT0gUExVR0lOX0VYSVRTSUdOQUxfUkVUVVJOKSB7DQogICAgICAgICAgICAkZnBzaWduYWwgPSBQTFVHSU5fRVhJVFNJR05BTF9OT05FOw0KDQogICAgICAgICAgICByZXR1cm4gJGZwcmV0dXJuOw0KICAgICAgICB9DQogICAgfQ0KDQogICAgJHVybCA9IEdldFZhbHVlSW5BcnJheShleHBsb2RlKCc/JywgJGlucHVybCksICcwJyk7DQoNCiAgICBpZiAoJHpicC0+Y29va2llc3BhdGggPT09IHN1YnN0cigkdXJsLCAwLCBzdHJsZW4oJHpicC0+Y29va2llc3BhdGgpKSkgew0KICAgICAgICAkdXJsID0gc3Vic3RyKCR1cmwsIHN0cmxlbigkemJwLT5jb29raWVzcGF0aCkpOw0KICAgIH0NCg0KICAgIGlmIChJU19JSVMgJiYgaXNzZXQoJF9HRVRbJ3Jld3JpdGUnXSkpIHsNCiAgICAgICAgLy9paXMraHR0cGQuaW5p5LiL5aaC5p6c5a2Y5Zyo55yf5a6e5paH5Lu2DQogICAgICAgICRyZWFsdXJsID0gJHpicC0+cGF0aCAuIHVybGRlY29kZSgkdXJsKTsNCiAgICAgICAgaWYgKGlzX3JlYWRhYmxlKCRyZWFsdXJsKSAmJiBpc19maWxlKCRyZWFsdXJsKSkgew0KICAgICAgICAgICAgZGllKGZpbGVfZ2V0X2NvbnRlbnRzKCRyZWFsdXJsKSk7DQogICAgICAgIH0NCiAgICAgICAgdW5zZXQoJHJlYWx1cmwpOw0KICAgIH0NCg0KICAgICR1cmwgPSB0cmltKHVybGRlY29kZSgkdXJsKSwgJy8nKTsNCg0KICAgIGlmICgkdXJsID09ICcnIHx8ICR1cmwgPT0gJ2luZGV4LnBocCcpIHsNCiAgICAgICAgVmlld0xpc3QobnVsbCwgbnVsbCwgbnVsbCwgbnVsbCwgbnVsbCk7Cg0KICAgICAgICByZXR1cm4gbnVsbDsNCiAgICB9DQoNCiAgICBpZiAoJHpicC0+b3B0aW9uWydaQ19TVEFUSUNfTU9ERSddID09ICdSRVdSSVRFJykgew0KDQogICAgICAgICRyID0gVXJsUnVsZTo6T3V0cHV0VXJsUmVnRXgoJHpicC0+b3B0aW9uWydaQ19JTkRFWF9SRUdFWCddLCAnaW5kZXgnKTsNCiAgICAgICAgJG0gPSBhcnJheSgpOw0KICAgICAgICBpZiAocHJlZ19tYXRjaCgkciwgJHVybCwgJG0pID09IDEpIHsNCiAgICAgICAgICAgIFZpZXdMaXN0KCRtWydwYWdlJ10sIG51bGwsIG51bGwsIG51bGwsIG51bGwsIHRydWUpOwoNCiAgICAgICAgICAgIHJldHVybiBudWxsOw0KICAgICAgICB9DQoNCiAgICAgICAgJHIgPSBVcmxSdWxlOjpPdXRwdXRVcmxSZWdFeCgkemJwLT5vcHRpb25bJ1pDX0RBVEVfUkVHRVgnXSwgJ2RhdGUnLCBmYWxzZSk7DQogICAgICAgICRtID0gYXJyYXkoKTsNCiAgICAgICAgaWYgKHByZWdfbWF0Y2goJHIsICR1cmwsICRtKSA9PSAxKSB7DQogICAgICAgICAgICBpc3NldCgkbVsncGFnZSddKSA/IG51bGwgOiAkbVsncGFnZSddID0gMDsNCiAgICAgICAgICAgICRyZXN1bHQgPSBWaWV3TGlzdCgkbVsncGFnZSddLCBudWxsLCBudWxsLCAkbSwgbnVsbCwgdHJ1ZSk7DQogICAgICAgICAgICBpZiAoJHJlc3VsdCA9PSB0cnVlKSB7DQogICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7DQogICAgICAgICAgICB9DQogICAgICAgIH0NCg0KICAgICAgICAkciA9IFVybFJ1bGU6Ok91dHB1dFVybFJlZ0V4KCR6YnAtPm9wdGlvblsnWkNfREFURV9SRUdFWCddLCAnZGF0ZScsIHRydWUpOw0KICAgICAgICAkbSA9IGFycmF5KCk7DQogICAgICAgIGlmIChwcmVnX21hdGNoKCRyLCAkdXJsLCAkbSkgPT0gMSkgew0KICAgICAgICAgICAgJHJlc3VsdCA9IFZpZXdMaXN0KCRtWydwYWdlJ10sIG51bGwsIG51bGwsICRtLCBudWxsLCB0cnVlKTsNCiAgICAgICAgICAgIGlmICgkcmVzdWx0ID09IHRydWUpIHsNCiAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDsNCiAgICAgICAgICAgIH0NCiAgICAgICAgfQ0KDQogICAgICAgICRyID0gVXJsUnVsZTo6T3V0cHV0VXJsUmVnRXgoJHpicC0+b3B0aW9uWydaQ19BVVRIT1JfUkVHRVgnXSwgJ2F1dGgnLCBmYWxzZSk7DQogICAgICAgICRtID0gYXJyYXkoKTsNCiAgICAgICAgaWYgKHByZWdfbWF0Y2goJHIsICR1cmwsICRtKSA9PSAxKSB7DQogICAgICAgICAgICBpc3NldCgkbVsncGFnZSddKSA/IG51bGwgOiAkbVsncGFnZSddID0gMDsNCiAgICAgICAgICAgICRyZXN1bHQgPSBWaWV3TGlzdCgkbVsncGFnZSddLCBudWxsLCAkbSwgbnVsbCwgbnVsbCwgdHJ1ZSk7DQogICAgICAgICAgICBpZiAoJHJlc3VsdCA9PSB0cnVlKSB7DQogICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7DQogICAgICAgICAgICB9DQogICAgICAgIH0NCg0KICAgICAgICAkciA9IFVybFJ1bGU6Ok91dHB1dFVybFJlZ0V4KCR6YnAtPm9wdGlvblsnWkNfQVVUSE9SX1JFR0VYJ10sICdhdXRoJywgdHJ1ZSk7DQogICAgICAgICRtID0gYXJyYXkoKTsNCiAgICAgICAgaWYgKHByZWdfbWF0Y2goJHIsICR1cmwsICRtKSA9PSAxKSB7DQogICAgICAgICAgICAkcmVzdWx0ID0gVmlld0xpc3QoJG1bJ3BhZ2UnXSwgbnVsbCwgJG0sIG51bGwsIG51bGwsIHRydWUpOw0KICAgICAgICAgICAgaWYgKCRyZXN1bHQgPT0gdHJ1ZSkgew0KICAgICAgICAgICAgICAgIHJldHVybiBudWxsOw0KICAgICAgICAgICAgfQ0KICAgICAgICB9DQoNCiAgICAgICAgJHIgPSBVcmxSdWxlOjpPdXRwdXRVcmxSZWdFeCgkemJwLT5vcHRpb25bJ1pDX1RBR1NfUkVHRVgnXSwgJ3RhZ3MnLCBmYWxzZSk7DQogICAgICAgICRtID0gYXJyYXkoKTsNCiAgICAgICAgaWYgKHByZWdfbWF0Y2goJHIsICR1cmwsICRtKSA9PSAxKSB7DQogICAgICAgICAgICBpc3NldCgkbVsncGFnZSddKSA/IG51bGwgOiAkbVsncGFnZSddID0gMDsNCiAgICAgICAgICAgICRyZXN1bHQgPSBWaWV3TGlzdCgkbVsncGFnZSddLCBudWxsLCBudWxsLCBudWxsLCAkbSwgdHJ1ZSk7DQogICAgICAgICAgICBpZiAoJHJlc3VsdCA9PSB0cnVlKSB7DQogICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7DQogICAgICAgICAgICB9DQogICAgICAgIH0NCg0KICAgICAgICAkciA9IFVybFJ1bGU6Ok91dHB1dFVybFJlZ0V4KCR6YnAtPm9wdGlvblsnWkNfVEFHU19SRUdFWCddLCAndGFncycsIHRydWUpOw0KICAgICAgICAkbSA9IGFycmF5KCk7DQogICAgICAgIGlmIChwcmVnX21hdGNoKCRyLCAkdXJsLCAkbSkgPT0gMSkgew0KICAgICAgICAgICAgJHJlc3VsdCA9IFZpZXdMaXN0KCRtWydwYWdlJ10sIG51bGwsIG51bGwsIG51bGwsICRtLCB0cnVlKTsNCiAgICAgICAgICAgIGlmICgkcmVzdWx0ID09IHRydWUpIHsNCiAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDsNCiAgICAgICAgICAgIH0NCiAgICAgICAgfQ0KDQogICAgICAgICRyID0gVXJsUnVsZTo6T3V0cHV0VXJsUmVnRXgoJHpicC0+b3B0aW9uWydaQ19DQVRFR09SWV9SRUdFWCddLCAnY2F0ZScsIGZhbHNlKTsNCiAgICAgICAgJG0gPSBhcnJheSgpOw0KICAgICAgICBpZiAocHJlZ19tYXRjaCgkciwgJHVybCwgJG0pID09IDEpIHsNCiAgICAgICAgICAgIGlzc2V0KCRtWydwYWdlJ10pID8gbnVsbCA6ICRtWydwYWdlJ10gPSAwOw0KICAgICAgICAgICAgJHJlc3VsdCA9IFZpZXdMaXN0KCRtWydwYWdlJ10sICRtLCBudWxsLCBudWxsLCBudWxsLCB0cnVlKTsNCiAgICAgICAgICAgIGlmICgkcmVzdWx0ID09IHRydWUpIHsNCiAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDsNCiAgICAgICAgICAgIH0NCg0KICAgICAgICB9DQoNCiAgICAgICAgJHIgPSBVcmxSdWxlOjpPdXRwdXRVcmxSZWdFeCgkemJwLT5vcHRpb25bJ1pDX0NBVEVHT1JZX1JFR0VYJ10sICdjYXRlJywgdHJ1ZSk7DQogICAgICAgICRtID0gYXJyYXkoKTsNCiAgICAgICAgaWYgKHByZWdfbWF0Y2goJHIsICR1cmwsICRtKSA9PSAxKSB7DQogICAgICAgICAgICAkcmVzdWx0ID0gVmlld0xpc3QoJG1bJ3BhZ2UnXSwgJG0sIG51bGwsIG51bGwsIG51bGwsIHRydWUpOw0KICAgICAgICAgICAgaWYgKCRyZXN1bHQgPT0gdHJ1ZSkgew0KICAgICAgICAgICAgICAgIHJldHVybiBudWxsOw0KICAgICAgICAgICAgfQ0KDQogICAgICAgIH0NCg0KICAgICAgICAkciA9IFVybFJ1bGU6Ok91dHB1dFVybFJlZ0V4KCR6YnAtPm9wdGlvblsnWkNfQVJUSUNMRV9SRUdFWCddLCAnYXJ0aWNsZScpOw0KICAgICAgICAkbSA9IGFycmF5KCk7DQogICAgICAgIGlmIChwcmVnX21hdGNoKCRyLCAkdXJsLCAkbSkgPT0gMSkgew0KICAgICAgICAgICAgJHJlc3VsdCA9IFZpZXdQb3N0KCRtLCBudWxsLCB0cnVlKTsNCiAgICAgICAgICAgIGlmICgkcmVzdWx0ID09IGZhbHNlKSB7DQogICAgICAgICAgICAgICAgJHpicC0+U2hvd0Vycm9yKDIsIF9fRklMRV9fLCBfX0xJTkVfXyk7DQogICAgICAgICAgICB9Cg0KICAgICAgICAgICAgcmV0dXJuIG51bGw7DQogICAgICAgIH0NCg0KICAgICAgICAkciA9IFVybFJ1bGU6Ok91dHB1dFVybFJlZ0V4KCR6YnAtPm9wdGlvblsnWkNfUEFHRV9SRUdFWCddLCAncGFnZScpOw0KICAgICAgICAkbSA9IGFycmF5KCk7DQogICAgICAgIGlmIChwcmVnX21hdGNoKCRyLCAkdXJsLCAkbSkgPT0gMSkgew0KICAgICAgICAgICAgJHJlc3VsdCA9IFZpZXdQb3N0KCRtLCBudWxsLCB0cnVlKTsNCiAgICAgICAgICAgIGlmICgkcmVzdWx0ID09IGZhbHNlKSB7DQogICAgICAgICAgICAgICAgJHpicC0+U2hvd0Vycm9yKDIsIF9fRklMRV9fLCBfX0xJTkVfXyk7DQogICAgICAgICAgICB9DQoNCiAgICAgICAgICAgIHJldHVybiBudWxsOw0KICAgICAgICB9DQoNCiAgICB9DQoNCiAgICBmb3JlYWNoICgkR0xPQkFMU1snaG9va3MnXVsnRmlsdGVyX1BsdWdpbl9WaWV3QXV0b19FbmQnXSBhcyAkZnBuYW1lID0+ICYkZnBzaWduYWwpIHsNCiAgICAgICAgJGZwcmV0dXJuID0gJGZwbmFtZSgkdXJsKTsNCiAgICAgICAgaWYgKCRmcHNpZ25hbCA9PSBQTFVHSU5fRVhJVFNJR05BTF9SRVRVUk4pIHsNCiAgICAgICAgICAgICRmcHNpZ25hbCA9IFBMVUdJTl9FWElUU0lHTkFMX05PTkU7DQoNCiAgICAgICAgICAgIHJldHVybiAkZnByZXR1cm47DQogICAgICAgIH0NCiAgICB9DQoNCiAgICBpZiAoaXNzZXQoJHpicC0+b3B0aW9uWydaQ19DT01QQVRJQkxFX0FTUF9VUkwnXSkgJiYgKCR6YnAtPm9wdGlvblsnWkNfQ09NUEFUSUJMRV9BU1BfVVJMJ10gPT0gdHJ1ZSkpIHsNCiAgICAgICAgaWYgKGlzc2V0KCRfR0VUWydpZCddKSB8fCBpc3NldCgkX0dFVFsnYWxpYXMnXSkpIHsNCiAgICAgICAgICAgIFZpZXdQb3N0KEdldFZhcnMoJ2lkJywgJ0dFVCcpLCBHZXRWYXJzKCdhbGlhcycsICdHRVQnKSk7DQoNCiAgICAgICAgICAgIHJldHVybiBudWxsOw0KICAgICAgICB9IGVsc2VpZiAoaXNzZXQoJF9HRVRbJ3BhZ2UnXSkgfHwgaXNzZXQoJF9HRVRbJ2NhdGUnXSkgfHwgaXNzZXQoJF9HRVRbJ2F1dGgnXSkgfHwgaXNzZXQoJF9HRVRbJ2RhdGUnXSkgfHwgaXNzZXQoJF9HRVRbJ3RhZ3MnXSkpIHsNCiAgICAgICAgICAgIFZpZXdMaXN0KEdldFZhcnMoJ3BhZ2UnLCAnR0VUJyksIEdldFZhcnMoJ2NhdGUnLCAnR0VUJyksIEdldFZhcnMoJ2F1dGgnLCAnR0VUJyksIEdldFZhcnMoJ2RhdGUnLCAnR0VUJyksIEdldFZhcnMoJ3RhZ3MnLCAnR0VUJykpOw0KDQogICAgICAgICAgICByZXR1cm4gbnVsbDsNCiAgICAgICAgfQ0KICAgIH0NCg0KICAgICR6YnAtPlNob3dFcnJvcigyLCBfX0ZJTEVfXywgX19MSU5FX18pOw0KDQp9DQoNCi8qKg0KICog5pi+56S65YiX6KGo6aG16Z2iDQogKiBAYXBpIEZpbHRlcl9QbHVnaW5fVmlld0xpc3RfQmVnaW4NCiAqIEBhcGkgRmlsdGVyX1BsdWdpbl9WaWV3TGlzdF9UZW1wbGF0ZQ0KICogQHBhcmFtIGludCAkcGFnZQ0KICogQHBhcmFtIGludHxzdHJpbmcgJGNhdGUNCiAqIEBwYXJhbSBpbnR8c3RyaW5nICRhdXRoDQogKiBAcGFyYW0gc3RyaW5nICAgJGRhdGUNCiAqIEBwYXJhbSBzdHJpbmcgJHRhZ3MgdGFnc+WIl+ihqA0KICogQHBhcmFtIGJvb2wgJGlzcmV3cml0ZSDmmK/lkKblkK/nlKh1cmxyZXdyaXRlDQogKiBAcmV0dXJuIHN0cmluZw0KICovDQpmdW5jdGlvbiBWaWV3TGlzdCgkcGFnZSwgJGNhdGUsICRhdXRoLCAkZGF0ZSwgJHRhZ3MsICRpc3Jld3JpdGUgPSBmYWxzZSkgew0KICAgIGdsb2JhbCAkemJwOw0KDQogICAgZm9yZWFjaCAoJEdMT0JBTFNbJ2hvb2tzJ11bJ0ZpbHRlcl9QbHVnaW5fVmlld0xpc3RfQmVnaW4nXSBhcyAkZnBuYW1lID0+ICYkZnBzaWduYWwpIHsNCiAgICAgICAgJGZwcmV0dXJuID0gJGZwbmFtZSgkcGFnZSwgJGNhdGUsICRhdXRoLCAkZGF0ZSwgJHRhZ3MpOw0KICAgICAgICBpZiAoJGZwc2lnbmFsID09IFBMVUdJTl9FWElUU0lHTkFMX1JFVFVSTikgew0KICAgICAgICAgICAgJGZwc2lnbmFsID0gUExVR0lOX0VYSVRTSUdOQUxfTk9ORTsNCg0KICAgICAgICAgICAgcmV0dXJuICRmcHJldHVybjsNCiAgICAgICAgfQ0KICAgIH0NCg0KICAgICR0eXBlID0gJ2luZGV4JzsNCiAgICBpZiAoJGNhdGUgIT09IG51bGwpIHsNCiAgICAgICAgJHR5cGUgPSAnY2F0ZWdvcnknOw0KICAgIH0NCg0KICAgIGlmICgkYXV0aCAhPT0gbnVsbCkgew0KICAgICAgICAkdHlwZSA9ICdhdXRob3InOw0KICAgIH0NCg0KICAgIGlmICgkZGF0ZSAhPT0gbnVsbCkgew0KICAgICAgICAkdHlwZSA9ICdkYXRlJzsNCiAgICB9DQoNCiAgICBpZiAoJHRhZ3MgIT09IG51bGwpIHsNCiAgICAgICAgJHR5cGUgPSAndGFnJzsNCiAgICB9DQoNCiAgICAkY2F0ZWdvcnkgPSBudWxsOw0KICAgICRhdXRob3IgPSBudWxsOw0KICAgICRkYXRldGltZSA9IG51bGw7DQogICAgJHRhZyA9IG51bGw7DQoNCiAgICAkdyA9IGFycmF5KCk7DQogICAgJHdbXSA9IGFycmF5KCc9JywgJ2xvZ19Jc1RvcCcsIDApOw0KICAgICR3W10gPSBhcnJheSgnPScsICdsb2dfU3RhdHVzJywgMCk7DQoNCiAgICAkcGFnZSA9IChpbnQpICRwYWdlID09IDAgPyAxIDogKGludCkgJHBhZ2U7DQoNCiAgICAkYXJ0aWNsZXMgPSBhcnJheSgpOw0KICAgICRhcnRpY2xlc190b3AgPSBhcnJheSgpOw0KDQogICAgc3dpdGNoICgkdHlwZSkgew0KICAgICMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjDQogICAgY2FzZSAnaW5kZXgnOg0KICAgICAgICAkcGFnZWJhciA9IG5ldyBQYWdlYmFyKCR6YnAtPm9wdGlvblsnWkNfSU5ERVhfUkVHRVgnXSk7DQogICAgICAgICRwYWdlYmFyLT5Db3VudCA9ICR6YnAtPmNhY2hlLT5ub3JtYWxfYXJ0aWNsZV9udW1zOw0KICAgICAgICAkdGVtcGxhdGUgPSAkemJwLT5vcHRpb25bJ1pDX0lOREVYX0RFRkFVTFRfVEVNUExBVEUnXTsNCiAgICAgICAgaWYgKCRwYWdlID09IDEpIHsNCiAgICAgICAgICAgICR6YnAtPnRpdGxlID0gJHpicC0+c3VibmFtZTsNCiAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgICR6YnAtPnRpdGxlID0gc3RyX3JlcGxhY2UoJyVudW0lJywgJHBhZ2UsICR6YnAtPmxhbmdbJ21zZyddWydudW1iZXJfcGFnZSddKTsNCiAgICAgICAgfQ0KICAgICAgICBicmVhazsNCiAgICAjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIw0KICAgIGNhc2UgJ2NhdGVnb3J5JzoNCiAgICAgICAgJHBhZ2ViYXIgPSBuZXcgUGFnZWJhcigkemJwLT5vcHRpb25bJ1pDX0NBVEVHT1JZX1JFR0VYJ10pOw0KICAgICAgICAkY2F0ZWdvcnkgPSBuZXcgQ2F0ZWdvcnk7DQoNCiAgICAgICAgaWYgKCFpc19hcnJheSgkY2F0ZSkpIHsNCiAgICAgICAgICAgICRjYXRlSWQgPSAkY2F0ZTsNCiAgICAgICAgICAgICRjYXRlID0gYXJyYXkoKTsNCiAgICAgICAgICAgICRjYXRlWydpZCddID0gJGNhdGVJZDsNCiAgICAgICAgfQ0KICAgICAgICBpZiAoaXNzZXQoJGNhdGVbJ2lkJ10pKSB7DQogICAgICAgICAgICAkY2F0ZWdvcnkgPSAkemJwLT5HZXRDYXRlZ29yeUJ5SUQoJGNhdGVbJ2lkJ10pOw0KICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgJGNhdGVnb3J5ID0gJHpicC0+R2V0Q2F0ZWdvcnlCeUFsaWFzKCRjYXRlWydhbGlhcyddKTsNCiAgICAgICAgfQ0KDQogICAgICAgIGlmICgkY2F0ZWdvcnktPklEID09IDApIHsNCiAgICAgICAgICAgIGlmICgkaXNyZXdyaXRlID09IHRydWUpIHsNCiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7DQogICAgICAgICAgICB9DQoNCiAgICAgICAgICAgICR6YnAtPlNob3dFcnJvcigyLCBfX0ZJTEVfXywgX19MSU5FX18pOw0KICAgICAgICB9DQogICAgICAgIGlmICgkcGFnZSA9PSAxKSB7DQogICAgICAgICAgICAkemJwLT50aXRsZSA9ICRjYXRlZ29yeS0+TmFtZTsNCiAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgICR6YnAtPnRpdGxlID0gJGNhdGVnb3J5LT5OYW1lIC4gJyAnIC4gc3RyX3JlcGxhY2UoJyVudW0lJywgJHBhZ2UsICR6YnAtPmxhbmdbJ21zZyddWydudW1iZXJfcGFnZSddKTsNCiAgICAgICAgfQ0KICAgICAgICAkdGVtcGxhdGUgPSAkY2F0ZWdvcnktPlRlbXBsYXRlOw0KDQogICAgICAgIGlmICghJHpicC0+b3B0aW9uWydaQ19ESVNQTEFZX1NVQkNBVEVHT1JZUyddKSB7DQogICAgICAgICAgICAkd1tdID0gYXJyYXkoJz0nLCAnbG9nX0NhdGVJRCcsICRjYXRlZ29yeS0+SUQpOw0KICAgICAgICAgICAgJHBhZ2ViYXItPkNvdW50ID0gJGNhdGVnb3J5LT5Db3VudDsNCiAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgICRhcnlzdWJjYXRlID0gYXJyYXkoKTsNCiAgICAgICAgICAgICRhcnlzdWJjYXRlW10gPSBhcnJheSgnbG9nX0NhdGVJRCcsICRjYXRlZ29yeS0+SUQpOw0KICAgICAgICAgICAgZm9yZWFjaCAoJHpicC0+Y2F0ZWdvcmllc1skY2F0ZWdvcnktPklEXS0+Q2hpbGRyZW5DYXRlZ29yaWVzIGFzICRzdWJjYXRlKSB7DQogICAgICAgICAgICAgICAgJGFyeXN1YmNhdGVbXSA9IGFycmF5KCdsb2dfQ2F0ZUlEJywgJHN1YmNhdGUtPklEKTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgICR3W10gPSBhcnJheSgnYXJyYXknLCAkYXJ5c3ViY2F0ZSk7DQogICAgICAgIH0NCg0KICAgICAgICAkcGFnZWJhci0+VXJsUnVsZS0+UnVsZXNbJ3slaWQlfSddID0gJGNhdGVnb3J5LT5JRDsNCiAgICAgICAgJHBhZ2ViYXItPlVybFJ1bGUtPlJ1bGVzWyd7JWFsaWFzJX0nXSA9ICRjYXRlZ29yeS0+QWxpYXMgPT0gJycgPyByYXd1cmxlbmNvZGUoJGNhdGVnb3J5LT5OYW1lKSA6ICRjYXRlZ29yeS0+QWxpYXM7DQogICAgICAgIGJyZWFrOw0KICAgICMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjDQogICAgY2FzZSAnYXV0aG9yJzoNCiAgICAgICAgJHBhZ2ViYXIgPSBuZXcgUGFnZWJhcigkemJwLT5vcHRpb25bJ1pDX0FVVEhPUl9SRUdFWCddKTsNCiAgICAgICAgJGF1dGhvciA9IG5ldyBNZW1iZXI7DQoNCiAgICAgICAgaWYgKCFpc19hcnJheSgkYXV0aCkpIHsNCiAgICAgICAgICAgICRhdXRoSWQgPSAkYXV0aDsNCiAgICAgICAgICAgICRhdXRoID0gYXJyYXkoKTsNCiAgICAgICAgICAgICRhdXRoWydpZCddID0gJGF1dGhJZDsNCiAgICAgICAgfQ0KICAgICAgICBpZiAoaXNzZXQoJGF1dGhbJ2lkJ10pKSB7DQogICAgICAgICAgICAkYXV0aG9yID0gJHpicC0+R2V0TWVtYmVyQnlJRCgkYXV0aFsnaWQnXSk7DQogICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICAkYXV0aG9yID0gJHpicC0+R2V0TWVtYmVyQnlBbGlhc09yTmFtZSgkYXV0aFsnYWxpYXMnXSk7DQogICAgICAgIH0NCg0KICAgICAgICBpZiAoJGF1dGhvci0+SUQgPT0gMCkgew0KICAgICAgICAgICAgaWYgKCRpc3Jld3JpdGUgPT0gdHJ1ZSkgew0KICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTsNCiAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgJHpicC0+U2hvd0Vycm9yKDIsIF9fRklMRV9fLCBfX0xJTkVfXyk7DQogICAgICAgIH0NCiAgICAgICAgaWYgKCRwYWdlID09IDEpIHsNCiAgICAgICAgICAgICR6YnAtPnRpdGxlID0gJGF1dGhvci0+U3RhdGljTmFtZTsNCiAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgICR6YnAtPnRpdGxlID0gJGF1dGhvci0+U3RhdGljTmFtZSAuICcgJyAuIHN0cl9yZXBsYWNlKCclbnVtJScsICRwYWdlLCAkemJwLT5sYW5nWydtc2cnXVsnbnVtYmVyX3BhZ2UnXSk7DQogICAgICAgIH0NCiAgICAgICAgJHRlbXBsYXRlID0gJGF1dGhvci0+VGVtcGxhdGU7DQogICAgICAgICR3W10gPSBhcnJheSgnPScsICdsb2dfQXV0aG9ySUQnLCAkYXV0aG9yLT5JRCk7DQogICAgICAgICRwYWdlYmFyLT5Db3VudCA9ICRhdXRob3ItPkFydGljbGVzOw0KICAgICAgICAkcGFnZWJhci0+VXJsUnVsZS0+UnVsZXNbJ3slaWQlfSddID0gJGF1dGhvci0+SUQ7DQogICAgICAgICRwYWdlYmFyLT5VcmxSdWxlLT5SdWxlc1sneyVhbGlhcyV9J10gPSAkYXV0aG9yLT5BbGlhcyA9PSAnJyA/IHJhd3VybGVuY29kZSgkYXV0aG9yLT5OYW1lKSA6ICRhdXRob3ItPkFsaWFzOw0KICAgICAgICBicmVhazsNCiAgICAjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIw0KICAgIGNhc2UgJ2RhdGUnOg0KICAgICAgICAkcGFnZWJhciA9IG5ldyBQYWdlYmFyKCR6YnAtPm9wdGlvblsnWkNfREFURV9SRUdFWCddKTsNCg0KICAgICAgICBpZiAoIWlzX2FycmF5KCRkYXRlKSkgew0KICAgICAgICAgICAgJGRhdGV0aW1lID0gJGRhdGU7DQogICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICAkZGF0ZXRpbWUgPSAkZGF0ZVsnZGF0ZSddOw0KICAgICAgICB9DQogICAgICAgIGlmKHByZWdfbWF0Y2goJy9bMC05XXs0fS1bMC05XXsxLDJ9L2knLCAkZGF0ZXRpbWUpID09IDApew0KICAgICAgICAgICAgcmV0dXJuIGZhbHNlOw0KICAgICAgICB9DQogICAgICAgICRkYXRldGltZSA9IHN0cnRvdGltZSgkZGF0ZXRpbWUpOw0KICAgICAgICBpZigkZGF0ZXRpbWUgPT0gZmFsc2Upew0KICAgICAgICAgICAgcmV0dXJuIGZhbHNlOw0KICAgICAgICB9DQoNCiAgICAgICAgJGRhdGV0aXRsZSA9IHN0cl9yZXBsYWNlKGFycmF5KCcleSUnLCAnJW0lJyksIGFycmF5KGRhdGUoJ1knLCAkZGF0ZXRpbWUpLCBkYXRlKCduJywgJGRhdGV0aW1lKSksICR6YnAtPmxhbmdbJ21zZyddWyd5ZWFyX21vbnRoJ10pOw0KICAgICAgICBpZiAoJHBhZ2UgPT0gMSkgew0KICAgICAgICAgICAgJHpicC0+dGl0bGUgPSAkZGF0ZXRpdGxlOw0KICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgJHpicC0+dGl0bGUgPSAkZGF0ZXRpdGxlIC4gJyAnIC4gc3RyX3JlcGxhY2UoJyVudW0lJywgJHBhZ2UsICR6YnAtPmxhbmdbJ21zZyddWydudW1iZXJfcGFnZSddKTsNCiAgICAgICAgfQ0KDQogICAgICAgICR6YnAtPm1vZHVsZXNieWZpbGVuYW1lWydjYWxlbmRhciddLT5Db250ZW50ID0gTW9kdWxlQnVpbGRlcjo6Q2FsZW5kYXIoZGF0ZSgnWScsICRkYXRldGltZSkgLiAnLScgLiBkYXRlKCduJywgJGRhdGV0aW1lKSk7DQoNCiAgICAgICAgJHRlbXBsYXRlID0gJHpicC0+b3B0aW9uWydaQ19JTkRFWF9ERUZBVUxUX1RFTVBMQVRFJ107DQogICAgICAgICR3W10gPSBhcnJheSgnQkVUV0VFTicsICdsb2dfUG9zdFRpbWUnLCAkZGF0ZXRpbWUsIHN0cnRvdGltZSgnKzEgbW9udGgnLCAkZGF0ZXRpbWUpKTsNCiAgICAgICAgJHBhZ2ViYXItPlVybFJ1bGUtPlJ1bGVzWyd7JWRhdGUlfSddID0gZGF0ZSgnWS1uJywgJGRhdGV0aW1lKTsNCiAgICAgICAgJGRhdGV0aW1lID0gTWV0YXM6OkNvbnZlcnRBcnJheShnZXRkYXRlKCRkYXRldGltZSkpOw0KICAgICAgICBicmVhazsNCiAgICAjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIw0KICAgIGNhc2UgJ3RhZyc6DQogICAgICAgICRwYWdlYmFyID0gbmV3IFBhZ2ViYXIoJHpicC0+b3B0aW9uWydaQ19UQUdTX1JFR0VYJ10pOw0KICAgICAgICAkdGFnID0gbmV3IFRhZzsNCg0KICAgICAgICBpZiAoIWlzX2FycmF5KCR0YWdzKSkgew0KICAgICAgICAgICAgJHRhZ0lkID0gJHRhZ3M7DQogICAgICAgICAgICAkdGFncyA9IGFycmF5KCk7DQogICAgICAgICAgICAkdGFnc1snaWQnXSA9ICR0YWdJZDsNCiAgICAgICAgfQ0KICAgICAgICBpZiAoaXNzZXQoJHRhZ3NbJ2lkJ10pKSB7DQogICAgICAgICAgICAkdGFnID0gJHpicC0+R2V0VGFnQnlJRCgkdGFnc1snaWQnXSk7DQogICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICAkdGFnID0gJHpicC0+R2V0VGFnQnlBbGlhc09yTmFtZSgkdGFnc1snYWxpYXMnXSk7DQogICAgICAgIH0NCg0KICAgICAgICBpZiAoJHRhZy0+SUQgPT0gMCkgew0KICAgICAgICAgICAgaWYgKCRpc3Jld3JpdGUgPT0gdHJ1ZSkgew0KICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTsNCiAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgJHpicC0+U2hvd0Vycm9yKDIsIF9fRklMRV9fLCBfX0xJTkVfXyk7DQogICAgICAgIH0NCg0KICAgICAgICBpZiAoJHBhZ2UgPT0gMSkgew0KICAgICAgICAgICAgJHpicC0+dGl0bGUgPSAkdGFnLT5OYW1lOw0KICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgJHpicC0+dGl0bGUgPSAkdGFnLT5OYW1lIC4gJyAnIC4gc3RyX3JlcGxhY2UoJyVudW0lJywgJHBhZ2UsICR6YnAtPmxhbmdbJ21zZyddWydudW1iZXJfcGFnZSddKTsNCiAgICAgICAgfQ0KDQogICAgICAgICR0ZW1wbGF0ZSA9ICR0YWctPlRlbXBsYXRlOw0KICAgICAgICAkd1tdID0gYXJyYXkoJ0xJS0UnLCAnbG9nX1RhZycsICcleycgLiAkdGFnLT5JRCAuICd9JScpOw0KICAgICAgICAkcGFnZWJhci0+VXJsUnVsZS0+UnVsZXNbJ3slaWQlfSddID0gJHRhZy0+SUQ7DQogICAgICAgICRwYWdlYmFyLT5VcmxSdWxlLT5SdWxlc1sneyVhbGlhcyV9J10gPSAkdGFnLT5BbGlhcyA9PSAnJyA/IHJhd3VybGVuY29kZSgkdGFnLT5OYW1lKSA6ICR0YWctPkFsaWFzOw0KICAgICAgICBicmVhazsNCiAgICB9DQoNCiAgICAkcGFnZWJhci0+UGFnZUNvdW50ID0gJHpicC0+ZGlzcGxheWNvdW50Ow0KICAgICRwYWdlYmFyLT5QYWdlTm93ID0gJHBhZ2U7DQogICAgJHBhZ2ViYXItPlBhZ2VCYXJDb3VudCA9ICR6YnAtPnBhZ2ViYXJjb3VudDsNCiAgICAkcGFnZWJhci0+VXJsUnVsZS0+UnVsZXNbJ3slcGFnZSV9J10gPSAkcGFnZTsNCg0KICAgIGZvcmVhY2ggKCRHTE9CQUxTWydob29rcyddWydGaWx0ZXJfUGx1Z2luX1ZpZXdMaXN0X0NvcmUnXSBhcyAkZnBuYW1lID0+ICYkZnBzaWduYWwpIHsNCiAgICAgICAgJGZwbmFtZSgkdHlwZSwgJHBhZ2UsICRjYXRlZ29yeSwgJGF1dGhvciwgJGRhdGV0aW1lLCAkdGFnLCAkdywgJHBhZ2ViYXIpOw0KICAgIH0NCg0KICAgIGlmICgkemJwLT5vcHRpb25bJ1pDX0xJU1RPTlRPUF9UVVJOT0ZGJ10gPT0gZmFsc2UpIHsNCiAgICAgICAgJGFydGljbGVzX3RvcF9ub3RvcmRlciA9ICR6YnAtPkdldFRvcEFydGljbGUoKTsNCiAgICAgICAgZm9yZWFjaCAoJGFydGljbGVzX3RvcF9ub3RvcmRlciBhcyAkYXJ0aWNsZXNfdG9wX25vdG9yZGVyX3Bvc3QpIHsNCiAgICAgICAgICAgIGlmICgkYXJ0aWNsZXNfdG9wX25vdG9yZGVyX3Bvc3QtPlRvcFR5cGUgPT0gJ2dsb2JhbCcpIHsNCiAgICAgICAgICAgICAgICAkYXJ0aWNsZXNfdG9wW10gPSAkYXJ0aWNsZXNfdG9wX25vdG9yZGVyX3Bvc3Q7DQogICAgICAgICAgICB9DQoNCiAgICAgICAgfQ0KDQogICAgICAgIGlmICgkdHlwZSA9PSAnaW5kZXgnICYmICRwYWdlID09IDEpIHsNCiAgICAgICAgICAgIGZvcmVhY2ggKCRhcnRpY2xlc190b3Bfbm90b3JkZXIgYXMgJGFydGljbGVzX3RvcF9ub3RvcmRlcl9wb3N0KSB7DQogICAgICAgICAgICAgICAgaWYgKCRhcnRpY2xlc190b3Bfbm90b3JkZXJfcG9zdC0+VG9wVHlwZSA9PSAnaW5kZXgnKSB7DQogICAgICAgICAgICAgICAgICAgICRhcnRpY2xlc190b3BbXSA9ICRhcnRpY2xlc190b3Bfbm90b3JkZXJfcG9zdDsNCiAgICAgICAgICAgICAgICB9DQoNCiAgICAgICAgICAgIH0NCiAgICAgICAgfQ0KDQogICAgICAgIGlmICgkdHlwZSA9PSAnY2F0ZWdvcnknKSB7DQogICAgICAgICAgICBmb3JlYWNoICgkYXJ0aWNsZXNfdG9wX25vdG9yZGVyIGFzICRhcnRpY2xlc190b3Bfbm90b3JkZXJfcG9zdCkgew0KICAgICAgICAgICAgICAgIGlmICgkYXJ0aWNsZXNfdG9wX25vdG9yZGVyX3Bvc3QtPlRvcFR5cGUgPT0gJ2NhdGVnb3J5JyAmJiAkYXJ0aWNsZXNfdG9wX25vdG9yZGVyX3Bvc3QtPkNhdGVJRCA9PSAkY2F0ZWdvcnktPklEKSB7DQogICAgICAgICAgICAgICAgICAgICRhcnRpY2xlc190b3BbXSA9ICRhcnRpY2xlc190b3Bfbm90b3JkZXJfcG9zdDsNCiAgICAgICAgICAgICAgICB9DQoNCiAgICAgICAgICAgIH0NCg0KICAgICAgICB9DQogICAgfQ0KDQogICAgJHNlbGVjdCA9ICcqJzsNCiAgICAkb3JkZXIgPSBhcnJheSgnbG9nX1Bvc3RUaW1lJyA9PiAnREVTQycpOw0KICAgICRsaW1pdCA9IGFycmF5KCgkcGFnZWJhci0+UGFnZU5vdyAtIDEpICogJHBhZ2ViYXItPlBhZ2VDb3VudCwgJHBhZ2ViYXItPlBhZ2VDb3VudCk7DQogICAgJG9wdGlvbiA9IGFycmF5KCdwYWdlYmFyJyA9PiAkcGFnZWJhcik7DQoNCiAgICBmb3JlYWNoICgkR0xPQkFMU1snaG9va3MnXVsnRmlsdGVyX1BsdWdpbl9MYXJnZURhdGFfQXJpdGNsZSddIGFzICRmcG5hbWUgPT4gJiRmcHNpZ25hbCkgew0KICAgICAgICAkZnByZXR1cm4gPSAkZnBuYW1lKCRzZWxlY3QsICR3LCAkb3JkZXIsICRsaW1pdCwgJG9wdGlvbik7DQogICAgfQ0KDQogICAgJGFydGljbGVzID0gJHpicC0+R2V0QXJ0aWNsZUxpc3QoDQogICAgICAgICRzZWxlY3QsDQogICAgICAgICR3LA0KICAgICAgICAkb3JkZXIsDQogICAgICAgICRsaW1pdCwNCiAgICAgICAgJG9wdGlvbiwNCiAgICAgICAgdHJ1ZQ0KICAgICk7DQoNCiAgICAkemJwLT50ZW1wbGF0ZS0+U2V0VGFncygndGl0bGUnLCAkemJwLT50aXRsZSk7DQogICAgJHpicC0+dGVtcGxhdGUtPlNldFRhZ3MoJ2FydGljbGVzJywgYXJyYXlfbWVyZ2UoJGFydGljbGVzX3RvcCwgJGFydGljbGVzKSk7DQogICAgaWYgKCRwYWdlYmFyLT5QYWdlQWxsID09IDApIHsNCiAgICAgICAgJHBhZ2ViYXIgPSBudWxsOw0KICAgIH0NCg0KICAgICR6YnAtPnRlbXBsYXRlLT5TZXRUYWdzKCdwYWdlYmFyJywgJHBhZ2ViYXIpOw0KICAgICR6YnAtPnRlbXBsYXRlLT5TZXRUYWdzKCd0eXBlJywgJHR5cGUpOw0KICAgICR6YnAtPnRlbXBsYXRlLT5TZXRUYWdzKCdwYWdlJywgJHBhZ2UpOw0KDQogICAgJHpicC0+dGVtcGxhdGUtPlNldFRhZ3MoJ2RhdGUnLCAkZGF0ZXRpbWUpOw0KICAgICR6YnAtPnRlbXBsYXRlLT5TZXRUYWdzKCd0YWcnLCAkdGFnKTsNCiAgICAkemJwLT50ZW1wbGF0ZS0+U2V0VGFncygnYXV0aG9yJywgJGF1dGhvcik7DQogICAgJHpicC0+dGVtcGxhdGUtPlNldFRhZ3MoJ2NhdGVnb3J5JywgJGNhdGVnb3J5KTsNCg0KICAgIGlmICgkemJwLT50ZW1wbGF0ZS0+aGFzVGVtcGxhdGUoJHRlbXBsYXRlKSkgew0KICAgICAgICAkemJwLT50ZW1wbGF0ZS0+U2V0VGVtcGxhdGUoJHRlbXBsYXRlKTsNCiAgICB9IGVsc2Ugew0KICAgICAgICAkemJwLT50ZW1wbGF0ZS0+U2V0VGVtcGxhdGUoJ2luZGV4Jyk7DQogICAgfQ0KDQogICAgZm9yZWFjaCAoJEdMT0JBTFNbJ2hvb2tzJ11bJ0ZpbHRlcl9QbHVnaW5fVmlld0xpc3RfVGVtcGxhdGUnXSBhcyAkZnBuYW1lID0+ICYkZnBzaWduYWwpIHsNCiAgICAgICAgJGZwcmV0dXJuID0gJGZwbmFtZSgkemJwLT50ZW1wbGF0ZSk7DQogICAgfQ0KDQogICAgJHpicC0+dGVtcGxhdGUtPkRpc3BsYXkoKTsNCg0KICAgIHJldHVybiB0cnVlOw0KfQ0KDQovKioNCiAqIOaYvuekuuaWh+eroA0KICogQHBhcmFtIGludCAkaWQg5paH56ugSUQNCiAqIEBwYXJhbSBzdHJpbmcgJGFsaWFzIOaWh+eroOWIq+WQjQ0KICogQHBhcmFtIGJvb2wgJGlzcmV3cml0ZSDmmK/lkKblkK/nlKh1cmxyZXdyaXRlDQogKiBAcmV0dXJuIHN0cmluZw0KICovDQpmdW5jdGlvbiBWaWV3UG9zdCgkb2JqZWN0LCAkdGhlU2Vjb25kUGFyYW0sICRpc3Jld3JpdGUgPSBmYWxzZSkgew0KICAgIGdsb2JhbCAkemJwOw0KDQogICAgaWYgKGlzX2FycmF5KCRvYmplY3QpKSB7DQogICAgICAgICRpZCA9IGlzc2V0KCRvYmplY3RbJ2lkJ10pID8gJG9iamVjdFsnaWQnXSA6IG51bGw7DQogICAgICAgICRhbGlhcyA9IGlzc2V0KCRvYmplY3RbJ2FsaWFzJ10pID8gJG9iamVjdFsnYWxpYXMnXSA6IG51bGw7DQogICAgfSBlbHNlIHsNCiAgICAgICAgJGlkID0gJG9iamVjdDsNCiAgICAgICAgJGFsaWFzID0gJHRoZVNlY29uZFBhcmFtOw0KICAgICAgICAkb2JqZWN0ID0gYXJyYXkoJ2lkJyA9PiAkb2JqZWN0KTsNCiAgICAgICAgJG9iamVjdFswXSA9ICRpZDsNCiAgICAgICAgJG9iamVjdFsnaWQnXSA9ICRpZDsNCiAgICB9DQoNCiAgICBmb3JlYWNoICgkR0xPQkFMU1snaG9va3MnXVsnRmlsdGVyX1BsdWdpbl9WaWV3UG9zdF9CZWdpbiddIGFzICRmcG5hbWUgPT4gJiRmcHNpZ25hbCkgew0KICAgICAgICAkZnByZXR1cm4gPSAkZnBuYW1lKCRpZCwgJGFsaWFzKTsNCiAgICAgICAgaWYgKCRmcHNpZ25hbCA9PSBQTFVHSU5fRVhJVFNJR05BTF9SRVRVUk4pIHsNCiAgICAgICAgICAgICRmcHNpZ25hbCA9IFBMVUdJTl9FWElUU0lHTkFMX05PTkU7DQoNCiAgICAgICAgICAgIHJldHVybiAkZnByZXR1cm47DQogICAgICAgIH0NCiAgICB9DQoNCiAgICAkdyA9IGFycmF5KCk7DQoNCiAgICBpZiAoJGlkICE9PSBudWxsKSB7DQogICAgICAgIGlmIChmdW5jdGlvbl9leGlzdHMoJ2N0eXBlX2RpZ2l0JykgJiYgIWN0eXBlX2RpZ2l0KChzdHJpbmcpICRpZCkpIHsNCiAgICAgICAgICAgICR6YnAtPlNob3dFcnJvcigzLCBfX0ZJTEVfXywgX19MSU5FX18pOw0KICAgICAgICB9DQoNCiAgICAgICAgJHdbXSA9IGFycmF5KCc9JywgJ2xvZ19JRCcsICRpZCk7DQogICAgfSBlbHNlaWYgKCRhbGlhcyAhPT0gbnVsbCkgew0KICAgICAgICBpZiAoJHpicC0+b3B0aW9uWydaQ19QT1NUX0FMSUFTX1VTRV9JRF9OT1RfVElUTEUnXSA9PSBmYWxzZSkgew0KICAgICAgICAgICAgJHdbXSA9IGFycmF5KCdhcnJheScsIGFycmF5KGFycmF5KCdsb2dfQWxpYXMnLCAkYWxpYXMpLCBhcnJheSgnbG9nX1RpdGxlJywgJGFsaWFzKSkpOw0KICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgJHdbXSA9IGFycmF5KCdhcnJheScsIGFycmF5KGFycmF5KCdsb2dfQWxpYXMnLCAkYWxpYXMpLCBhcnJheSgnbG9nX0lEJywgJGFsaWFzKSkpOw0KICAgICAgICB9DQogICAgfSBlbHNlIHsNCiAgICAgICAgJHpicC0+U2hvd0Vycm9yKDIsIF9fRklMRV9fLCBfX0xJTkVfXyk7DQogICAgICAgIGV4aXQ7DQogICAgfQ0KDQogICAgaWYgKCEoJHpicC0+Q2hlY2tSaWdodHMoJ0FydGljbGVBbGwnKSAmJiAkemJwLT5DaGVja1JpZ2h0cygnUGFnZUFsbCcpKSkgew0KICAgICAgICAkd1tdID0gYXJyYXkoJz0nLCAnbG9nX1N0YXR1cycsIDApOw0KICAgIH0NCg0KICAgICRhcnRpY2xlcyA9ICR6YnAtPkdldFBvc3RMaXN0KCcqJywgJHcsIG51bGwsIDEsIG51bGwpOw0KICAgIGlmIChjb3VudCgkYXJ0aWNsZXMpID09IDApIHsNCiAgICAgICAgaWYgKCRpc3Jld3JpdGUgPT0gdHJ1ZSkgew0KICAgICAgICAgICAgcmV0dXJuIGZhbHNlOw0KICAgICAgICB9DQoNCiAgICAgICAgJHpicC0+U2hvd0Vycm9yKDIsIF9fRklMRV9fLCBfX0xJTkVfXyk7DQogICAgfQ0KDQogICAgJGFydGljbGUgPSAkYXJ0aWNsZXNbMF07DQoNCg0KICAgIGlmICgkaXNyZXdyaXRlICYmICEoc3RyaXBvcyh1cmxkZWNvZGUoJGFydGljbGUtPlVybCksICRvYmplY3RbMF0pICE9PSBmYWxzZSkpIHsNCiAgICAgICAgJHpicC0+U2hvd0Vycm9yKDIsIF9fRklMRV9fLCBfX0xJTkVfXyk7DQogICAgICAgIGV4aXQ7DQogICAgfQ0KDQogICAgaWYgKCRhcnRpY2xlLT5UeXBlID09IDApIHsNCiAgICAgICAgJHpicC0+TG9hZFRhZ3NCeUlEU3RyaW5nKCRhcnRpY2xlLT5UYWcpOw0KICAgIH0NCg0KICAgIGlmIChpc3NldCgkemJwLT5vcHRpb25bJ1pDX1ZJRVdOVU1TX1RVUk5PRkYnXSkgJiYgJHpicC0+b3B0aW9uWydaQ19WSUVXTlVNU19UVVJOT0ZGJ10gPT0gZmFsc2UpIHsNCiAgICAgICAgJGFydGljbGUtPlZpZXdOdW1zICs9IDE7DQogICAgICAgICRzcWwgPSAkemJwLT5kYi0+c3FsLT5VcGRhdGUoJHpicC0+dGFibGVbJ1Bvc3QnXSwgYXJyYXkoJ2xvZ19WaWV3TnVtcycgPT4gJGFydGljbGUtPlZpZXdOdW1zKSwgYXJyYXkoYXJyYXkoJz0nLCAnbG9nX0lEJywgJGFydGljbGUtPklEKSkpOw0KICAgICAgICAkemJwLT5kYi0+VXBkYXRlKCRzcWwpOw0KICAgIH0NCg0KICAgICRwYWdlYmFyID0gbmV3IFBhZ2ViYXIoJ2phdmFzY3JpcHQ6emJwLmNvbW1lbnQuZ2V0KFwnJyAuICRhcnRpY2xlLT5JRCAuICdcJyxcJ3slcGFnZSV9XCcpOycsIGZhbHNlKTsNCiAgICAkcGFnZWJhci0+UGFnZUNvdW50ID0gJHpicC0+Y29tbWVudGRpc3BsYXljb3VudDsNCiAgICAkcGFnZWJhci0+UGFnZU5vdyA9IDE7DQogICAgJHBhZ2ViYXItPlBhZ2VCYXJDb3VudCA9ICR6YnAtPnBhZ2ViYXJjb3VudDsNCiAgICAvLyRwYWdlYmFyLT5Db3VudCA9ICRhcnRpY2xlLT5Db21tTnVtczsNCg0KICAgIGlmICgkemJwLT5vcHRpb25bJ1pDX0NPTU1FTlRfVFVSTk9GRiddKSB7DQogICAgICAgICRhcnRpY2xlLT5Jc0xvY2sgPSB0cnVlOw0KICAgIH0NCg0KICAgICRjb21tZW50cyA9IGFycmF5KCk7DQoNCiAgICBpZiAoISRhcnRpY2xlLT5Jc0xvY2sgJiYgJHpicC0+c29jaWFsY29tbWVudCA9PSBudWxsKSB7DQogICAgICAgICRjb21tZW50cyA9ICR6YnAtPkdldENvbW1lbnRMaXN0KA0KICAgICAgICAgICAgJyonLA0KICAgICAgICAgICAgYXJyYXkoDQogICAgICAgICAgICAgICAgYXJyYXkoJz0nLCAnY29tbV9Mb2dJRCcsICRhcnRpY2xlLT5JRCksDQogICAgICAgICAgICAgICAgYXJyYXkoJz0nLCAnY29tbV9Sb290SUQnLCAwKSwNCiAgICAgICAgICAgICAgICBhcnJheSgnPScsICdjb21tX0lzQ2hlY2tpbmcnLCAwKSwNCiAgICAgICAgICAgICksDQogICAgICAgICAgICBhcnJheSgnY29tbV9JRCcgPT4gKCR6YnAtPm9wdGlvblsnWkNfQ09NTUVOVF9SRVZFUlNFX09SREVSJ10gPyAnREVTQycgOiAnQVNDJykpLA0KICAgICAgICAgICAgYXJyYXkoKCRwYWdlYmFyLT5QYWdlTm93IC0gMSkgKiAkcGFnZWJhci0+UGFnZUNvdW50LCAkcGFnZWJhci0+UGFnZUNvdW50KSwNCiAgICAgICAgICAgIGFycmF5KCdwYWdlYmFyJyA9PiAkcGFnZWJhcikNCiAgICAgICAgKTsNCiAgICAgICAgJHJvb3RpZCA9IGFycmF5KCk7DQogICAgICAgIGZvcmVhY2ggKCRjb21tZW50cyBhcyAmJGNvbW1lbnQpIHsNCiAgICAgICAgICAgICRyb290aWRbXSA9ICRjb21tZW50LT5JRDsNCiAgICAgICAgfQ0KICAgICAgICAkY29tbWVudHMyID0gJHpicC0+R2V0Q29tbWVudExpc3QoDQogICAgICAgICAgICAnKicsDQogICAgICAgICAgICBhcnJheSgNCiAgICAgICAgICAgICAgICBhcnJheSgnPScsICdjb21tX0xvZ0lEJywgJGFydGljbGUtPklEKSwNCiAgICAgICAgICAgICAgICBhcnJheSgnSU4nLCAnY29tbV9Sb290SUQnLCAkcm9vdGlkKSwNCiAgICAgICAgICAgICAgICBhcnJheSgnPScsICdjb21tX0lzQ2hlY2tpbmcnLCAwKSwNCiAgICAgICAgICAgICksDQogICAgICAgICAgICBhcnJheSgnY29tbV9JRCcgPT4gKCR6YnAtPm9wdGlvblsnWkNfQ09NTUVOVF9SRVZFUlNFX09SREVSJ10gPyAnREVTQycgOiAnQVNDJykpLA0KICAgICAgICAgICAgbnVsbCwNCiAgICAgICAgICAgIG51bGwNCiAgICAgICAgKTsNCiAgICAgICAgJGZsb29yaWQgPSAoJHBhZ2ViYXItPlBhZ2VOb3cgLSAxKSAqICRwYWdlYmFyLT5QYWdlQ291bnQ7DQogICAgICAgIGZvcmVhY2ggKCRjb21tZW50cyBhcyAmJGNvbW1lbnQpIHsNCiAgICAgICAgICAgICRmbG9vcmlkICs9IDE7DQogICAgICAgICAgICAkY29tbWVudC0+Rmxvb3JJRCA9ICRmbG9vcmlkOw0KICAgICAgICAgICAgJGNvbW1lbnQtPkNvbnRlbnQgPSBUcmFuc2ZlckhUTUwoJGNvbW1lbnQtPkNvbnRlbnQsICdbZW50ZXJdJykgLiAnPGxhYmVsIGlkPSJBamF4Q29tbWVudCcgLiAkY29tbWVudC0+SUQgLiAnIj48L2xhYmVsPic7DQogICAgICAgIH0NCiAgICAgICAgZm9yZWFjaCAoJGNvbW1lbnRzMiBhcyAmJGNvbW1lbnQpIHsNCiAgICAgICAgICAgICRjb21tZW50LT5Db250ZW50ID0gVHJhbnNmZXJIVE1MKCRjb21tZW50LT5Db250ZW50LCAnW2VudGVyXScpIC4gJzxsYWJlbCBpZD0iQWpheENvbW1lbnQnIC4gJGNvbW1lbnQtPklEIC4gJyI+PC9sYWJlbD4nOw0KICAgICAgICB9DQogICAgfQ0KDQogICAgJHpicC0+dGVtcGxhdGUtPlNldFRhZ3MoJ3RpdGxlJywgKCRhcnRpY2xlLT5TdGF0dXMgPT0gMCA/ICcnIDogJ1snIC4gJHpicC0+bGFuZ1sncG9zdF9zdGF0dXNfbmFtZSddWyRhcnRpY2xlLT5TdGF0dXNdIC4gJ10nKSAuICRhcnRpY2xlLT5UaXRsZSk7DQogICAgJHpicC0+dGVtcGxhdGUtPlNldFRhZ3MoJ2FydGljbGUnLCAkYXJ0aWNsZSk7DQogICAgJHpicC0+dGVtcGxhdGUtPlNldFRhZ3MoJ3R5cGUnLCAkYXJ0aWNsZS0+VHlwZU5hbWUpOw0KICAgICR6YnAtPnRlbXBsYXRlLT5TZXRUYWdzKCdwYWdlJywgMSk7DQogICAgaWYgKCRwYWdlYmFyLT5QYWdlQWxsID09IDAgfHwgJHBhZ2ViYXItPlBhZ2VBbGwgPT0gMSkgew0KICAgICAgICAkcGFnZWJhciA9IG51bGw7DQogICAgfQ0KDQogICAgJHpicC0+dGVtcGxhdGUtPlNldFRhZ3MoJ3BhZ2ViYXInLCAkcGFnZWJhcik7DQogICAgJHpicC0+dGVtcGxhdGUtPlNldFRhZ3MoJ2NvbW1lbnRzJywgJGNvbW1lbnRzKTsNCg0KICAgIGlmICgkemJwLT50ZW1wbGF0ZS0+aGFzVGVtcGxhdGUoJGFydGljbGUtPlRlbXBsYXRlKSkgew0KICAgICAgICAkemJwLT50ZW1wbGF0ZS0+U2V0VGVtcGxhdGUoJGFydGljbGUtPlRlbXBsYXRlKTsNCiAgICB9IGVsc2Ugew0KICAgICAgICAkemJwLT50ZW1wbGF0ZS0+U2V0VGVtcGxhdGUoJ3NpbmdsZScpOw0KICAgIH0NCg0KICAgIGZvcmVhY2ggKCRHTE9CQUxTWydob29rcyddWydGaWx0ZXJfUGx1Z2luX1ZpZXdQb3N0X1RlbXBsYXRlJ10gYXMgJGZwbmFtZSA9PiAmJGZwc2lnbmFsKSB7DQogICAgICAgICRmcHJldHVybiA9ICRmcG5hbWUoJHpicC0+dGVtcGxhdGUpOw0KICAgIH0NCg0KICAgICR6YnAtPnRlbXBsYXRlLT5EaXNwbGF5KCk7DQoNCiAgICByZXR1cm4gdHJ1ZTsNCn0NCg0KLyoqDQogKiDmmL7npLrmlofnq6DkuIvor4TorrrliJfooagNCiAqIEBwYXJhbSBpbnQgJHBvc3RpZCDmlofnq6BJRA0KICogQHBhcmFtIGludCAkcGFnZSDpobXmlbANCiAqIEByZXR1cm4gYm9vbA0KICovDQpmdW5jdGlvbiBWaWV3Q29tbWVudHMoJHBvc3RpZCwgJHBhZ2UpIHsNCiAgICBnbG9iYWwgJHpicDsNCg0KICAgICRwb3N0ID0gbmV3IFBvc3Q7DQogICAgJHBvc3QtPkxvYWRJbmZvQnlJRCgkcG9zdGlkKTsNCiAgICAkcGFnZSA9ICRwYWdlID09IDAgPyAxIDogJHBhZ2U7DQogICAgJHRlbXBsYXRlID0gJ2NvbW1lbnRzJzsNCg0KICAgICRwYWdlYmFyID0gbmV3IFBhZ2ViYXIoJ2phdmFzY3JpcHQ6emJwLmNvbW1lbnQuZ2V0KFwnJyAuICRwb3N0LT5JRCAuICdcJyxcJ3slcGFnZSV9XCcpOycpOw0KICAgICRwYWdlYmFyLT5QYWdlQ291bnQgPSAkemJwLT5jb21tZW50ZGlzcGxheWNvdW50Ow0KICAgICRwYWdlYmFyLT5QYWdlTm93ID0gJHBhZ2U7DQogICAgJHBhZ2ViYXItPlBhZ2VCYXJDb3VudCA9ICR6YnAtPnBhZ2ViYXJjb3VudDsNCiAgICAvLyRwYWdlYmFyLT5Db3VudCA9ICRwb3N0LT5Db21tTnVtczsNCg0KICAgICRjb21tZW50cyA9IGFycmF5KCk7DQoNCiAgICAkY29tbWVudHMgPSAkemJwLT5HZXRDb21tZW50TGlzdCgNCiAgICAgICAgJyonLA0KICAgICAgICBhcnJheSgNCiAgICAgICAgICAgIGFycmF5KCc9JywgJ2NvbW1fTG9nSUQnLCAkcG9zdC0+SUQpLA0KICAgICAgICAgICAgYXJyYXkoJz0nLCAnY29tbV9Sb290SUQnLCAwKSwNCiAgICAgICAgICAgIGFycmF5KCc9JywgJ2NvbW1fSXNDaGVja2luZycsIDApLA0KICAgICAgICApLA0KICAgICAgICBhcnJheSgnY29tbV9JRCcgPT4gKCR6YnAtPm9wdGlvblsnWkNfQ09NTUVOVF9SRVZFUlNFX09SREVSJ10gPyAnREVTQycgOiAnQVNDJykpLA0KICAgICAgICBhcnJheSgoJHBhZ2ViYXItPlBhZ2VOb3cgLSAxKSAqICRwYWdlYmFyLT5QYWdlQ291bnQsICRwYWdlYmFyLT5QYWdlQ291bnQpLA0KICAgICAgICBhcnJheSgncGFnZWJhcicgPT4gJHBhZ2ViYXIpDQogICAgKTsNCiAgICAkcm9vdGlkID0gYXJyYXkoKTsNCiAgICBmb3JlYWNoICgkY29tbWVudHMgYXMgJGNvbW1lbnQpIHsNCiAgICAgICAgJHJvb3RpZFtdID0gYXJyYXkoJ2NvbW1fUm9vdElEJywgJGNvbW1lbnQtPklEKTsNCiAgICB9DQogICAgJGNvbW1lbnRzMiA9ICR6YnAtPkdldENvbW1lbnRMaXN0KA0KICAgICAgICAnKicsDQogICAgICAgIGFycmF5KA0KICAgICAgICAgICAgYXJyYXkoJz0nLCAnY29tbV9Mb2dJRCcsICRwb3N0LT5JRCksDQogICAgICAgICAgICBhcnJheSgnYXJyYXknLCAkcm9vdGlkKSwNCiAgICAgICAgICAgIGFycmF5KCc9JywgJ2NvbW1fSXNDaGVja2luZycsIDApLA0KICAgICAgICApLA0KICAgICAgICBhcnJheSgnY29tbV9JRCcgPT4gKCR6YnAtPm9wdGlvblsnWkNfQ09NTUVOVF9SRVZFUlNFX09SREVSJ10gPyAnREVTQycgOiAnQVNDJykpLA0KICAgICAgICBudWxsLA0KICAgICAgICBudWxsDQogICAgKTsNCg0KICAgICRmbG9vcmlkID0gKCRwYWdlYmFyLT5QYWdlTm93IC0gMSkgKiAkcGFnZWJhci0+UGFnZUNvdW50Ow0KICAgIGZvcmVhY2ggKCRjb21tZW50cyBhcyAmJGNvbW1lbnQpIHsNCiAgICAgICAgJGZsb29yaWQgKz0gMTsNCiAgICAgICAgJGNvbW1lbnQtPkZsb29ySUQgPSAkZmxvb3JpZDsNCiAgICAgICAgJGNvbW1lbnQtPkNvbnRlbnQgPSBUcmFuc2ZlckhUTUwoJGNvbW1lbnQtPkNvbnRlbnQsICdbZW50ZXJdJykgLiAnPGxhYmVsIGlkPSJBamF4Q29tbWVudCcgLiAkY29tbWVudC0+SUQgLiAnIj48L2xhYmVsPic7DQogICAgfQ0KICAgIGZvcmVhY2ggKCRjb21tZW50czIgYXMgJiRjb21tZW50KSB7DQogICAgICAgICRjb21tZW50LT5Db250ZW50ID0gVHJhbnNmZXJIVE1MKCRjb21tZW50LT5Db250ZW50LCAnW2VudGVyXScpIC4gJzxsYWJlbCBpZD0iQWpheENvbW1lbnQnIC4gJGNvbW1lbnQtPklEIC4gJyI+PC9sYWJlbD4nOw0KICAgIH0NCg0KICAgICR6YnAtPnRlbXBsYXRlLT5TZXRUYWdzKCd0aXRsZScsICR6YnAtPnRpdGxlKTsNCiAgICAkemJwLT50ZW1wbGF0ZS0+U2V0VGFncygnYXJ0aWNsZScsICRwb3N0KTsNCiAgICAkemJwLT50ZW1wbGF0ZS0+U2V0VGFncygndHlwZScsICdjb21tZW50Jyk7DQogICAgJHpicC0+dGVtcGxhdGUtPlNldFRhZ3MoJ3BhZ2UnLCAkcGFnZSk7DQogICAgaWYgKCRwYWdlYmFyLT5QYWdlQWxsID09IDEpIHsNCiAgICAgICAgJHBhZ2ViYXIgPSBudWxsOw0KICAgIH0NCg0KICAgICR6YnAtPnRlbXBsYXRlLT5TZXRUYWdzKCdwYWdlYmFyJywgJHBhZ2ViYXIpOw0KICAgICR6YnAtPnRlbXBsYXRlLT5TZXRUYWdzKCdjb21tZW50cycsICRjb21tZW50cyk7DQoNCiAgICAkemJwLT50ZW1wbGF0ZS0+U2V0VGVtcGxhdGUoJHRlbXBsYXRlKTsNCg0KICAgIGZvcmVhY2ggKCRHTE9CQUxTWydob29rcyddWydGaWx0ZXJfUGx1Z2luX1ZpZXdDb21tZW50c19UZW1wbGF0ZSddIGFzICRmcG5hbWUgPT4gJiRmcHNpZ25hbCkgew0KICAgICAgICAkZnByZXR1cm4gPSAkZnBuYW1lKCR6YnAtPnRlbXBsYXRlKTsNCiAgICB9DQoNCiAgICAkcyA9ICR6YnAtPnRlbXBsYXRlLT5PdXRwdXQoKTsNCg0KICAgICRhID0gZXhwbG9kZSgnPGxhYmVsIGlkPSJBamF4Q29tbWVudEJlZ2luIj48L2xhYmVsPicsICRzKTsNCiAgICAkcyA9ICRhWzFdOw0KICAgICRhID0gZXhwbG9kZSgnPGxhYmVsIGlkPSJBamF4Q29tbWVudEVuZCI+PC9sYWJlbD4nLCAkcyk7DQogICAgJHMgPSAkYVswXTsNCg0KICAgIGVjaG8gJHM7DQoNCiAgICByZXR1cm4gdHJ1ZTsNCn0NCg0KLyoqDQogKiDmmL7npLror4TorroNCiAqIEBwYXJhbSBpbnQgJGlkIOivhOiuuklEDQogKi8NCmZ1bmN0aW9uIFZpZXdDb21tZW50KCRpZCkgew0KICAgIGdsb2JhbCAkemJwOw0KDQogICAgJHRlbXBsYXRlID0gJ2NvbW1lbnQnOw0KICAgICRjb21tZW50ID0gJHpicC0+R2V0Q29tbWVudEJ5SUQoJGlkKTsNCiAgICAkcG9zdCA9IG5ldyBQb3N0Ow0KICAgICRwb3N0LT5Mb2FkSW5mb0J5SUQoJGNvbW1lbnQtPkxvZ0lEKTsNCg0KICAgICRjb21tZW50LT5Db250ZW50ID0gVHJhbnNmZXJIVE1MKGh0bWxzcGVjaWFsY2hhcnMoJGNvbW1lbnQtPkNvbnRlbnQpLCAnW2VudGVyXScpIC4gJzxsYWJlbCBpZD0iQWpheENvbW1lbnQnIC4gJGNvbW1lbnQtPklEIC4gJyI+PC9sYWJlbD4nOw0KDQogICAgJHpicC0+dGVtcGxhdGUtPlNldFRhZ3MoJ3RpdGxlJywgJHpicC0+dGl0bGUpOw0KICAgICR6YnAtPnRlbXBsYXRlLT5TZXRUYWdzKCdjb21tZW50JywgJGNvbW1lbnQpOw0KICAgICR6YnAtPnRlbXBsYXRlLT5TZXRUYWdzKCdhcnRpY2xlJywgJHBvc3QpOw0KICAgICR6YnAtPnRlbXBsYXRlLT5TZXRUYWdzKCd0eXBlJywgJ2NvbW1lbnQnKTsNCiAgICAkemJwLT50ZW1wbGF0ZS0+U2V0VGFncygncGFnZScsIDEpOw0KICAgICR6YnAtPnRlbXBsYXRlLT5TZXRUZW1wbGF0ZSgkdGVtcGxhdGUpOw0KDQogICAgZm9yZWFjaCAoJEdMT0JBTFNbJ2hvb2tzJ11bJ0ZpbHRlcl9QbHVnaW5fVmlld0NvbW1lbnRfVGVtcGxhdGUnXSBhcyAkZnBuYW1lID0+ICYkZnBzaWduYWwpIHsNCiAgICAgICAgJGZwcmV0dXJuID0gJGZwbmFtZSgkemJwLT50ZW1wbGF0ZSk7DQogICAgfQ0KDQogICAgJHpicC0+dGVtcGxhdGUtPkRpc3BsYXkoKTsNCg0KICAgIHJldHVybiB0cnVlOw0KfQ0KDQojIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjDQovKioNCiAqIOaPkOS6pOaWh+eroOaVsOaNrg0KICogQGFwaSBGaWx0ZXJfUGx1Z2luX1Bvc3RBcnRpY2xlX0NvcmUNCiAqIEBhcGkgRmlsdGVyX1BsdWdpbl9Qb3N0QXJ0aWNsZV9TdWNjZWVkDQogKiBAcmV0dXJuIGJvb2wNCiAqLw0KZnVuY3Rpb24gUG9zdEFydGljbGUoKSB7DQogICAgZ2xvYmFsICR6YnA7DQogICAgaWYgKCFpc3NldCgkX1BPU1RbJ0lEJ10pKSB7DQogICAgICAgIHJldHVybjsNCiAgICB9DQoNCiAgICBpZiAoaXNzZXQoJF9DT09LSUVbJ3RpbWV6b25lJ10pKSB7DQogICAgICAgICR0eiA9IEdldFZhcnMoJ3RpbWV6b25lJywgJ0NPT0tJRScpOw0KICAgICAgICBpZiAoaXNfbnVtZXJpYygkdHopKSB7DQogICAgICAgICAgICBkYXRlX2RlZmF1bHRfdGltZXpvbmVfc2V0KCdFdGMvR01UJyAuIHNwcmludGYoJyUrZCcsIC0kdHopKTsNCiAgICAgICAgfQ0KICAgICAgICB1bnNldCgkdHopOw0KICAgIH0NCg0KICAgIGlmIChpc3NldCgkX1BPU1RbJ1RhZyddKSkgew0KICAgICAgICAkX1BPU1RbJ1RhZyddID0gVHJhbnNmZXJIVE1MKCRfUE9TVFsnVGFnJ10sICdbbm9zY3JpcHRdJyk7DQogICAgICAgICRfUE9TVFsnVGFnJ10gPSBQb3N0QXJ0aWNsZV9DaGVja1RhZ0FuZENvbnZlcnRJRHRvU3RyaW5nKCRfUE9TVFsnVGFnJ10pOw0KICAgIH0NCiAgICBpZiAoaXNzZXQoJF9QT1NUWydDb250ZW50J10pKSB7DQogICAgICAgICRfUE9TVFsnQ29udGVudCddID0gc3RyX3JlcGxhY2UoJzxociBjbGFzcz0ibW9yZSIgLz4nLCAnPCEtLW1vcmUtLT4nLCAkX1BPU1RbJ0NvbnRlbnQnXSk7DQogICAgICAgICRfUE9TVFsnQ29udGVudCddID0gc3RyX3JlcGxhY2UoJzxociBjbGFzcz0ibW9yZSIvPicsICc8IS0tbW9yZS0tPicsICRfUE9TVFsnQ29udGVudCddKTsNCiAgICAgICAgaWYgKHN0cnBvcygkX1BPU1RbJ0NvbnRlbnQnXSwgJzwhLS1tb3JlLS0+JykgIT09IGZhbHNlKSB7DQogICAgICAgICAgICBpZiAoaXNzZXQoJF9QT1NUWydJbnRybyddKSkgew0KICAgICAgICAgICAgICAgICRfUE9TVFsnSW50cm8nXSA9IEdldFZhbHVlSW5BcnJheShleHBsb2RlKCc8IS0tbW9yZS0tPicsICRfUE9TVFsnQ29udGVudCddKSwgMCk7DQogICAgICAgICAgICB9DQogICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICBpZiAoaXNzZXQoJF9QT1NUWydJbnRybyddKSkgew0KICAgICAgICAgICAgICAgIGlmICgkX1BPU1RbJ0ludHJvJ10gPT0gJycgfHwgKHN0cmlwb3MoJF9QT1NUWydJbnRybyddLCAnPCEtLWF1dG9pbnRyby0tPicpICE9PSBmYWxzZSkpIHsNCiAgICAgICAgICAgICAgICAgICAgLy8kX1BPU1RbJ0ludHJvJ10gPSBTdWJTdHJVVEY4X0h0bWwoJF9QT1NUWydDb250ZW50J10sIChpbnQpIHN0cnBvcygkX1BPU1RbJ0NvbnRlbnQnXSwgJz4nKSArIChpbnQpICR6YnAtPm9wdGlvblsnWkNfQVJUSUNMRV9FWENFUlBUX01BWCddKTsNCiAgICAgICAgICAgICAgICAgICAgLy/mlLnnuq9IVE1M5pGY6KaBDQogICAgICAgICAgICAgICAgICAgICRfUE9TVFsnSW50cm8nXSA9IFRyYW5zZmVySFRNTCgkX1BPU1RbJ0NvbnRlbnQnXSwgIltub2h0bWxdIik7DQogICAgICAgICAgICAgICAgICAgICRfUE9TVFsnSW50cm8nXSA9IFN1YlN0clVURjhfSHRtbCgkX1BPU1RbJ0ludHJvJ10sIChpbnQpICR6YnAtPm9wdGlvblsnWkNfQVJUSUNMRV9FWENFUlBUX01BWCddKTsNCiAgICAgICAgICAgICAgICAgICAgJF9QT1NUWydJbnRybyddIC49ICc8IS0tYXV0b2ludHJvLS0+JzsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgJF9QT1NUWydJbnRybyddID0gQ2xvc2VUYWdzKCRfUE9TVFsnSW50cm8nXSk7DQogICAgICAgICAgICB9DQogICAgICAgIH0NCiAgICB9DQoNCiAgICBpZiAoIWlzc2V0KCRfUE9TVFsnQXV0aG9ySUQnXSkpIHsNCiAgICAgICAgJF9QT1NUWydBdXRob3JJRCddID0gJHpicC0+dXNlci0+SUQ7DQogICAgfSBlbHNlIHsNCiAgICAgICAgaWYgKCgkX1BPU1RbJ0F1dGhvcklEJ10gIT0gJHpicC0+dXNlci0+SUQpICYmICghJHpicC0+Q2hlY2tSaWdodHMoJ0FydGljbGVBbGwnKSkpIHsNCiAgICAgICAgICAgICRfUE9TVFsnQXV0aG9ySUQnXSA9ICR6YnAtPnVzZXItPklEOw0KICAgICAgICB9DQogICAgICAgIGlmICgkX1BPU1RbJ0F1dGhvcklEJ10gPT0gMCkgew0KICAgICAgICAgICAgJF9QT1NUWydBdXRob3JJRCddID0gJHpicC0+dXNlci0+SUQ7DQogICAgICAgIH0NCg0KICAgIH0NCg0KICAgIGlmIChpc3NldCgkX1BPU1RbJ0FsaWFzJ10pKSB7DQogICAgICAgICRfUE9TVFsnQWxpYXMnXSA9IFRyYW5zZmVySFRNTCgkX1BPU1RbJ0FsaWFzJ10sICdbbm9zY3JpcHRdJyk7DQogICAgfQ0KDQogICAgaWYgKGlzc2V0KCRfUE9TVFsnUG9zdFRpbWUnXSkpIHsNCiAgICAgICAgJF9QT1NUWydQb3N0VGltZSddID0gc3RydG90aW1lKCRfUE9TVFsnUG9zdFRpbWUnXSk7DQogICAgfQ0KDQogICAgaWYgKCEkemJwLT5DaGVja1JpZ2h0cygnQXJ0aWNsZUFsbCcpKSB7DQogICAgICAgIHVuc2V0KCRfUE9TVFsnSXNUb3AnXSk7DQogICAgfQ0KDQogICAgJGFydGljbGUgPSBuZXcgUG9zdCgpOw0KICAgICRwcmVfYXV0aG9yID0gbnVsbDsNCiAgICAkcHJlX3RhZyA9IG51bGw7DQogICAgJHByZV9jYXRlZ29yeSA9IG51bGw7DQogICAgJHByZV9pc3RvcCA9IG51bGw7DQogICAgJHByZV9zdGF0dXMgPSBudWxsOw0KICAgICRvcmlnX2lkID0gMDsNCg0KICAgIGlmIChHZXRWYXJzKCdJRCcsICdQT1NUJykgPT0gMCkgew0KICAgICAgICBpZiAoISR6YnAtPkNoZWNrUmlnaHRzKCdBcnRpY2xlUHViJykpIHsNCiAgICAgICAgICAgICRfUE9TVFsnU3RhdHVzJ10gPSBaQ19QT1NUX1NUQVRVU19BVURJVElORzsNCiAgICAgICAgfQ0KICAgIH0gZWxzZSB7DQogICAgICAgICRhcnRpY2xlLT5Mb2FkSW5mb0J5SUQoR2V0VmFycygnSUQnLCAnUE9TVCcpKTsNCiAgICAgICAgaWYgKCgkYXJ0aWNsZS0+QXV0aG9ySUQgIT0gJHpicC0+dXNlci0+SUQpICYmICghJHpicC0+Q2hlY2tSaWdodHMoJ0FydGljbGVBbGwnKSkpIHsNCiAgICAgICAgICAgICR6YnAtPlNob3dFcnJvcig2LCBfX0ZJTEVfXywgX19MSU5FX18pOw0KICAgICAgICB9DQogICAgICAgIGlmICgoISR6YnAtPkNoZWNrUmlnaHRzKCdBcnRpY2xlUHViJykpICYmICgkYXJ0aWNsZS0+U3RhdHVzID09IFpDX1BPU1RfU1RBVFVTX0FVRElUSU5HKSkgew0KICAgICAgICAgICAgJF9QT1NUWydTdGF0dXMnXSA9IFpDX1BPU1RfU1RBVFVTX0FVRElUSU5HOw0KICAgICAgICB9DQogICAgICAgICRvcmlnX2lkID0gJGFydGljbGUtPklEOw0KICAgICAgICAkcHJlX2F1dGhvciA9ICRhcnRpY2xlLT5BdXRob3JJRDsNCiAgICAgICAgJHByZV90YWcgPSAkYXJ0aWNsZS0+VGFnOw0KICAgICAgICAkcHJlX2NhdGVnb3J5ID0gJGFydGljbGUtPkNhdGVJRDsNCiAgICAgICAgJHByZV9pc3RvcCA9ICRhcnRpY2xlLT5Jc1RvcDsNCiAgICAgICAgJHByZV9zdGF0dXMgPSAkYXJ0aWNsZS0+U3RhdHVzOw0KICAgIH0NCg0KICAgIGZvcmVhY2ggKCR6YnAtPmRhdGFpbmZvWydQb3N0J10gYXMgJGtleSA9PiAkdmFsdWUpIHsNCiAgICAgICAgaWYgKCRrZXkgPT0gJ0lEJyB8fCAka2V5ID09ICdNZXRhJykge2NvbnRpbnVlO30NCiAgICAgICAgaWYgKGlzc2V0KCRfUE9TVFska2V5XSkpIHsNCiAgICAgICAgICAgICRhcnRpY2xlLT4ka2V5ID0gR2V0VmFycygka2V5LCAnUE9TVCcpOw0KICAgICAgICB9DQogICAgfQ0KDQogICAgJGFydGljbGUtPlR5cGUgPSBaQ19QT1NUX1RZUEVfQVJUSUNMRTsNCg0KICAgIGlmIChpc3NldCgkX1BPU1RbJ0lzVG9wJ10pKSB7DQogICAgICAgIGlmICgxID09ICRfUE9TVFsnSXNUb3AnXSkgew0KICAgICAgICAgICAgJGFydGljbGUtPlRvcFR5cGUgPSAkX1BPU1RbJ0lzdG9wVHlwZSddOw0KICAgICAgICB9DQogICAgICAgIGlmICgwID09ICRfUE9TVFsnSXNUb3AnXSkgew0KICAgICAgICAgICAgJGFydGljbGUtPlRvcFR5cGUgPSBudWxsOw0KICAgICAgICB9DQogICAgfQ0KDQogICAgZm9yZWFjaCAoJEdMT0JBTFNbJ2hvb2tzJ11bJ0ZpbHRlcl9QbHVnaW5fUG9zdEFydGljbGVfQ29yZSddIGFzICRmcG5hbWUgPT4gJiRmcHNpZ25hbCkgew0KICAgICAgICAkZnBuYW1lKCRhcnRpY2xlKTsNCiAgICB9DQoNCiAgICBGaWx0ZXJQb3N0KCRhcnRpY2xlKTsNCiAgICBGaWx0ZXJNZXRhKCRhcnRpY2xlKTsNCg0KICAgICRhcnRpY2xlLT5TYXZlKCk7DQoNCiAgICAvL+abtOaWsOe7n+iuoeS/oeaBrw0KICAgICRwcmVfYXJyYXlUYWcgPSAkemJwLT5Mb2FkVGFnc0J5SURTdHJpbmcoJHByZV90YWcpOw0KICAgICRub3dfYXJyYXlUYWcgPSAkemJwLT5Mb2FkVGFnc0J5SURTdHJpbmcoJGFydGljbGUtPlRhZyk7DQogICAgJHByZV9hcnJheSA9ICRub3dfYXJyYXkgPSBhcnJheSgpOw0KICAgIGZvcmVhY2ggKCRwcmVfYXJyYXlUYWcgYXMgJHRhZykgeyRwcmVfYXJyYXlbXSA9ICR0YWctPklEO30NCiAgICBmb3JlYWNoICgkbm93X2FycmF5VGFnIGFzICR0YWcpIHskbm93X2FycmF5W10gPSAkdGFnLT5JRDt9DQogICAgJGRlbF9hcnJheSA9IGFycmF5X2RpZmYoJHByZV9hcnJheSwgJG5vd19hcnJheSk7DQogICAgJGFkZF9hcnJheSA9IGFycmF5X2RpZmYoJG5vd19hcnJheSwgJHByZV9hcnJheSk7DQogICAgJGRlbF9zdHJpbmcgPSAkemJwLT5Db252ZXJ0VGFnSUR0b1N0cmluZygkZGVsX2FycmF5KTsNCiAgICAkYWRkX3N0cmluZyA9ICR6YnAtPkNvbnZlcnRUYWdJRHRvU3RyaW5nKCRhZGRfYXJyYXkpOw0KICAgIGlmICgkZGVsX3N0cmluZykgew0KICAgICAgICBDb3VudFRhZ0FycmF5U3RyaW5nKCRkZWxfc3RyaW5nLCAtMSwgJGFydGljbGUtPklEKTsNCiAgICB9DQogICAgaWYgKCRhZGRfc3RyaW5nKSB7DQogICAgICAgIENvdW50VGFnQXJyYXlTdHJpbmcoJGFkZF9zdHJpbmcsICsxLCAkYXJ0aWNsZS0+SUQpOw0KICAgIH0NCiAgICBpZiAoJHByZV9hdXRob3IgIT0gJGFydGljbGUtPkF1dGhvcklEKSB7DQogICAgICAgIGlmICgkcHJlX2F1dGhvciA+IDApIHsNCiAgICAgICAgICAgIENvdW50TWVtYmVyQXJyYXkoYXJyYXkoJHByZV9hdXRob3IpLCBhcnJheSgtMSwgMCwgMCwgMCkpOw0KICAgICAgICB9DQoNCiAgICAgICAgQ291bnRNZW1iZXJBcnJheShhcnJheSgkYXJ0aWNsZS0+QXV0aG9ySUQpLCBhcnJheSgrMSwgMCwgMCwgMCkpOw0KICAgIH0NCiAgICBpZiAoJHByZV9jYXRlZ29yeSAhPSAkYXJ0aWNsZS0+Q2F0ZUlEKSB7DQogICAgICAgIGlmICgkcHJlX2NhdGVnb3J5ID4gMCkgew0KICAgICAgICAgICAgQ291bnRDYXRlZ29yeUFycmF5KGFycmF5KCRwcmVfY2F0ZWdvcnkpLCAtMSk7DQogICAgICAgIH0NCg0KICAgICAgICBDb3VudENhdGVnb3J5QXJyYXkoYXJyYXkoJGFydGljbGUtPkNhdGVJRCksICsxKTsNCiAgICB9DQogICAgaWYgKCR6YnAtPm9wdGlvblsnWkNfTEFSR0VfREFUQSddID09IGZhbHNlKSB7DQogICAgICAgIENvdW50UG9zdEFycmF5KGFycmF5KCRhcnRpY2xlLT5JRCkpOw0KICAgIH0NCiAgICBpZiAoJG9yaWdfaWQgPT0gMCAmJiAkYXJ0aWNsZS0+SXNUb3AgPT0gMCAmJiAkYXJ0aWNsZS0+U3RhdHVzID09IFpDX1BPU1RfU1RBVFVTX1BVQkxJQykgew0KICAgICAgICBDb3VudE5vcm1hbEFydGljbGVOdW1zKCsxKTsNCiAgICB9IGVsc2VpZiAoJG9yaWdfaWQgPiAwKSB7DQogICAgICAgIGlmICgoJHByZV9pc3RvcCA9PSAwICYmICRwcmVfc3RhdHVzID09IDApICYmICgkYXJ0aWNsZS0+SXNUb3AgIT0gMCB8fCAkYXJ0aWNsZS0+U3RhdHVzICE9IDApKSB7DQogICAgICAgICAgICBDb3VudE5vcm1hbEFydGljbGVOdW1zKC0xKTsNCiAgICAgICAgfQ0KICAgICAgICBpZiAoKCRwcmVfaXN0b3AgIT0gMCB8fCAkcHJlX3N0YXR1cyAhPSAwKSAmJiAoJGFydGljbGUtPklzVG9wID09IDAgJiYgJGFydGljbGUtPlN0YXR1cyA9PSAwKSkgew0KICAgICAgICAgICAgQ291bnROb3JtYWxBcnRpY2xlTnVtcygrMSk7DQogICAgICAgIH0NCiAgICB9DQogICAgaWYgKCRhcnRpY2xlLT5Jc1RvcCA9PSB0cnVlICYmICRhcnRpY2xlLT5TdGF0dXMgPT0gWkNfUE9TVF9TVEFUVVNfUFVCTElDKSB7DQogICAgICAgIENvdW50VG9wQXJ0aWNsZSgkYXJ0aWNsZS0+SUQsIG51bGwpOw0KICAgIH0gZWxzZSB7DQogICAgICAgIENvdW50VG9wQXJ0aWNsZShudWxsLCAkYXJ0aWNsZS0+SUQpOw0KICAgIH0NCg0KICAgICR6YnAtPkFkZEJ1aWxkTW9kdWxlKCdwcmV2aW91cycpOw0KICAgICR6YnAtPkFkZEJ1aWxkTW9kdWxlKCdjYWxlbmRhcicpOw0KICAgICR6YnAtPkFkZEJ1aWxkTW9kdWxlKCdjb21tZW50cycpOw0KICAgICR6YnAtPkFkZEJ1aWxkTW9kdWxlKCdhcmNoaXZlcycpOw0KICAgICR6YnAtPkFkZEJ1aWxkTW9kdWxlKCd0YWdzJyk7DQogICAgJHpicC0+QWRkQnVpbGRNb2R1bGUoJ2F1dGhvcnMnKTsNCg0KICAgIGZvcmVhY2ggKCRHTE9CQUxTWydob29rcyddWydGaWx0ZXJfUGx1Z2luX1Bvc3RBcnRpY2xlX1N1Y2NlZWQnXSBhcyAkZnBuYW1lID0+ICYkZnBzaWduYWwpIHsNCiAgICAgICAgJGZwbmFtZSgkYXJ0aWNsZSk7DQogICAgfQ0KDQogICAgcmV0dXJuIHRydWU7DQp9DQoNCi8qKg0KICog5Yig6Zmk5paH56ugDQogKiBAcmV0dXJuIGJvb2wNCiAqLw0KZnVuY3Rpb24gRGVsQXJ0aWNsZSgpIHsNCiAgICBnbG9iYWwgJHpicDsNCg0KICAgICRpZCA9IChpbnQpIEdldFZhcnMoJ2lkJywgJ0dFVCcpOw0KDQogICAgJGFydGljbGUgPSBuZXcgUG9zdCgpOw0KICAgICRhcnRpY2xlLT5Mb2FkSW5mb0J5SUQoJGlkKTsNCiAgICBpZiAoJGFydGljbGUtPklEID4gMCkgew0KDQogICAgICAgIGlmICghJHpicC0+Q2hlY2tSaWdodHMoJ0FydGljbGVBbGwnKSAmJiAkYXJ0aWNsZS0+QXV0aG9ySUQgIT0gJHpicC0+dXNlci0+SUQpIHsNCiAgICAgICAgICAgICR6YnAtPlNob3dFcnJvcig2LCBfX0ZJTEVfXywgX19MSU5FX18pOw0KICAgICAgICB9DQoNCiAgICAgICAgJHByZV9hdXRob3IgPSAkYXJ0aWNsZS0+QXV0aG9ySUQ7DQogICAgICAgICRwcmVfdGFnID0gJGFydGljbGUtPlRhZzsNCiAgICAgICAgJHByZV9jYXRlZ29yeSA9ICRhcnRpY2xlLT5DYXRlSUQ7DQogICAgICAgICRwcmVfaXN0b3AgPSAkYXJ0aWNsZS0+SXNUb3A7DQogICAgICAgICRwcmVfc3RhdHVzID0gJGFydGljbGUtPlN0YXR1czsNCg0KICAgICAgICAkYXJ0aWNsZS0+RGVsKCk7DQoNCiAgICAgICAgRGVsQXJ0aWNsZV9Db21tZW50cygkYXJ0aWNsZS0+SUQpOw0KDQogICAgICAgIENvdW50VGFnQXJyYXlTdHJpbmcoJHByZV90YWcsIC0xLCAkYXJ0aWNsZS0+SUQpOw0KICAgICAgICBDb3VudE1lbWJlckFycmF5KGFycmF5KCRwcmVfYXV0aG9yKSwgYXJyYXkoLTEsIDAsIDAsIDApKTsNCiAgICAgICAgQ291bnRDYXRlZ29yeUFycmF5KGFycmF5KCRwcmVfY2F0ZWdvcnkpLCAtMSk7DQogICAgICAgIGlmICgoJHByZV9pc3RvcCA9PSAwICYmICRwcmVfc3RhdHVzID09IDApKSB7DQogICAgICAgICAgICBDb3VudE5vcm1hbEFydGljbGVOdW1zKC0xKTsNCiAgICAgICAgfQ0KICAgICAgICBpZiAoJGFydGljbGUtPklzVG9wID09IHRydWUpIHsNCiAgICAgICAgICAgIENvdW50VG9wQXJ0aWNsZShudWxsLCAkYXJ0aWNsZS0+SUQpOw0KICAgICAgICB9DQoNCiAgICAgICAgJHpicC0+QWRkQnVpbGRNb2R1bGUoJ3ByZXZpb3VzJyk7DQogICAgICAgICR6YnAtPkFkZEJ1aWxkTW9kdWxlKCdjYWxlbmRhcicpOw0KICAgICAgICAkemJwLT5BZGRCdWlsZE1vZHVsZSgnY29tbWVudHMnKTsNCiAgICAgICAgJHpicC0+QWRkQnVpbGRNb2R1bGUoJ2FyY2hpdmVzJyk7DQogICAgICAgICR6YnAtPkFkZEJ1aWxkTW9kdWxlKCd0YWdzJyk7DQogICAgICAgICR6YnAtPkFkZEJ1aWxkTW9kdWxlKCdhdXRob3JzJyk7DQoNCiAgICAgICAgZm9yZWFjaCAoJEdMT0JBTFNbJ2hvb2tzJ11bJ0ZpbHRlcl9QbHVnaW5fRGVsQXJ0aWNsZV9TdWNjZWVkJ10gYXMgJGZwbmFtZSA9PiAmJGZwc2lnbmFsKSB7DQogICAgICAgICAgICAkZnBuYW1lKCRhcnRpY2xlKTsNCiAgICAgICAgfQ0KDQogICAgICAgIHJldHVybiB0cnVlOw0KDQogICAgfQ0KDQp9DQoNCi8qKg0KICog5o+Q5Lqk5paH56ug5pWw5o2u5pe25qOA5p+ldGFn5pWw5o2u77yM5bm25bCG5pawdGFnc+i9rOS4uuagh+WHhuagvOW8j+i/lOWbng0KICogQHBhcmFtIHN0cmluZyAkdGFnbmFtZXN0cmluZyDmj5DkuqTnmoTmlofnq6B0YWfmlbDmja7vvIzlj6/ku6U6LO+8jOOAgeetieespuWPt+WIhumalA0KICogQHJldHVybiBzdHJpbmcg6L+U5Zue5aaCJ3sxfXsyfXszfXs0fSfnmoTlrZfnrKbkuLINCiAqLw0KZnVuY3Rpb24gUG9zdEFydGljbGVfQ2hlY2tUYWdBbmRDb252ZXJ0SUR0b1N0cmluZygkdGFnbmFtZXN0cmluZykgew0KICAgIGdsb2JhbCAkemJwOw0KICAgICRzID0gJyc7DQogICAgJHRhZ25hbWVzdHJpbmcgPSBzdHJfcmVwbGFjZSgnOycsICcsJywgJHRhZ25hbWVzdHJpbmcpOw0KICAgICR0YWduYW1lc3RyaW5nID0gc3RyX3JlcGxhY2UoJ++8jCcsICcsJywgJHRhZ25hbWVzdHJpbmcpOw0KICAgICR0YWduYW1lc3RyaW5nID0gc3RyX3JlcGxhY2UoJ+OAgScsICcsJywgJHRhZ25hbWVzdHJpbmcpOw0KICAgICR0YWduYW1lc3RyaW5nID0gc3RyaXBfdGFncygkdGFnbmFtZXN0cmluZyk7DQogICAgJHRhZ25hbWVzdHJpbmcgPSB0cmltKCR0YWduYW1lc3RyaW5nKTsNCiAgICBpZiAoJHRhZ25hbWVzdHJpbmcgPT0gJycpIHsNCiAgICAgICAgcmV0dXJuICcnOw0KICAgIH0NCg0KICAgIGlmICgkdGFnbmFtZXN0cmluZyA9PSAnLCcpIHsNCiAgICAgICAgcmV0dXJuICcnOw0KICAgIH0NCg0KICAgICRhID0gZXhwbG9kZSgnLCcsICR0YWduYW1lc3RyaW5nKTsNCiAgICAkYiA9IGFycmF5KCk7DQogICAgZm9yZWFjaCAoJGEgYXMgJiR2YWx1ZSkgew0KICAgICAgICAkdmFsdWUgPSB0cmltKCR2YWx1ZSk7DQogICAgICAgIGlmICgkdmFsdWUpIHsNCiAgICAgICAgICAgICRiW10gPSAkdmFsdWU7DQogICAgICAgIH0NCg0KICAgIH0NCiAgICAkYiA9IGFycmF5X3VuaXF1ZSgkYik7DQogICAgJGIgPSBhcnJheV9zbGljZSgkYiwgMCwgMjApOw0KICAgICRjID0gYXJyYXkoKTsNCg0KICAgICR0ID0gJHpicC0+TG9hZFRhZ3NCeU5hbWVTdHJpbmcoJHRhZ25hbWVzdHJpbmcpOw0KICAgIGZvcmVhY2ggKCR0IGFzICRrZXkgPT4gJHZhbHVlKSB7DQogICAgICAgICRjW10gPSAka2V5Ow0KICAgIH0NCiAgICAkZCA9IGFycmF5X2RpZmYoJGIsICRjKTsNCiAgICBpZiAoJHpicC0+Q2hlY2tSaWdodHMoJ1RhZ05ldycpKSB7DQogICAgICAgIGZvcmVhY2ggKCRkIGFzICRrZXkpIHsNCiAgICAgICAgICAgICR0YWcgPSBuZXcgVGFnOw0KICAgICAgICAgICAgJHRhZy0+TmFtZSA9ICRrZXk7DQoNCiAgICAgICAgICAgIGZvcmVhY2ggKCRHTE9CQUxTWydob29rcyddWydGaWx0ZXJfUGx1Z2luX1Bvc3RUYWdfQ29yZSddIGFzICRmcG5hbWUgPT4gJiRmcHNpZ25hbCkgew0KICAgICAgICAgICAgICAgICRmcG5hbWUoJHRhZyk7DQogICAgICAgICAgICB9DQoNCiAgICAgICAgICAgIEZpbHRlclRhZygkdGFnKTsNCiAgICAgICAgICAgICR0YWctPlNhdmUoKTsNCiAgICAgICAgICAgICR6YnAtPnRhZ3NbJHRhZy0+SURdID0gJHRhZzsNCiAgICAgICAgICAgICR6YnAtPnRhZ3NieW5hbWVbJHRhZy0+TmFtZV0gPSAmJHpicC0+dGFnc1skdGFnLT5JRF07DQoNCiAgICAgICAgICAgIGZvcmVhY2ggKCRHTE9CQUxTWydob29rcyddWydGaWx0ZXJfUGx1Z2luX1Bvc3RUYWdfU3VjY2VlZCddIGFzICRmcG5hbWUgPT4gJiRmcHNpZ25hbCkgew0KICAgICAgICAgICAgICAgICRmcG5hbWUoJHRhZyk7DQogICAgICAgICAgICB9DQoNCiAgICAgICAgfQ0KICAgIH0NCg0KICAgIGZvcmVhY2ggKCRiIGFzICRrZXkpIHsNCiAgICAgICAgaWYgKCFpc3NldCgkemJwLT50YWdzYnluYW1lWyRrZXldKSkgew0KICAgICAgICAgICAgY29udGludWU7DQogICAgICAgIH0NCg0KICAgICAgICAkcyAuPSAneycgLiAkemJwLT50YWdzYnluYW1lWyRrZXldLT5JRCAuICd9JzsNCiAgICB9DQoNCiAgICByZXR1cm4gJHM7DQp9DQoNCi8qKg0KICog5Yig6Zmk5paH56ug5LiL5omA5pyJ6K+E6K66DQogKiBAcGFyYW0gaW50ICRpZCDmlofnq6BJRA0KICovDQpmdW5jdGlvbiBEZWxBcnRpY2xlX0NvbW1lbnRzKCRpZCkgew0KICAgIGdsb2JhbCAkemJwOw0KDQogICAgJHNxbCA9ICR6YnAtPmRiLT5zcWwtPkRlbGV0ZSgkemJwLT50YWJsZVsnQ29tbWVudCddLCBhcnJheShhcnJheSgnPScsICdjb21tX0xvZ0lEJywgJGlkKSkpOw0KICAgICR6YnAtPmRiLT5EZWxldGUoJHNxbCk7DQp9DQoNCiMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMNCi8qKg0KICog5o+Q5Lqk6aG16Z2i5pWw5o2uDQogKiBAcmV0dXJuIGJvb2wNCiAqLw0KZnVuY3Rpb24gUG9zdFBhZ2UoKSB7DQogICAgZ2xvYmFsICR6YnA7DQogICAgaWYgKCFpc3NldCgkX1BPU1RbJ0lEJ10pKSB7DQogICAgICAgIHJldHVybjsNCiAgICB9DQoNCiAgICBpZiAoaXNzZXQoJF9QT1NUWydQb3N0VGltZSddKSkgew0KICAgICAgICAkX1BPU1RbJ1Bvc3RUaW1lJ10gPSBzdHJ0b3RpbWUoJF9QT1NUWydQb3N0VGltZSddKTsNCiAgICB9DQoNCiAgICBpZiAoIWlzc2V0KCRfUE9TVFsnQXV0aG9ySUQnXSkpIHsNCiAgICAgICAgJF9QT1NUWydBdXRob3JJRCddID0gJHpicC0+dXNlci0+SUQ7DQogICAgfSBlbHNlIHsNCiAgICAgICAgaWYgKCgkX1BPU1RbJ0F1dGhvcklEJ10gIT0gJHpicC0+dXNlci0+SUQpICYmICghJHpicC0+Q2hlY2tSaWdodHMoJ1BhZ2VBbGwnKSkpIHsNCiAgICAgICAgICAgICRfUE9TVFsnQXV0aG9ySUQnXSA9ICR6YnAtPnVzZXItPklEOw0KICAgICAgICB9DQogICAgfQ0KDQogICAgaWYgKGlzc2V0KCRfUE9TVFsnQWxpYXMnXSkpIHsNCiAgICAgICAgJF9QT1NUWydBbGlhcyddID0gVHJhbnNmZXJIVE1MKCRfUE9TVFsnQWxpYXMnXSwgJ1tub3NjcmlwdF0nKTsNCiAgICB9DQoNCiAgICAkYXJ0aWNsZSA9IG5ldyBQb3N0KCk7DQogICAgJHByZV9hdXRob3IgPSBudWxsOw0KICAgICRvcmlnX2lkID0gMDsNCiAgICBpZiAoR2V0VmFycygnSUQnLCAnUE9TVCcpID09IDApIHsNCiAgICB9IGVsc2Ugew0KICAgICAgICAkYXJ0aWNsZS0+TG9hZEluZm9CeUlEKEdldFZhcnMoJ0lEJywgJ1BPU1QnKSk7DQogICAgICAgIGlmICgoJGFydGljbGUtPkF1dGhvcklEICE9ICR6YnAtPnVzZXItPklEKSAmJiAoISR6YnAtPkNoZWNrUmlnaHRzKCdQYWdlQWxsJykpKSB7DQogICAgICAgICAgICAkemJwLT5TaG93RXJyb3IoNiwgX19GSUxFX18sIF9fTElORV9fKTsNCiAgICAgICAgfQ0KICAgICAgICAkcHJlX2F1dGhvciA9ICRhcnRpY2xlLT5BdXRob3JJRDsNCiAgICAgICAgJG9yaWdfaWQgPSAkYXJ0aWNsZS0+SUQ7DQogICAgfQ0KDQogICAgZm9yZWFjaCAoJHpicC0+ZGF0YWluZm9bJ1Bvc3QnXSBhcyAka2V5ID0+ICR2YWx1ZSkgew0KICAgICAgICBpZiAoJGtleSA9PSAnSUQnIHx8ICRrZXkgPT0gJ01ldGEnKSB7Y29udGludWU7fQ0KICAgICAgICBpZiAoaXNzZXQoJF9QT1NUWyRrZXldKSkgew0KICAgICAgICAgICAgJGFydGljbGUtPiRrZXkgPSBHZXRWYXJzKCRrZXksICdQT1NUJyk7DQogICAgICAgIH0NCiAgICB9DQoNCiAgICAkYXJ0aWNsZS0+VHlwZSA9IFpDX1BPU1RfVFlQRV9QQUdFOw0KDQogICAgZm9yZWFjaCAoJEdMT0JBTFNbJ2hvb2tzJ11bJ0ZpbHRlcl9QbHVnaW5fUG9zdFBhZ2VfQ29yZSddIGFzICRmcG5hbWUgPT4gJiRmcHNpZ25hbCkgew0KICAgICAgICAkZnBuYW1lKCRhcnRpY2xlKTsNCiAgICB9DQoNCiAgICBGaWx0ZXJQb3N0KCRhcnRpY2xlKTsNCiAgICBGaWx0ZXJNZXRhKCRhcnRpY2xlKTsNCg0KICAgICRhcnRpY2xlLT5TYXZlKCk7DQoNCiAgICBpZiAoJHByZV9hdXRob3IgIT0gJGFydGljbGUtPkF1dGhvcklEKSB7DQogICAgICAgIGlmICgkcHJlX2F1dGhvciA+IDApIHsNCiAgICAgICAgICAgIENvdW50TWVtYmVyQXJyYXkoYXJyYXkoJHByZV9hdXRob3IpLCBhcnJheSgwLCAtMSwgMCwgMCkpOw0KICAgICAgICB9DQoNCiAgICAgICAgQ291bnRNZW1iZXJBcnJheShhcnJheSgkYXJ0aWNsZS0+QXV0aG9ySUQpLCBhcnJheSgwLCArMSwgMCwgMCkpOw0KICAgIH0NCiAgICBpZiAoJHpicC0+b3B0aW9uWydaQ19MQVJHRV9EQVRBJ10gPT0gZmFsc2UpIHsNCiAgICAgICAgQ291bnRQb3N0QXJyYXkoYXJyYXkoJGFydGljbGUtPklEKSk7DQogICAgfQ0KDQogICAgJHpicC0+QWRkQnVpbGRNb2R1bGUoJ2NvbW1lbnRzJyk7DQoNCiAgICBpZiAoR2V0VmFycygnQWRkTmF2YmFyJywgJ1BPU1QnKSA9PSAwKSB7DQogICAgICAgICR6YnAtPkRlbEl0ZW1Ub05hdmJhcigncGFnZScsICRhcnRpY2xlLT5JRCk7DQogICAgfQ0KDQogICAgaWYgKEdldFZhcnMoJ0FkZE5hdmJhcicsICdQT1NUJykgPT0gMSkgew0KICAgICAgICAkemJwLT5BZGRJdGVtVG9OYXZiYXIoJ3BhZ2UnLCAkYXJ0aWNsZS0+SUQsICRhcnRpY2xlLT5UaXRsZSwgJGFydGljbGUtPlVybCk7DQogICAgfQ0KDQogICAgZm9yZWFjaCAoJEdMT0JBTFNbJ2hvb2tzJ11bJ0ZpbHRlcl9QbHVnaW5fUG9zdFBhZ2VfU3VjY2VlZCddIGFzICRmcG5hbWUgPT4gJiRmcHNpZ25hbCkgew0KICAgICAgICAkZnBuYW1lKCRhcnRpY2xlKTsNCiAgICB9DQoNCiAgICByZXR1cm4gdHJ1ZTsNCn0NCg0KLyoqDQogKiDliKDpmaTpobXpnaINCiAqIEByZXR1cm4gYm9vbA0KICovDQpmdW5jdGlvbiBEZWxQYWdlKCkgew0KICAgIGdsb2JhbCAkemJwOw0KDQogICAgJGlkID0gKGludCkgR2V0VmFycygnaWQnLCAnR0VUJyk7DQoNCiAgICAkYXJ0aWNsZSA9IG5ldyBQb3N0KCk7DQogICAgJGFydGljbGUtPkxvYWRJbmZvQnlJRCgkaWQpOw0KICAgIGlmICgkYXJ0aWNsZS0+SUQgPiAwKSB7DQoNCiAgICAgICAgaWYgKCEkemJwLT5DaGVja1JpZ2h0cygnUGFnZUFsbCcpICYmICRhcnRpY2xlLT5BdXRob3JJRCAhPSAkemJwLT51c2VyLT5JRCkgew0KICAgICAgICAgICAgJHpicC0+U2hvd0Vycm9yKDYsIF9fRklMRV9fLCBfX0xJTkVfXyk7DQogICAgICAgIH0NCg0KICAgICAgICAkcHJlX2F1dGhvciA9ICRhcnRpY2xlLT5BdXRob3JJRDsNCg0KICAgICAgICAkYXJ0aWNsZS0+RGVsKCk7DQoNCiAgICAgICAgRGVsQXJ0aWNsZV9Db21tZW50cygkYXJ0aWNsZS0+SUQpOw0KDQogICAgICAgIENvdW50TWVtYmVyQXJyYXkoYXJyYXkoJHByZV9hdXRob3IpLCBhcnJheSgwLCAtMSwgMCwgMCkpOw0KDQogICAgICAgICR6YnAtPkFkZEJ1aWxkTW9kdWxlKCdjb21tZW50cycpOw0KDQogICAgICAgICR6YnAtPkRlbEl0ZW1Ub05hdmJhcigncGFnZScsICRhcnRpY2xlLT5JRCk7DQoNCiAgICAgICAgZm9yZWFjaCAoJEdMT0JBTFNbJ2hvb2tzJ11bJ0ZpbHRlcl9QbHVnaW5fRGVsUGFnZV9TdWNjZWVkJ10gYXMgJGZwbmFtZSA9PiAmJGZwc2lnbmFsKSB7DQogICAgICAgICAgICAkZnBuYW1lKCRhcnRpY2xlKTsNCiAgICAgICAgfQ0KICAgIH0gZWxzZSB7DQoNCiAgICB9DQoNCiAgICByZXR1cm4gdHJ1ZTsNCn0NCg0KIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIw0KLyoqDQogKiDmj5DkuqTor4TorroNCiAqIEByZXR1cm4gYm9vbA0KICovDQpmdW5jdGlvbiBQb3N0Q29tbWVudCgpIHsNCiAgICBnbG9iYWwgJHpicDsNCg0KICAgICRpc0FqYXggPSBHZXRWYXJzKCdpc2FqYXgnLCAnUE9TVCcpOw0KICAgICRyZXR1cm5Kc29uID0gR2V0VmFycygnZm9ybWF0JywgJ1BPU1QnKSA9PSAnanNvbic7DQogICAgJHJldHVybkNvbW1lbnRXaGl0ZUxpc3QgPSBhcnJheSgNCiAgICAgICAgJ0lEJyA9PiBudWxsLA0KICAgICAgICAnQ29udGVudCcgPT4gbnVsbCwNCiAgICAgICAgJ0xvZ0lkJyA9PiBudWxsLA0KICAgICAgICAnTmFtZScgPT4gbnVsbCwNCiAgICAgICAgJ1BhcmVudElEJyA9PiBudWxsLA0KICAgICAgICAnUG9zdFRpbWUnID0+IG51bGwsDQogICAgICAgICdIb21lUGFnZScgPT4gbnVsbCwNCiAgICAgICAgJ0VtYWlsJyA9PiBudWxsLA0KICAgICAgICAnQXV0aG9ySUQnID0+IG51bGwsDQogICAgKTsNCg0KICAgICRfUE9TVFsnTG9nSUQnXSA9ICRfR0VUWydwb3N0aWQnXTsNCg0KICAgIGlmICgkemJwLT5WYWxpZENtdEtleSgkX0dFVFsncG9zdGlkJ10sICRfR0VUWydrZXknXSkgPT0gZmFsc2UpIHsNCiAgICAgICAgJHpicC0+U2hvd0Vycm9yKDQzLCBfX0ZJTEVfXywgX19MSU5FX18pOw0KICAgIH0NCg0KICAgIGlmICgkemJwLT5vcHRpb25bJ1pDX0NPTU1FTlRfVkVSSUZZX0VOQUJMRSddKSB7DQogICAgICAgIGlmICghJHpicC0+Q2hlY2tSaWdodHMoJ05vVmFsaWRDb2RlJykpIHsNCiAgICAgICAgICAgIGlmICgkemJwLT5DaGVja1ZhbGlkQ29kZSgkX1BPU1RbJ3ZlcmlmeSddLCAnY210JykgPT0gZmFsc2UpIHsNCiAgICAgICAgICAgICAgICAkemJwLT5TaG93RXJyb3IoMzgsIF9fRklMRV9fLCBfX0xJTkVfXyk7DQogICAgICAgICAgICB9DQoNCiAgICAgICAgfQ0KICAgIH0NCg0KICAgIC8v5Yik5pat5piv5LiN5piv5pyJ5ZCM5ZCN77yI5Yir5ZCN77yJ55qE55So5oi3DQogICAgJG0gPSAkemJwLT5HZXRNZW1iZXJCeU5hbWVPckFsaWFzKCRfUE9TVFsnbmFtZSddKTsNCiAgICBpZiAoJG0tPklEID4gMCkgew0KICAgICAgICBpZiAoJG0tPklEICE9ICR6YnAtPnVzZXItPklEKSB7DQogICAgICAgICAgICAkemJwLT5TaG93RXJyb3IoMzEsIF9fRklMRV9fLCBfX0xJTkVfXyk7DQogICAgICAgIH0NCiAgICB9DQoNCiAgICAkcmVwbHlpZCA9IChpbnRlZ2VyKSBHZXRWYXJzKCdyZXBseWlkJywgJ1BPU1QnKTsNCg0KICAgIGlmICgkcmVwbHlpZCA9PSAwKSB7DQogICAgICAgICRfUE9TVFsnUm9vdElEJ10gPSAwOw0KICAgICAgICAkX1BPU1RbJ1BhcmVudElEJ10gPSAwOw0KICAgIH0gZWxzZSB7DQogICAgICAgICRfUE9TVFsnUGFyZW50SUQnXSA9ICRyZXBseWlkOw0KICAgICAgICAkYyA9ICR6YnAtPkdldENvbW1lbnRCeUlEKCRyZXBseWlkKTsNCiAgICAgICAgaWYgKCRjLT5MZXZlbCA9PSAzKSB7DQogICAgICAgICAgICAkemJwLT5TaG93RXJyb3IoNTIsIF9fRklMRV9fLCBfX0xJTkVfXyk7DQogICAgICAgIH0NCiAgICAgICAgJF9QT1NUWydSb290SUQnXSA9IENvbW1lbnQ6OkdldFJvb3RJRCgkYy0+SUQpOw0KICAgIH0NCg0KICAgICRfUE9TVFsnQXV0aG9ySUQnXSA9ICR6YnAtPnVzZXItPklEOw0KICAgICRfUE9TVFsnTmFtZSddID0gR2V0VmFycygnbmFtZScsICdQT1NUJyk7DQogICAgaWYgKCR6YnAtPnVzZXItPklEID4gMCkgew0KICAgICAgICAkX1BPU1RbJ05hbWUnXSA9ICR6YnAtPnVzZXItPk5hbWU7DQogICAgfQ0KDQogICAgJF9QT1NUWydFbWFpbCddID0gR2V0VmFycygnZW1haWwnLCAnUE9TVCcpOw0KICAgICRfUE9TVFsnSG9tZVBhZ2UnXSA9IEdldFZhcnMoJ2hvbWVwYWdlJywgJ1BPU1QnKTsNCiAgICAkX1BPU1RbJ0NvbnRlbnQnXSA9IEdldFZhcnMoJ2NvbnRlbnQnLCAnUE9TVCcpOw0KICAgICRfUE9TVFsnUG9zdFRpbWUnXSA9IFRpbWUoKTsNCiAgICAkX1BPU1RbJ0lQJ10gPSBHZXRHdWVzdElQKCk7DQogICAgJF9QT1NUWydBZ2VudCddID0gR2V0R3Vlc3RBZ2VudCgpOw0KDQogICAgJGNtdCA9IG5ldyBDb21tZW50KCk7DQoNCiAgICBmb3JlYWNoICgkemJwLT5kYXRhaW5mb1snQ29tbWVudCddIGFzICRrZXkgPT4gJHZhbHVlKSB7DQogICAgICAgIGlmICgka2V5ID09ICdJRCcgfHwgJGtleSA9PSAnTWV0YScpIHtjb250aW51ZTt9DQogICAgICAgIGlmICgka2V5ID09ICdJc0NoZWNraW5nJykgew0KICAgICAgICAgICAgY29udGludWU7DQogICAgICAgIH0NCg0KICAgICAgICBpZiAoaXNzZXQoJF9QT1NUWyRrZXldKSkgew0KICAgICAgICAgICAgJGNtdC0+JGtleSA9IEdldFZhcnMoJGtleSwgJ1BPU1QnKTsNCiAgICAgICAgfQ0KICAgIH0NCg0KICAgIGlmICgkemJwLT5vcHRpb25bJ1pDX0NPTU1FTlRfQVVESVQnXSAmJiAhJHpicC0+Q2hlY2tSaWdodHMoJ3Jvb3QnKSkgew0KICAgICAgICAkY210LT5Jc0NoZWNraW5nID0gdHJ1ZTsNCiAgICB9DQoNCiAgICBmb3JlYWNoICgkR0xPQkFMU1snaG9va3MnXVsnRmlsdGVyX1BsdWdpbl9Qb3N0Q29tbWVudF9Db3JlJ10gYXMgJGZwbmFtZSA9PiAmJGZwc2lnbmFsKSB7DQogICAgICAgICRmcG5hbWUoJGNtdCk7DQogICAgfQ0KDQogICAgRmlsdGVyQ29tbWVudCgkY210KTsNCg0KICAgIGlmICgkY210LT5Jc1Rocm93KSB7DQogICAgICAgICR6YnAtPlNob3dFcnJvcigxNCwgX19GSUxFX18sIF9fTElORV9fKTsNCg0KICAgICAgICByZXR1cm4gZmFsc2U7DQogICAgfQ0KDQogICAgJGNtdC0+U2F2ZSgpOw0KICAgIGlmICgkY210LT5Jc0NoZWNraW5nKSB7DQogICAgICAgIENvdW50Q29tbWVudE51bXMoMCwgKzEpOw0KICAgICAgICAkemJwLT5TaG93RXJyb3IoNTMsIF9fRklMRV9fLCBfX0xJTkVfXyk7DQoNCiAgICAgICAgcmV0dXJuIGZhbHNlOw0KICAgIH0NCg0KICAgIENvdW50UG9zdEFycmF5KGFycmF5KCRjbXQtPkxvZ0lEKSwgKzEpOw0KICAgIENvdW50Q29tbWVudE51bXMoKzEsIDApOw0KDQogICAgJHpicC0+QWRkQnVpbGRNb2R1bGUoJ2NvbW1lbnRzJyk7DQoNCiAgICAkemJwLT5jb21tZW50c1skY210LT5JRF0gPSAkY210Ow0KDQogICAgaWYgKCRpc0FqYXgpIHsNCiAgICAgICAgVmlld0NvbW1lbnQoJGNtdC0+SUQpOw0KICAgIH0gZWxzZWlmICgkcmV0dXJuSnNvbikgew0KICAgICAgICBvYl9jbGVhbigpOw0KICAgICAgICBWaWV3Q29tbWVudCgkY210LT5JRCk7DQogICAgICAgICRjb21tZW50SHRtbCA9IG9iX2dldF9jbGVhbigpOw0KICAgICAgICBKc29uUmV0dXJuKGFycmF5X21lcmdlX3JlY3Vyc2l2ZShhcnJheSgNCiAgICAgICAgICAgICJodG1sIiA9PiAkY29tbWVudEh0bWwsDQogICAgICAgICksIGFycmF5X2ludGVyc2VjdF9rZXkoJGNtdC0+R2V0RGF0YSgpLCAkcmV0dXJuQ29tbWVudFdoaXRlTGlzdCkpKTsNCg0KICAgIH0NCg0KICAgIGZvcmVhY2ggKCRHTE9CQUxTWydob29rcyddWydGaWx0ZXJfUGx1Z2luX1Bvc3RDb21tZW50X1N1Y2NlZWQnXSBhcyAkZnBuYW1lID0+ICYkZnBzaWduYWwpIHsNCiAgICAgICAgJGZwbmFtZSgkY210KTsNCiAgICB9DQoNCiAgICByZXR1cm4gdHJ1ZTsNCg0KfQ0KDQovKioNCiAqIOWIoOmZpOivhOiuug0KICogQHJldHVybiBib29sDQogKi8NCmZ1bmN0aW9uIERlbENvbW1lbnQoKSB7DQogICAgZ2xvYmFsICR6YnA7DQoNCiAgICAkaWQgPSAoaW50KSBHZXRWYXJzKCdpZCcsICdHRVQnKTsNCiAgICAkY210ID0gJHpicC0+R2V0Q29tbWVudEJ5SUQoJGlkKTsNCiAgICBpZiAoJGNtdC0+SUQgPiAwKSB7DQoNCiAgICAgICAgJGNvbW1lbnRzID0gJHpicC0+R2V0Q29tbWVudExpc3QoJyonLCBhcnJheShhcnJheSgnPScsICdjb21tX0xvZ0lEJywgJGNtdC0+TG9nSUQpKSwgbnVsbCwgbnVsbCwgbnVsbCk7DQoNCiAgICAgICAgRGVsQ29tbWVudF9DaGlsZHJlbigkY210LT5JRCk7DQoNCiAgICAgICAgaWYgKCRjbXQtPklzQ2hlY2tpbmcgPT0gZmFsc2UpIHsNCiAgICAgICAgICAgIENvdW50Q29tbWVudE51bXMoLTEsIDApOw0KICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgQ291bnRDb21tZW50TnVtcygtMSwgLTEpOw0KICAgICAgICB9DQogICAgICAgICRjbXQtPkRlbCgpOw0KDQogICAgICAgIGlmICgkY210LT5Jc0NoZWNraW5nID09IGZhbHNlKSB7DQogICAgICAgICAgICBDb3VudFBvc3RBcnJheShhcnJheSgkY210LT5Mb2dJRCksIC0xKTsNCiAgICAgICAgfQ0KDQogICAgICAgICR6YnAtPkFkZEJ1aWxkTW9kdWxlKCdjb21tZW50cycpOw0KDQogICAgICAgIGZvcmVhY2ggKCRHTE9CQUxTWydob29rcyddWydGaWx0ZXJfUGx1Z2luX0RlbENvbW1lbnRfU3VjY2VlZCddIGFzICRmcG5hbWUgPT4gJiRmcHNpZ25hbCkgew0KICAgICAgICAgICAgJGZwbmFtZSgkY210KTsNCiAgICAgICAgfQ0KICAgIH0NCg0KICAgIHJldHVybiB0cnVlOw0KfQ0KDQovKioNCiAqIOWIoOmZpOivhOiuuuS4i+eahOWtkOivhOiuug0KICogQHBhcmFtIGludCAkaWQg54i26K+E6K66SUQNCiAqLw0KZnVuY3Rpb24gRGVsQ29tbWVudF9DaGlsZHJlbigkaWQpIHsNCiAgICBnbG9iYWwgJHpicDsNCg0KICAgICRjbXQgPSAkemJwLT5HZXRDb21tZW50QnlJRCgkaWQpOw0KDQogICAgZm9yZWFjaCAoJGNtdC0+Q29tbWVudHMgYXMgJGNvbW1lbnQpIHsNCiAgICAgICAgaWYgKENvdW50KCRjb21tZW50LT5Db21tZW50cykgPiAwKSB7DQogICAgICAgICAgICBEZWxDb21tZW50X0NoaWxkcmVuKCRjb21tZW50LT5JRCk7DQogICAgICAgIH0NCiAgICAgICAgaWYgKCRjb21tZW50LT5Jc0NoZWNraW5nID09IGZhbHNlKSB7DQogICAgICAgICAgICBDb3VudENvbW1lbnROdW1zKC0xLCAwKTsNCiAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgIENvdW50Q29tbWVudE51bXMoLTEsIC0xKTsNCiAgICAgICAgfQ0KICAgICAgICAkY29tbWVudC0+RGVsKCk7DQogICAgfQ0KDQp9DQoNCi8qKg0KICog5Y+q5Y6G6YGN5bm25L+d55WZ6K+E6K66aWTov5thcnJheSzkuI3ov5vooYzliKDpmaQNCiAqIEBwYXJhbSBpbnQgJGlkIOeItuivhOiuuklEDQogKiBAcGFyYW0gYXJyYXkgJGFycmF5IOWwhuWtkOivhOiuuklE5a2Y5YWl5paw5pWw57uEDQogKi8NCmZ1bmN0aW9uIEdldFN1YkNvbW1lbnRzKCRpZCwgJiRhcnJheSkgew0KICAgIGdsb2JhbCAkemJwOw0KDQogICAgJGNtdCA9ICR6YnAtPkdldENvbW1lbnRCeUlEKCRpZCk7DQoNCiAgICBmb3JlYWNoICgkY210LT5Db21tZW50cyBhcyAkY29tbWVudCkgew0KICAgICAgICAkYXJyYXlbXSA9ICRjb21tZW50LT5JRDsNCiAgICAgICAgaWYgKENvdW50KCRjb21tZW50LT5Db21tZW50cykgPiAwKSB7DQogICAgICAgICAgICBHZXRTdWJDb21tZW50cygkY29tbWVudC0+SUQsICRhcnJheSk7DQogICAgICAgIH0NCiAgICB9DQoNCn0NCg0KLyoqDQogKuajgOafpeivhOiuuuaVsOaNruW5tuS/neWtmOOAgeabtOaWsOiuoeaVsOOAgeabtOaWsOKAnOacgOaWsOivhOiuuuKAneaooeWdlw0KICovDQpmdW5jdGlvbiBDaGVja0NvbW1lbnQoKSB7DQogICAgZ2xvYmFsICR6YnA7DQoNCiAgICAkaWQgPSAoaW50KSBHZXRWYXJzKCdpZCcsICdHRVQnKTsNCiAgICAkaXNjaGVja2luZyA9IChib29sKSBHZXRWYXJzKCdpc2NoZWNraW5nJywgJ0dFVCcpOw0KDQogICAgJGNtdCA9ICR6YnAtPkdldENvbW1lbnRCeUlEKCRpZCk7DQogICAgJG9yaWdfY2hlY2sgPSAoYm9vbCkgJGNtdC0+SXNDaGVja2luZzsNCiAgICAkY210LT5Jc0NoZWNraW5nID0gJGlzY2hlY2tpbmc7DQoNCiAgICAkY210LT5TYXZlKCk7DQoNCiAgICBpZiAoKCRvcmlnX2NoZWNrKSAmJiAoISRpc2NoZWNraW5nKSkgew0KICAgICAgICBDb3VudFBvc3RBcnJheShhcnJheSgkY210LT5Mb2dJRCksICsxKTsNCiAgICAgICAgQ291bnRDb21tZW50TnVtcygwLCAtMSk7DQogICAgfSBlbHNlaWYgKCghJG9yaWdfY2hlY2spICYmICgkaXNjaGVja2luZykpIHsNCiAgICAgICAgQ291bnRQb3N0QXJyYXkoYXJyYXkoJGNtdC0+TG9nSUQpLCAtMSk7DQogICAgICAgIENvdW50Q29tbWVudE51bXMoMCwgKzEpOw0KICAgIH0NCg0KICAgICR6YnAtPkFkZEJ1aWxkTW9kdWxlKCdjb21tZW50cycpOw0KfQ0KDQovKioNCiAqIOivhOiuuuaJuemHj+WkhOeQhu+8iOWIoOmZpOOAgemAmui/h+WuoeaguOOAgeWKoOWFpeWuoeaguO+8iQ0KICovDQpmdW5jdGlvbiBCYXRjaENvbW1lbnQoKSB7DQogICAgZ2xvYmFsICR6YnA7DQogICAgaWYgKGlzc2V0KCRfUE9TVFsnYWxsX2RlbCddKSkgew0KICAgICAgICAkdHlwZSA9ICdhbGxfZGVsJzsNCiAgICB9DQogICAgaWYgKGlzc2V0KCRfUE9TVFsnYWxsX3Bhc3MnXSkpIHsNCiAgICAgICAgJHR5cGUgPSAnYWxsX3Bhc3MnOw0KICAgIH0NCiAgICBpZiAoaXNzZXQoJF9QT1NUWydhbGxfYXVkaXQnXSkpIHsNCiAgICAgICAgJHR5cGUgPSAnYWxsX2F1ZGl0JzsNCiAgICB9DQogICAgJGFycmF5ID0gJF9QT1NUWydpZCddOw0KICAgIGlmIChpc19hcnJheSgkYXJyYXkpKSB7DQogICAgICAgICRhcnJheSA9IGFycmF5X3VuaXF1ZSgkYXJyYXkpOw0KICAgIH0gZWxzZSB7DQogICAgICAgICRhcnJheSA9IGFycmF5KCRhcnJheSk7DQogICAgfQ0KDQogICAgLy8gU2VhcmNoIENoaWxkIENvbW1lbnRzDQogICAgJGNoaWxkQXJyYXkgPSBhcnJheSgpOw0KICAgIGZvcmVhY2ggKCRhcnJheSBhcyAkaSA9PiAkaWQpIHsNCiAgICAgICAgJGNtdCA9ICR6YnAtPkdldENvbW1lbnRCeUlEKCRpZCk7DQogICAgICAgIGlmICgkY210LT5JRCA9PSAwKSB7DQogICAgICAgICAgICBjb250aW51ZTsNCiAgICAgICAgfQ0KICAgICAgICAkY2hpbGRBcnJheVtdID0gJGNtdDsNCiAgICAgICAgR2V0U3ViQ29tbWVudHMoJGNtdC0+SUQsICRjaGlsZEFycmF5KTsNCiAgICB9DQoNCiAgICAvLyBVbmlxdWUgY2hpbGQgYXJyYXkNCiAgICAkY2hpbGRBcnJheSA9IGFycmF5X3VuaXF1ZSgkY2hpbGRBcnJheSk7DQoNCiAgICBpZiAoJHR5cGUgPT0gJ2FsbF9kZWwnKSB7DQogICAgICAgIGZvcmVhY2ggKCRjaGlsZEFycmF5IGFzICRpID0+ICRjbXQpIHsNCiAgICAgICAgICAgICRjbXQtPkRlbCgpOw0KICAgICAgICAgICAgaWYgKCEkY210LT5Jc0NoZWNraW5nKSB7DQogICAgICAgICAgICAgICAgQ291bnRQb3N0QXJyYXkoYXJyYXkoJGNtdC0+TG9nSUQpLCAtMSk7DQogICAgICAgICAgICAgICAgQ291bnRDb21tZW50TnVtcygtMSwgMCk7DQogICAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgICAgIENvdW50Q29tbWVudE51bXMoLTEsIC0xKTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgfQ0KICAgIH0gZWxzZWlmICgkdHlwZSA9PSAnYWxsX3Bhc3MnKSB7DQogICAgICAgIGZvcmVhY2ggKCRjaGlsZEFycmF5IGFzICRpID0+ICRjbXQpIHsNCiAgICAgICAgICAgIGlmICghJGNtdC0+SXNDaGVja2luZykgew0KICAgICAgICAgICAgICAgIGNvbnRpbnVlOw0KICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICAkY210LT5Jc0NoZWNraW5nID0gZmFsc2U7DQogICAgICAgICAgICAkY210LT5TYXZlKCk7DQogICAgICAgICAgICBDb3VudFBvc3RBcnJheShhcnJheSgkY210LT5Mb2dJRCksICsxKTsNCiAgICAgICAgICAgIENvdW50Q29tbWVudE51bXMoMCwgLTEpOw0KICAgICAgICB9DQogICAgfSBlbHNlaWYgKCR0eXBlID09ICdhbGxfYXVkaXQnKSB7DQogICAgICAgIGZvcmVhY2ggKCRjaGlsZEFycmF5IGFzICRpID0+ICRjbXQpIHsNCiAgICAgICAgICAgIGlmICgkY210LT5Jc0NoZWNraW5nKSB7DQogICAgICAgICAgICAgICAgY29udGludWU7DQogICAgICAgICAgICB9DQoNCiAgICAgICAgICAgICRjbXQtPklzQ2hlY2tpbmcgPSB0cnVlOw0KICAgICAgICAgICAgJGNtdC0+U2F2ZSgpOw0KICAgICAgICAgICAgQ291bnRQb3N0QXJyYXkoYXJyYXkoJGNtdC0+TG9nSUQpLCAtMSk7DQogICAgICAgICAgICBDb3VudENvbW1lbnROdW1zKDAsICsxKTsNCiAgICAgICAgfQ0KICAgIH0NCg0KICAgICR6YnAtPkFkZEJ1aWxkTW9kdWxlKCdjb21tZW50cycpOw0KfQ0KIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIw0KLyoqDQogKiDmj5DkuqTliIbnsbvmlbDmja4NCiAqIEByZXR1cm4gYm9vbA0KICovDQpmdW5jdGlvbiBQb3N0Q2F0ZWdvcnkoKSB7DQogICAgZ2xvYmFsICR6YnA7DQogICAgaWYgKCFpc3NldCgkX1BPU1RbJ0lEJ10pKSB7DQogICAgICAgIHJldHVybjsNCiAgICB9DQoNCiAgICBpZiAoaXNzZXQoJF9QT1NUWydBbGlhcyddKSkgew0KICAgICAgICAkX1BPU1RbJ0FsaWFzJ10gPSBUcmFuc2ZlckhUTUwoJF9QT1NUWydBbGlhcyddLCAnW25vc2NyaXB0XScpOw0KICAgIH0NCg0KICAgICRwYXJlbnRpZCA9IChpbnQpIEdldFZhcnMoJ1BhcmVudElEJywgJ1BPU1QnKTsNCiAgICBpZiAoJHBhcmVudGlkID4gMCkgew0KICAgICAgICBpZiAoJHpicC0+Y2F0ZWdvcmllc1skcGFyZW50aWRdLT5MZXZlbCA+IDIpIHsNCiAgICAgICAgICAgICRfUE9TVFsnUGFyZW50SUQnXSA9ICcwJzsNCiAgICAgICAgfQ0KICAgIH0NCg0KICAgICRjYXRlID0gbmV3IENhdGVnb3J5KCk7DQogICAgaWYgKEdldFZhcnMoJ0lEJywgJ1BPU1QnKSA9PSAwKSB7DQogICAgfSBlbHNlIHsNCiAgICAgICAgJGNhdGUtPkxvYWRJbmZvQnlJRChHZXRWYXJzKCdJRCcsICdQT1NUJykpOw0KICAgIH0NCg0KICAgIGZvcmVhY2ggKCR6YnAtPmRhdGFpbmZvWydDYXRlZ29yeSddIGFzICRrZXkgPT4gJHZhbHVlKSB7DQogICAgICAgIGlmICgka2V5ID09ICdJRCcgfHwgJGtleSA9PSAnTWV0YScpIHtjb250aW51ZTt9DQogICAgICAgIGlmIChpc3NldCgkX1BPU1RbJGtleV0pKSB7DQogICAgICAgICAgICAkY2F0ZS0+JGtleSA9IEdldFZhcnMoJGtleSwgJ1BPU1QnKTsNCiAgICAgICAgfQ0KICAgIH0NCg0KICAgIGZvcmVhY2ggKCRHTE9CQUxTWydob29rcyddWydGaWx0ZXJfUGx1Z2luX1Bvc3RDYXRlZ29yeV9Db3JlJ10gYXMgJGZwbmFtZSA9PiAmJGZwc2lnbmFsKSB7DQogICAgICAgICRmcG5hbWUoJGNhdGUpOw0KICAgIH0NCg0KICAgIC8v5Yi35pawUm9vdElEDQogICAgJGNhdGUtPkxldmVsOw0KDQogICAgRmlsdGVyQ2F0ZWdvcnkoJGNhdGUpOw0KICAgIEZpbHRlck1ldGEoJGNhdGUpOw0KDQogICAgLy8g5q2k5aSE55So5L2c5Yi35paw5YiG57G75YaF5paH56ug5pWw5o2u5L2/55So77yM5LiN5L2c5pu05pS5DQogICAgaWYgKCRjYXRlLT5JRCA+IDApIHsNCiAgICAgICAgQ291bnRDYXRlZ29yeSgkY2F0ZSk7DQogICAgfQ0KDQogICAgJGNhdGUtPlNhdmUoKTsNCg0KICAgICR6YnAtPkxvYWRDYXRlZ29yeXMoKTsNCiAgICAkemJwLT5BZGRCdWlsZE1vZHVsZSgnY2F0YWxvZycpOw0KDQogICAgaWYgKEdldFZhcnMoJ0FkZE5hdmJhcicsICdQT1NUJykgPT0gMCkgew0KICAgICAgICAkemJwLT5EZWxJdGVtVG9OYXZiYXIoJ2NhdGVnb3J5JywgJGNhdGUtPklEKTsNCiAgICB9DQoNCiAgICBpZiAoR2V0VmFycygnQWRkTmF2YmFyJywgJ1BPU1QnKSA9PSAxKSB7DQogICAgICAgICR6YnAtPkFkZEl0ZW1Ub05hdmJhcignY2F0ZWdvcnknLCAkY2F0ZS0+SUQsICRjYXRlLT5OYW1lLCAkY2F0ZS0+VXJsKTsNCiAgICB9DQoNCiAgICBmb3JlYWNoICgkR0xPQkFMU1snaG9va3MnXVsnRmlsdGVyX1BsdWdpbl9Qb3N0Q2F0ZWdvcnlfU3VjY2VlZCddIGFzICRmcG5hbWUgPT4gJiRmcHNpZ25hbCkgew0KICAgICAgICAkZnBuYW1lKCRjYXRlKTsNCiAgICB9DQoNCiAgICByZXR1cm4gdHJ1ZTsNCn0NCg0KLyoqDQogKiDliKDpmaTliIbnsbsNCiAqIEByZXR1cm4gYm9vbA0KICovDQpmdW5jdGlvbiBEZWxDYXRlZ29yeSgpIHsNCiAgICBnbG9iYWwgJHpicDsNCg0KICAgICRpZCA9IChpbnQpIEdldFZhcnMoJ2lkJywgJ0dFVCcpOw0KICAgICRjYXRlID0gJHpicC0+R2V0Q2F0ZWdvcnlCeUlEKCRpZCk7DQogICAgaWYgKCRjYXRlLT5JRCA+IDApIHsNCg0KICAgICAgICBpZihjb3VudCgkY2F0ZS0+U3ViQ2F0ZWdvcmllcykgPiAwKXsNCiAgICAgICAgICAgICR6YnAtPlNob3dFcnJvcig0OSwgX19GSUxFX18sIF9fTElORV9fKTsNCg0KICAgICAgICAgICAgcmV0dXJuIGZhbHNlOw0KICAgICAgICB9DQoNCiAgICAgICAgRGVsQ2F0ZWdvcnlfQXJ0aWNsZXMoJGNhdGUtPklEKTsNCiAgICAgICAgJGNhdGUtPkRlbCgpOw0KDQogICAgICAgICR6YnAtPkxvYWRDYXRlZ29yeXMoKTsNCiAgICAgICAgJHpicC0+QWRkQnVpbGRNb2R1bGUoJ2NhdGFsb2cnKTsNCiAgICAgICAgJHpicC0+RGVsSXRlbVRvTmF2YmFyKCdjYXRlZ29yeScsICRjYXRlLT5JRCk7DQoNCiAgICAgICAgZm9yZWFjaCAoJEdMT0JBTFNbJ2hvb2tzJ11bJ0ZpbHRlcl9QbHVnaW5fRGVsQ2F0ZWdvcnlfU3VjY2VlZCddIGFzICRmcG5hbWUgPT4gJiRmcHNpZ25hbCkgew0KICAgICAgICAgICAgJGZwbmFtZSgkY2F0ZSk7DQogICAgICAgIH0NCiAgICB9DQoNCiAgICByZXR1cm4gdHJ1ZTsNCn0NCg0KLyoqDQogKiDliKDpmaTliIbnsbvkuIvmiYDmnInmlofnq6ANCiAqIEBwYXJhbSBpbnQgJGlkIOWIhuexu0lEDQogKi8NCmZ1bmN0aW9uIERlbENhdGVnb3J5X0FydGljbGVzKCRpZCkgew0KICAgIGdsb2JhbCAkemJwOw0KDQogICAgJHNxbCA9ICR6YnAtPmRiLT5zcWwtPlVwZGF0ZSgkemJwLT50YWJsZVsnUG9zdCddLCBhcnJheSgnbG9nX0NhdGVJRCcgPT4gMCksIGFycmF5KGFycmF5KCc9JywgJ2xvZ19DYXRlSUQnLCAkaWQpKSk7DQogICAgJHpicC0+ZGItPlVwZGF0ZSgkc3FsKTsNCn0NCg0KIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIw0KLyoqDQogKiDmj5DkuqTmoIfnrb7mlbDmja4NCiAqIEByZXR1cm4gYm9vbA0KICovDQpmdW5jdGlvbiBQb3N0VGFnKCkgew0KICAgIGdsb2JhbCAkemJwOw0KICAgIGlmICghaXNzZXQoJF9QT1NUWydJRCddKSkgew0KICAgICAgICByZXR1cm47DQogICAgfQ0KDQogICAgaWYgKGlzc2V0KCRfUE9TVFsnQWxpYXMnXSkpIHsNCiAgICAgICAgJF9QT1NUWydBbGlhcyddID0gVHJhbnNmZXJIVE1MKCRfUE9TVFsnQWxpYXMnXSwgJ1tub3NjcmlwdF0nKTsNCiAgICB9DQoNCiAgICAkdGFnID0gbmV3IFRhZygpOw0KICAgIGlmIChHZXRWYXJzKCdJRCcsICdQT1NUJykgPT0gMCkgew0KICAgIH0gZWxzZSB7DQogICAgICAgICR0YWctPkxvYWRJbmZvQnlJRChHZXRWYXJzKCdJRCcsICdQT1NUJykpOw0KICAgIH0NCg0KICAgIGZvcmVhY2ggKCR6YnAtPmRhdGFpbmZvWydUYWcnXSBhcyAka2V5ID0+ICR2YWx1ZSkgew0KICAgICAgICBpZiAoJGtleSA9PSAnSUQnIHx8ICRrZXkgPT0gJ01ldGEnKSB7Y29udGludWU7fQ0KICAgICAgICBpZiAoaXNzZXQoJF9QT1NUWyRrZXldKSkgew0KICAgICAgICAgICAgJHRhZy0+JGtleSA9IEdldFZhcnMoJGtleSwgJ1BPU1QnKTsNCiAgICAgICAgfQ0KICAgIH0NCg0KICAgIGZvcmVhY2ggKCRHTE9CQUxTWydob29rcyddWydGaWx0ZXJfUGx1Z2luX1Bvc3RUYWdfQ29yZSddIGFzICRmcG5hbWUgPT4gJiRmcHNpZ25hbCkgew0KICAgICAgICAkZnBuYW1lKCR0YWcpOw0KICAgIH0NCg0KICAgIEZpbHRlclRhZygkdGFnKTsNCiAgICBGaWx0ZXJNZXRhKCR0YWcpOw0KDQogICAgQ291bnRUYWcoJHRhZyk7DQoNCiAgICAkdGFnLT5TYXZlKCk7DQoNCiAgICBpZiAoR2V0VmFycygnQWRkTmF2YmFyJywgJ1BPU1QnKSA9PSAwKSB7DQogICAgICAgICR6YnAtPkRlbEl0ZW1Ub05hdmJhcigndGFnJywgJHRhZy0+SUQpOw0KICAgIH0NCg0KICAgIGlmIChHZXRWYXJzKCdBZGROYXZiYXInLCAnUE9TVCcpID09IDEpIHsNCiAgICAgICAgJHpicC0+QWRkSXRlbVRvTmF2YmFyKCd0YWcnLCAkdGFnLT5JRCwgJHRhZy0+TmFtZSwgJHRhZy0+VXJsKTsNCiAgICB9DQoNCiAgICAkemJwLT5BZGRCdWlsZE1vZHVsZSgndGFncycpOw0KDQogICAgZm9yZWFjaCAoJEdMT0JBTFNbJ2hvb2tzJ11bJ0ZpbHRlcl9QbHVnaW5fUG9zdFRhZ19TdWNjZWVkJ10gYXMgJGZwbmFtZSA9PiAmJGZwc2lnbmFsKSB7DQogICAgICAgICRmcG5hbWUoJHRhZyk7DQogICAgfQ0KDQogICAgcmV0dXJuIHRydWU7DQp9DQoNCi8qKg0KICog5Yig6Zmk5qCH562+DQogKiBAcmV0dXJuIGJvb2wNCiAqLw0KZnVuY3Rpb24gRGVsVGFnKCkgew0KICAgIGdsb2JhbCAkemJwOw0KDQogICAgJHRhZ2lkID0gKGludCkgR2V0VmFycygnaWQnLCAnR0VUJyk7DQogICAgJHRhZyA9ICR6YnAtPkdldFRhZ0J5SUQoJHRhZ2lkKTsNCiAgICBpZiAoJHRhZy0+SUQgPiAwKSB7DQogICAgICAgICR0YWctPkRlbCgpOw0KICAgICAgICAkemJwLT5EZWxJdGVtVG9OYXZiYXIoJ3RhZycsICR0YWctPklEKTsNCiAgICAgICAgJHpicC0+QWRkQnVpbGRNb2R1bGUoJ3RhZ3MnKTsNCiAgICAgICAgZm9yZWFjaCAoJEdMT0JBTFNbJ2hvb2tzJ11bJ0ZpbHRlcl9QbHVnaW5fRGVsVGFnX1N1Y2NlZWQnXSBhcyAkZnBuYW1lID0+ICYkZnBzaWduYWwpIHsNCiAgICAgICAgICAgICRmcG5hbWUoJHRhZyk7DQogICAgICAgIH0NCiAgICB9DQoNCiAgICByZXR1cm4gdHJ1ZTsNCn0NCg0KIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIw0KLyoqDQogKiDmj5DkuqTnlKjmiLfmlbDmja4NCiAqIEByZXR1cm4gYm9vbA0KICovDQpmdW5jdGlvbiBQb3N0TWVtYmVyKCkgew0KICAgIGdsb2JhbCAkemJwOw0KICAgICRtZW0gPSBuZXcgTWVtYmVyKCk7DQoNCiAgICAkZGF0YSA9IGFycmF5KCk7DQoNCiAgICBpZiAoIWlzc2V0KCRfUE9TVFsnSUQnXSkpIHsNCiAgICAgICAgcmV0dXJuIGZhbHNlOw0KICAgIH0NCg0KICAgIC8v5qOA5rWL5a+G56CBDQogICAgaWYodHJpbSgkX1BPU1RbIlBhc3N3b3JkIl0pID09ICcnIHx8IHRyaW0oJF9QT1NUWyJQYXNzd29yZFJlIl0pID09ICcnIHx8ICRfUE9TVFsiUGFzc3dvcmQiXSAhPSAkX1BPU1RbIlBhc3N3b3JkUmUiXSl7DQogICAgICAgIHVuc2V0KCRfUE9TVFsiUGFzc3dvcmQiXSk7DQogICAgICAgIHVuc2V0KCRfUE9TVFsiUGFzc3dvcmRSZSJdKTsNCiAgICB9DQoNCiAgICAkZGF0YVsnSUQnXSA9ICRfUE9TVFsnSUQnXTsNCiAgICAkZWRpdGFibGVGaWVsZCA9IGFycmF5KCdQYXNzd29yZCcsICdFbWFpbCcsICdIb21lUGFnZScsICdBbGlhcycsICdJbnRybycsICdUZW1wbGF0ZScpOw0KICAgIC8vIOWmguaenOaYr+euoeeQhuWRmO+8jOWImeWGjeWFgeiuuOaUueWKqOWIq+eahOWtl+autQ0KICAgIGlmICgkemJwLT5DaGVja1JpZ2h0cygnTWVtYmVyQWxsJykpIHsNCiAgICAgICAgYXJyYXlfcHVzaCgkZWRpdGFibGVGaWVsZCwgJ0xldmVsJywgJ1N0YXR1cycsICdOYW1lJywgJ0lQJyk7DQogICAgfSBlbHNlIHsNCiAgICAgICAgJGRhdGFbJ0lEJ10gPSAkemJwLT51c2VyLT5JRDsNCiAgICB9DQogICAgLy8g5aSN5Yi25LiA5Liq5paw5pWw57uEDQogICAgZm9yZWFjaCAoJGVkaXRhYmxlRmllbGQgYXMgJHZhbHVlKSB7DQogICAgICAgIGlmIChpc3NldCgkX1BPU1RbJHZhbHVlXSkpIHsNCiAgICAgICAgICAgICRkYXRhWyR2YWx1ZV0gPSBHZXRWYXJzKCR2YWx1ZSwgJ1BPU1QnKTsNCiAgICAgICAgfQ0KICAgIH0NCg0KICAgIGlmIChpc3NldCgkZGF0YVsnTmFtZSddKSkgew0KICAgICAgICAvLyDmo4DmtYvlkIzlkI0NCiAgICAgICAgaWYgKGlzc2V0KCR6YnAtPm1lbWJlcnNieW5hbWVbJGRhdGFbJ05hbWUnXV0pKSB7DQogICAgICAgICAgICBpZiAoJHpicC0+bWVtYmVyc2J5bmFtZVskZGF0YVsnTmFtZSddXS0+SUQgIT0gJGRhdGFbJ0lEJ10pIHsNCiAgICAgICAgICAgICAgICAkemJwLT5TaG93RXJyb3IoNjIsIF9fRklMRV9fLCBfX0xJTkVfXyk7DQogICAgICAgICAgICB9DQogICAgICAgIH0NCiAgICB9DQoNCiAgICBpZiAoaXNzZXQoJGRhdGFbJ0FsaWFzJ10pKSB7DQogICAgICAgICRkYXRhWydBbGlhcyddID0gVHJhbnNmZXJIVE1MKCRkYXRhWydBbGlhcyddLCAnW25vc2NyaXB0XScpOw0KICAgIH0NCg0KICAgIGlmICgkZGF0YVsnSUQnXSA9PSAwKSB7DQogICAgICAgIGlmICghaXNzZXQoJGRhdGFbJ1Bhc3N3b3JkJ10pIHx8ICRkYXRhWydQYXNzd29yZCddID09ICcnKSB7DQogICAgICAgICAgICAkemJwLT5TaG93RXJyb3IoNzMsIF9fRklMRV9fLCBfX0xJTkVfXyk7DQogICAgICAgIH0NCiAgICAgICAgJGRhdGFbJ0lQJ10gPSBHZXRHdWVzdElQKCk7DQogICAgfSBlbHNlIHsNCiAgICAgICAgJG1lbS0+TG9hZEluZm9CeUlEKCRkYXRhWydJRCddKTsNCiAgICB9DQoNCiAgICBmb3JlYWNoICgkemJwLT5kYXRhaW5mb1snTWVtYmVyJ10gYXMgJGtleSA9PiAkdmFsdWUpIHsNCiAgICAgICAgaWYgKCRrZXkgPT0gJ0lEJyB8fCAka2V5ID09ICdNZXRhJykgew0KICAgICAgICAgICAgY29udGludWU7DQogICAgICAgIH0NCiAgICAgICAgaWYgKGlzc2V0KCRkYXRhWyRrZXldKSkgew0KICAgICAgICAgICAgJG1lbS0+JGtleSA9ICRkYXRhWyRrZXldOw0KICAgICAgICB9DQogICAgfQ0KDQogICAgLy8g54S25ZCO77yM6K+75YWl5a+G56CBDQogICAgLy8g5a+G56CB6ZyA6KaB5Y2V54us5aSE55CG77yM5Zug5Li65ou/5LiN5Yiw55So5oi3R3VpZA0KICAgIGlmIChpc3NldCgkZGF0YVsnUGFzc3dvcmQnXSkpIHsNCiAgICAgICAgaWYgKCRkYXRhWydQYXNzd29yZCddICE9ICcnKSB7DQogICAgICAgICAgICBpZiAoc3RybGVuKCRkYXRhWydQYXNzd29yZCddKSA8ICR6YnAtPm9wdGlvblsnWkNfUEFTU1dPUkRfTUlOJ10gfHwgc3RybGVuKCRkYXRhWydQYXNzd29yZCddKSA+ICR6YnAtPm9wdGlvblsnWkNfUEFTU1dPUkRfTUFYJ10pIHsNCiAgICAgICAgICAgICAgICAkemJwLT5TaG93RXJyb3IoNTQsIF9fRklMRV9fLCBfX0xJTkVfXyk7DQogICAgICAgICAgICB9DQogICAgICAgICAgICBpZiAoIUNoZWNrUmVnRXhwKCRkYXRhWydQYXNzd29yZCddLCAnW3Bhc3N3b3JkXScpKSB7DQogICAgICAgICAgICAgICAgJHpicC0+U2hvd0Vycm9yKDU0LCBfX0ZJTEVfXywgX19MSU5FX18pOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgJG1lbS0+UGFzc3dvcmQgPSBNZW1iZXI6OkdldFBhc3NXb3JkQnlHdWlkKCRkYXRhWydQYXNzd29yZCddLCAkbWVtLT5HdWlkKTsNCiAgICAgICAgfQ0KICAgIH0NCg0KICAgIGZvcmVhY2ggKCRHTE9CQUxTWydob29rcyddWydGaWx0ZXJfUGx1Z2luX1Bvc3RNZW1iZXJfQ29yZSddIGFzICRmcG5hbWUgPT4gJiRmcHNpZ25hbCkgew0KICAgICAgICAkZnBuYW1lKCRtZW0pOw0KICAgIH0NCg0KICAgIEZpbHRlck1lbWJlcigkbWVtKTsNCiAgICBGaWx0ZXJNZXRhKCRtZW0pOw0KDQogICAgQ291bnRNZW1iZXIoJG1lbSk7DQoNCiAgICAvLyDmn6Xor6LlkIzlkI0NCiAgICBpZiAoaXNzZXQoJGRhdGFbJ05hbWUnXSkpIHsNCiAgICAgICAgaWYgKCRkYXRhWydJRCddID09IDApIHsNCiAgICAgICAgICAgIGlmICgkemJwLT5DaGVja01lbWJlck5hbWVFeGlzdCgkZGF0YVsnTmFtZSddKSkgew0KICAgICAgICAgICAgICAgICR6YnAtPlNob3dFcnJvcig2MiwgX19GSUxFX18sIF9fTElORV9fKTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgfQ0KICAgIH0NCg0KICAgICRtZW0tPlNhdmUoKTsNCg0KICAgIGZvcmVhY2ggKCRHTE9CQUxTWydob29rcyddWydGaWx0ZXJfUGx1Z2luX1Bvc3RNZW1iZXJfU3VjY2VlZCddIGFzICRmcG5hbWUgPT4gJiRmcHNpZ25hbCkgew0KICAgICAgICAkZnBuYW1lKCRtZW0pOw0KICAgIH0NCg0KICAgICR6YnAtPkFkZEJ1aWxkTW9kdWxlKCdhdXRob3JzJyk7DQoNCiAgICBpZiAoaXNzZXQoJGRhdGFbJ1Bhc3N3b3JkJ10pKSB7DQogICAgICAgIGlmICgkbWVtLT5JRCA9PSAkemJwLT51c2VyLT5JRCkgew0KICAgICAgICAgICAgUmVkaXJlY3QoJHpicC0+aG9zdCAuICd6Yl9zeXN0ZW0vY21kLnBocD9hY3Q9bG9naW4nKTsNCiAgICAgICAgfQ0KICAgIH0NCg0KICAgIHJldHVybiB0cnVlOw0KfQ0KDQovKioNCiAqIOWIoOmZpOeUqOaItw0KICogQHJldHVybiBib29sDQogKi8NCmZ1bmN0aW9uIERlbE1lbWJlcigpIHsNCiAgICBnbG9iYWwgJHpicDsNCg0KICAgICRpZCA9IChpbnQpIEdldFZhcnMoJ2lkJywgJ0dFVCcpOw0KICAgICRtZW0gPSAkemJwLT5HZXRNZW1iZXJCeUlEKCRpZCk7DQogICAgaWYgKCRtZW0tPklEID4gMCAmJiAkbWVtLT5JRCAhPSAkemJwLT51c2VyLT5JRCkgew0KICAgICAgICBpZiAoJG1lbS0+SXNHb2QgIT09IHRydWUpIHsNCiAgICAgICAgICAgIERlbE1lbWJlcl9BbGxEYXRhKCRpZCk7DQogICAgICAgICAgICAkbWVtLT5EZWwoKTsNCiAgICAgICAgICAgIGZvcmVhY2ggKCRHTE9CQUxTWydob29rcyddWydGaWx0ZXJfUGx1Z2luX0RlbE1lbWJlcl9TdWNjZWVkJ10gYXMgJGZwbmFtZSA9PiAmJGZwc2lnbmFsKSB7DQogICAgICAgICAgICAgICAgJGZwbmFtZSgkbWVtKTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgfQ0KICAgIH0gZWxzZSB7DQogICAgICAgIHJldHVybiBmYWxzZTsNCiAgICB9DQoNCiAgICByZXR1cm4gdHJ1ZTsNCn0NCg0KLyoqDQogKiDliKDpmaTnlKjmiLfkuIvmiYDmnInmlbDmja7vvIjljIXmi6zmlofnq6DjgIHor4TorrrjgIHpmYTku7bvvIkNCiAqIEBwYXJhbSBpbnQgJGlkIOeUqOaIt0lEDQogKi8NCmZ1bmN0aW9uIERlbE1lbWJlcl9BbGxEYXRhKCRpZCkgew0KICAgIGdsb2JhbCAkemJwOw0KDQogICAgJHcgPSBhcnJheSgpOw0KICAgICR3W10gPSBhcnJheSgnPScsICdsb2dfQXV0aG9ySUQnLCAkaWQpOw0KDQogICAgJGFydGljbGVzID0gJHpicC0+R2V0UG9zdExpc3QoJyonLCAkdyk7DQogICAgZm9yZWFjaCAoJGFydGljbGVzIGFzICRhKSB7DQogICAgICAgICRhLT5EZWwoKTsNCiAgICB9DQoNCiAgICAkdyA9IGFycmF5KCk7DQogICAgJHdbXSA9IGFycmF5KCc9JywgJ2NvbW1fQXV0aG9ySUQnLCAkaWQpOw0KICAgICRjb21tZW50cyA9ICR6YnAtPkdldENvbW1lbnRMaXN0KCcqJywgJHcpOw0KICAgIGZvcmVhY2ggKCRjb21tZW50cyBhcyAkYykgew0KICAgICAgICAkYy0+QXV0aG9ySUQgPSAwOw0KICAgICAgICAkYy0+U2F2ZSgpOw0KICAgIH0NCg0KICAgICR3ID0gYXJyYXkoKTsNCiAgICAkd1tdID0gYXJyYXkoJz0nLCAndWxfQXV0aG9ySUQnLCAkaWQpOw0KICAgICR1cGxvYWRzID0gJHpicC0+R2V0VXBsb2FkTGlzdCgnKicsICR3KTsNCiAgICBmb3JlYWNoICgkdXBsb2FkcyBhcyAkdSkgew0KICAgICAgICAkdS0+RGVsKCk7DQogICAgICAgICR1LT5EZWxGaWxlKCk7DQogICAgfQ0KDQp9DQoNCiMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMNCi8qKg0KICog5o+Q5Lqk5qih5Z2X5pWw5o2uDQogKiBAcmV0dXJuIGJvb2wNCiAqLw0KZnVuY3Rpb24gUG9zdE1vZHVsZSgpIHsNCiAgICBnbG9iYWwgJHpicDsNCg0KICAgIGlmIChpc3NldCgkX1BPU1RbJ2NhdGFsb2dfc3R5bGUnXSkpIHsNCiAgICAgICAgJHpicC0+b3B0aW9uWydaQ19NT0RVTEVfQ0FUQUxPR19TVFlMRSddID0gJF9QT1NUWydjYXRhbG9nX3N0eWxlJ107DQogICAgICAgICR6YnAtPlNhdmVPcHRpb24oKTsNCiAgICB9DQoNCiAgICBpZiAoIWlzc2V0KCRfUE9TVFsnSUQnXSkpIHsNCiAgICAgICAgcmV0dXJuOw0KICAgIH0NCg0KICAgIGlmICghR2V0VmFycygnRmlsZU5hbWUnLCAnUE9TVCcpKSB7DQogICAgICAgICRfUE9TVFsnRmlsZU5hbWUnXSA9ICdtb2QnIC4gcmFuZCgxMDAwLCAyMDAwKTsNCiAgICB9IGVsc2Ugew0KICAgICAgICAkX1BPU1RbJ0ZpbGVOYW1lJ10gPSBzdHJ0b2xvd2VyKCRfUE9TVFsnRmlsZU5hbWUnXSk7DQogICAgfQ0KICAgIGlmICghR2V0VmFycygnSHRtbElEJywgJ1BPU1QnKSkgew0KICAgICAgICAkX1BPU1RbJ0h0bWxJRCddID0gJF9QT1NUWydGaWxlTmFtZSddOw0KICAgIH0NCiAgICBpZiAoaXNzZXQoJF9QT1NUWydNYXhMaSddKSkgew0KICAgICAgICAkX1BPU1RbJ01heExpJ10gPSAoaW50ZWdlcikgJF9QT1NUWydNYXhMaSddOw0KICAgIH0NCiAgICBpZiAoaXNzZXQoJF9QT1NUWydJc0hpZGVUaXRsZSddKSkgew0KICAgICAgICAkX1BPU1RbJ0lzSGlkZVRpdGxlJ10gPSAoaW50ZWdlcikgJF9QT1NUWydJc0hpZGVUaXRsZSddOw0KICAgIH0NCiAgICBpZiAoIWlzc2V0KCRfUE9TVFsnVHlwZSddKSkgew0KICAgICAgICAkX1BPU1RbJ1R5cGUnXSA9ICdkaXYnOw0KICAgIH0NCiAgICBpZiAoaXNzZXQoJF9QT1NUWydDb250ZW50J10pKSB7DQogICAgICAgIGlmICgkX1BPU1RbJ1R5cGUnXSAhPSAnZGl2Jykgew0KICAgICAgICAgICAgJF9QT1NUWydDb250ZW50J10gPSBzdHJfcmVwbGFjZShhcnJheSgiXHIiLCAiXG4iKSwgYXJyYXkoJycsICcnKSwgJF9QT1NUWydDb250ZW50J10pOw0KICAgICAgICB9DQogICAgfQ0KICAgIGlmIChpc3NldCgkX1BPU1RbJ1NvdXJjZSddKSkgew0KDQogICAgfQ0KDQogICAgJG1vZCA9ICR6YnAtPkdldE1vZHVsZUJ5SUQoR2V0VmFycygnSUQnLCAnUE9TVCcpKTsNCg0KICAgIGZvcmVhY2ggKCR6YnAtPmRhdGFpbmZvWydNb2R1bGUnXSBhcyAka2V5ID0+ICR2YWx1ZSkgew0KICAgICAgICBpZiAoJGtleSA9PSAnSUQnIHx8ICRrZXkgPT0gJ01ldGEnKSB7Y29udGludWU7fQ0KICAgICAgICBpZiAoaXNzZXQoJF9QT1NUWyRrZXldKSkgew0KICAgICAgICAgICAgJG1vZC0+JGtleSA9IEdldFZhcnMoJGtleSwgJ1BPU1QnKTsNCiAgICAgICAgfQ0KICAgIH0NCg0KICAgIGlmIChpc3NldCgkX1BPU1RbJ05vUmVmcmVzaCddKSkgew0KICAgICAgICAkbW9kLT5Ob1JlZnJlc2ggPSAoYm9vbCkgJF9QT1NUWydOb1JlZnJlc2gnXTsNCiAgICB9DQoNCiAgICBmb3JlYWNoICgkR0xPQkFMU1snaG9va3MnXVsnRmlsdGVyX1BsdWdpbl9Qb3N0TW9kdWxlX0NvcmUnXSBhcyAkZnBuYW1lID0+ICYkZnBzaWduYWwpIHsNCiAgICAgICAgJGZwbmFtZSgkbW9kKTsNCiAgICB9DQoNCiAgICBGaWx0ZXJNb2R1bGUoJG1vZCk7DQogICAgRmlsdGVyTWV0YSgkbW9kKTsNCg0KICAgICRtb2QtPlNhdmUoKTsNCg0KICAgICR6YnAtPkFkZEJ1aWxkTW9kdWxlKCRtb2QtPkZpbGVOYW1lKTsNCg0KICAgIGZvcmVhY2ggKCRHTE9CQUxTWydob29rcyddWydGaWx0ZXJfUGx1Z2luX1Bvc3RNb2R1bGVfU3VjY2VlZCddIGFzICRmcG5hbWUgPT4gJiRmcHNpZ25hbCkgew0KICAgICAgICAkZnBuYW1lKCRtb2QpOw0KICAgIH0NCg0KICAgIHJldHVybiB0cnVlOw0KfQ0KDQovKioNCiAqIOWIoOmZpOaooeWdlw0KICogQHJldHVybiBib29sDQogKi8NCmZ1bmN0aW9uIERlbE1vZHVsZSgpIHsNCiAgICBnbG9iYWwgJHpicDsNCg0KICAgIGlmIChHZXRWYXJzKCdzb3VyY2UnLCAnR0VUJykgPT0gJ3RoZW1lJykgew0KICAgICAgICAkZm4gPSBHZXRWYXJzKCdmaWxlbmFtZScsICdHRVQnKTsNCiAgICAgICAgaWYgKCRmbikgew0KICAgICAgICAgICAgJG1vZCA9ICR6YnAtPkdldE1vZHVsZUJ5RmlsZU5hbWUoJGZuKTsNCiAgICAgICAgICAgIGlmICgkbW9kLT5GaWxlTmFtZSA9PSAkZm4pIHsNCiAgICAgICAgICAgICAgICAkbW9kLT5EZWwoKTsNCiAgICAgICAgICAgICAgICBmb3JlYWNoICgkR0xPQkFMU1snaG9va3MnXVsnRmlsdGVyX1BsdWdpbl9EZWxNb2R1bGVfU3VjY2VlZCddIGFzICRmcG5hbWUgPT4gJiRmcHNpZ25hbCkgew0KICAgICAgICAgICAgICAgICAgICAkZnBuYW1lKCRtb2QpOw0KICAgICAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgICAgIHJldHVybiB0cnVlOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgdW5zZXQoJG1vZCk7DQogICAgICAgIH0NCg0KICAgICAgICByZXR1cm4gZmFsc2U7DQogICAgfQ0KDQogICAgJGlkID0gKGludCkgR2V0VmFycygnaWQnLCAnR0VUJyk7DQogICAgJG1vZCA9ICR6YnAtPkdldE1vZHVsZUJ5SUQoJGlkKTsNCiAgICBpZiAoJG1vZC0+U291cmNlICE9ICdzeXN0ZW0nKSB7DQogICAgICAgICRtb2QtPkRlbCgpOw0KICAgICAgICBmb3JlYWNoICgkR0xPQkFMU1snaG9va3MnXVsnRmlsdGVyX1BsdWdpbl9EZWxNb2R1bGVfU3VjY2VlZCddIGFzICRmcG5hbWUgPT4gJiRmcHNpZ25hbCkgew0KICAgICAgICAgICAgJGZwbmFtZSgkbW9kKTsNCiAgICAgICAgfQ0KICAgIH0gZWxzZSB7DQogICAgICAgIHJldHVybiBmYWxzZTsNCiAgICB9DQogICAgdW5zZXQoJG1vZCk7DQoNCiAgICByZXR1cm4gdHJ1ZTsNCn0NCg0KIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIw0KLyoqDQogKiDpmYTku7bkuIrkvKANCiAqLw0KZnVuY3Rpb24gUG9zdFVwbG9hZCgpIHsNCiAgICBnbG9iYWwgJHpicDsNCg0KICAgIGZvcmVhY2ggKCRfRklMRVMgYXMgJGtleSA9PiAkdmFsdWUpIHsNCiAgICAgICAgaWYgKCRfRklMRVNbJGtleV1bJ2Vycm9yJ10gPT0gMCkgew0KICAgICAgICAgICAgaWYgKGlzX3VwbG9hZGVkX2ZpbGUoJF9GSUxFU1ska2V5XVsndG1wX25hbWUnXSkpIHsNCiAgICAgICAgICAgICAgICAkdXBsb2FkID0gbmV3IFVwbG9hZDsNCiAgICAgICAgICAgICAgICAkdXBsb2FkLT5OYW1lID0gJF9GSUxFU1ska2V5XVsnbmFtZSddOw0KICAgICAgICAgICAgICAgIGlmIChHZXRWYXJzKCdhdXRvX3JlbmFtZScsICdQT1NUJykgPT0gJ29uJyB8fCBHZXRWYXJzKCdhdXRvX3JlbmFtZScsICdQT1NUJykgPT0gdHJ1ZSkgew0KICAgICAgICAgICAgICAgICAgICAkdGVtcF9hcnIgPSBleHBsb2RlKCIuIiwgJHVwbG9hZC0+TmFtZSk7DQogICAgICAgICAgICAgICAgICAgICRmaWxlX2V4dCA9IHN0cnRvbG93ZXIodHJpbShhcnJheV9wb3AoJHRlbXBfYXJyKSkpOw0KICAgICAgICAgICAgICAgICAgICAkdXBsb2FkLT5OYW1lID0gZGF0ZSgiWW1kSGlzIikgLiB0aW1lKCkgLiByYW5kKDEwMDAwLCA5OTk5OSkgLiAnLicgLiAkZmlsZV9leHQ7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICR1cGxvYWQtPlNvdXJjZU5hbWUgPSAkX0ZJTEVTWyRrZXldWyduYW1lJ107DQogICAgICAgICAgICAgICAgJHVwbG9hZC0+TWltZVR5cGUgPSAkX0ZJTEVTWyRrZXldWyd0eXBlJ107DQogICAgICAgICAgICAgICAgJHVwbG9hZC0+U2l6ZSA9ICRfRklMRVNbJGtleV1bJ3NpemUnXTsNCiAgICAgICAgICAgICAgICAkdXBsb2FkLT5BdXRob3JJRCA9ICR6YnAtPnVzZXItPklEOw0KDQoNCiAgICAgICAgICAgICAgICAvL+ajgOafpeWQjOaciOmHjeWQjQ0KICAgICAgICAgICAgICAgICRkMSA9IGRhdGUoJ1ktbS0wMScsIHRpbWUoKSk7DQogICAgICAgICAgICAgICAgJGQyID0gZGF0ZSgnWS1tLWQnLCBzdHJ0b3RpbWUoZGF0ZSgnWS1tLTAxJywgdGltZSgpKSAuICcgKzEgbW9udGggLTEgZGF5JykpOw0KICAgICAgICAgICAgICAgICRkMSA9IHN0cnRvdGltZSgkZDEpOw0KICAgICAgICAgICAgICAgICRkMiA9IHN0cnRvdGltZSgkZDIpOw0KICAgICAgICAgICAgICAgICR3ID0gYXJyYXkoKTsNCiAgICAgICAgICAgICAgICAkd1tdID0gYXJyYXkoJz0nLCAndWxfTmFtZScsICR1cGxvYWQtPk5hbWUpOw0KICAgICAgICAgICAgICAgICR3W10gPSBhcnJheSgnPj0nLCAndWxfUG9zdFRpbWUnLCAkZDEpOw0KICAgICAgICAgICAgICAgICR3W10gPSBhcnJheSgnPD0nLCAndWxfUG9zdFRpbWUnLCAkZDIpOw0KICAgICAgICAgICAgICAgICR1cGxvYWRzID0gJHpicC0+R2V0VXBsb2FkTGlzdCgnKicsICR3KTsNCiAgICAgICAgICAgICAgICBpZihjb3VudCgkdXBsb2FkcykgPiAwKXsNCiAgICAgICAgICAgICAgICAgICAgJHpicC0+U2hvd0Vycm9yKDI4LCBfX0ZJTEVfXywgX19MSU5FX18pOw0KICAgICAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgICAgIGlmICghJHVwbG9hZC0+Q2hlY2tFeHROYW1lKCkpIHsNCiAgICAgICAgICAgICAgICAgICAgJHpicC0+U2hvd0Vycm9yKDI2LCBfX0ZJTEVfXywgX19MSU5FX18pOw0KICAgICAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgICAgIGlmICghJHVwbG9hZC0+Q2hlY2tTaXplKCkpIHsNCiAgICAgICAgICAgICAgICAgICAgJHpicC0+U2hvd0Vycm9yKDI3LCBfX0ZJTEVfXywgX19MSU5FX18pOw0KICAgICAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgICAgICR1cGxvYWQtPlNhdmVGaWxlKCRfRklMRVNbJGtleV1bJ3RtcF9uYW1lJ10pOw0KICAgICAgICAgICAgICAgICR1cGxvYWQtPlNhdmUoKTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgfQ0KICAgIH0NCiAgICBpZiAoaXNzZXQoJHVwbG9hZCkpIHsNCiAgICAgICAgQ291bnRNZW1iZXJBcnJheShhcnJheSgkdXBsb2FkLT5BdXRob3JJRCksIGFycmF5KDAsIDAsIDAsICsxKSk7DQogICAgfQ0KDQp9DQoNCi8qKg0KICog5Yig6Zmk6ZmE5Lu2DQogKiBAcmV0dXJuIGJvb2wNCiAqLw0KZnVuY3Rpb24gRGVsVXBsb2FkKCkgew0KICAgIGdsb2JhbCAkemJwOw0KDQogICAgJGlkID0gKGludCkgR2V0VmFycygnaWQnLCAnR0VUJyk7DQogICAgJHUgPSAkemJwLT5HZXRVcGxvYWRCeUlEKCRpZCk7DQogICAgaWYgKCR6YnAtPkNoZWNrUmlnaHRzKCdVcGxvYWRBbGwnKSB8fCAoISR6YnAtPkNoZWNrUmlnaHRzKCdVcGxvYWRBbGwnKSAmJiAkdS0+QXV0aG9ySUQgPT0gJHpicC0+dXNlci0+SUQpKSB7DQogICAgICAgICR1LT5EZWwoKTsNCiAgICAgICAgQ291bnRNZW1iZXJBcnJheShhcnJheSgkdS0+QXV0aG9ySUQpLCBhcnJheSgwLCAwLCAwLCAtMSkpOw0KICAgICAgICAkdS0+RGVsRmlsZSgpOw0KICAgIH0gZWxzZSB7DQogICAgICAgIHJldHVybiBmYWxzZTsNCiAgICB9DQoNCiAgICByZXR1cm4gdHJ1ZTsNCn0NCg0KIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIw0KLyoqDQogKiDlkK/nlKjmj5Lku7YNCiAqIEBwYXJhbSBzdHJpbmcgJG5hbWUg5o+S5Lu2SUQNCiAqIEByZXR1cm4gc3RyaW5nIOi/lOWbnuaPkuS7tklEDQogKi8NCmZ1bmN0aW9uIEVuYWJsZVBsdWdpbigkbmFtZSkgew0KICAgIGdsb2JhbCAkemJwOw0KDQogICAgJGFwcCA9ICR6YnAtPkxvYWRBcHAoJ3BsdWdpbicsICRuYW1lKTsNCiAgICAkYXBwLT5DaGVja0NvbXBhdGliaWxpdHkoKTsNCg0KICAgICR6YnAtPm9wdGlvblsnWkNfVVNJTkdfUExVR0lOX0xJU1QnXSA9IEFkZE5hbWVJblN0cmluZygkemJwLT5vcHRpb25bJ1pDX1VTSU5HX1BMVUdJTl9MSVNUJ10sICRuYW1lKTsNCg0KICAgICRhcnJheSA9IGV4cGxvZGUoJ3wnLCAkemJwLT5vcHRpb25bJ1pDX1VTSU5HX1BMVUdJTl9MSVNUJ10pOw0KICAgICRhcnJheWhhcyA9IGFycmF5KCk7DQogICAgZm9yZWFjaCAoJGFycmF5IGFzICRwKSB7DQogICAgICAgIGlmIChpc19yZWFkYWJsZSgkemJwLT51c2Vyc2RpciAuICdwbHVnaW4vJyAuICRwIC4gJy9wbHVnaW4ueG1sJykpIHsNCiAgICAgICAgICAgICRhcnJheWhhc1tdID0gJHA7DQogICAgICAgIH0NCg0KICAgIH0NCg0KICAgICR6YnAtPm9wdGlvblsnWkNfVVNJTkdfUExVR0lOX0xJU1QnXSA9IHRyaW0oaW1wbG9kZSgnfCcsICRhcnJheWhhcyksICd8Jyk7DQoNCiAgICAkemJwLT5TYXZlT3B0aW9uKCk7DQoNCiAgICByZXR1cm4gJG5hbWU7DQp9DQoNCi8qKg0KICog56aB55So5o+S5Lu2DQogKiBAcGFyYW0gc3RyaW5nICRuYW1lIOaPkuS7tklEDQogKi8NCmZ1bmN0aW9uIERpc2FibGVQbHVnaW4oJG5hbWUpIHsNCiAgICBnbG9iYWwgJHpicDsNCiAgICAkemJwLT5vcHRpb25bJ1pDX1VTSU5HX1BMVUdJTl9MSVNUJ10gPSBEZWxOYW1lSW5TdHJpbmcoJHpicC0+b3B0aW9uWydaQ19VU0lOR19QTFVHSU5fTElTVCddLCAkbmFtZSk7DQoNCiAgICAkYXJyYXkgPSBleHBsb2RlKCd8JywgJHpicC0+b3B0aW9uWydaQ19VU0lOR19QTFVHSU5fTElTVCddKTsNCiAgICAkYXJyYXloYXMgPSBhcnJheSgpOw0KICAgIGZvcmVhY2ggKCRhcnJheSBhcyAkcCkgew0KICAgICAgICBpZiAoaXNfcmVhZGFibGUoJHpicC0+dXNlcnNkaXIgLiAncGx1Z2luLycgLiAkcCAuICcvcGx1Z2luLnhtbCcpKSB7DQogICAgICAgICAgICAkYXJyYXloYXNbXSA9ICRwOw0KICAgICAgICB9DQoNCiAgICB9DQoNCiAgICAkemJwLT5vcHRpb25bJ1pDX1VTSU5HX1BMVUdJTl9MSVNUJ10gPSB0cmltKGltcGxvZGUoJ3wnLCAkYXJyYXloYXMpLCAnfCcpOw0KDQogICAgJHpicC0+U2F2ZU9wdGlvbigpOw0KfQ0KDQovKioNCiAqIOiuvue9ruW9k+WJjeS4u+mimOagt+W8jw0KICogQHBhcmFtIHN0cmluZyAkdGhlbWUg5Li76aKYSUQNCiAqIEBwYXJhbSBzdHJpbmcgJHN0eWxlIOagt+W8j+WQjQ0KICogQHJldHVybiBzdHJpbmcg6L+U5Zue5Li76aKYSUQNCiAqLw0KZnVuY3Rpb24gU2V0VGhlbWUoJHRoZW1lLCAkc3R5bGUpIHsNCiAgICBnbG9iYWwgJHpicDsNCg0KICAgICRhcHAgPSAkemJwLT5Mb2FkQXBwKCd0aGVtZScsICR0aGVtZSk7DQogICAgJGFwcC0+Q2hlY2tDb21wYXRpYmlsaXR5KCk7DQoNCiAgICAkb2xkdGhlbWUgPSAkemJwLT5vcHRpb25bJ1pDX0JMT0dfVEhFTUUnXTsNCg0KICAgIGlmICgkb2xkdGhlbWUgIT0gJHRoZW1lKSB7DQogICAgICAgIGlmICgkYXBwLT5zaWRlYmFyc19zaWRlYmFyMSB8ICRhcHAtPnNpZGViYXJzX3NpZGViYXIyIHwgJGFwcC0+c2lkZWJhcnNfc2lkZWJhcjMgfCAkYXBwLT5zaWRlYmFyc19zaWRlYmFyNCB8ICRhcHAtPnNpZGViYXJzX3NpZGViYXI1KSB7DQogICAgICAgICAgICAkczEgPSAkemJwLT5vcHRpb25bJ1pDX1NJREVCQVJfT1JERVInXTsNCiAgICAgICAgICAgICRzMiA9ICR6YnAtPm9wdGlvblsnWkNfU0lERUJBUjJfT1JERVInXTsNCiAgICAgICAgICAgICRzMyA9ICR6YnAtPm9wdGlvblsnWkNfU0lERUJBUjNfT1JERVInXTsNCiAgICAgICAgICAgICRzNCA9ICR6YnAtPm9wdGlvblsnWkNfU0lERUJBUjRfT1JERVInXTsNCiAgICAgICAgICAgICRzNSA9ICR6YnAtPm9wdGlvblsnWkNfU0lERUJBUjVfT1JERVInXTsNCiAgICAgICAgICAgICR6YnAtPm9wdGlvblsnWkNfU0lERUJBUl9PUkRFUiddID0gJGFwcC0+c2lkZWJhcnNfc2lkZWJhcjE7DQogICAgICAgICAgICAkemJwLT5vcHRpb25bJ1pDX1NJREVCQVIyX09SREVSJ10gPSAkYXBwLT5zaWRlYmFyc19zaWRlYmFyMjsNCiAgICAgICAgICAgICR6YnAtPm9wdGlvblsnWkNfU0lERUJBUjNfT1JERVInXSA9ICRhcHAtPnNpZGViYXJzX3NpZGViYXIzOw0KICAgICAgICAgICAgJHpicC0+b3B0aW9uWydaQ19TSURFQkFSNF9PUkRFUiddID0gJGFwcC0+c2lkZWJhcnNfc2lkZWJhcjQ7DQogICAgICAgICAgICAkemJwLT5vcHRpb25bJ1pDX1NJREVCQVI1X09SREVSJ10gPSAkYXBwLT5zaWRlYmFyc19zaWRlYmFyNTsNCiAgICAgICAgICAgICR6YnAtPmNhY2hlLT56Y19zaWRlYmFyX29yZGVyMSA9ICRzMTsNCiAgICAgICAgICAgICR6YnAtPmNhY2hlLT56Y19zaWRlYmFyX29yZGVyMiA9ICRzMjsNCiAgICAgICAgICAgICR6YnAtPmNhY2hlLT56Y19zaWRlYmFyX29yZGVyMyA9ICRzMzsNCiAgICAgICAgICAgICR6YnAtPmNhY2hlLT56Y19zaWRlYmFyX29yZGVyNCA9ICRzNDsNCiAgICAgICAgICAgICR6YnAtPmNhY2hlLT56Y19zaWRlYmFyX29yZGVyNSA9ICRzNTsNCiAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgIGlmICgkemJwLT5jYWNoZS0+emNfc2lkZWJhcl9vcmRlcjEgfCAkemJwLT5jYWNoZS0+emNfc2lkZWJhcl9vcmRlcjIgfCAkemJwLT5jYWNoZS0+emNfc2lkZWJhcl9vcmRlcjMgfCAkemJwLT5jYWNoZS0+emNfc2lkZWJhcl9vcmRlcjQgfCAkemJwLT5jYWNoZS0+emNfc2lkZWJhcl9vcmRlcjUpIHsNCiAgICAgICAgICAgICAgICAkemJwLT5vcHRpb25bJ1pDX1NJREVCQVJfT1JERVInXSA9ICR6YnAtPmNhY2hlLT56Y19zaWRlYmFyX29yZGVyMTsNCiAgICAgICAgICAgICAgICAkemJwLT5vcHRpb25bJ1pDX1NJREVCQVIyX09SREVSJ10gPSAkemJwLT5jYWNoZS0+emNfc2lkZWJhcl9vcmRlcjI7DQogICAgICAgICAgICAgICAgJHpicC0+b3B0aW9uWydaQ19TSURFQkFSM19PUkRFUiddID0gJHpicC0+Y2FjaGUtPnpjX3NpZGViYXJfb3JkZXIzOw0KICAgICAgICAgICAgICAgICR6YnAtPm9wdGlvblsnWkNfU0lERUJBUjRfT1JERVInXSA9ICR6YnAtPmNhY2hlLT56Y19zaWRlYmFyX29yZGVyNDsNCiAgICAgICAgICAgICAgICAkemJwLT5vcHRpb25bJ1pDX1NJREVCQVI1X09SREVSJ10gPSAkemJwLT5jYWNoZS0+emNfc2lkZWJhcl9vcmRlcjU7DQogICAgICAgICAgICAgICAgJHpicC0+Y2FjaGUtPnpjX3NpZGViYXJfb3JkZXIxID0gJyc7DQogICAgICAgICAgICAgICAgJHpicC0+Y2FjaGUtPnpjX3NpZGViYXJfb3JkZXIyID0gJyc7DQogICAgICAgICAgICAgICAgJHpicC0+Y2FjaGUtPnpjX3NpZGViYXJfb3JkZXIzID0gJyc7DQogICAgICAgICAgICAgICAgJHpicC0+Y2FjaGUtPnpjX3NpZGViYXJfb3JkZXI0ID0gJyc7DQogICAgICAgICAgICAgICAgJHpicC0+Y2FjaGUtPnpjX3NpZGViYXJfb3JkZXI1ID0gJyc7DQogICAgICAgICAgICB9DQogICAgICAgIH0NCg0KICAgIH0NCg0KICAgICR6YnAtPm9wdGlvblsnWkNfQkxPR19USEVNRSddID0gJHRoZW1lOw0KICAgICR6YnAtPm9wdGlvblsnWkNfQkxPR19DU1MnXSA9ICRzdHlsZTsNCg0KICAgICR6YnAtPlNhdmVPcHRpb24oKTsNCg0KICAgIGlmICgkb2xkdGhlbWUgIT0gJHRoZW1lKSB7DQogICAgICAgIFVuaW5zdGFsbFBsdWdpbigkb2xkdGhlbWUpOw0KDQogICAgICAgIHJldHVybiAkdGhlbWU7DQogICAgfQ0KfQ0KDQovKioNCiAqIOiuvue9ruS+p+agjw0KICovDQpmdW5jdGlvbiBTZXRTaWRlYmFyKCkgew0KICAgIGdsb2JhbCAkemJwOw0KDQogICAgJHpicC0+b3B0aW9uWydaQ19TSURFQkFSX09SREVSJ10gPSB0cmltKEdldFZhcnMoJ3NpZGViYXInLCAnUE9TVCcpLCAnfCcpOw0KICAgICR6YnAtPm9wdGlvblsnWkNfU0lERUJBUjJfT1JERVInXSA9IHRyaW0oR2V0VmFycygnc2lkZWJhcjInLCAnUE9TVCcpLCAnfCcpOw0KICAgICR6YnAtPm9wdGlvblsnWkNfU0lERUJBUjNfT1JERVInXSA9IHRyaW0oR2V0VmFycygnc2lkZWJhcjMnLCAnUE9TVCcpLCAnfCcpOw0KICAgICR6YnAtPm9wdGlvblsnWkNfU0lERUJBUjRfT1JERVInXSA9IHRyaW0oR2V0VmFycygnc2lkZWJhcjQnLCAnUE9TVCcpLCAnfCcpOw0KICAgICR6YnAtPm9wdGlvblsnWkNfU0lERUJBUjVfT1JERVInXSA9IHRyaW0oR2V0VmFycygnc2lkZWJhcjUnLCAnUE9TVCcpLCAnfCcpOw0KICAgICR6YnAtPlNhdmVPcHRpb24oKTsNCn0NCg0KLyoqDQogKiDkv53lrZjnvZHnq5norr7nva7pgInpobkNCiAqLw0KZnVuY3Rpb24gU2F2ZVNldHRpbmcoKSB7DQogICAgZ2xvYmFsICR6YnA7DQoNCiAgICBmb3JlYWNoICgkX1BPU1QgYXMgJGtleSA9PiAkdmFsdWUpIHsNCiAgICAgICAgaWYgKHN1YnN0cigka2V5LCAwLCAyKSAhPT0gJ1pDJykgew0KICAgICAgICAgICAgY29udGludWU7DQogICAgICAgIH0NCg0KICAgICAgICBpZiAoJGtleSA9PSAnWkNfUEVSTUFORU5UX0RPTUFJTl9FTkFCTEUnIHx8DQogICAgICAgICAgICAka2V5ID09ICdaQ19DT01NRU5UX1RVUk5PRkYnIHx8DQogICAgICAgICAgICAka2V5ID09ICdaQ19DT01NRU5UX1JFVkVSU0VfT1JERVInIHx8DQogICAgICAgICAgICAka2V5ID09ICdaQ19DT01NRU5UX0FVRElUJyB8fA0KICAgICAgICAgICAgJGtleSA9PSAnWkNfRElTUExBWV9TVUJDQVRFR09SWVMnIHx8DQogICAgICAgICAgICAka2V5ID09ICdaQ19HWklQX0VOQUJMRScgfHwNCiAgICAgICAgICAgICRrZXkgPT0gJ1pDX1NZTlRBWEhJR0hMSUdIVEVSX0VOQUJMRScgfHwNCiAgICAgICAgICAgICRrZXkgPT0gJ1pDX0NPTU1FTlRfVkVSSUZZX0VOQUJMRScgfHwNCiAgICAgICAgICAgICRrZXkgPT0gJ1pDX0NMT1NFX1NJVEUnDQogICAgICAgICkgew0KICAgICAgICAgICAgJHpicC0+b3B0aW9uWyRrZXldID0gKGJvb2xlYW4pICR2YWx1ZTsNCiAgICAgICAgICAgIGNvbnRpbnVlOw0KICAgICAgICB9DQogICAgICAgIGlmICgka2V5ID09ICdaQ19SU1MyX0NPVU5UJyB8fA0KICAgICAgICAgICAgJGtleSA9PSAnWkNfVVBMT0FEX0ZJTEVTSVpFJyB8fA0KICAgICAgICAgICAgJGtleSA9PSAnWkNfRElTUExBWV9DT1VOVCcgfHwNCiAgICAgICAgICAgICRrZXkgPT0gJ1pDX1NFQVJDSF9DT1VOVCcgfHwNCiAgICAgICAgICAgICRrZXkgPT0gJ1pDX1BBR0VCQVJfQ09VTlQnIHx8DQogICAgICAgICAgICAka2V5ID09ICdaQ19DT01NRU5UU19ESVNQTEFZX0NPVU5UJyB8fA0KICAgICAgICAgICAgJGtleSA9PSAnWkNfTUFOQUdFX0NPVU5UJw0KICAgICAgICApIHsNCiAgICAgICAgICAgICR6YnAtPm9wdGlvblska2V5XSA9IChpbnRlZ2VyKSAkdmFsdWU7DQogICAgICAgICAgICBjb250aW51ZTsNCiAgICAgICAgfQ0KICAgICAgICBpZiAoJGtleSA9PSAnWkNfVVBMT0FEX0ZJTEVUWVBFJykgew0KICAgICAgICAgICAgJHZhbHVlID0gc3RydG9sb3dlcigkdmFsdWUpOw0KICAgICAgICAgICAgJHZhbHVlID0gRGVsTmFtZUluU3RyaW5nKCR2YWx1ZSwgJ3BocCcpOw0KICAgICAgICAgICAgJHZhbHVlID0gRGVsTmFtZUluU3RyaW5nKCR2YWx1ZSwgJ2FzcCcpOw0KICAgICAgICB9DQogICAgICAgIGlmICgka2V5ID09ICdaQ19ERUJVR19NT0RFJykgew0KICAgICAgICAgICAgaWYgKChib29sKSAkdmFsdWUpIHsNCiAgICAgICAgICAgICAgICAkemJwLT5vcHRpb25bJ1pDX0RFQlVHX01PREUnXSA9IHRydWU7DQogICAgICAgICAgICAgICAgJHpicC0+b3B0aW9uWydaQ19ERUJVR19NT0RFX1NUUklDVCddID0gdHJ1ZTsNCiAgICAgICAgICAgICAgICAkemJwLT5vcHRpb25bJ1pDX0RFQlVHX0xPR19FUlJPUiddID0gdHJ1ZTsNCiAgICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICAgICAgJHpicC0+b3B0aW9uWydaQ19ERUJVR19NT0RFJ10gPSBmYWxzZTsNCiAgICAgICAgICAgICAgICAkemJwLT5vcHRpb25bJ1pDX0RFQlVHX01PREVfU1RSSUNUJ10gPSBmYWxzZTsNCiAgICAgICAgICAgICAgICAkemJwLT5vcHRpb25bJ1pDX0RFQlVHX0xPR19FUlJPUiddID0gZmFsc2U7DQogICAgICAgICAgICB9DQogICAgICAgIH0NCiAgICAgICAgJHpicC0+b3B0aW9uWyRrZXldID0gdHJpbShzdHJfcmVwbGFjZShhcnJheSgiXHIiLCAiXG4iKSwgYXJyYXkoIiIsICIiKSwgJHZhbHVlKSk7DQogICAgfQ0KDQoNCiAgICAkUHVueWNvZGUgPSBuZXcgUHVueWNvZGUoKTsNCiAgICAkemJwLT5vcHRpb25bJ1pDX0JMT0dfSE9TVCddID0gdHJpbSgkemJwLT5vcHRpb25bJ1pDX0JMT0dfSE9TVCddKTsNCiAgICAkemJwLT5vcHRpb25bJ1pDX0JMT0dfSE9TVCddID0gdHJpbSgkemJwLT5vcHRpb25bJ1pDX0JMT0dfSE9TVCddLCAnLycpIC4gJy8nOw0KICAgIGlmICgkemJwLT5vcHRpb25bJ1pDX0JMT0dfSE9TVCddID09ICcvJykgew0KICAgICAgICAkemJwLT5vcHRpb25bJ1pDX0JMT0dfSE9TVCddID0gJHpicC0+aG9zdDsNCiAgICB9DQogICAgJHpicC0+b3B0aW9uWydaQ19CTE9HX0hPU1QnXSA9ICRQdW55Y29kZS0+ZW5jb2RlKCR6YnAtPm9wdGlvblsnWkNfQkxPR19IT1NUJ10pOw0KICAgICRsYW5nID0gcmVxdWlyZSAkemJwLT51c2Vyc2RpciAuICdsYW5ndWFnZS8nIC4gJHpicC0+b3B0aW9uWydaQ19CTE9HX0xBTkdVQUdFUEFDSyddIC4gJy5waHAnOw0KICAgICR6YnAtPm9wdGlvblsnWkNfQkxPR19MQU5HVUFHRSddID0gJGxhbmdbJ2xhbmcnXTsNCiAgICAkemJwLT5vcHRpb25bJ1pDX0JMT0dfUFJPRFVDVCddID0gJ1otQmxvZ1BIUCc7DQogICAgJHpicC0+U2F2ZU9wdGlvbigpOw0KfQ0KDQojIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjDQovKioNCiAqIOi/h+a7pOaJqeWxleaVsOaNrg0KICogQHBhcmFtICRvYmplY3QNCiAqLw0KZnVuY3Rpb24gRmlsdGVyTWV0YSgmJG9iamVjdCkgew0KDQogICAgLy8kdHlwZT1zdHJ0b2xvd2VyKGdldF9jbGFzcygkb2JqZWN0KSk7DQoNCiAgICBmb3JlYWNoICgkX1BPU1QgYXMgJGtleSA9PiAkdmFsdWUpIHsNCiAgICAgICAgaWYgKHN1YnN0cigka2V5LCAwLCA1KSA9PSAnbWV0YV8nKSB7DQogICAgICAgICAgICAkbmFtZSA9IHN1YnN0cigka2V5LCA1IC0gc3RybGVuKCRrZXkpKTsNCiAgICAgICAgICAgICRvYmplY3QtPk1ldGFzLT4kbmFtZSA9ICR2YWx1ZTsNCiAgICAgICAgfQ0KICAgIH0NCg0KICAgIGZvcmVhY2ggKCRvYmplY3QtPk1ldGFzLT5HZXREYXRhKCkgYXMgJGtleSA9PiAkdmFsdWUpIHsNCiAgICAgICAgaWYgKCR2YWx1ZSA9PSAnJykgew0KICAgICAgICAgICAgJG9iamVjdC0+TWV0YXMtPkRlbCgka2V5KTsNCiAgICAgICAgfQ0KDQogICAgfQ0KDQp9DQoNCi8qKg0KICog6L+H5ruk6K+E6K665pWw5o2uDQogKiBAcGFyYW0gJGNvbW1lbnQNCiAqLw0KZnVuY3Rpb24gRmlsdGVyQ29tbWVudCgmJGNvbW1lbnQpIHsNCiAgICBnbG9iYWwgJHpicDsNCg0KICAgIGlmICghQ2hlY2tSZWdFeHAoJGNvbW1lbnQtPk5hbWUsICdbdXNlcm5hbWVdJykpIHsNCiAgICAgICAgJHpicC0+U2hvd0Vycm9yKDE1LCBfX0ZJTEVfXywgX19MSU5FX18pOw0KICAgIH0NCiAgICBpZiAoJGNvbW1lbnQtPkVtYWlsICYmICghQ2hlY2tSZWdFeHAoJGNvbW1lbnQtPkVtYWlsLCAnW2VtYWlsXScpKSkgew0KICAgICAgICAkemJwLT5TaG93RXJyb3IoMjksIF9fRklMRV9fLCBfX0xJTkVfXyk7DQogICAgfQ0KICAgIGlmICgkY29tbWVudC0+SG9tZVBhZ2UgJiYgKCFDaGVja1JlZ0V4cCgkY29tbWVudC0+SG9tZVBhZ2UsICdbaG9tZXBhZ2VdJykpKSB7DQogICAgICAgICR6YnAtPlNob3dFcnJvcigzMCwgX19GSUxFX18sIF9fTElORV9fKTsNCiAgICB9DQoNCiAgICAkY29tbWVudC0+TmFtZSA9IFN1YlN0clVURjhfU3RhcnQoJGNvbW1lbnQtPk5hbWUsIDAsIDIwKTsNCiAgICAkY29tbWVudC0+RW1haWwgPSBTdWJTdHJVVEY4X1N0YXJ0KCRjb21tZW50LT5FbWFpbCwgMCwgMzApOw0KICAgICRjb21tZW50LT5Ib21lUGFnZSA9IFN1YlN0clVURjhfU3RhcnQoJGNvbW1lbnQtPkhvbWVQYWdlLCAwLCAxMDApOw0KDQogICAgJGNvbW1lbnQtPkNvbnRlbnQgPSBUcmFuc2ZlckhUTUwoJGNvbW1lbnQtPkNvbnRlbnQsICdbbm9odG1sXScpOw0KDQogICAgJGNvbW1lbnQtPkNvbnRlbnQgPSBTdWJTdHJVVEY4X1N0YXJ0KCRjb21tZW50LT5Db250ZW50LCAwLCAxMDAwKTsNCiAgICAkY29tbWVudC0+Q29udGVudCA9IHRyaW0oJGNvbW1lbnQtPkNvbnRlbnQpOw0KICAgIGlmIChzdHJsZW4oJGNvbW1lbnQtPkNvbnRlbnQpID09IDApIHsNCiAgICAgICAgJHpicC0+U2hvd0Vycm9yKDQ2LCBfX0ZJTEVfXywgX19MSU5FX18pOw0KICAgIH0NCn0NCg0KLyoqDQogKiDov4fmu6Tmlofnq6DmlbDmja4NCiAqIEBwYXJhbSAkYXJ0aWNsZQ0KICovDQpmdW5jdGlvbiBGaWx0ZXJQb3N0KCYkYXJ0aWNsZSkgew0KICAgIGdsb2JhbCAkemJwOw0KDQogICAgJGFydGljbGUtPlRpdGxlID0gc3RyaXBfdGFncygkYXJ0aWNsZS0+VGl0bGUpOw0KICAgICRhcnRpY2xlLT5UaXRsZSA9IGh0bWxzcGVjaWFsY2hhcnMoJGFydGljbGUtPlRpdGxlKTsNCiAgICAkYXJ0aWNsZS0+QWxpYXMgPSBUcmFuc2ZlckhUTUwoJGFydGljbGUtPkFsaWFzLCAnW25vcm1hbG5hbWVdJyk7DQogICAgJGFydGljbGUtPkFsaWFzID0gc3RyX3JlcGxhY2UoJyAnLCAnJywgJGFydGljbGUtPkFsaWFzKTsNCg0KICAgIGlmICgkYXJ0aWNsZS0+VHlwZSA9PSBaQ19QT1NUX1RZUEVfQVJUSUNMRSkgew0KICAgICAgICBpZiAoISR6YnAtPkNoZWNrUmlnaHRzKCdBcnRpY2xlQWxsJykpIHsNCiAgICAgICAgICAgICRhcnRpY2xlLT5Db250ZW50ID0gVHJhbnNmZXJIVE1MKCRhcnRpY2xlLT5Db250ZW50LCAnW25vc2NyaXB0XScpOw0KICAgICAgICAgICAgJGFydGljbGUtPkludHJvID0gVHJhbnNmZXJIVE1MKCRhcnRpY2xlLT5JbnRybywgJ1tub3NjcmlwdF0nKTsNCiAgICAgICAgfQ0KICAgIH0gZWxzZWlmICgkYXJ0aWNsZS0+VHlwZSA9PSBaQ19QT1NUX1RZUEVfUEFHRSkgew0KICAgICAgICBpZiAoISR6YnAtPkNoZWNrUmlnaHRzKCdQYWdlQWxsJykpIHsNCiAgICAgICAgICAgICRhcnRpY2xlLT5Db250ZW50ID0gVHJhbnNmZXJIVE1MKCRhcnRpY2xlLT5Db250ZW50LCAnW25vc2NyaXB0XScpOw0KICAgICAgICAgICAgJGFydGljbGUtPkludHJvID0gVHJhbnNmZXJIVE1MKCRhcnRpY2xlLT5JbnRybywgJ1tub3NjcmlwdF0nKTsNCiAgICAgICAgfQ0KICAgIH0gZWxzZSB7DQogICAgICAgIGlmICghJHpicC0+Q2hlY2tSaWdodHMoJ0FydGljbGVBbGwnKSkgew0KICAgICAgICAgICAgJGFydGljbGUtPkNvbnRlbnQgPSBUcmFuc2ZlckhUTUwoJGFydGljbGUtPkNvbnRlbnQsICdbbm9zY3JpcHRdJyk7DQogICAgICAgICAgICAkYXJ0aWNsZS0+SW50cm8gPSBUcmFuc2ZlckhUTUwoJGFydGljbGUtPkludHJvLCAnW25vc2NyaXB0XScpOw0KICAgICAgICB9DQogICAgfQ0KfQ0KDQovKioNCiAqIOi/h+a7pOeUqOaIt+aVsOaNrg0KICogQHBhcmFtICRtZW1iZXINCiAqLw0KZnVuY3Rpb24gRmlsdGVyTWVtYmVyKCYkbWVtYmVyKSB7DQogICAgZ2xvYmFsICR6YnA7DQogICAgJG1lbWJlci0+SW50cm8gPSBUcmFuc2ZlckhUTUwoJG1lbWJlci0+SW50cm8sICdbbm9zY3JpcHRdJyk7DQogICAgJG1lbWJlci0+QWxpYXMgPSBUcmFuc2ZlckhUTUwoJG1lbWJlci0+QWxpYXMsICdbbm9ybWFsbmFtZV0nKTsNCiAgICAkbWVtYmVyLT5BbGlhcyA9IHN0cl9yZXBsYWNlKCcvJywgJycsICRtZW1iZXItPkFsaWFzKTsNCiAgICAkbWVtYmVyLT5BbGlhcyA9IHN0cl9yZXBsYWNlKCcuJywgJycsICRtZW1iZXItPkFsaWFzKTsNCiAgICAkbWVtYmVyLT5BbGlhcyA9IHN0cl9yZXBsYWNlKCcgJywgJycsICRtZW1iZXItPkFsaWFzKTsNCiAgICAkbWVtYmVyLT5BbGlhcyA9IHN0cl9yZXBsYWNlKCdfJywgJycsICRtZW1iZXItPkFsaWFzKTsNCiAgICAkbWVtYmVyLT5BbGlhcyA9IFN1YlN0clVURjhfU3RhcnQoJG1lbWJlci0+QWxpYXMsIDAsIChpbnQpICR6YnAtPmRhdGFpbmZvWydNZW1iZXInXVsnQWxpYXMnXVsyXSk7DQogICAgaWYgKHN0cmxlbigkbWVtYmVyLT5OYW1lKSA8ICR6YnAtPm9wdGlvblsnWkNfVVNFUk5BTUVfTUlOJ10gfHwgc3RybGVuKCRtZW1iZXItPk5hbWUpID4gJHpicC0+b3B0aW9uWydaQ19VU0VSTkFNRV9NQVgnXSkgew0KICAgICAgICAkemJwLT5TaG93RXJyb3IoNzcsIF9fRklMRV9fLCBfX0xJTkVfXyk7DQogICAgfQ0KDQogICAgaWYgKCFDaGVja1JlZ0V4cCgkbWVtYmVyLT5OYW1lLCAnW3VzZXJuYW1lXScpKSB7DQogICAgICAgICR6YnAtPlNob3dFcnJvcig3NywgX19GSUxFX18sIF9fTElORV9fKTsNCiAgICB9DQoNCiAgICBpZiAoIUNoZWNrUmVnRXhwKCRtZW1iZXItPkVtYWlsLCAnW2VtYWlsXScpKSB7DQogICAgICAgICRtZW1iZXItPkVtYWlsID0gJ251bGxAbnVsbC5jb20nOw0KICAgIH0NCg0KICAgIGlmIChzdWJzdHIoJG1lbWJlci0+SG9tZVBhZ2UsIDAsIDQpICE9ICdodHRwJykgew0KICAgICAgICAkbWVtYmVyLT5Ib21lUGFnZSA9ICdodHRwOi8vJyAuICRtZW1iZXItPkhvbWVQYWdlOw0KICAgIH0NCg0KICAgIGlmICghQ2hlY2tSZWdFeHAoJG1lbWJlci0+SG9tZVBhZ2UsICdbaG9tZXBhZ2VdJykpIHsNCiAgICAgICAgJG1lbWJlci0+SG9tZVBhZ2UgPSAnJzsNCiAgICB9DQoNCiAgICBpZiAoc3RybGVuKCRtZW1iZXItPkVtYWlsKSA+ICR6YnAtPm9wdGlvblsnWkNfRU1BSUxfTUFYJ10pIHsNCiAgICAgICAgJHpicC0+U2hvd0Vycm9yKDI5LCBfX0ZJTEVfXywgX19MSU5FX18pOw0KICAgIH0NCg0KICAgIGlmIChzdHJsZW4oJG1lbWJlci0+SG9tZVBhZ2UpID4gJHpicC0+b3B0aW9uWydaQ19IT01FUEFHRV9NQVgnXSkgew0KICAgICAgICAkemJwLT5TaG93RXJyb3IoMzAsIF9fRklMRV9fLCBfX0xJTkVfXyk7DQogICAgfQ0KDQp9DQoNCi8qKg0KICog6L+H5ruk5qih5Z2X5pWw5o2uDQogKiBAcGFyYW0gJG1vZHVsZQ0KICovDQpmdW5jdGlvbiBGaWx0ZXJNb2R1bGUoJiRtb2R1bGUpIHsNCiAgICBnbG9iYWwgJHpicDsNCiAgICAkbW9kdWxlLT5GaWxlTmFtZSA9IFRyYW5zZmVySFRNTCgkbW9kdWxlLT5GaWxlTmFtZSwgJ1tmaWxlbmFtZV0nKTsNCiAgICAkbW9kdWxlLT5IdG1sSUQgPSBUcmFuc2ZlckhUTUwoJG1vZHVsZS0+SHRtbElELCAnW25vcm1hbG5hbWVdJyk7DQp9DQoNCi8qKg0KICog6L+H5ruk5YiG57G75pWw5o2uDQogKiBAcGFyYW0gJGNhdGVnb3J5DQogKi8NCmZ1bmN0aW9uIEZpbHRlckNhdGVnb3J5KCYkY2F0ZWdvcnkpIHsNCiAgICBnbG9iYWwgJHpicDsNCiAgICAkY2F0ZWdvcnktPk5hbWUgPSBzdHJpcF90YWdzKCRjYXRlZ29yeS0+TmFtZSk7DQogICAgJGNhdGVnb3J5LT5BbGlhcyA9IFRyYW5zZmVySFRNTCgkY2F0ZWdvcnktPkFsaWFzLCAnW25vcm1hbG5hbWVdJyk7DQogICAgLy8kY2F0ZWdvcnktPkFsaWFzPXN0cl9yZXBsYWNlKCcvJywnJywkY2F0ZWdvcnktPkFsaWFzKTsNCiAgICAkY2F0ZWdvcnktPkFsaWFzID0gc3RyX3JlcGxhY2UoJy4nLCAnJywgJGNhdGVnb3J5LT5BbGlhcyk7DQogICAgJGNhdGVnb3J5LT5BbGlhcyA9IHN0cl9yZXBsYWNlKCcgJywgJycsICRjYXRlZ29yeS0+QWxpYXMpOw0KICAgICRjYXRlZ29yeS0+QWxpYXMgPSBzdHJfcmVwbGFjZSgnXycsICcnLCAkY2F0ZWdvcnktPkFsaWFzKTsNCn0NCg0KLyoqDQogKiDov4fmu6R0YWfmlbDmja4NCiAqIEBwYXJhbSAkdGFnDQogKi8NCmZ1bmN0aW9uIEZpbHRlclRhZygmJHRhZykgew0KICAgIGdsb2JhbCAkemJwOw0KICAgICR0YWctPk5hbWUgPSBzdHJpcF90YWdzKCR0YWctPk5hbWUpOw0KICAgICR0YWctPkFsaWFzID0gVHJhbnNmZXJIVE1MKCR0YWctPkFsaWFzLCAnW25vcm1hbG5hbWVdJyk7DQp9DQoNCiMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMNCiPnu5/orqHlh73mlbANCi8qKg0KICrnu5/orqHnva7pobbmlofnq6DmlbDnu4QNCiAqIEBwYXJhbSBpbnQgJHBsdXMg5o6n5Yi25piv5ZCm6KaB6L+b6KGM5YWo6KGo5omr5o+PDQogKi8NCmZ1bmN0aW9uIENvdW50VG9wQXJ0aWNsZSgkYWRkcGx1cyA9IG51bGwsICRkZWxwbHVzID0gbnVsbCkgew0KICAgIGdsb2JhbCAkemJwOw0KDQogICAgJGFycmF5ID0gdW5zZXJpYWxpemUoJHpicC0+Y2FjaGUtPnRvcF9wb3N0X2FycmF5KTsNCiAgICBpZiAoIWlzX2FycmF5KCRhcnJheSkpIHsNCiAgICAgICAgJGFycmF5ID0gYXJyYXkoKTsNCiAgICB9DQoNCiAgICBpZiAoJGFkZHBsdXMgPT09IG51bGwgJiYgJGRlbHBsdXMgPT09IG51bGwpIHsNCiAgICAgICAgJHMgPSAkemJwLT5kYi0+c3FsLT5TZWxlY3QoJHpicC0+dGFibGVbJ1Bvc3QnXSwgJ2xvZ19JRCcsIGFycmF5KGFycmF5KCc9JywgJ2xvZ19UeXBlJywgMCksIGFycmF5KCc9JywgJ2xvZ19Jc1RvcCcsIDEpLCBhcnJheSgnPScsICdsb2dfU3RhdHVzJywgMCkpLCBudWxsLCBudWxsLCBudWxsKTsNCiAgICAgICAgJGEgPSAkemJwLT5kYi0+UXVlcnkoJHMpOw0KICAgICAgICBmb3JlYWNoICgkYSBhcyAkaWQpIHsNCiAgICAgICAgICAgICRhcnJheVsoaW50KSBjdXJyZW50KCRpZCldID0gKGludCkgY3VycmVudCgkaWQpOw0KICAgICAgICB9DQogICAgfSBlbHNlaWYgKCRhZGRwbHVzICE9PSBudWxsICYmICRkZWxwbHVzID09PSBudWxsKSB7DQogICAgICAgICRhZGRwbHVzID0gKGludCkgJGFkZHBsdXM7DQogICAgICAgICRhcnJheVskYWRkcGx1c10gPSAkYWRkcGx1czsNCiAgICB9IGVsc2VpZiAoJGFkZHBsdXMgPT09IG51bGwgJiYgJGRlbHBsdXMgIT09IG51bGwpIHsNCiAgICAgICAgJGRlbHBsdXMgPSAoaW50KSAkZGVscGx1czsNCiAgICAgICAgdW5zZXQoJGFycmF5WyRkZWxwbHVzXSk7DQogICAgfQ0KDQogICAgJHpicC0+Y2FjaGUtPnRvcF9wb3N0X2FycmF5ID0gc2VyaWFsaXplKCRhcnJheSk7DQp9DQoNCi8qKg0KICrnu5/orqHor4TorrrmlbANCiAqIEBwYXJhbSBpbnQgJGFsbHBsdXMg5o6n5Yi25piv5ZCm6KaB6L+b6KGM5YWo6KGo5omr5o+PIOaAu+ivhOiuug0KICogQHBhcmFtIGludCAkY2hrcGx1cyDmjqfliLbmmK/lkKbopoHov5vooYzlhajooajmiavmj48g5pyq5a6h5qC46K+E6K66DQogKi8NCmZ1bmN0aW9uIENvdW50Q29tbWVudE51bXMoJGFsbHBsdXMgPSBudWxsLCAkY2hrcGx1cyA9IG51bGwpIHsNCiAgICBnbG9iYWwgJHpicDsNCg0KICAgIGlmICgkYWxscGx1cyA9PT0gbnVsbCkgew0KICAgICAgICAkemJwLT5jYWNoZS0+YWxsX2NvbW1lbnRfbnVtcyA9IChpbnQpIEdldFZhbHVlSW5BcnJheUJ5Q3VycmVudCgkemJwLT5kYi0+UXVlcnkoJ1NFTEVDVCBDT1VOVCgqKSBBUyBudW0gRlJPTSAnIC4gJEdMT0JBTFNbJ3RhYmxlJ11bJ0NvbW1lbnQnXSksICdudW0nKTsNCiAgICB9IGVsc2Ugew0KICAgICAgICAkemJwLT5jYWNoZS0+YWxsX2NvbW1lbnRfbnVtcyArPSAkYWxscGx1czsNCiAgICB9DQogICAgaWYgKCRjaGtwbHVzID09PSBudWxsKSB7DQogICAgICAgICR6YnAtPmNhY2hlLT5jaGVja19jb21tZW50X251bXMgPSAoaW50KSBHZXRWYWx1ZUluQXJyYXlCeUN1cnJlbnQoJHpicC0+ZGItPlF1ZXJ5KCdTRUxFQ1QgQ09VTlQoKikgQVMgbnVtIEZST00gJyAuICRHTE9CQUxTWyd0YWJsZSddWydDb21tZW50J10gLiAnIFdIRVJFIGNvbW1fSXNjaGVja2luZz1cJzFcJycpLCAnbnVtJyk7DQogICAgfSBlbHNlIHsNCiAgICAgICAgJHpicC0+Y2FjaGUtPmNoZWNrX2NvbW1lbnRfbnVtcyArPSAkY2hrcGx1czsNCiAgICB9DQogICAgJHpicC0+Y2FjaGUtPm5vcm1hbF9jb21tZW50X251bXMgPSAoaW50KSAoJHpicC0+Y2FjaGUtPmFsbF9jb21tZW50X251bXMgLSAkemJwLT5jYWNoZS0+Y2hlY2tfY29tbWVudF9udW1zKTsNCn0NCg0KLyoqDQogKue7n+iuoeWFrOW8gOaWh+eroOaVsA0KICogQHBhcmFtIGludCAkcGx1cyDmjqfliLbmmK/lkKbopoHov5vooYzlhajooajmiavmj48NCiAqLw0KZnVuY3Rpb24gQ291bnROb3JtYWxBcnRpY2xlTnVtcygkcGx1cyA9IG51bGwpIHsNCiAgICBnbG9iYWwgJHpicDsNCg0KICAgIGlmICgkcGx1cyA9PT0gbnVsbCkgew0KICAgICAgICAkcyA9ICR6YnAtPmRiLT5zcWwtPkNvdW50KCR6YnAtPnRhYmxlWydQb3N0J10sIGFycmF5KGFycmF5KCdDT1VOVCcsICcqJywgJ251bScpKSwgYXJyYXkoYXJyYXkoJz0nLCAnbG9nX1R5cGUnLCAwKSwgYXJyYXkoJz0nLCAnbG9nX0lzVG9wJywgMCksIGFycmF5KCc9JywgJ2xvZ19TdGF0dXMnLCAwKSkpOw0KICAgICAgICAkbnVtID0gR2V0VmFsdWVJbkFycmF5QnlDdXJyZW50KCR6YnAtPmRiLT5RdWVyeSgkcyksICdudW0nKTsNCg0KICAgICAgICAkemJwLT5jYWNoZS0+bm9ybWFsX2FydGljbGVfbnVtcyA9ICRudW07DQogICAgfSBlbHNlIHsNCiAgICAgICAgJHpicC0+Y2FjaGUtPm5vcm1hbF9hcnRpY2xlX251bXMgKz0gJHBsdXM7DQogICAgfQ0KfQ0KDQovKioNCiAqIOe7n+iuoeaWh+eroOS4i+ivhOiuuuaVsA0KICogQHBhcmFtIHBvc3QgJGFydGljbGUNCiAqIEBwYXJhbSBpbnQgJHBsdXMg5o6n5Yi25piv5ZCm6KaB6L+b6KGM5YWo6KGo5omr5o+PDQogKi8NCmZ1bmN0aW9uIENvdW50UG9zdCgmJGFydGljbGUsICRwbHVzID0gbnVsbCkgew0KICAgIGdsb2JhbCAkemJwOw0KDQogICAgaWYgKCRwbHVzID09PSBudWxsKSB7DQogICAgICAgICRpZCA9ICRhcnRpY2xlLT5JRDsNCg0KICAgICAgICAkcyA9ICR6YnAtPmRiLT5zcWwtPkNvdW50KCR6YnAtPnRhYmxlWydDb21tZW50J10sIGFycmF5KGFycmF5KCdDT1VOVCcsICcqJywgJ251bScpKSwgYXJyYXkoYXJyYXkoJz0nLCAnY29tbV9Mb2dJRCcsICRpZCksIGFycmF5KCc9JywgJ2NvbW1fSXNDaGVja2luZycsIDApKSk7DQogICAgICAgICRudW0gPSBHZXRWYWx1ZUluQXJyYXlCeUN1cnJlbnQoJHpicC0+ZGItPlF1ZXJ5KCRzKSwgJ251bScpOw0KDQogICAgICAgICRhcnRpY2xlLT5Db21tTnVtcyA9ICRudW07DQogICAgfSBlbHNlIHsNCiAgICAgICAgJGFydGljbGUtPkNvbW1OdW1zICs9ICRwbHVzOw0KICAgIH0NCn0NCg0KLyoqDQogKiDmibnph4/nu5/orqHmjIflrprmlofnq6DkuIvor4TorrrmlbDlubbkv53lrZgNCiAqIEBwYXJhbSBhcnJheSAkYXJyYXkg6K6w5b2V5paH56ugSUTnmoTmlbDnu4QNCiAqIEBwYXJhbSBpbnQgJHBsdXMg5o6n5Yi25piv5ZCm6KaB6L+b6KGM5YWo6KGo5omr5o+PDQogKi8NCmZ1bmN0aW9uIENvdW50UG9zdEFycmF5KCRhcnJheSwgJHBsdXMgPSBudWxsKSB7DQogICAgZ2xvYmFsICR6YnA7DQogICAgJGFycmF5ID0gYXJyYXlfdW5pcXVlKCRhcnJheSk7DQogICAgZm9yZWFjaCAoJGFycmF5IGFzICR2YWx1ZSkgew0KICAgICAgICBpZiAoJHZhbHVlID09IDApIHsNCiAgICAgICAgICAgIGNvbnRpbnVlOw0KICAgICAgICB9DQoNCiAgICAgICAgJGFydGljbGUgPSAkemJwLT5HZXRQb3N0QnlJRCgkdmFsdWUpOw0KICAgICAgICBpZiAoJGFydGljbGUtPklEID4gMCkgew0KICAgICAgICAgICAgQ291bnRQb3N0KCRhcnRpY2xlLCAkcGx1cyk7DQogICAgICAgICAgICAkYXJ0aWNsZS0+U2F2ZSgpOw0KICAgICAgICB9DQogICAgfQ0KfQ0KDQovKioNCiAqIOe7n+iuoeWIhuexu+S4i+aWh+eroOaVsA0KICogQHBhcmFtIGNhdGVnb3J5ICYkY2F0ZWdvcnkNCiAqIEBwYXJhbSBpbnQgJHBsdXMg5o6n5Yi25piv5ZCm6KaB6L+b6KGM5YWo6KGo5omr5o+PDQogKi8NCmZ1bmN0aW9uIENvdW50Q2F0ZWdvcnkoJiRjYXRlZ29yeSwgJHBsdXMgPSBudWxsKSB7DQogICAgZ2xvYmFsICR6YnA7DQoNCiAgICBpZiAoJHBsdXMgPT09IG51bGwpIHsNCiAgICAgICAgJGlkID0gJGNhdGVnb3J5LT5JRDsNCg0KICAgICAgICAkcyA9ICR6YnAtPmRiLT5zcWwtPkNvdW50KCR6YnAtPnRhYmxlWydQb3N0J10sIGFycmF5KGFycmF5KCdDT1VOVCcsICcqJywgJ251bScpKSwgYXJyYXkoYXJyYXkoJz0nLCAnbG9nX1R5cGUnLCAwKSwgYXJyYXkoJz0nLCAnbG9nX0lzVG9wJywgMCksIGFycmF5KCc9JywgJ2xvZ19TdGF0dXMnLCAwKSwgYXJyYXkoJz0nLCAnbG9nX0NhdGVJRCcsICRpZCkpKTsNCiAgICAgICAgJG51bSA9IEdldFZhbHVlSW5BcnJheUJ5Q3VycmVudCgkemJwLT5kYi0+UXVlcnkoJHMpLCAnbnVtJyk7DQoNCiAgICAgICAgJGNhdGVnb3J5LT5Db3VudCA9ICRudW07DQogICAgfSBlbHNlIHsNCiAgICAgICAgJGNhdGVnb3J5LT5Db3VudCArPSAkcGx1czsNCiAgICB9DQp9DQoNCi8qKg0KICog5om56YeP57uf6K6h5oyH5a6a5YiG57G75LiL5paH56ug5pWw5bm25L+d5a2YDQogKiBAcGFyYW0gYXJyYXkgJGFycmF5IOiusOW9leWIhuexu0lE55qE5pWw57uEDQogKiBAcGFyYW0gaW50ICRwbHVzIOaOp+WItuaYr+WQpuimgei/m+ihjOWFqOihqOaJq+aPjw0KICovDQpmdW5jdGlvbiBDb3VudENhdGVnb3J5QXJyYXkoJGFycmF5LCAkcGx1cyA9IG51bGwpIHsNCiAgICBnbG9iYWwgJHpicDsNCiAgICAkYXJyYXkgPSBhcnJheV91bmlxdWUoJGFycmF5KTsNCiAgICBmb3JlYWNoICgkYXJyYXkgYXMgJHZhbHVlKSB7DQogICAgICAgIGlmICgkdmFsdWUgPT0gMCkgew0KICAgICAgICAgICAgY29udGludWU7DQogICAgICAgIH0NCg0KICAgICAgICBDb3VudENhdGVnb3J5KCR6YnAtPmNhdGVnb3JpZXNbJHZhbHVlXSwgJHBsdXMpOw0KICAgICAgICAkemJwLT5jYXRlZ29yaWVzWyR2YWx1ZV0tPlNhdmUoKTsNCiAgICB9DQp9DQoNCi8qKg0KICog57uf6K6hdGFn5LiL55qE5paH56ug5pWwDQogKiBAcGFyYW0gdGFnICYkdGFnDQogKiBAcGFyYW0gaW50ICRwbHVzIOaOp+WItuaYr+WQpuimgei/m+ihjOWFqOihqOaJq+aPjw0KICovDQpmdW5jdGlvbiBDb3VudFRhZygmJHRhZywgJHBsdXMgPSBudWxsKSB7DQogICAgZ2xvYmFsICR6YnA7DQoNCiAgICBpZiAoJHBsdXMgPT09IG51bGwpIHsNCiAgICAgICAgJGlkID0gJHRhZy0+SUQ7DQoNCiAgICAgICAgJHMgPSAkemJwLT5kYi0+c3FsLT5Db3VudCgkemJwLT50YWJsZVsnUG9zdCddLCBhcnJheShhcnJheSgnQ09VTlQnLCAnKicsICdudW0nKSksIGFycmF5KGFycmF5KCdMSUtFJywgJ2xvZ19UYWcnLCAnJXsnIC4gJGlkIC4gJ30lJykpKTsNCiAgICAgICAgJG51bSA9IEdldFZhbHVlSW5BcnJheUJ5Q3VycmVudCgkemJwLT5kYi0+UXVlcnkoJHMpLCAnbnVtJyk7DQoNCiAgICAgICAgJHRhZy0+Q291bnQgPSAkbnVtOw0KICAgIH0gZWxzZSB7DQogICAgICAgICR0YWctPkNvdW50ICs9ICRwbHVzOw0KICAgIH0NCn0NCg0KLyoqDQogKiDmibnph4/nu5/orqHmjIflrpp0YWfkuIvmlofnq6DmlbDlubbkv53lrZgNCiAqIEBwYXJhbSBzdHJpbmcgJHN0cmluZyDnsbvkvLwnezF9ezJ9ezN9ezR9ezR9J+eahHRhZ0lE5LiyDQogKiBAcGFyYW0gaW50ICRwbHVzIOaOp+WItuaYr+WQpuimgei/m+ihjOWFqOihqOaJq+aPjw0KICovDQpmdW5jdGlvbiBDb3VudFRhZ0FycmF5U3RyaW5nKCRzdHJpbmcsICRwbHVzID0gbnVsbCwgJGFydGljbGVpZCA9IG51bGwpIHsNCiAgICBnbG9iYWwgJHpicDsNCiAgICAkYXJyYXkgPSAkemJwLT5Mb2FkVGFnc0J5SURTdHJpbmcoJHN0cmluZyk7DQoNCiAgICAvL+a3u+WKoOWkp+aVsOaNruaOpeWPoyx0YWcscGx1cyxpZA0KICAgIGZvcmVhY2ggKCRHTE9CQUxTWydob29rcyddWydGaWx0ZXJfUGx1Z2luX0xhcmdlRGF0YV9Db3VudFRhZ0FycmF5J10gYXMgJGZwbmFtZSA9PiAmJGZwc2lnbmFsKSB7DQogICAgICAgICRmcHJldHVybiA9ICRmcG5hbWUoJGFycmF5LCAkcGx1cywgJGFydGljbGVpZCk7DQogICAgICAgIGlmICgkZnBzaWduYWwgPT0gUExVR0lOX0VYSVRTSUdOQUxfUkVUVVJOKSB7DQogICAgICAgICAgICAkZnBzaWduYWwgPSBQTFVHSU5fRVhJVFNJR05BTF9OT05FOw0KDQogICAgICAgICAgICByZXR1cm4gJGZwcmV0dXJuOw0KICAgICAgICB9DQogICAgfQ0KDQogICAgZm9yZWFjaCAoJGFycmF5IGFzICYkdGFnKSB7DQogICAgICAgIENvdW50VGFnKCR0YWcsICRwbHVzLCAkYXJ0aWNsZWlkKTsNCiAgICAgICAgJHRhZy0+U2F2ZSgpOw0KICAgIH0NCn0NCg0KLyoqDQogKiDnu5/orqHnlKjmiLfkuIvnmoTmlofnq6DmlbDjgIHpobXpnaLmlbDjgIHor4TorrrmlbDjgIHpmYTku7bmlbDnrYkNCiAqIEBwYXJhbSAkbWVtYmVyDQogKiBAcGFyYW0gYXJyYXkgJHBsdXMg6K6+572u5piv5ZCm6ZyA6KaB5a6M5YWo5YWo6KGo5omr5o+PDQogKi8NCmZ1bmN0aW9uIENvdW50TWVtYmVyKCYkbWVtYmVyLCAkcGx1cyA9IGFycmF5KG51bGwsIG51bGwsIG51bGwsIG51bGwpKSB7DQogICAgZ2xvYmFsICR6YnA7DQogICAgaWYgKCEoJG1lbWJlciBpbnN0YW5jZW9mIE1lbWJlcikpIHsNCiAgICAgICAgcmV0dXJuOw0KICAgIH0NCg0KICAgICRpZCA9ICRtZW1iZXItPklEOw0KDQogICAgaWYgKCRwbHVzWzBdID09PSBudWxsKSB7DQogICAgICAgICRzID0gJHpicC0+ZGItPnNxbC0+Q291bnQoJHpicC0+dGFibGVbJ1Bvc3QnXSwgYXJyYXkoYXJyYXkoJ0NPVU5UJywgJyonLCAnbnVtJykpLCBhcnJheShhcnJheSgnPScsICdsb2dfQXV0aG9ySUQnLCAkaWQpLCBhcnJheSgnPScsICdsb2dfVHlwZScsIDApKSk7DQogICAgICAgICRtZW1iZXJfQXJ0aWNsZXMgPSBHZXRWYWx1ZUluQXJyYXlCeUN1cnJlbnQoJHpicC0+ZGItPlF1ZXJ5KCRzKSwgJ251bScpOw0KICAgICAgICAkbWVtYmVyLT5BcnRpY2xlcyA9ICRtZW1iZXJfQXJ0aWNsZXM7DQogICAgfSBlbHNlIHsNCiAgICAgICAgJG1lbWJlci0+QXJ0aWNsZXMgKz0gJHBsdXNbMF07DQogICAgfQ0KDQogICAgaWYgKCRwbHVzWzFdID09PSBudWxsKSB7DQogICAgICAgICRzID0gJHpicC0+ZGItPnNxbC0+Q291bnQoJHpicC0+dGFibGVbJ1Bvc3QnXSwgYXJyYXkoYXJyYXkoJ0NPVU5UJywgJyonLCAnbnVtJykpLCBhcnJheShhcnJheSgnPScsICdsb2dfQXV0aG9ySUQnLCAkaWQpLCBhcnJheSgnPScsICdsb2dfVHlwZScsIDEpKSk7DQogICAgICAgICRtZW1iZXJfUGFnZXMgPSBHZXRWYWx1ZUluQXJyYXlCeUN1cnJlbnQoJHpicC0+ZGItPlF1ZXJ5KCRzKSwgJ251bScpOw0KICAgICAgICAkbWVtYmVyLT5QYWdlcyA9ICRtZW1iZXJfUGFnZXM7DQogICAgfSBlbHNlIHsNCiAgICAgICAgJG1lbWJlci0+UGFnZXMgKz0gJHBsdXNbMV07DQogICAgfQ0KDQogICAgaWYgKCRwbHVzWzJdID09PSBudWxsKSB7DQogICAgICAgICRzID0gJHpicC0+ZGItPnNxbC0+Q291bnQoJHpicC0+dGFibGVbJ0NvbW1lbnQnXSwgYXJyYXkoYXJyYXkoJ0NPVU5UJywgJyonLCAnbnVtJykpLCBhcnJheShhcnJheSgnPScsICdjb21tX0F1dGhvcklEJywgJGlkKSkpOw0KICAgICAgICAkbWVtYmVyX0NvbW1lbnRzID0gR2V0VmFsdWVJbkFycmF5QnlDdXJyZW50KCR6YnAtPmRiLT5RdWVyeSgkcyksICdudW0nKTsNCiAgICAgICAgJG1lbWJlci0+Q29tbWVudHMgPSAkbWVtYmVyX0NvbW1lbnRzOw0KICAgIH0gZWxzZSB7DQogICAgICAgICRtZW1iZXItPkNvbW1lbnRzICs9ICRwbHVzWzJdOw0KICAgIH0NCg0KICAgIGlmICgkcGx1c1szXSA9PT0gbnVsbCkgew0KICAgICAgICAkcyA9ICR6YnAtPmRiLT5zcWwtPkNvdW50KCR6YnAtPnRhYmxlWydVcGxvYWQnXSwgYXJyYXkoYXJyYXkoJ0NPVU5UJywgJyonLCAnbnVtJykpLCBhcnJheShhcnJheSgnPScsICd1bF9BdXRob3JJRCcsICRpZCkpKTsNCiAgICAgICAgJG1lbWJlcl9VcGxvYWRzID0gR2V0VmFsdWVJbkFycmF5QnlDdXJyZW50KCR6YnAtPmRiLT5RdWVyeSgkcyksICdudW0nKTsNCiAgICAgICAgJG1lbWJlci0+VXBsb2FkcyA9ICRtZW1iZXJfVXBsb2FkczsNCiAgICB9IGVsc2Ugew0KICAgICAgICAkbWVtYmVyLT5VcGxvYWRzICs9ICRwbHVzWzNdOw0KICAgIH0NCg0KfQ0KDQovKioNCiAqIOaJuemHj+e7n+iuoeaMh+WumueUqOaIt+aVsOaNruW5tuS/neWtmA0KICogQHBhcmFtIGFycmF5ICRhcnJheSDorrDlvZXnlKjmiLdJROeahOaVsOe7hA0KICogQHBhcmFtIGFycmF5ICRwbHVzIOiuvue9ruaYr+WQpumcgOimgeWujOWFqOWFqOihqOaJq+aPjw0KICovDQpmdW5jdGlvbiBDb3VudE1lbWJlckFycmF5KCRhcnJheSwgJHBsdXMgPSBhcnJheShudWxsLCBudWxsLCBudWxsLCBudWxsKSkgew0KICAgIGdsb2JhbCAkemJwOw0KICAgICRhcnJheSA9IGFycmF5X3VuaXF1ZSgkYXJyYXkpOw0KICAgIGZvcmVhY2ggKCRhcnJheSBhcyAkdmFsdWUpIHsNCiAgICAgICAgaWYgKCR2YWx1ZSA9PSAwKSB7DQogICAgICAgICAgICBjb250aW51ZTsNCiAgICAgICAgfQ0KDQogICAgICAgIGlmIChpc3NldCgkemJwLT5tZW1iZXJzWyR2YWx1ZV0pKSB7DQogICAgICAgICAgICBDb3VudE1lbWJlcigkemJwLT5tZW1iZXJzWyR2YWx1ZV0sICRwbHVzKTsNCiAgICAgICAgICAgICR6YnAtPm1lbWJlcnNbJHZhbHVlXS0+U2F2ZSgpOw0KICAgICAgICB9DQogICAgfQ0KfQ0KDQojIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjDQovKioNCiAqIOaYvuekujQwNOmhtemdoijlhoXnva7mj5Lku7blh73mlbApDQogKg0KICog5Y+v6YCa6L+H5Li76aKY5Lit55qENDA0LnBocOaooeadv+iHquWumuS5ieaYvuekuuaViOaenA0KICogQGFwaSBGaWx0ZXJfUGx1Z2luX1picF9TaG93RXJyb3INCiAqIEBwYXJhbSAkZXJyb3JDb2RlDQogKiBAcGFyYW0gJGVycm9yRGVzY3JpcHRpb24NCiAqIEBwYXJhbSAkZmlsZQ0KICogQHBhcmFtICRsaW5lDQogKi8NCmZ1bmN0aW9uIEluY2x1ZGVfU2hvd0Vycm9yNDA0KCRlcnJvckNvZGUsICRlcnJvckRlc2NyaXB0aW9uLCAkZmlsZSwgJGxpbmUpIHsNCg0KICAgIGdsb2JhbCAkemJwOw0KICAgIGlmICghaW5fYXJyYXkoIlN0YXR1czogNDA0IE5vdCBGb3VuZCIsIGhlYWRlcnNfbGlzdCgpKSkgew0KICAgICAgICByZXR1cm47DQogICAgfQ0KDQogICAgJHpicC0+dGVtcGxhdGUtPlNldFRhZ3MoJ3RpdGxlJywgJHpicC0+dGl0bGUpOw0KICAgICR6YnAtPnRlbXBsYXRlLT5TZXRUZW1wbGF0ZSgnNDA0Jyk7DQogICAgJHpicC0+dGVtcGxhdGUtPkRpc3BsYXkoKTsNCg0KICAgICRHTE9CQUxTWydob29rcyddWydGaWx0ZXJfUGx1Z2luX1picF9TaG93RXJyb3InXVsnU2hvd0Vycm9yNDA0J10gPSBQTFVHSU5fRVhJVFNJR05BTF9SRVRVUk47DQogICAgZXhpdDsNCn0NCg0KLyoqDQogKiDovpPlh7rlkI7lj7DmjIflrprlrZfkvZNmYW1pbHko5YaF572u5o+S5Lu25Ye95pWwKQ0KICovDQpmdW5jdGlvbiBJbmNsdWRlX0FkZG9uQWRtaW5Gb250KCkgew0KICAgIGdsb2JhbCAkemJwOw0KICAgICRmID0gJHMgPSAnJzsNCiAgICBpZiAoaXNzZXQoJHpicC0+bGFuZ1snZm9udF9mYW1pbHknXSkgJiYgdHJpbSgkemJwLT5sYW5nWydmb250X2ZhbWlseSddKSkgew0KICAgICAgICAkZiA9ICdmb250LWZhbWlseTonIC4gJHpicC0+bGFuZ1snZm9udF9mYW1pbHknXSAuICc7JzsNCiAgICB9DQoNCiAgICBpZiAoaXNzZXQoJHpicC0+bGFuZ1snZm9udF9zaXplJ10pICYmIHRyaW0oJHpicC0+bGFuZ1snZm9udF9zaXplJ10pKSB7DQogICAgICAgICRzID0gJ2ZvbnQtc2l6ZTonIC4gJHpicC0+bGFuZ1snZm9udF9zaXplJ10gLiAnOyc7DQogICAgfQ0KDQogICAgaWYgKCRmIHx8ICRzKSB7DQogICAgICAgIGVjaG8gJzxzdHlsZSB0eXBlPSJ0ZXh0L2NzcyI+Ym9keXsnIC4gJHMgLiAkZiAuICd9PC9zdHlsZT4nOw0KICAgIH0NCg0KfQ0KDQovLyDlhbzlrrnku6PnoIENCmZ1bmN0aW9uIEJ1aWxkTW9kdWxlX2NhdGFsb2coKSB7DQogICAgcmV0dXJuIE1vZHVsZUJ1aWxkZXI6OkNhdGFsb2coKTsNCn0NCmZ1bmN0aW9uIEJ1aWxkTW9kdWxlX2NhbGVuZGFyKCRkYXRlID0gJycpIHsNCiAgICByZXR1cm4gTW9kdWxlQnVpbGRlcjo6Q2FsZW5kYXIoJGRhdGUpOw0KfQ0KZnVuY3Rpb24gQnVpbGRNb2R1bGVfY29tbWVudHMoKSB7DQogICAgcmV0dXJuIE1vZHVsZUJ1aWxkZXI6OkNvbW1lbnRzKCk7DQp9DQpmdW5jdGlvbiBCdWlsZE1vZHVsZV9wcmV2aW91cygpIHsNCiAgICByZXR1cm4gTW9kdWxlQnVpbGRlcjo6TGF0ZXN0QXJ0aWNsZXMoKTsNCn0NCmZ1bmN0aW9uIEJ1aWxkTW9kdWxlX2FyY2hpdmVzKCkgew0KICAgIHJldHVybiBNb2R1bGVCdWlsZGVyOjpBcmNoaXZlcygpOw0KfQ0KZnVuY3Rpb24gQnVpbGRNb2R1bGVfbmF2YmFyKCkgew0KICAgIHJldHVybiBNb2R1bGVCdWlsZGVyOjpOYXZiYXIoKTsNCn0NCmZ1bmN0aW9uIEJ1aWxkTW9kdWxlX3RhZ3MoKSB7DQogICAgcmV0dXJuIE1vZHVsZUJ1aWxkZXI6OlRhZ0xpc3QoKTsNCn0NCmZ1bmN0aW9uIEJ1aWxkTW9kdWxlX2F1dGhvcnMoJGxldmVsID0gNCkgew0KICAgIHJldHVybiBNb2R1bGVCdWlsZGVyOjpBdXRob3JzKCRsZXZlbCk7DQp9DQpmdW5jdGlvbiBCdWlsZE1vZHVsZV9zdGF0aXN0aWNzKCRhcnJheSA9IGFycmF5KCkpIHsNCiAgICByZXR1cm4gTW9kdWxlQnVpbGRlcjo6U3RhdGlzdGljcygkYXJyYXkpOw0KfQ0K</file>
	<file name='zb_system\function\c_system_base.php' crc32='CE1E0A2E'  dt:dt='bin.base64'>PD9waHANCi8qKg0KICog57O757uf5Yid5aeL5YyW562J55u45YWz5pON5L2cDQogKiBAcGFja2FnZSBaLUJsb2dQSFANCiAqIEBzdWJwYWNrYWdlIFN5c3RlbS9CYXNlIOWfuuehgOaTjeS9nA0KICogQGNvcHlyaWdodCAoQykgUmFpbmJvd1NvZnQgU3R1ZGlvDQogKi8NCg0KZXJyb3JfcmVwb3J0aW5nKEVfQUxMKTsNCm9iX3N0YXJ0KCk7DQoNCmRlZmluZWQoJ1pCUF9QQVRIJykgfHwgZGVmaW5lKCdaQlBfUEFUSCcsIHJ0cmltKHN0cl9yZXBsYWNlKCdcXCcsICcvJywgcmVhbHBhdGgoZGlybmFtZShfX0ZJTEVfXykgLiAnLy4uLy4uLycpKSwgJy8nKSAuICcvJyk7DQpkZWZpbmVkKCdaQlBfSE9PS0VSUk9SJykgfHwgZGVmaW5lKCdaQlBfSE9PS0VSUk9SJywgdHJ1ZSk7DQoNCi8qKg0KICog5a6a5LmJ54mI5pys5Y+3DQogKiDlm6DkuLrniYjmnKzlj7fopoHnu4/luLjmlLnvvIzmiYDku6XlvoDkuIrpnaLmlL4NCiAqLw0KZGVmaW5lKCdaQ19WRVJTSU9OX01BSk9SJywgJzEnKTsNCmRlZmluZSgnWkNfVkVSU0lPTl9NSU5PUicsICc1Jyk7DQpkZWZpbmUoJ1pDX1ZFUlNJT05fQlVJTEQnLCAnMCcpOw0KZGVmaW5lKCdaQ19WRVJTSU9OX0NPTU1JVCcsICcxNjIwJyk7DQpkZWZpbmUoJ1pDX1ZFUlNJT05fQ09ERU5BTUUnLCAnWmVybycpOw0KZGVmaW5lKCdaQ19WRVJTSU9OJywgWkNfVkVSU0lPTl9NQUpPUiAuICcuJyAuIFpDX1ZFUlNJT05fTUlOT1IgLiAnLicgLiBaQ19WRVJTSU9OX0JVSUxEIC4gJy4nIC4gWkNfVkVSU0lPTl9DT01NSVQpOw0KZGVmaW5lKCdaQ19WRVJTSU9OX0RJU1BMQVknLCBaQ19WRVJTSU9OX01BSk9SIC4gJy4nIC4gWkNfVkVSU0lPTl9NSU5PUiAuICcgJyAuIFpDX1ZFUlNJT05fQ09ERU5BTUUpOw0KZGVmaW5lKCdaQ19WRVJTSU9OX0ZVTEwnLCBaQ19WRVJTSU9OIC4gJyAoJyAuIFpDX1ZFUlNJT05fQ09ERU5BTUUgLiAnKScpOw0KZGVmaW5lKCdaQ19CTE9HX1ZFUlNJT04nLCBaQ19WRVJTSU9OX0RJU1BMQVkpOyAvLyDljp/lj5jph4/lkI0NCmRlZmluZSgnWkNfQkxPR19DT01NSVQnLCBaQ19WRVJTSU9OX0NPTU1JVCk7IC8vIOS4uuWGmeWFpeezu+e7n+mFjee9rue7n+S4gOmjjuagvA0KJEdMT0JBTFNbJ2Jsb2d2ZXJzaW9uJ10gPSBaQ19WRVJTSU9OX01BSk9SIC4gWkNfVkVSU0lPTl9NSU5PUiAuIFpDX1ZFUlNJT05fQ09NTUlUOw0KDQovKioNCiAqIOWKoOi9veezu+e7n+WfuuehgOWHveaVsA0KICovDQpyZXF1aXJlIFpCUF9QQVRIIC4gJ3piX3N5c3RlbS9mdW5jdGlvbi9jX3N5c3RlbV9wbHVnaW4ucGhwJzsNCnJlcXVpcmUgWkJQX1BBVEggLiAnemJfc3lzdGVtL2Z1bmN0aW9uL2Nfc3lzdGVtX2RlYnVnLnBocCc7DQpyZXF1aXJlIFpCUF9QQVRIIC4gJ3piX3N5c3RlbS9mdW5jdGlvbi9jX3N5c3RlbV9jb21tb24ucGhwJzsNCnJlcXVpcmUgWkJQX1BBVEggLiAnemJfc3lzdGVtL2Z1bmN0aW9uL2Nfc3lzdGVtX2V2ZW50LnBocCc7DQpzcGxfYXV0b2xvYWRfcmVnaXN0ZXIoJ0F1dG9sb2FkQ2xhc3MnKTsNCg0KLyoqDQogKiDlrprkuYnns7vnu5/lj5jph48NCiAqLw0KLyoqDQogKiDmk43kvZzns7vnu58NCiAqLw0KZGVmaW5lKCdTWVNURU1fVU5LTk9XTicsIDApOw0KZGVmaW5lKCdTWVNURU1fV0lORE9XUycsIDEpOw0KZGVmaW5lKCdTWVNURU1fVU5JWCcsIDIpOw0KZGVmaW5lKCdTWVNURU1fTElOVVgnLCAzKTsNCmRlZmluZSgnU1lTVEVNX0RBUldJTicsIDQpOw0KZGVmaW5lKCdTWVNURU1fQ1lHV0lOJywgNSk7DQpkZWZpbmUoJ1NZU1RFTV9CU0QnLCA2KTsNCi8qKg0KICog572R56uZ5pyN5Yqh5ZmoDQogKi8NCmRlZmluZSgnU0VSVkVSX1VOS05PV04nLCAwKTsNCmRlZmluZSgnU0VSVkVSX0FQQUNIRScsIDEpOw0KZGVmaW5lKCdTRVJWRVJfSUlTJywgMik7DQpkZWZpbmUoJ1NFUlZFUl9OR0lOWCcsIDMpOw0KZGVmaW5lKCdTRVJWRVJfTElHSFRUUEQnLCA0KTsNCmRlZmluZSgnU0VSVkVSX0tBTkdMRScsIDUpOw0KLyoqDQogKiBQSFDlvJXmk44NCiAqLw0KZGVmaW5lKCdFTkdJTkVfUEhQJywgMSk7DQpkZWZpbmUoJ0VOR0lORV9ISFZNJywgMik7DQpkZWZpbmUoJ1BIUF9TWVNURU0nLCBHZXRTeXN0ZW0oKSk7DQpkZWZpbmUoJ1BIUF9TRVJWRVInLCBHZXRXZWJTZXJ2ZXIoKSk7DQpkZWZpbmUoJ1BIUF9FTkdJTkUnLCBHZXRQSFBFbmdpbmUoKSk7DQpkZWZpbmUoJ0lTX1g2NCcsIChQSFBfSU5UX1NJWkUgPT09IDgpKTsNCmRlZmluZSgnSFRUUF9TQ0hFTUUnLCBHZXRTY2hlbWUoJF9TRVJWRVIpKTsNCi8qKg0KICog5YW85a655oCn562W55WlDQogKi8NCmRlZmluZSgnSVNfV0lORE9XUycsIFBIUF9TWVNURU0gPT09IFNZU1RFTV9XSU5ET1dTKTsNCmRlZmluZSgnSVNfVU5JWCcsIFBIUF9TWVNURU0gPT09IFNZU1RFTV9VTklYKTsNCmRlZmluZSgnSVNfTElOVVgnLCBQSFBfU1lTVEVNID09PSBTWVNURU1fTElOVVgpOw0KZGVmaW5lKCdJU19EQVJXSU4nLCBQSFBfU1lTVEVNID09PSBTWVNURU1fREFSV0lOKTsNCmRlZmluZSgnSVNfQ1lHV0lOJywgUEhQX1NZU1RFTSA9PT0gU1lTVEVNX0NZR1dJTik7DQpkZWZpbmUoJ0lTX0JTRCcsIFBIUF9TWVNURU0gPT09IFNZU1RFTV9CU0QpOw0KZGVmaW5lKCdJU19BUEFDSEUnLCBQSFBfU0VSVkVSID09PSBTRVJWRVJfQVBBQ0hFKTsNCmRlZmluZSgnSVNfSUlTJywgUEhQX1NFUlZFUiA9PT0gU0VSVkVSX0lJUyk7DQpkZWZpbmUoJ0lTX05HSU5YJywgUEhQX1NFUlZFUiA9PT0gU0VSVkVSX05HSU5YKTsNCmRlZmluZSgnSVNfTElHSFRUUEQnLCBQSFBfU0VSVkVSID09PSBTRVJWRVJfTElHSFRUUEQpOw0KZGVmaW5lKCdJU19LQU5HTEUnLCBQSFBfU0VSVkVSID09PSBQSFBfU0VSVkVSKTsNCmRlZmluZSgnSVNfSEhWTScsIFBIUF9FTkdJTkUgPT09IEVOR0lORV9ISFZNKTsNCg0KLyoqDQogKiDlrprkuYnmlofnq6DnsbvlnosNCiAqLw0KZGVmaW5lKCdaQ19QT1NUX1RZUEVfQVJUSUNMRScsIDApOyAvLyDmlofnq6ANCmRlZmluZSgnWkNfUE9TVF9UWVBFX1BBR0UnLCAxKTsgLy8g6aG16Z2iDQpkZWZpbmUoJ1pDX1BPU1RfVFlQRV9UV0VFVCcsIDIpOyAvLyDkuIDlj6Xor50NCmRlZmluZSgnWkNfUE9TVF9UWVBFX0RJU0NVU1NJT04nLCAzKTsgLy8g6K6o6K66DQpkZWZpbmUoJ1pDX1BPU1RfVFlQRV9MSU5LJywgNCk7IC8vIOmTvuaOpQ0KZGVmaW5lKCdaQ19QT1NUX1RZUEVfTVVTSUMnLCA1KTsgLy8g6Z+z5LmQDQpkZWZpbmUoJ1pDX1BPU1RfVFlQRV9WSURFTycsIDYpOyAvLyDop4bpopENCmRlZmluZSgnWkNfUE9TVF9UWVBFX1BIT1RPJywgNyk7IC8vIOeFp+eJhw0KZGVmaW5lKCdaQ19QT1NUX1RZUEVfQUxCVU0nLCA4KTsgLy8g55u45YaMDQoNCi8qKg0KICog5a6a5LmJ57G75Z6L5bqP5YiXDQogKiBAcGFyYW0gIGlkPT57bmFtZSx1cmwsdGVtcGxhdGV9DQogKi8NCiRHTE9CQUxTWydwb3N0dHlwZSddID0gYXJyYXkoDQogICAgYXJyYXkoJ2FydGljbGUnLCAnJywgJycpLA0KICAgIGFycmF5KCdwYWdlJywgJycsICcnKSwNCiAgICBhcnJheSgndHdlZXQnLCAnJywgJycpLA0KICAgIGFycmF5KCdkaXNjdXNzaW9uJywgJycsICcnKSwNCiAgICBhcnJheSgnbGluaycsICcnLCAnJyksDQogICAgYXJyYXkoJ211c2ljJywgJycsICcnKSwNCiAgICBhcnJheSgndmlkZW8nLCAnJywgJycpLA0KICAgIGFycmF5KCdwaG90bycsICcnLCAnJyksDQogICAgYXJyYXkoJ2FsYnVtJywgJycsICcnKSwNCik7DQoNCi8qKg0KICog5a6a5LmJ5paH56ug54q25oCBDQogKi8NCi8qKg0KICog5paH56ug54q25oCB77ya5YWs5byA5Y+R5biDDQogKi8NCmRlZmluZSgnWkNfUE9TVF9TVEFUVVNfUFVCTElDJywgMCk7DQovKioNCiAqIOaWh+eroOeKtuaAge+8muiNieeovw0KICovDQpkZWZpbmUoJ1pDX1BPU1RfU1RBVFVTX0RSQUZUJywgMSk7DQovKioNCiAqIOaWh+eroOeKtuaAge+8muWuoeaguA0KICovDQpkZWZpbmUoJ1pDX1BPU1RfU1RBVFVTX0FVRElUSU5HJywgMik7DQovKioNCiAqIOeUqOaIt+eKtuaAge+8muato+W4uA0KICovDQpkZWZpbmUoJ1pDX01FTUJFUl9TVEFUVVNfTk9STUFMJywgMCk7DQovKioNCiAqIOeUqOaIt+eKtuaAge+8muWuoeaguOS4rQ0KICovDQpkZWZpbmUoJ1pDX01FTUJFUl9TVEFUVVNfQVVESVRJTkcnLCAxKTsNCi8qKg0KICog55So5oi354q25oCB77ya5bey6ZSB5a6aDQogKi8NCmRlZmluZSgnWkNfTUVNQkVSX1NUQVRVU19MT0NLRUQnLCAyKTsNCg0KLyoqDQogKuWumuS5ieWRveS7pA0KICovDQokR0xPQkFMU1snYWN0aW9ucyddID0gYXJyYXkoDQogICAgJ2xvZ2luJyA9PiA2LA0KICAgICdsb2dvdXQnID0+IDYsDQogICAgJ3ZlcmlmeScgPT4gNiwNCiAgICAnYWRtaW4nID0+IDUsDQogICAgJ3NlYXJjaCcgPT4gNiwNCiAgICAnbWlzYycgPT4gNiwNCiAgICAnZmVlZCcgPT4gNiwNCiAgICAnY210JyA9PiA2LA0KICAgICdnZXRjbXQnID0+IDYsDQogICAgJ2FqYXgnID0+IDYsDQoNCiAgICAnQXJ0aWNsZUVkdCcgPT4gNCwNCiAgICAnQXJ0aWNsZVBzdCcgPT4gNCwNCiAgICAnQXJ0aWNsZURlbCcgPT4gNCwNCiAgICAnQXJ0aWNsZVB1YicgPT4gMywNCg0KICAgICdQYWdlRWR0JyA9PiAyLA0KICAgICdQYWdlUHN0JyA9PiAyLA0KICAgICdQYWdlRGVsJyA9PiAyLA0KDQogICAgJ0NhdGVnb3J5RWR0JyA9PiAyLA0KICAgICdDYXRlZ29yeVBzdCcgPT4gMiwNCiAgICAnQ2F0ZWdvcnlEZWwnID0+IDIsDQoNCiAgICAnQ29tbWVudEVkdCcgPT4gNSwNCiAgICAnQ29tbWVudFNhdicgPT4gNSwNCiAgICAnQ29tbWVudERlbCcgPT4gNSwNCiAgICAnQ29tbWVudENoaycgPT4gNSwNCiAgICAnQ29tbWVudEJhdCcgPT4gNSwNCg0KICAgICdNZW1iZXJFZHQnID0+IDUsDQogICAgJ01lbWJlclBzdCcgPT4gNSwNCiAgICAnTWVtYmVyRGVsJyA9PiAxLA0KICAgICdNZW1iZXJOZXcnID0+IDEsDQoNCiAgICAnVGFnRWR0JyA9PiAyLA0KICAgICdUYWdQc3QnID0+IDIsDQogICAgJ1RhZ0RlbCcgPT4gMiwNCiAgICAnVGFnTmV3JyA9PiAyLA0KDQogICAgJ1BsdWdpbkVuYicgPT4gMSwNCiAgICAnUGx1Z2luRGlzJyA9PiAxLA0KDQogICAgJ1VwbG9hZFBzdCcgPT4gMywNCiAgICAnVXBsb2FkRGVsJyA9PiAzLA0KDQogICAgJ01vZHVsZUVkdCcgPT4gMywNCiAgICAnTW9kdWxlUHN0JyA9PiAzLA0KICAgICdNb2R1bGVEZWwnID0+IDMsDQoNCiAgICAnVGhlbWVTZXQnID0+IDEsDQogICAgJ1NpZGViYXJTZXQnID0+IDEsDQoNCiAgICAnU2V0dGluZ1NhdicgPT4gMSwNCg0KICAgICdBcnRpY2xlTW5nJyA9PiA0LA0KICAgICdQYWdlTW5nJyA9PiAyLA0KICAgICdDYXRlZ29yeU1uZycgPT4gMiwNCiAgICAnU2V0dGluZ01uZycgPT4gMSwNCiAgICAnVGFnTW5nJyA9PiAyLA0KICAgICdDb21tZW50TW5nJyA9PiA1LA0KICAgICdVcGxvYWRNbmcnID0+IDMsDQogICAgJ01lbWJlck1uZycgPT4gNSwNCiAgICAnVGhlbWVNbmcnID0+IDEsDQogICAgJ1BsdWdpbk1uZycgPT4gMSwNCiAgICAnTW9kdWxlTW5nJyA9PiAxLA0KDQogICAgJ0FydGljbGVBbGwnID0+IDIsDQogICAgJ1BhZ2VBbGwnID0+IDIsDQogICAgJ0NhdGVnb3J5QWxsJyA9PiAyLA0KICAgICdDb21tZW50QWxsJyA9PiAyLA0KICAgICdNZW1iZXJBbGwnID0+IDEsDQogICAgJ1RhZ0FsbCcgPT4gMiwNCiAgICAnVXBsb2FkQWxsJyA9PiAyLA0KDQogICAgJ05vVmFsaWRDb2RlJyA9PiA1LA0KDQogICAgJ3Jvb3QnID0+IDEsDQopOw0KDQovKioNCiAq5a6a5LmJ5pWw5o2u6KGoDQogKi8NCiRHTE9CQUxTWyd0YWJsZSddID0gYXJyYXkoDQoNCiAgICAnUG9zdCcgPT4gJyVwcmUlcG9zdCcsDQogICAgJ0NhdGVnb3J5JyA9PiAnJXByZSVjYXRlZ29yeScsDQogICAgJ0NvbW1lbnQnID0+ICclcHJlJWNvbW1lbnQnLA0KICAgICdUYWcnID0+ICclcHJlJXRhZycsDQogICAgJ1VwbG9hZCcgPT4gJyVwcmUldXBsb2FkJywNCiAgICAnTW9kdWxlJyA9PiAnJXByZSVtb2R1bGUnLA0KICAgICdNZW1iZXInID0+ICclcHJlJW1lbWJlcicsDQogICAgJ0NvbmZpZycgPT4gJyVwcmUlY29uZmlnJywNCik7DQoNCi8qKg0KICrlrprkuYnmlbDmja7nu5PmnoQNCiAqLw0KJEdMT0JBTFNbJ2RhdGFpbmZvJ10gPSBhcnJheSgNCiAgICAnQ29uZmlnJyA9PiBhcnJheSgNCiAgICAgICAgJ0lEJyA9PiBhcnJheSgnY29uZl9JRCcsICdpbnRlZ2VyJywgJycsIDApLA0KICAgICAgICAnTmFtZScgPT4gYXJyYXkoJ2NvbmZfTmFtZScsICdzdHJpbmcnLCA1MCwgJycpLA0KICAgICAgICAnVmFsdWUnID0+IGFycmF5KCdjb25mX1ZhbHVlJywgJ3N0cmluZycsICcnLCAnJyksDQogICAgKSwNCiAgICAnUG9zdCcgPT4gYXJyYXkoDQogICAgICAgICdJRCcgPT4gYXJyYXkoJ2xvZ19JRCcsICdpbnRlZ2VyJywgJycsIDApLA0KICAgICAgICAnQ2F0ZUlEJyA9PiBhcnJheSgnbG9nX0NhdGVJRCcsICdpbnRlZ2VyJywgJycsIDApLA0KICAgICAgICAnQXV0aG9ySUQnID0+IGFycmF5KCdsb2dfQXV0aG9ySUQnLCAnaW50ZWdlcicsICcnLCAwKSwNCiAgICAgICAgJ1RhZycgPT4gYXJyYXkoJ2xvZ19UYWcnLCAnc3RyaW5nJywgMjUwLCAnJyksDQogICAgICAgICdTdGF0dXMnID0+IGFycmF5KCdsb2dfU3RhdHVzJywgJ2ludGVnZXInLCAnJywgMCksDQogICAgICAgICdUeXBlJyA9PiBhcnJheSgnbG9nX1R5cGUnLCAnaW50ZWdlcicsICcnLCAwKSwNCiAgICAgICAgJ0FsaWFzJyA9PiBhcnJheSgnbG9nX0FsaWFzJywgJ3N0cmluZycsIDI1MCwgJycpLA0KICAgICAgICAnSXNUb3AnID0+IGFycmF5KCdsb2dfSXNUb3AnLCAnYm9vbGVhbicsICcnLCBmYWxzZSksDQogICAgICAgICdJc0xvY2snID0+IGFycmF5KCdsb2dfSXNMb2NrJywgJ2Jvb2xlYW4nLCAnJywgZmFsc2UpLA0KICAgICAgICAnVGl0bGUnID0+IGFycmF5KCdsb2dfVGl0bGUnLCAnc3RyaW5nJywgMjUwLCAnJyksDQogICAgICAgICdJbnRybycgPT4gYXJyYXkoJ2xvZ19JbnRybycsICdzdHJpbmcnLCAnJywgJycpLA0KICAgICAgICAnQ29udGVudCcgPT4gYXJyYXkoJ2xvZ19Db250ZW50JywgJ3N0cmluZycsICcnLCAnJyksDQogICAgICAgICdQb3N0VGltZScgPT4gYXJyYXkoJ2xvZ19Qb3N0VGltZScsICdpbnRlZ2VyJywgJycsIDApLA0KICAgICAgICAnQ29tbU51bXMnID0+IGFycmF5KCdsb2dfQ29tbU51bXMnLCAnaW50ZWdlcicsICcnLCAwKSwNCiAgICAgICAgJ1ZpZXdOdW1zJyA9PiBhcnJheSgnbG9nX1ZpZXdOdW1zJywgJ2ludGVnZXInLCAnJywgMCksDQogICAgICAgICdUZW1wbGF0ZScgPT4gYXJyYXkoJ2xvZ19UZW1wbGF0ZScsICdzdHJpbmcnLCA1MCwgJycpLA0KICAgICAgICAnTWV0YScgPT4gYXJyYXkoJ2xvZ19NZXRhJywgJ3N0cmluZycsICcnLCAnJyksDQogICAgKSwNCiAgICAnQ2F0ZWdvcnknID0+IGFycmF5KA0KICAgICAgICAnSUQnID0+IGFycmF5KCdjYXRlX0lEJywgJ2ludGVnZXInLCAnJywgMCksDQogICAgICAgICdOYW1lJyA9PiBhcnJheSgnY2F0ZV9OYW1lJywgJ3N0cmluZycsIDUwLCAnJyksDQogICAgICAgICdPcmRlcicgPT4gYXJyYXkoJ2NhdGVfT3JkZXInLCAnaW50ZWdlcicsICcnLCAwKSwNCiAgICAgICAgJ0NvdW50JyA9PiBhcnJheSgnY2F0ZV9Db3VudCcsICdpbnRlZ2VyJywgJycsIDApLA0KICAgICAgICAnQWxpYXMnID0+IGFycmF5KCdjYXRlX0FsaWFzJywgJ3N0cmluZycsIDUwLCAnJyksDQogICAgICAgICdJbnRybycgPT4gYXJyYXkoJ2NhdGVfSW50cm8nLCAnc3RyaW5nJywgJycsICcnKSwNCiAgICAgICAgJ1Jvb3RJRCcgPT4gYXJyYXkoJ2NhdGVfUm9vdElEJywgJ2ludGVnZXInLCAnJywgMCksDQogICAgICAgICdQYXJlbnRJRCcgPT4gYXJyYXkoJ2NhdGVfUGFyZW50SUQnLCAnaW50ZWdlcicsICcnLCAwKSwNCiAgICAgICAgJ1RlbXBsYXRlJyA9PiBhcnJheSgnY2F0ZV9UZW1wbGF0ZScsICdzdHJpbmcnLCA1MCwgJycpLA0KICAgICAgICAnTG9nVGVtcGxhdGUnID0+IGFycmF5KCdjYXRlX0xvZ1RlbXBsYXRlJywgJ3N0cmluZycsIDUwLCAnJyksDQogICAgICAgICdNZXRhJyA9PiBhcnJheSgnY2F0ZV9NZXRhJywgJ3N0cmluZycsICcnLCAnJyksDQogICAgKSwNCiAgICAnQ29tbWVudCcgPT4gYXJyYXkoDQogICAgICAgICdJRCcgPT4gYXJyYXkoJ2NvbW1fSUQnLCAnaW50ZWdlcicsICcnLCAwKSwNCiAgICAgICAgJ0xvZ0lEJyA9PiBhcnJheSgnY29tbV9Mb2dJRCcsICdpbnRlZ2VyJywgJycsIDApLA0KICAgICAgICAnSXNDaGVja2luZycgPT4gYXJyYXkoJ2NvbW1fSXNDaGVja2luZycsICdib29sZWFuJywgJycsIGZhbHNlKSwNCiAgICAgICAgJ1Jvb3RJRCcgPT4gYXJyYXkoJ2NvbW1fUm9vdElEJywgJ2ludGVnZXInLCAnJywgMCksDQogICAgICAgICdQYXJlbnRJRCcgPT4gYXJyYXkoJ2NvbW1fUGFyZW50SUQnLCAnaW50ZWdlcicsICcnLCAwKSwNCiAgICAgICAgJ0F1dGhvcklEJyA9PiBhcnJheSgnY29tbV9BdXRob3JJRCcsICdpbnRlZ2VyJywgJycsIDApLA0KICAgICAgICAnTmFtZScgPT4gYXJyYXkoJ2NvbW1fTmFtZScsICdzdHJpbmcnLCAyMCwgJycpLA0KICAgICAgICAnQ29udGVudCcgPT4gYXJyYXkoJ2NvbW1fQ29udGVudCcsICdzdHJpbmcnLCAnJywgJycpLA0KICAgICAgICAnRW1haWwnID0+IGFycmF5KCdjb21tX0VtYWlsJywgJ3N0cmluZycsIDUwLCAnJyksDQogICAgICAgICdIb21lUGFnZScgPT4gYXJyYXkoJ2NvbW1fSG9tZVBhZ2UnLCAnc3RyaW5nJywgMjUwLCAnJyksDQogICAgICAgICdQb3N0VGltZScgPT4gYXJyYXkoJ2NvbW1fUG9zdFRpbWUnLCAnaW50ZWdlcicsICcnLCAwKSwNCiAgICAgICAgJ0lQJyA9PiBhcnJheSgnY29tbV9JUCcsICdzdHJpbmcnLCAxNSwgJycpLA0KICAgICAgICAnQWdlbnQnID0+IGFycmF5KCdjb21tX0FnZW50JywgJ3N0cmluZycsICcnLCAnJyksDQogICAgICAgICdNZXRhJyA9PiBhcnJheSgnY29tbV9NZXRhJywgJ3N0cmluZycsICcnLCAnJyksDQogICAgKSwNCiAgICAnTW9kdWxlJyA9PiBhcnJheSgNCiAgICAgICAgJ0lEJyA9PiBhcnJheSgnbW9kX0lEJywgJ2ludGVnZXInLCAnJywgMCksDQogICAgICAgICdOYW1lJyA9PiBhcnJheSgnbW9kX05hbWUnLCAnc3RyaW5nJywgMTAwLCAnJyksDQogICAgICAgICdGaWxlTmFtZScgPT4gYXJyYXkoJ21vZF9GaWxlTmFtZScsICdzdHJpbmcnLCA1MCwgJycpLA0KICAgICAgICAnQ29udGVudCcgPT4gYXJyYXkoJ21vZF9Db250ZW50JywgJ3N0cmluZycsICcnLCAnJyksDQogICAgICAgICdIdG1sSUQnID0+IGFycmF5KCdtb2RfSHRtbElEJywgJ3N0cmluZycsIDUwLCAnJyksDQogICAgICAgICdUeXBlJyA9PiBhcnJheSgnbW9kX1R5cGUnLCAnc3RyaW5nJywgNSwgJ2RpdicpLA0KICAgICAgICAnTWF4TGknID0+IGFycmF5KCdtb2RfTWF4TGknLCAnaW50ZWdlcicsICcnLCAwKSwNCiAgICAgICAgJ1NvdXJjZScgPT4gYXJyYXkoJ21vZF9Tb3VyY2UnLCAnc3RyaW5nJywgNTAsICd1c2VyJyksDQogICAgICAgICdJc0hpZGVUaXRsZScgPT4gYXJyYXkoJ21vZF9Jc0hpZGVUaXRsZScsICdib29sZWFuJywgJycsIGZhbHNlKSwNCiAgICAgICAgJ01ldGEnID0+IGFycmF5KCdtb2RfTWV0YScsICdzdHJpbmcnLCAnJywgJycpLA0KICAgICksDQogICAgJ01lbWJlcicgPT4gYXJyYXkoDQogICAgICAgICdJRCcgPT4gYXJyYXkoJ21lbV9JRCcsICdpbnRlZ2VyJywgJycsIDApLA0KICAgICAgICAnR3VpZCcgPT4gYXJyYXkoJ21lbV9HdWlkJywgJ3N0cmluZycsIDM2LCAnJyksDQogICAgICAgICdMZXZlbCcgPT4gYXJyYXkoJ21lbV9MZXZlbCcsICdpbnRlZ2VyJywgJycsIDYpLA0KICAgICAgICAnU3RhdHVzJyA9PiBhcnJheSgnbWVtX1N0YXR1cycsICdpbnRlZ2VyJywgJycsIDApLA0KICAgICAgICAnTmFtZScgPT4gYXJyYXkoJ21lbV9OYW1lJywgJ3N0cmluZycsIDUwLCAnJyksDQogICAgICAgICdQYXNzd29yZCcgPT4gYXJyYXkoJ21lbV9QYXNzd29yZCcsICdzdHJpbmcnLCAzMiwgJycpLA0KICAgICAgICAnRW1haWwnID0+IGFycmF5KCdtZW1fRW1haWwnLCAnc3RyaW5nJywgNTAsICcnKSwNCiAgICAgICAgJ0hvbWVQYWdlJyA9PiBhcnJheSgnbWVtX0hvbWVQYWdlJywgJ3N0cmluZycsIDI1MCwgJycpLA0KICAgICAgICAnSVAnID0+IGFycmF5KCdtZW1fSVAnLCAnc3RyaW5nJywgMTUsICcnKSwNCiAgICAgICAgJ1Bvc3RUaW1lJyA9PiBhcnJheSgnbWVtX1Bvc3RUaW1lJywgJ2ludGVnZXInLCAnJywgMCksDQogICAgICAgICdBbGlhcycgPT4gYXJyYXkoJ21lbV9BbGlhcycsICdzdHJpbmcnLCA1MCwgJycpLA0KICAgICAgICAnSW50cm8nID0+IGFycmF5KCdtZW1fSW50cm8nLCAnc3RyaW5nJywgJycsICcnKSwNCiAgICAgICAgJ0FydGljbGVzJyA9PiBhcnJheSgnbWVtX0FydGljbGVzJywgJ2ludGVnZXInLCAnJywgMCksDQogICAgICAgICdQYWdlcycgPT4gYXJyYXkoJ21lbV9QYWdlcycsICdpbnRlZ2VyJywgJycsIDApLA0KICAgICAgICAnQ29tbWVudHMnID0+IGFycmF5KCdtZW1fQ29tbWVudHMnLCAnaW50ZWdlcicsICcnLCAwKSwNCiAgICAgICAgJ1VwbG9hZHMnID0+IGFycmF5KCdtZW1fVXBsb2FkcycsICdpbnRlZ2VyJywgJycsIDApLA0KICAgICAgICAnVGVtcGxhdGUnID0+IGFycmF5KCdtZW1fVGVtcGxhdGUnLCAnc3RyaW5nJywgNTAsICcnKSwNCiAgICAgICAgJ01ldGEnID0+IGFycmF5KCdtZW1fTWV0YScsICdzdHJpbmcnLCAnJywgJycpLA0KICAgICksDQogICAgJ1RhZycgPT4gYXJyYXkoDQogICAgICAgICdJRCcgPT4gYXJyYXkoJ3RhZ19JRCcsICdpbnRlZ2VyJywgJycsIDApLA0KICAgICAgICAnTmFtZScgPT4gYXJyYXkoJ3RhZ19OYW1lJywgJ3N0cmluZycsIDI1MCwgJycpLA0KICAgICAgICAnT3JkZXInID0+IGFycmF5KCd0YWdfT3JkZXInLCAnaW50ZWdlcicsICcnLCAwKSwNCiAgICAgICAgJ0NvdW50JyA9PiBhcnJheSgndGFnX0NvdW50JywgJ2ludGVnZXInLCAnJywgMCksDQogICAgICAgICdBbGlhcycgPT4gYXJyYXkoJ3RhZ19BbGlhcycsICdzdHJpbmcnLCAyNTAsICcnKSwNCiAgICAgICAgJ0ludHJvJyA9PiBhcnJheSgndGFnX0ludHJvJywgJ3N0cmluZycsICcnLCAnJyksDQogICAgICAgICdUZW1wbGF0ZScgPT4gYXJyYXkoJ3RhZ19UZW1wbGF0ZScsICdzdHJpbmcnLCA1MCwgJycpLA0KICAgICAgICAnTWV0YScgPT4gYXJyYXkoJ3RhZ19NZXRhJywgJ3N0cmluZycsICcnLCAnJyksDQogICAgKSwNCiAgICAnVXBsb2FkJyA9PiBhcnJheSgNCiAgICAgICAgJ0lEJyA9PiBhcnJheSgndWxfSUQnLCAnaW50ZWdlcicsICcnLCAwKSwNCiAgICAgICAgJ0F1dGhvcklEJyA9PiBhcnJheSgndWxfQXV0aG9ySUQnLCAnaW50ZWdlcicsICcnLCAwKSwNCiAgICAgICAgJ1NpemUnID0+IGFycmF5KCd1bF9TaXplJywgJ2ludGVnZXInLCAnJywgMCksDQogICAgICAgICdOYW1lJyA9PiBhcnJheSgndWxfTmFtZScsICdzdHJpbmcnLCAyNTAsICcnKSwNCiAgICAgICAgJ1NvdXJjZU5hbWUnID0+IGFycmF5KCd1bF9Tb3VyY2VOYW1lJywgJ3N0cmluZycsIDI1MCwgJycpLA0KICAgICAgICAnTWltZVR5cGUnID0+IGFycmF5KCd1bF9NaW1lVHlwZScsICdzdHJpbmcnLCA1MCwgJycpLA0KICAgICAgICAnUG9zdFRpbWUnID0+IGFycmF5KCd1bF9Qb3N0VGltZScsICdpbnRlZ2VyJywgJycsIDApLA0KICAgICAgICAnRG93bk51bXMnID0+IGFycmF5KCd1bF9Eb3duTnVtcycsICdpbnRlZ2VyJywgJycsIDApLA0KICAgICAgICAnTG9nSUQnID0+IGFycmF5KCd1bF9Mb2dJRCcsICdpbnRlZ2VyJywgJycsIDApLA0KICAgICAgICAnSW50cm8nID0+IGFycmF5KCd1bF9JbnRybycsICdzdHJpbmcnLCAnJywgJycpLA0KICAgICAgICAnTWV0YScgPT4gYXJyYXkoJ3VsX01ldGEnLCAnc3RyaW5nJywgJycsICcnKSwNCiAgICApLA0KKTsNCg0KLyoqDQogKiDliJ3lp4vljJbnu5/orqHkv6Hmga8NCiAqLw0KJF9TRVJWRVJbJ19zdGFydF90aW1lJ10gPSBtaWNyb3RpbWUodHJ1ZSk7IC8vUnVuVGltZQ0KJF9TRVJWRVJbJ19xdWVyeV9jb3VudCddID0gMDsNCiRfU0VSVkVSWydfbWVtb3J5X3VzYWdlJ10gPSAwOw0KJF9TRVJWRVJbJ19lcnJvcl9jb3VudCddID0gMDsNCmlmIChmdW5jdGlvbl9leGlzdHMoJ21lbW9yeV9nZXRfdXNhZ2UnKSkgew0KICAgICRfU0VSVkVSWydfbWVtb3J5X3VzYWdlJ10gPSBtZW1vcnlfZ2V0X3VzYWdlKHRydWUpOw0KfQ0KDQovKioNCiAqIOeJiOacrOWFvOWuueWkhOeQhg0KICovDQppZiAoZnVuY3Rpb25fZXhpc3RzKCdnZXRfbWFnaWNfcXVvdGVzX2dwYycpICYmIGdldF9tYWdpY19xdW90ZXNfZ3BjKCkpIHsNCiAgICBmdW5jdGlvbiBfc3RyaXBzbGFzaGVzKCYkdmFyKSB7DQogICAgICAgIGlmIChpc19hcnJheSgkdmFyKSkgew0KICAgICAgICAgICAgZm9yZWFjaCAoJHZhciBhcyAkayA9PiAmJHYpIHsNCiAgICAgICAgICAgICAgICBfc3RyaXBzbGFzaGVzKCR2KTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgICR2YXIgPSBzdHJpcHNsYXNoZXMoJHZhcik7DQogICAgICAgIH0NCiAgICB9DQogICAgX3N0cmlwc2xhc2hlcygkX0dFVCk7DQogICAgX3N0cmlwc2xhc2hlcygkX1BPU1QpOw0KICAgIF9zdHJpcHNsYXNoZXMoJF9DT09LSUUpOw0KICAgIF9zdHJpcHNsYXNoZXMoJF9SRVFVRVNUKTsNCn0NCg0KLyoqDQogKiDlrprkuYnns7vnu5/lhajlsYDlj5jph48NCiAqLw0KLyoqDQogKiDlvZPliY3liqjkvZzlkb3ku6QNCiAqLw0KJEdMT0JBTFNbJ2FjdGlvbiddID0gJyc7DQovKioNCiAqIOW9k+WJjeivt+axgui3r+W+hA0KICovDQokR0xPQkFMU1snY3VycmVudHVybCddID0gR2V0UmVxdWVzdFVyaSgpOw0KLyoqDQogKiDor63oqIDljIUNCiAqLw0KJEdMT0JBTFNbJ2xhbmcnXSA9IGFycmF5KCk7DQovKioNCiAqIOezu+e7n+aguei3r+W+hA0KICovDQokR0xPQkFMU1snYmxvZ3BhdGgnXSA9IFpCUF9QQVRIOw0KLyoqDQogKiDnlKjmiLfot6/lvoQNCiAqLw0KJEdMT0JBTFNbJ3VzZXJzZGlyJ10gPSBaQlBfUEFUSCAuICd6Yl91c2Vycy8nOw0KLyoqDQogKiDlt7Lmv4DmtLvmj5Lku7bliJfooagNCiAqLw0KJEdMT0JBTFNbJ2FjdGl2ZWRhcHBzJ10gPSBhcnJheSgpOw0KLy/kv53nlZlhY3RpdmVhcHBz77yM5YW85a655Lul5YmN54mI5pysDQokR0xPQkFMU1snYWN0aXZlYXBwcyddID0gJiRHTE9CQUxTWydhY3RpdmVkYXBwcyddOw0KDQovKioNCiAqIOWKoOi9veiuvue9rg0KICovDQokR0xPQkFMU1snb3B0aW9uJ10gPSByZXF1aXJlIFpCUF9QQVRIIC4gJ3piX3N5c3RlbS9kZWZlbmQvb3B0aW9uLnBocCc7DQokb3BfdXNlcnMgPSBudWxsOw0KaWYgKCFaQlBfSE9PS0VSUk9SICYmIGlzc2V0KCRfRU5WWydaQlBfVVNFUl9PUFRJT04nXSkgJiYgaXNfcmVhZGFibGUoJGZpbGVfYmFzZSA9ICRfRU5WWydaQlBfVVNFUl9PUFRJT04nXSkpew0KICAgICRvcF91c2VycyA9IHJlcXVpcmUgJGZpbGVfYmFzZTsNCiAgICAkR0xPQkFMU1snb3B0aW9uJ10gPSBhcnJheV9tZXJnZSgkR0xPQkFMU1snb3B0aW9uJ10sICRvcF91c2Vycyk7DQp9DQplbHNlaWYgKGlzX3JlYWRhYmxlKCRmaWxlX2Jhc2UgPSAkR0xPQkFMU1sndXNlcnNkaXInXSAuICdjX29wdGlvbi5waHAnKSkgew0KICAgICRvcF91c2VycyA9IHJlcXVpcmUgJGZpbGVfYmFzZTsNCiAgICAkR0xPQkFMU1snb3B0aW9uJ10gPSBhcnJheV9tZXJnZSgkR0xPQkFMU1snb3B0aW9uJ10sICRvcF91c2Vycyk7DQp9DQoNCiRHTE9CQUxTWydibG9ndGl0bGUnXSA9ICRHTE9CQUxTWydvcHRpb24nXVsnWkNfQkxPR19TVUJOQU1FJ107IC8vIOS4jeaYr+a8j+WGme+8gQ0KJEdMT0JBTFNbJ2Jsb2duYW1lJ10gPSAmJEdMT0JBTFNbJ29wdGlvbiddWydaQ19CTE9HX05BTUUnXTsNCiRHTE9CQUxTWydibG9nc3VibmFtZSddID0gJiRHTE9CQUxTWydvcHRpb24nXVsnWkNfQkxPR19TVUJOQU1FJ107DQokR0xPQkFMU1snYmxvZ3RoZW1lJ10gPSAmJEdMT0JBTFNbJ29wdGlvbiddWydaQ19CTE9HX1RIRU1FJ107DQokR0xPQkFMU1snYmxvZ3N0eWxlJ10gPSAmJEdMT0JBTFNbJ29wdGlvbiddWydaQ19CTE9HX0NTUyddOw0KJEdMT0JBTFNbJ2Nvb2tpZXNwYXRoJ10gPSBudWxsOw0KJEdMT0JBTFNbJ2Jsb2dob3N0J10gPSBHZXRDdXJyZW50SG9zdCgkR0xPQkFMU1snYmxvZ3BhdGgnXSwgJEdMT0JBTFNbJ2Nvb2tpZXNwYXRoJ10pOw0KDQoNCi8qKg0KICog57O757uf5a6e5L6L5YyWDQogKi8NCkF1dG9sb2FkQ2xhc3MoJ1pCbG9nUEhQJyk7DQpBdXRvbG9hZENsYXNzKCdEYlNxbCcpOw0KQXV0b2xvYWRDbGFzcygnQ29uZmlnJyk7DQoNCiRHTE9CQUxTWyd6YnAnXSA9IFpCbG9nUEhQOjpHZXRJbnN0YW5jZSgpOw0KJEdMT0JBTFNbJ3picCddLT5Jbml0aWFsaXplKCk7DQoNCg0KLyoqDQogKiDliqDovb3kuLvpopjlkozmj5Lku7ZBUFANCiAqLw0KaWYgKGlzX3JlYWRhYmxlKCRmaWxlX2Jhc2UgPSAkR0xPQkFMU1sndXNlcnNkaXInXSAuICd0aGVtZS8nIC4gJEdMT0JBTFNbJ2Jsb2d0aGVtZSddIC4gJy90aGVtZS54bWwnKSkgew0KICAgICRHTE9CQUxTWydhY3RpdmVkYXBwcyddW10gPSAkR0xPQkFMU1snYmxvZ3RoZW1lJ107DQp9DQoNCmlmIChpc19yZWFkYWJsZSgkZmlsZV9iYXNlID0gJEdMT0JBTFNbJ3VzZXJzZGlyJ10gLiAndGhlbWUvJyAuICRHTE9CQUxTWydibG9ndGhlbWUnXSAuICcvaW5jbHVkZS5waHAnKSkgew0KICAgIHJlcXVpcmUgJGZpbGVfYmFzZTsNCn0NCg0KJGFwcyA9ICRHTE9CQUxTWyd6YnAnXS0+R2V0UHJlQWN0aXZlUGx1Z2luKCk7DQpmb3JlYWNoICgkYXBzIGFzICRhcCkgew0KICAgIGlmIChpc19yZWFkYWJsZSgkZmlsZV9iYXNlID0gJEdMT0JBTFNbJ3VzZXJzZGlyJ10gLiAncGx1Z2luLycgLiAkYXAgLiAnL3BsdWdpbi54bWwnKSkgew0KICAgICAgICAkR0xPQkFMU1snYWN0aXZlZGFwcHMnXVtdID0gJGFwOw0KICAgIH0NCiAgICBpZiAoaXNfcmVhZGFibGUoJGZpbGVfYmFzZSA9ICRHTE9CQUxTWyd1c2Vyc2RpciddIC4gJ3BsdWdpbi8nIC4gJGFwIC4gJy9pbmNsdWRlLnBocCcpKSB7DQogICAgICAgIHJlcXVpcmUgJGZpbGVfYmFzZTsNCiAgICB9DQp9DQoNCmZvcmVhY2ggKCRHTE9CQUxTWydwbHVnaW5zJ10gYXMgJiRmbikgew0KICAgIGlmIChmdW5jdGlvbl9leGlzdHMoJGZuKSkgew0KICAgICAgICAkZm4oKTsNCiAgICB9DQp9DQp1bnNldCgkZmlsZV9iYXNlLCAkYXBzLCAkZm4sICRhcCwgJG9wX3VzZXJzLCAkb3BrLCAkb3B2KTsNCg==</file>
	<file name='zb_system\function\lib\zblogphp.php' crc32='800AC5C3'  dt:dt='bin.base64'>PD9waHANCi8qKg0KICogemJw5YWo5bGA5pON5L2c57G7DQogKg0KICogQHBhY2thZ2UgWi1CbG9nUEhQDQogKiBAc3VicGFja2FnZSBDbGFzc0xpYiDnsbvlupMNCiAqLw0KY2xhc3MgWkJsb2dQSFAgew0KDQogICAgcHJpdmF0ZSBzdGF0aWMgJF96YnAgPSBudWxsOw0KICAgIC8qKg0KICAgICAqIEB2YXIgbnVsbHxzdHJpbmcg54mI5pys5Y+3DQogICAgICovDQogICAgcHVibGljICR2ZXJzaW9uID0gbnVsbDsNCiAgICAvKioNCiAgICAgKiBAdmFyIG51bGwg5pWw5o2u5bqTDQogICAgICovDQogICAgcHVibGljICRkYiA9IG51bGw7DQogICAgLyoqDQogICAgICogQHZhciBhcnJheSDphY3nva7pgInpobkNCiAgICAgKi8NCiAgICBwdWJsaWMgJG9wdGlvbiA9IGFycmF5KCk7DQogICAgLyoqDQogICAgICogQHZhciBhcnJheSDor63oqIANCiAgICAgKi8NCiAgICBwdWJsaWMgJGxhbmcgPSBhcnJheSgpOw0KICAgIC8qKg0KICAgICAqIEB2YXIgYXJyYXkg6K+t6KiA5YyFbGlzdA0KICAgICAqLw0KICAgIHB1YmxpYyAkbGFuZ3BhY2tsaXN0ID0gYXJyYXkoKTsNCiAgICAvKioNCiAgICAgKiBAdmFyIG51bGx8c3RyaW5nIOi3r+W+hA0KICAgICAqLw0KICAgIHB1YmxpYyAkcGF0aCA9IG51bGw7DQogICAgLyoqDQogICAgICogQHZhciBudWxsfHN0cmluZyDln5/lkI0NCiAgICAgKi8NCiAgICBwdWJsaWMgJGhvc3QgPSBudWxsOw0KICAgIC8qKg0KICAgICAqIEB2YXIgbnVsbCBjb29raWXkvZznlKjln58NCiAgICAgKi8NCiAgICBwdWJsaWMgJGNvb2tpZXNwYXRoID0gbnVsbDsNCiAgICAvKioNCiAgICAgKiBAdmFyIG51bGwgZ3VpZA0KICAgICAqLw0KICAgIHB1YmxpYyAkZ3VpZCA9IG51bGw7DQogICAgLyoqDQogICAgICogQHZhciBudWxsfHN0cmluZyDlvZPliY3pk77mjqUNCiAgICAgKi8NCiAgICBwdWJsaWMgJGN1cnJlbnR1cmwgPSBudWxsOw0KICAgIC8qKg0KICAgICAqIEB2YXIgbnVsbHxzdHJpbmcg55So5oi355uu5b2VDQogICAgICovDQogICAgcHVibGljICR1c2Vyc2RpciA9IG51bGw7DQogICAgLyoqDQogICAgICogQHZhciBudWxsIOmqjOivgeeggeWcsOWdgA0KICAgICAqLw0KICAgIHB1YmxpYyAkdmFsaWRjb2RldXJsID0gbnVsbDsNCiAgICAvKioNCiAgICAgKiBAdmFyIG51bGwNCiAgICAgKi8NCiAgICBwdWJsaWMgJGZlZWR1cmwgPSBudWxsOw0KICAgIC8qKg0KICAgICAqIEB2YXIgbnVsbA0KICAgICAqLw0KICAgIHB1YmxpYyAkc2VhcmNodXJsID0gbnVsbDsNCiAgICAvKioNCiAgICAgKiBAdmFyIG51bGwNCiAgICAgKi8NCiAgICBwdWJsaWMgJGFqYXh1cmwgPSBudWxsOw0KICAgIC8qKg0KICAgICAqIEB2YXIgbnVsbA0KICAgICAqLw0KICAgIHB1YmxpYyAkeG1scnBjdXJsID0gbnVsbDsNCiAgICAvKioNCiAgICAgKiBAdmFyIGFycmF5IOeUqOaIt+aVsOe7hA0KICAgICAqLw0KICAgIHB1YmxpYyAkbWVtYmVycyA9IGFycmF5KCk7DQogICAgLyoqDQogICAgICogQHZhciBhcnJheSDnlKjmiLfmlbDnu4TvvIjku6XnlKjmiLflkI3kuLrplK7vvIkNCiAgICAgKi8NCiAgICBwdWJsaWMgJG1lbWJlcnNieW5hbWUgPSBhcnJheSgpOw0KICAgIC8qKg0KICAgICAqIEB2YXIgYXJyYXkg5YiG57G75pWw57uEDQogICAgICovDQogICAgcHVibGljICRjYXRlZ29yeXMgPSBhcnJheSgpOw0KICAgIHB1YmxpYyAkY2F0ZWdvcmllcyA9IG51bGw7DQogICAgLyoqDQogICAgICogQHZhciBhcnJheSDliIbnsbvmlbDnu4TvvIjlt7LmjpLluo/vvIkNCiAgICAgKi8NCiAgICBwdWJsaWMgJGNhdGVnb3J5c2J5b3JkZXIgPSBhcnJheSgpOw0KICAgIHB1YmxpYyAkY2F0ZWdvcmllc2J5b3JkZXIgPSBudWxsOw0KICAgIC8qKg0KICAgICAqIEB2YXIgYXJyYXkg5qih5Z2X5pWw57uEDQogICAgICovDQogICAgcHVibGljICRtb2R1bGVzID0gYXJyYXkoKTsNCiAgICAvKioNCiAgICAgKiBAdmFyIGFycmF5IOaooeWdl+aVsOe7hO+8iOS7peaWh+S7tuWQjeS4uumUru+8iQ0KICAgICAqLw0KICAgIHB1YmxpYyAkbW9kdWxlc2J5ZmlsZW5hbWUgPSBhcnJheSgpOw0KICAgIC8qKg0KICAgICAqIEB2YXIgYXJyYXkg6YWN572u6YCJ6aG5DQogICAgICovDQogICAgcHVibGljICRjb25maWdzID0gYXJyYXkoKTsNCiAgICAvKioNCiAgICAgKiBAdmFyIGFycmF5IOagh+etvuaVsOe7hA0KICAgICAqLw0KICAgIHB1YmxpYyAkdGFncyA9IGFycmF5KCk7DQogICAgLyoqDQogICAgICogQHZhciBhcnJheSDmoIfnrb7mlbDnu4TvvIjku6XmoIfnrb7lkI3kuLrplK7vvIkNCiAgICAgKi8NCiAgICBwdWJsaWMgJHRhZ3NieW5hbWUgPSBhcnJheSgpOw0KICAgIC8qKg0KICAgICAqIEB2YXIgYXJyYXkg6K+E6K665pWw57uEDQogICAgICovDQogICAgcHVibGljICRjb21tZW50cyA9IGFycmF5KCk7DQogICAgLyoqDQogICAgICogQHZhciBhcnJheSDmlofnq6DliJfooajmlbDnu4QNCiAgICAgKi8NCiAgICBwdWJsaWMgJHBvc3RzID0gYXJyYXkoKTsNCg0KICAgIC8qKg0KICAgICAqIEB2YXIgbnVsbHxzdHJpbmcg5b2T5YmN6aG16Z2i5qCH6aKYDQogICAgICovDQogICAgcHVibGljICR0aXRsZSA9IG51bGw7DQogICAgLyoqDQogICAgICogQHZhciBudWxsIOe9keermeWQjQ0KICAgICAqLw0KICAgIHB1YmxpYyAkbmFtZSA9IG51bGw7DQogICAgLyoqDQogICAgICogQHZhciBudWxsIOe9keermeWtkOagh+mimA0KICAgICAqLw0KICAgIHB1YmxpYyAkc3VibmFtZSA9IG51bGw7DQogICAgLyoqDQogICAgICogQHZhciBudWxsIOW9k+WJjeS4u+mimA0KICAgICAqLw0KICAgIHB1YmxpYyAkdGhlbWUgPSBudWxsOw0KICAgIC8qKg0KICAgICAqIEB2YXIgYXJyYXkoKSDlvZPliY3kuLvpopjniYjmnKzkv6Hmga8NCiAgICAgKi8NCiAgICBwdWJsaWMgJHRoZW1laW5mbyA9IGFycmF5KCk7DQogICAgLyoqDQogICAgICogQHZhciBudWxsIOW9k+WJjeS4u+mimOmjjuagvA0KICAgICAqLw0KICAgIHB1YmxpYyAkc3R5bGUgPSBudWxsOw0KDQogICAgLyoqDQogICAgICogQHZhciBudWxsIOW9k+WJjeeUqOaItw0KICAgICAqLw0KICAgIHB1YmxpYyAkdXNlciA9IG51bGw7DQogICAgLyoqDQogICAgICogQHZhciBDb25maWd8bnVsbCDnvJPlrZgNCiAgICAgKi8NCiAgICBwdWJsaWMgJGNhY2hlID0gbnVsbDsNCg0KICAgIC8qKg0KICAgICAqIEB2YXIgYXJyYXl8bnVsbCDmlbDmja7ooagNCiAgICAgKi8NCiAgICBwdWJsaWMgJHRhYmxlID0gbnVsbDsNCiAgICAvKioNCiAgICAgKiBAdmFyIGFycmF5fG51bGwg5pWw5o2u6KGo5L+h5oGvDQogICAgICovDQogICAgcHVibGljICRkYXRhaW5mbyA9IG51bGw7DQogICAgLyoqDQogICAgICogQHZhciBhcnJheXxudWxsIOexu+Wei+W6j+WIlw0KICAgICAqLw0KICAgIHB1YmxpYyAkcG9zdHR5cGUgPSBudWxsOw0KICAgIC8qKg0KICAgICAqIEB2YXIgYXJyYXl8bnVsbCDmk43kvZzliJfooagNCiAgICAgKi8NCiAgICBwdWJsaWMgJGFjdGlvbnMgPSBudWxsOw0KICAgIC8qKg0KICAgICAqIEB2YXIgbWl4ZWR8bnVsbHxzdHJpbmcg5b2T5YmN5pON5L2cDQogICAgICovDQogICAgcHVibGljICRhY3Rpb24gPSBudWxsOw0KDQogICAgcHJpdmF0ZSAkaXNpbml0aWFsaXplZCA9IGZhbHNlOyAj5piv5ZCm5Yid5aeL5YyW5oiQ5YqfDQogICAgcHJpdmF0ZSAkaXNjb25uZWN0ZWQgPSBmYWxzZTsgI+aYr+WQpui/nuaOpeaIkOWKnw0KICAgIHByaXZhdGUgJGlzbG9hZCA9IGZhbHNlOyAj5piv5ZCm6L295YWlDQogICAgcHJpdmF0ZSAkaXNzZXNzaW9uID0gZmFsc2U7ICPmmK/lkKbkvb/nlKhzZXNzaW9uDQogICAgcHVibGljICRpc21hbmFnZSA9IGZhbHNlOyAj5piv5ZCm5Yqg6L29566h55CG5qih5byPDQogICAgcHJpdmF0ZSAkaXNnemlwID0gZmFsc2U7ICPmmK/lkKblvIDlkK9nemlwDQogICAgcHVibGljICRpc2h0dHBzID0gZmFsc2U7ICPmmK/lkKZIVFRQUw0KDQogICAgLyoqDQogICAgICogQHZhciBudWxsIOW9k+WJjeaooeadvw0KICAgICAqLw0KICAgIHB1YmxpYyAkdGVtcGxhdGUgPSBudWxsOw0KICAgIC8qKg0KICAgICAqIEB2YXIgbnVsbCDnpL7kvJrljJbor4TorroNCiAgICAgKi8NCiAgICBwdWJsaWMgJHNvY2lhbGNvbW1lbnQgPSBudWxsOw0KICAgIC8qKg0KICAgICAqIEB2YXIgbnVsbCDmqKHmnb/lpLTpg6gNCiAgICAgKi8NCiAgICBwdWJsaWMgJGhlYWRlciA9IG51bGw7DQogICAgLyoqDQogICAgICogQHZhciBudWxsIOaooeadv+WwvumDqA0KICAgICAqLw0KICAgIHB1YmxpYyAkZm9vdGVyID0gbnVsbDsNCg0KICAgIC8qKg0KICAgICAqIEB2YXIgYXJyYXkg5r+A5rS755qE5o+S5Lu25YiX6KGoDQogICAgICovDQogICAgcHVibGljICRhY3RpdmVkYXBwcyA9IGFycmF5KCk7DQogICAgcHVibGljICRhY3RpdmVhcHBzOw0KDQogICAgLyoqDQogICAgICogQHZhciBpbnQg566h55CG6aG16Z2i5pi+56S65p2h5pWwDQogICAgICovDQogICAgcHVibGljICRtYW5hZ2Vjb3VudCA9IDUwOw0KICAgIC8qKg0KICAgICAqIEB2YXIgaW50IOmhteeggeaYvuekuuadoeaVsA0KICAgICAqLw0KICAgIHB1YmxpYyAkcGFnZWJhcmNvdW50ID0gMTA7DQogICAgLyoqDQogICAgICogQHZhciBpbnQg5pCc57Si6L+U5Zue5p2h5pWwDQogICAgICovDQogICAgcHVibGljICRzZWFyY2hjb3VudCA9IDEwOw0KICAgIC8qKg0KICAgICAqIEB2YXIgaW50IOaWh+eroOWIl+ihqOaYvuekuuadoeaVsA0KICAgICAqLw0KICAgIHB1YmxpYyAkZGlzcGxheWNvdW50ID0gMTA7DQogICAgLyoqDQogICAgICogQHZhciBpbnQg6K+E6K665pi+56S65pWw6YePDQogICAgICovDQogICAgcHVibGljICRjb21tZW50ZGlzcGxheWNvdW50ID0gMTA7DQoNCg0KICAgIC8qKg0KICAgICAqIOiOt+WPluWUr+S4gOWunuS+iw0KICAgICAqIEByZXR1cm4gbnVsbHxaQmxvZ1BIUA0KICAgICAqLw0KICAgIHB1YmxpYyBzdGF0aWMgZnVuY3Rpb24gR2V0SW5zdGFuY2UoKSB7DQogICAgICAgIGlmICghaXNzZXQoc2VsZjo6JF96YnApKSB7DQogICAgICAgICAgICBzZWxmOjokX3picCA9IG5ldyBaQmxvZ1BIUDsNCiAgICAgICAgfQ0KDQogICAgICAgIHJldHVybiBzZWxmOjokX3picDsNCiAgICB9DQoNCiAgICAvKioNCiAgICAgKiDliJ3lp4vljJbmlbDmja7lupPov57mjqUNCiAgICAgKiBAcGFyYW0gc3RyaW5nICR0eXBlIOaVsOaNrui/nuaOpeexu+Weiw0KICAgICAqIEByZXR1cm4gb2JqZWN0IG9yIG51bGwNCiAgICAgKi8NCiAgICBwdWJsaWMgc3RhdGljIGZ1bmN0aW9uIEluaXRpYWxpemVEQigkdHlwZSkgew0KICAgICAgICBpZiAoIXRyaW0oJHR5cGUpKSB7DQogICAgICAgICAgICByZXR1cm4gbnVsbDsNCiAgICAgICAgfQ0KDQogICAgICAgICRuZXd0eXBlID0gJ0RiJyAuIHRyaW0oJHR5cGUpOw0KDQogICAgICAgIHJldHVybiBuZXcgJG5ld3R5cGUoKTsNCiAgICB9DQoNCiAgICAvKioNCiAgICAgKiDmnoTpgKDlh73mlbDvvIzliqDovb3ln7rmnKzphY3nva7liLAkemJwDQogICAgICovDQogICAgcHVibGljIGZ1bmN0aW9uIF9fY29uc3RydWN0KCkgew0KDQogICAgICAgIGdsb2JhbCAkb3B0aW9uLCAkbGFuZywgJGJsb2dwYXRoLCAkYmxvZ2hvc3QsICRjb29raWVzcGF0aCwgJHVzZXJzZGlyLCAkdGFibGUsDQogICAgICAgICRkYXRhaW5mbywgJGFjdGlvbnMsICRhY3Rpb24sICRibG9ndmVyc2lvbiwgJGJsb2d0aXRsZSwgJGJsb2duYW1lLCAkYmxvZ3N1Ym5hbWUsDQogICAgICAgICRibG9ndGhlbWUsICRibG9nc3R5bGUsICRjdXJyZW50dXJsLCAkYWN0aXZlZGFwcHMsICRwb3N0dHlwZTsNCg0KICAgICAgICBpZiAoWkJQX0hPT0tFUlJPUikgew0KICAgICAgICAgICAgWkJsb2dFeGNlcHRpb246OlNldEVycm9ySG9vaygpOw0KICAgICAgICB9DQoNCiAgICAgICAgLy/ln7rmnKzphY3nva7liqDovb3liLAkemJw5YaFDQogICAgICAgICR0aGlzLT52ZXJzaW9uID0gJiRibG9ndmVyc2lvbjsNCiAgICAgICAgJHRoaXMtPm9wdGlvbiA9ICYkb3B0aW9uOw0KICAgICAgICAkdGhpcy0+bGFuZyA9ICYkbGFuZzsNCiAgICAgICAgJHRoaXMtPnBhdGggPSAmJGJsb2dwYXRoOw0KICAgICAgICAkdGhpcy0+aG9zdCA9ICYkYmxvZ2hvc3Q7DQogICAgICAgICR0aGlzLT5jb29raWVzcGF0aCA9ICYkY29va2llc3BhdGg7DQogICAgICAgICR0aGlzLT51c2Vyc2RpciA9ICYkdXNlcnNkaXI7DQoNCiAgICAgICAgJHRoaXMtPnRhYmxlID0gJiR0YWJsZTsNCiAgICAgICAgJHRoaXMtPmRhdGFpbmZvID0gJiRkYXRhaW5mbzsNCiAgICAgICAgJHRoaXMtPmFjdGlvbnMgPSAmJGFjdGlvbnM7DQogICAgICAgICR0aGlzLT5wb3N0dHlwZSA9ICYkcG9zdHR5cGU7DQogICAgICAgICR0aGlzLT5jdXJyZW50dXJsID0gJiRjdXJyZW50dXJsOw0KICAgICAgICAkdGhpcy0+YWN0aW9uID0gJiRhY3Rpb247DQogICAgICAgICR0aGlzLT5hY3RpdmVkYXBwcyA9ICYkYWN0aXZlZGFwcHM7DQogICAgICAgICR0aGlzLT5hY3RpdmVhcHBzID0gJiR0aGlzLT5hY3RpdmVkYXBwczsNCg0KICAgICAgICAkdGhpcy0+Z3VpZCA9ICYkdGhpcy0+b3B0aW9uWydaQ19CTE9HX0NMU0lEJ107DQoNCiAgICAgICAgJHRoaXMtPnRpdGxlID0gJiRibG9ndGl0bGU7DQogICAgICAgICR0aGlzLT5uYW1lID0gJiRibG9nbmFtZTsNCiAgICAgICAgJHRoaXMtPnN1Ym5hbWUgPSAmJGJsb2dzdWJuYW1lOw0KICAgICAgICAkdGhpcy0+dGhlbWUgPSAmJGJsb2d0aGVtZTsNCiAgICAgICAgJHRoaXMtPnN0eWxlID0gJiRibG9nc3R5bGU7DQoNCiAgICAgICAgJHRoaXMtPm1hbmFnZWNvdW50ID0gJiR0aGlzLT5vcHRpb25bJ1pDX01BTkFHRV9DT1VOVCddOw0KICAgICAgICAkdGhpcy0+cGFnZWJhcmNvdW50ID0gJiR0aGlzLT5vcHRpb25bJ1pDX1BBR0VCQVJfQ09VTlQnXTsNCiAgICAgICAgJHRoaXMtPnNlYXJjaGNvdW50ID0gJiR0aGlzLT5vcHRpb25bJ1pDX1NFQVJDSF9DT1VOVCddOw0KICAgICAgICAkdGhpcy0+ZGlzcGxheWNvdW50ID0gJiR0aGlzLT5vcHRpb25bJ1pDX0RJU1BMQVlfQ09VTlQnXTsNCiAgICAgICAgJHRoaXMtPmNvbW1lbnRkaXNwbGF5Y291bnQgPSAmJHRoaXMtPm9wdGlvblsnWkNfQ09NTUVOVFNfRElTUExBWV9DT1VOVCddOw0KDQogICAgICAgICR0aGlzLT5jYXRlZ29yaWVzID0gJiR0aGlzLT5jYXRlZ29yeXM7DQogICAgICAgICR0aGlzLT5jYXRlZ29yaWVzYnlvcmRlciA9ICYkdGhpcy0+Y2F0ZWdvcnlzYnlvcmRlcjsNCg0KICAgICAgICAkdGhpcy0+dXNlciA9IG5ldyBzdGRDbGFzczsNCiAgICAgICAgZm9yZWFjaCAoJHRoaXMtPmRhdGFpbmZvWydNZW1iZXInXSBhcyAka2V5ID0+ICR2YWx1ZSkgew0KICAgICAgICAgICAgJHRoaXMtPnVzZXItPiRrZXkgPSAkdmFsdWVbM107DQogICAgICAgIH0NCiAgICAgICAgJHRoaXMtPnVzZXItPk1ldGFzID0gbmV3IENvbmZpZzsNCiAgICB9DQoNCiAgICAvKioNCiAgICAgKuaekOaehOWHveaVsO+8jOmHiuaUvui1hOa6kA0KICAgICAqLw0KICAgIHB1YmxpYyBmdW5jdGlvbiBfX2Rlc3RydWN0KCkgew0KICAgICAgICAkdGhpcy0+VGVybWluYXRlKCk7DQogICAgfQ0KDQogICAgLyoqDQogICAgICogQGFwaSBGaWx0ZXJfUGx1Z2luX1picF9DYWxsDQogICAgICogQHBhcmFtICRtZXRob2QNCiAgICAgKiBAcGFyYW0gJGFyZ3MNCiAgICAgKiBAcmV0dXJuIG1peGVkDQogICAgICovDQogICAgcHVibGljIGZ1bmN0aW9uIF9fY2FsbCgkbWV0aG9kLCAkYXJncykgew0KICAgICAgICBmb3JlYWNoICgkR0xPQkFMU1snaG9va3MnXVsnRmlsdGVyX1BsdWdpbl9aYnBfQ2FsbCddIGFzICRmcG5hbWUgPT4gJiRmcHNpZ25hbCkgew0KICAgICAgICAgICAgJGZwc2lnbmFsID0gUExVR0lOX0VYSVRTSUdOQUxfTk9ORTsNCiAgICAgICAgICAgICRmcHJldHVybiA9ICRmcG5hbWUoJG1ldGhvZCwgJGFyZ3MpOw0KICAgICAgICAgICAgaWYgKCRmcHNpZ25hbCA9PSBQTFVHSU5fRVhJVFNJR05BTF9SRVRVUk4pIHtyZXR1cm4gJGZwcmV0dXJuO30NCiAgICAgICAgfQ0KICAgICAgICB0cmlnZ2VyX2Vycm9yKCR0aGlzLT5sYW5nWydlcnJvciddWzgxXSwgRV9VU0VSX1dBUk5JTkcpOw0KICAgIH0NCg0KICAgIC8qKg0KICAgICAqIOiuvue9ruWPguaVsOWAvA0KICAgICAqIEBwYXJhbSAkbmFtZQ0KICAgICAqIEBwYXJhbSAkdmFsdWUNCiAgICAgKiBAcmV0dXJuIG1peGVkDQogICAgICovDQogICAgcHVibGljIGZ1bmN0aW9uIF9fc2V0KCRuYW1lLCAkdmFsdWUpIHsNCiAgICAgICAgZm9yZWFjaCAoJEdMT0JBTFNbJ2hvb2tzJ11bJ0ZpbHRlcl9QbHVnaW5fWmJwX1NldCddIGFzICRmcG5hbWUgPT4gJiRmcHNpZ25hbCkgew0KICAgICAgICAgICAgJGZwc2lnbmFsID0gUExVR0lOX0VYSVRTSUdOQUxfTk9ORTsNCiAgICAgICAgICAgICRmcHJldHVybiA9ICRmcG5hbWUoJG5hbWUsICR2YWx1ZSk7DQogICAgICAgICAgICBpZiAoJGZwc2lnbmFsID09IFBMVUdJTl9FWElUU0lHTkFMX1JFVFVSTikge3JldHVybiAkZnByZXR1cm47fQ0KICAgICAgICB9DQogICAgICAgIHRyaWdnZXJfZXJyb3IoJHRoaXMtPmxhbmdbJ2Vycm9yJ11bODFdLCBFX1VTRVJfV0FSTklORyk7DQogICAgfQ0KDQogICAgLyoqDQogICAgICog6I635Y+W5Y+C5pWw5YC8DQogICAgICogQHBhcmFtICRuYW1lDQogICAgICogQHJldHVybiBtaXhlZA0KICAgICAqLw0KICAgIHB1YmxpYyBmdW5jdGlvbiBfX2dldCgkbmFtZSkgew0KICAgICAgICBmb3JlYWNoICgkR0xPQkFMU1snaG9va3MnXVsnRmlsdGVyX1BsdWdpbl9aYnBfR2V0J10gYXMgJGZwbmFtZSA9PiAmJGZwc2lnbmFsKSB7DQogICAgICAgICAgICAkZnBzaWduYWwgPSBQTFVHSU5fRVhJVFNJR05BTF9OT05FOw0KICAgICAgICAgICAgJGZwcmV0dXJuID0gJGZwbmFtZSgkbmFtZSk7DQogICAgICAgICAgICBpZiAoJGZwc2lnbmFsID09IFBMVUdJTl9FWElUU0lHTkFMX1JFVFVSTikge3JldHVybiAkZnByZXR1cm47fQ0KICAgICAgICB9DQogICAgICAgIHRyaWdnZXJfZXJyb3IoJHRoaXMtPmxhbmdbJ2Vycm9yJ11bODFdLCBFX1VTRVJfV0FSTklORyk7DQogICAgfQ0KDQojIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjDQogICAgI+WIneWni+WMlg0KDQogICAgLyoqDQogICAgICog5Yid5aeL5YyWJHpicA0KICAgICAqIEByZXR1cm4gYm9vbA0KICAgICAqLw0KICAgIHB1YmxpYyBmdW5jdGlvbiBJbml0aWFsaXplKCkgew0KDQogICAgICAgICRvbGR6b25lID0gJHRoaXMtPm9wdGlvblsnWkNfVElNRV9aT05FX05BTUUnXTsNCiAgICAgICAgZGF0ZV9kZWZhdWx0X3RpbWV6b25lX3NldCgkb2xkem9uZSk7DQoNCiAgICAgICAgJG9sZGxhbmcgPSAkdGhpcy0+b3B0aW9uWydaQ19CTE9HX0xBTkdVQUdFUEFDSyddOw0KICAgICAgICAkdGhpcy0+TG9hZExhbmd1YWdlKCdzeXN0ZW0nLCAnJyk7DQoNCiAgICAgICAgaWYgKCR0aGlzLT5vcHRpb25bJ1pDX0NMT1NFX1dIT0xFX1NJVEUnXSA9PSB0cnVlKSB7DQogICAgICAgICAgICBIdHRwNTAzKCk7DQogICAgICAgICAgICAkdGhpcy0+U2hvd0Vycm9yKDgyLCBfX0ZJTEVfXywgX19MSU5FX18pOw0KDQogICAgICAgICAgICByZXR1cm4gZmFsc2U7DQogICAgICAgIH0NCg0KICAgICAgICBpZiAoISR0aGlzLT5PcGVuQ29ubmVjdCgpKSB7DQogICAgICAgICAgICByZXR1cm4gZmFsc2U7DQogICAgICAgIH0NCg0KICAgICAgICAkdGhpcy0+Q29udmVydFRhYmxlQW5kRGF0YWluZm8oKTsNCg0KICAgICAgICAkdGhpcy0+TG9hZENvbmZpZ3MoKTsNCiAgICAgICAgJHRoaXMtPkxvYWRDYWNoZSgpOw0KICAgICAgICAkdGhpcy0+TG9hZE9wdGlvbigpOw0KDQogICAgICAgICR0aGlzLT5SZWdQb3N0VHlwZSgwLCAnYXJ0aWNsZScsICR0aGlzLT5vcHRpb25bJ1pDX0FSVElDTEVfUkVHRVgnXSwgJHRoaXMtPm9wdGlvblsnWkNfUE9TVF9ERUZBVUxUX1RFTVBMQVRFJ10pOw0KICAgICAgICAkdGhpcy0+UmVnUG9zdFR5cGUoMSwgJ3BhZ2UnLCAkdGhpcy0+b3B0aW9uWydaQ19QQUdFX1JFR0VYJ10sICR0aGlzLT5vcHRpb25bJ1pDX1BPU1RfREVGQVVMVF9URU1QTEFURSddKTsNCg0KICAgICAgICBpZiAoJHRoaXMtPm9wdGlvblsnWkNfQkxPR19MQU5HVUFHRVBBQ0snXSA9PT0gJ1NpbXBDaGluZXNlJykgew0KICAgICAgICAgICAgJHRoaXMtPm9wdGlvblsnWkNfQkxPR19MQU5HVUFHRVBBQ0snXSA9ICd6aC1jbic7DQogICAgICAgIH0NCg0KICAgICAgICBpZiAoJHRoaXMtPm9wdGlvblsnWkNfQkxPR19MQU5HVUFHRVBBQ0snXSA9PT0gJ1RyYWRDaGluZXNlJykgew0KICAgICAgICAgICAgJHRoaXMtPm9wdGlvblsnWkNfQkxPR19MQU5HVUFHRVBBQ0snXSA9ICd6aC10dyc7DQogICAgICAgIH0NCg0KICAgICAgICBpZiAoJG9sZGxhbmcgIT0gJHRoaXMtPm9wdGlvblsnWkNfQkxPR19MQU5HVUFHRVBBQ0snXSkgew0KICAgICAgICAgICAgJHRoaXMtPkxvYWRMYW5ndWFnZSgnc3lzdGVtJywgJycpOw0KICAgICAgICB9DQoNCiAgICAgICAgaWYgKGlzc2V0KCR0aGlzLT5vcHRpb25bJ1pDX0RFQlVHX01PREVfU1RSSUNUJ10pKSB7DQogICAgICAgICAgICBaQmxvZ0V4Y2VwdGlvbjo6JGlzc3RyaWN0ID0gKGJvb2wpICR0aGlzLT5vcHRpb25bJ1pDX0RFQlVHX01PREVfU1RSSUNUJ107DQogICAgICAgIH0NCiAgICAgICAgaWYgKGlzc2V0KCR0aGlzLT5vcHRpb25bJ1pDX0RFQlVHX01PREVfV0FSTklORyddKSkgew0KICAgICAgICAgICAgWkJsb2dFeGNlcHRpb246OiRpc3dhcm5pbmcgPSAoYm9vbCkgJHRoaXMtPm9wdGlvblsnWkNfREVCVUdfTU9ERV9XQVJOSU5HJ107DQogICAgICAgIH0NCiAgICAgICAgaWYgKGlzc2V0KCR0aGlzLT5vcHRpb25bJ1pDX0RFQlVHX0xPR19FUlJPUiddKSkgew0KICAgICAgICAgICAgWkJsb2dFeGNlcHRpb246OiRpc2xvZ2Vycm9yID0gKGJvb2wpICR0aGlzLT5vcHRpb25bJ1pDX0RFQlVHX0xPR19FUlJPUiddOw0KICAgICAgICB9DQoNCiAgICAgICAgaWYgKHN1YnN0cigkdGhpcy0+aG9zdCwgMCwgOCkgPT0gJ2h0dHBzOi8vJykgew0KICAgICAgICAgICAgJHRoaXMtPmlzaHR0cHMgPSB0cnVlOw0KICAgICAgICB9DQogICAgICAgIGlmICgkdGhpcy0+b3B0aW9uWydaQ19QRVJNQU5FTlRfRE9NQUlOX0VOQUJMRSddID09IHRydWUpIHsNCiAgICAgICAgICAgICR0aGlzLT5ob3N0ID0gJHRoaXMtPm9wdGlvblsnWkNfQkxPR19IT1NUJ107DQogICAgICAgICAgICAkdGhpcy0+Y29va2llc3BhdGggPSBzdHJzdHIoc3RyX3JlcGxhY2UoJzovLycsICcnLCAkdGhpcy0+aG9zdCksICcvJyk7DQogICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICAkdGhpcy0+b3B0aW9uWydaQ19CTE9HX0hPU1QnXSA9ICR0aGlzLT5ob3N0Ow0KICAgICAgICB9DQoNCiAgICAgICAgJHRoaXMtPm9wdGlvblsnWkNfQkxPR19QUk9EVUNUJ10gPSAnWi1CbG9nUEhQJzsNCiAgICAgICAgJHRoaXMtPm9wdGlvblsnWkNfQkxPR19WRVJTSU9OJ10gPSBaQ19CTE9HX1ZFUlNJT047DQogICAgICAgICR0aGlzLT5vcHRpb25bJ1pDX05PV19WRVJTSU9OJ10gPSAkdGhpcy0+dmVyc2lvbjsgIC8vWkNfTEFTVF9WRVJTSU9ODQogICAgICAgICR0aGlzLT5vcHRpb25bJ1pDX0JMT0dfUFJPRFVDVF9GVUxMJ10gPSAkdGhpcy0+b3B0aW9uWydaQ19CTE9HX1BST0RVQ1QnXSAuICcgJyAuIFpDX1ZFUlNJT05fRElTUExBWTsNCiAgICAgICAgJHRoaXMtPm9wdGlvblsnWkNfQkxPR19QUk9EVUNUX0ZVTExIVE1MJ10gPSAnPGEgaHJlZj0iaHR0cDovL3d3dy56YmxvZ2NuLmNvbS8iIHRpdGxlPSJSYWluYm93U29mdCBaLUJsb2dQSFAiIHRhcmdldD0iX2JsYW5rIj4nIC4gJHRoaXMtPm9wdGlvblsnWkNfQkxPR19QUk9EVUNUX0ZVTEwnXSAuICc8L2E+JzsNCiAgICAgICAgJHRoaXMtPm9wdGlvblsnWkNfQkxPR19QUk9EVUNUX0hUTUwnXSA9ICc8YSBocmVmPSJodHRwOi8vd3d3LnpibG9nY24uY29tLyIgdGl0bGU9IlJhaW5ib3dTb2Z0IFotQmxvZ1BIUCIgdGFyZ2V0PSJfYmxhbmsiPicgLiAkdGhpcy0+b3B0aW9uWydaQ19CTE9HX1BST0RVQ1QnXSAuICc8L2E+JzsNCg0KICAgICAgICBpZiAoJG9sZHpvbmUgIT0gJHRoaXMtPm9wdGlvblsnWkNfVElNRV9aT05FX05BTUUnXSkgew0KICAgICAgICAgICAgZGF0ZV9kZWZhdWx0X3RpbWV6b25lX3NldCgkdGhpcy0+b3B0aW9uWydaQ19USU1FX1pPTkVfTkFNRSddKTsNCiAgICAgICAgfQ0KDQogICAgICAgIC8qaWYoaXNzZXQoJF9DT09LSUVbJ3RpbWV6b25lJ10pKXsNCiAgICAgICAgICAgICR0ej1HZXRWYXJzKCd0aW1lem9uZScsJ0NPT0tJRScpOw0KICAgICAgICAgICAgaWYoaXNfbnVtZXJpYygkdHopKXsNCiAgICAgICAgICAgICR0ej1zcHJpbnRmKCclK2QnLC0kdHopOw0KICAgICAgICAgICAgZGF0ZV9kZWZhdWx0X3RpbWV6b25lX3NldCgnRXRjL0dNVCcgLiAkdHopOw0KICAgICAgICAgICAgJHRoaXMtPnRpbWV6b25lPWRhdGVfZGVmYXVsdF90aW1lem9uZV9nZXQoKTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgKi8NCg0KICAgICAgICBoZWFkZXIoJ1Byb2R1Y3Q6JyAuICR0aGlzLT5vcHRpb25bJ1pDX0JMT0dfUFJPRFVDVF9GVUxMJ10pOw0KDQogICAgICAgICR0aGlzLT52YWxpZGNvZGV1cmwgPSAkdGhpcy0+aG9zdCAuICd6Yl9zeXN0ZW0vc2NyaXB0L2NfdmFsaWRjb2RlLnBocCc7DQogICAgICAgICR0aGlzLT5mZWVkdXJsID0gJHRoaXMtPmhvc3QgLiAnZmVlZC5waHAnOw0KICAgICAgICAkdGhpcy0+c2VhcmNodXJsID0gJHRoaXMtPmhvc3QgLiAnc2VhcmNoLnBocCc7DQogICAgICAgICR0aGlzLT5hamF4dXJsID0gJHRoaXMtPmhvc3QgLiAnemJfc3lzdGVtL2NtZC5waHA/YWN0PWFqYXgmc3JjPSc7DQogICAgICAgICR0aGlzLT54bWxycGN1cmwgPSAkdGhpcy0+aG9zdCAuICd6Yl9zeXN0ZW0veG1sLXJwYy9pbmRleC5waHAnOw0KDQogICAgICAgICR0aGlzLT5pc2luaXRpYWxpemVkID0gdHJ1ZTsNCg0KICAgICAgICByZXR1cm4gdHJ1ZTsNCiAgICB9DQoNCiAgICAvKioNCiAgICAgKiDovb3lhaUNCiAgICAgKiBAcmV0dXJuIGJvb2wNCiAgICAgKi8NCiAgICBwdWJsaWMgZnVuY3Rpb24gTG9hZCgpIHsNCg0KICAgICAgICBmb3JlYWNoICgkR0xPQkFMU1snaG9va3MnXVsnRmlsdGVyX1BsdWdpbl9aYnBfTG9hZF9QcmUnXSBhcyAkZnBuYW1lID0+ICYkZnBzaWduYWwpIHsNCiAgICAgICAgICAgICRmcHJldHVybiA9ICRmcG5hbWUoKTsNCiAgICAgICAgICAgIGlmICgkZnBzaWduYWwgPT0gUExVR0lOX0VYSVRTSUdOQUxfUkVUVVJOKSB7DQogICAgICAgICAgICAgICAgJGZwc2lnbmFsID0gUExVR0lOX0VYSVRTSUdOQUxfTk9ORTsNCg0KICAgICAgICAgICAgICAgIHJldHVybiAkZnByZXR1cm47DQogICAgICAgICAgICB9DQogICAgICAgIH0NCg0KICAgICAgICBpZiAoISR0aGlzLT5pc2luaXRpYWxpemVkKSB7DQogICAgICAgICAgICByZXR1cm4gZmFsc2U7DQogICAgICAgIH0NCg0KICAgICAgICBpZiAoJHRoaXMtPmlzbG9hZCkgew0KICAgICAgICAgICAgcmV0dXJuIGZhbHNlOw0KICAgICAgICB9DQoNCiAgICAgICAgJHRoaXMtPlN0YXJ0R3ppcCgpOw0KDQogICAgICAgIGhlYWRlcignQ29udGVudC10eXBlOiB0ZXh0L2h0bWw7IGNoYXJzZXQ9dXRmLTgnKTsNCg0KICAgICAgICAkdGhpcy0+Q29udmVydFRhYmxlQW5kRGF0YWluZm8oKTsNCg0KICAgICAgICAkdGhpcy0+TG9hZE1lbWJlcnMoJHRoaXMtPm9wdGlvblsnWkNfTE9BRE1FTUJFUlNfTEVWRUwnXSk7DQogICAgICAgICR0aGlzLT5Mb2FkQ2F0ZWdvcnlzKCk7DQogICAgICAgICMkdGhpcy0+TG9hZFRhZ3MoKTsNCiAgICAgICAgJHRoaXMtPkxvYWRNb2R1bGVzKCk7DQoNCiAgICAgICAgJHRoaXMtPlZlcmlmeSgpOw0KDQogICAgICAgICR0aGlzLT5SZWdCdWlsZE1vZHVsZSgnY2F0YWxvZycsICdNb2R1bGVCdWlsZGVyOjpDYXRhbG9nJyk7DQogICAgICAgICR0aGlzLT5SZWdCdWlsZE1vZHVsZSgnY2FsZW5kYXInLCAnTW9kdWxlQnVpbGRlcjo6Q2FsZW5kYXInKTsNCiAgICAgICAgJHRoaXMtPlJlZ0J1aWxkTW9kdWxlKCdjb21tZW50cycsICdNb2R1bGVCdWlsZGVyOjpDb21tZW50cycpOw0KICAgICAgICAkdGhpcy0+UmVnQnVpbGRNb2R1bGUoJ3ByZXZpb3VzJywgJ01vZHVsZUJ1aWxkZXI6OkxhdGVzdEFydGljbGVzJyk7DQogICAgICAgICR0aGlzLT5SZWdCdWlsZE1vZHVsZSgnYXJjaGl2ZXMnLCAnTW9kdWxlQnVpbGRlcjo6QXJjaGl2ZXMnKTsNCiAgICAgICAgJHRoaXMtPlJlZ0J1aWxkTW9kdWxlKCduYXZiYXInLCAnTW9kdWxlQnVpbGRlcjo6TmF2YmFyJyk7DQogICAgICAgICR0aGlzLT5SZWdCdWlsZE1vZHVsZSgndGFncycsICdNb2R1bGVCdWlsZGVyOjpUYWdMaXN0Jyk7DQogICAgICAgICR0aGlzLT5SZWdCdWlsZE1vZHVsZSgnc3RhdGlzdGljcycsICdNb2R1bGVCdWlsZGVyOjpTdGF0aXN0aWNzJyk7DQogICAgICAgICR0aGlzLT5SZWdCdWlsZE1vZHVsZSgnYXV0aG9ycycsICdNb2R1bGVCdWlsZGVyOjpBdXRob3JzJyk7DQoNCiAgICAgICAgLy/liJvlu7rmqKHmnb/nsbsNCiAgICAgICAgJHRoaXMtPnRlbXBsYXRlID0gJHRoaXMtPlByZXBhcmVUZW1wbGF0ZSgpOw0KDQogICAgICAgIC8vIOivu+S4u+mimOeJiOacrOS/oeaBrw0KICAgICAgICAkYXBwID0gJHRoaXMtPkxvYWRBcHAoJ3RoZW1lJywgJHRoaXMtPnRoZW1lKTsNCiAgICAgICAgaWYgKCRhcHAtPnR5cGUgIT09ICcnKSB7DQogICAgICAgICAgICAkdGhpcy0+dGhlbWVpbmZvID0gJGFwcC0+R2V0SW5mb0FycmF5KCk7DQogICAgICAgIH0NCg0KICAgICAgICBpZiAoJHRoaXMtPmlzbWFuYWdlKSB7DQogICAgICAgICAgICAkdGhpcy0+TG9hZE1hbmFnZSgpOw0KICAgICAgICB9DQoNCiAgICAgICAgQWRkX0ZpbHRlcl9QbHVnaW4oJ0ZpbHRlcl9QbHVnaW5fTG9naW5fSGVhZGVyJywgJ0luY2x1ZGVfQWRkb25BZG1pbkZvbnQnKTsNCiAgICAgICAgQWRkX0ZpbHRlcl9QbHVnaW4oJ0ZpbHRlcl9QbHVnaW5fT3RoZXJfSGVhZGVyJywgJ0luY2x1ZGVfQWRkb25BZG1pbkZvbnQnKTsNCiAgICAgICAgQWRkX0ZpbHRlcl9QbHVnaW4oJ0ZpbHRlcl9QbHVnaW5fQWRtaW5fSGVhZGVyJywgJ0luY2x1ZGVfQWRkb25BZG1pbkZvbnQnKTsNCg0KICAgICAgICBmb3JlYWNoICgkR0xPQkFMU1snaG9va3MnXVsnRmlsdGVyX1BsdWdpbl9aYnBfTG9hZCddIGFzICRmcG5hbWUgPT4gJiRmcHNpZ25hbCkgew0KICAgICAgICAgICAgJGZwbmFtZSgpOw0KICAgICAgICB9DQoNCiAgICAgICAgJHRoaXMtPmlzbG9hZCA9IHRydWU7DQoNCiAgICAgICAgcmV0dXJuIHRydWU7DQogICAgfQ0KDQogICAgLyoqDQogICAgICog6L295YWl566h55CGDQogICAgICovDQogICAgcHVibGljIGZ1bmN0aW9uIExvYWRNYW5hZ2UoKSB7DQoNCiAgICAgICAgaWYoc3RyX3JlcGxhY2UoJ2h0dHA6Ly8nLCAnJywgJHRoaXMtPnBhdGgpICE9PSBzdHJfcmVwbGFjZSgnaHR0cHM6Ly8nLCAnJywgJHRoaXMtPnBhdGgpKXsNCiAgICAgICAgICAgICR0aGlzLT5ob3N0ID0gR2V0Q3VycmVudEhvc3QoJHRoaXMtPnBhdGgsICR0aGlzLT5jb29raWVzcGF0aCk7DQogICAgICAgIH0NCg0KDQogICAgICAgIGlmIChzdWJzdHIoJHRoaXMtPmhvc3QsIDAsIDgpID09ICdodHRwczovLycpIHsNCiAgICAgICAgICAgICR0aGlzLT5pc2h0dHBzID0gdHJ1ZTsNCiAgICAgICAgfQ0KDQogICAgICAgIGlmICgkdGhpcy0+dXNlci0+U3RhdHVzID09IFpDX01FTUJFUl9TVEFUVVNfQVVESVRJTkcpIHsNCiAgICAgICAgICAgICR0aGlzLT5TaG93RXJyb3IoNzksIF9fRklMRV9fLCBfX0xJTkVfXyk7DQogICAgICAgIH0NCg0KICAgICAgICBpZiAoJHRoaXMtPnVzZXItPlN0YXR1cyA9PSBaQ19NRU1CRVJfU1RBVFVTX0xPQ0tFRCkgew0KICAgICAgICAgICAgJHRoaXMtPlNob3dFcnJvcig4MCwgX19GSUxFX18sIF9fTElORV9fKTsNCiAgICAgICAgfQ0KDQogICAgICAgIEFkZF9GaWx0ZXJfUGx1Z2luKCdGaWx0ZXJfUGx1Z2luX0FkbWluX1BhZ2VNbmdfU3ViTWVudScsICdJbmNsdWRlX0FkbWluX0FkZHBhZ2VzdWJtZW51Jyk7DQogICAgICAgIEFkZF9GaWx0ZXJfUGx1Z2luKCdGaWx0ZXJfUGx1Z2luX0FkbWluX1RhZ01uZ19TdWJNZW51JywgJ0luY2x1ZGVfQWRtaW5fQWRkdGFnc3VibWVudScpOw0KICAgICAgICBBZGRfRmlsdGVyX1BsdWdpbignRmlsdGVyX1BsdWdpbl9BZG1pbl9DYXRlZ29yeU1uZ19TdWJNZW51JywgJ0luY2x1ZGVfQWRtaW5fQWRkY2F0ZXN1Ym1lbnUnKTsNCiAgICAgICAgQWRkX0ZpbHRlcl9QbHVnaW4oJ0ZpbHRlcl9QbHVnaW5fQWRtaW5fTWVtYmVyTW5nX1N1Yk1lbnUnLCAnSW5jbHVkZV9BZG1pbl9BZGRtZW1zdWJtZW51Jyk7DQogICAgICAgIEFkZF9GaWx0ZXJfUGx1Z2luKCdGaWx0ZXJfUGx1Z2luX0FkbWluX01vZHVsZU1uZ19TdWJNZW51JywgJ0luY2x1ZGVfQWRtaW5fQWRkbW9kc3VibWVudScpOw0KICAgICAgICBBZGRfRmlsdGVyX1BsdWdpbignRmlsdGVyX1BsdWdpbl9BZG1pbl9Db21tZW50TW5nX1N1Yk1lbnUnLCAnSW5jbHVkZV9BZG1pbl9BZGRjbXRzdWJtZW51Jyk7DQoNCiAgICAgICAgJHRoaXMtPkNoZWNrVGVtcGxhdGUoKTsNCg0KICAgICAgICBmb3JlYWNoICgkR0xPQkFMU1snaG9va3MnXVsnRmlsdGVyX1BsdWdpbl9aYnBfTG9hZE1hbmFnZSddIGFzICRmcG5hbWUgPT4gJiRmcHNpZ25hbCkgew0KICAgICAgICAgICAgJGZwbmFtZSgpOw0KICAgICAgICB9DQogICAgfQ0KDQogICAgLyoqDQogICAgICrnu4jmraLov57mjqXvvIzph4rmlL7otYTmupANCiAgICAgKi8NCiAgICBwdWJsaWMgZnVuY3Rpb24gVGVybWluYXRlKCkgew0KICAgICAgICBpZiAoJHRoaXMtPmlzaW5pdGlhbGl6ZWQpIHsNCiAgICAgICAgICAgIGZvcmVhY2ggKCRHTE9CQUxTWydob29rcyddWydGaWx0ZXJfUGx1Z2luX1picF9UZXJtaW5hdGUnXSBhcyAkZnBuYW1lID0+ICYkZnBzaWduYWwpIHsNCiAgICAgICAgICAgICAgICAkZnBuYW1lKCk7DQogICAgICAgICAgICB9DQoNCiAgICAgICAgICAgICR0aGlzLT5DbG9zZUNvbm5lY3QoKTsNCiAgICAgICAgICAgIHVuc2V0KCR0aGlzLT5kYik7DQogICAgICAgICAgICAkdGhpcy0+aXNpbml0aWFsaXplZCA9IGZhbHNlOw0KICAgICAgICB9DQogICAgfQ0KDQogICAgLyoqDQogICAgICog6L+e5o6l5pWw5o2u5bqTDQogICAgICogQHJldHVybiBib29sDQogICAgICogQHRocm93cyBFeGNlcHRpb24NCiAgICAgKi8NCiAgICBwdWJsaWMgZnVuY3Rpb24gT3BlbkNvbm5lY3QoKSB7DQoNCiAgICAgICAgaWYgKCR0aGlzLT5pc2Nvbm5lY3RlZCkgew0KICAgICAgICAgICAgcmV0dXJuIGZhbHNlOw0KICAgICAgICB9DQoNCiAgICAgICAgaWYgKCEkdGhpcy0+b3B0aW9uWydaQ19EQVRBQkFTRV9UWVBFJ10pIHsNCiAgICAgICAgICAgIHJldHVybiBmYWxzZTsNCiAgICAgICAgfQ0KDQogICAgICAgIHN3aXRjaCAoJHRoaXMtPm9wdGlvblsnWkNfREFUQUJBU0VfVFlQRSddKSB7DQogICAgICAgIGNhc2UgJ3NxbGl0ZSc6DQogICAgICAgIGNhc2UgJ3NxbGl0ZTMnOg0KICAgICAgICBjYXNlICdwZG9fc3FsaXRlJzoNCiAgICAgICAgICAgICR0aGlzLT5kYiA9IFpCbG9nUEhQOjpJbml0aWFsaXplREIoJHRoaXMtPm9wdGlvblsnWkNfREFUQUJBU0VfVFlQRSddKTsNCiAgICAgICAgICAgIGlmICgkdGhpcy0+ZGItPk9wZW4oYXJyYXkoDQogICAgICAgICAgICAgICAgJHRoaXMtPnVzZXJzZGlyIC4gJ2RhdGEvJyAuICR0aGlzLT5vcHRpb25bJ1pDX1NRTElURV9OQU1FJ10sDQogICAgICAgICAgICAgICAgJHRoaXMtPm9wdGlvblsnWkNfU1FMSVRFX1BSRSddLA0KICAgICAgICAgICAgKSkgPT0gZmFsc2UpIHsNCiAgICAgICAgICAgICAgICAkdGhpcy0+U2hvd0Vycm9yKDY5LCBfX0ZJTEVfXywgX19MSU5FX18pOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgYnJlYWs7DQogICAgICAgIGNhc2UgJ3Bnc3FsJzoNCiAgICAgICAgY2FzZSAncGRvX3Bnc3FsJzoNCiAgICAgICAgICAgICR0aGlzLT5kYiA9IFpCbG9nUEhQOjpJbml0aWFsaXplREIoJHRoaXMtPm9wdGlvblsnWkNfREFUQUJBU0VfVFlQRSddKTsNCiAgICAgICAgICAgIGlmICgkdGhpcy0+ZGItPk9wZW4oYXJyYXkoDQogICAgICAgICAgICAgICAgJHRoaXMtPm9wdGlvblsnWkNfUEdTUUxfU0VSVkVSJ10sDQogICAgICAgICAgICAgICAgJHRoaXMtPm9wdGlvblsnWkNfUEdTUUxfVVNFUk5BTUUnXSwNCiAgICAgICAgICAgICAgICAkdGhpcy0+b3B0aW9uWydaQ19QR1NRTF9QQVNTV09SRCddLA0KICAgICAgICAgICAgICAgICR0aGlzLT5vcHRpb25bJ1pDX1BHU1FMX05BTUUnXSwNCiAgICAgICAgICAgICAgICAkdGhpcy0+b3B0aW9uWydaQ19QR1NRTF9QUkUnXSwNCiAgICAgICAgICAgICAgICAkdGhpcy0+b3B0aW9uWydaQ19QR1NRTF9QT1JUJ10sDQogICAgICAgICAgICAgICAgJHRoaXMtPm9wdGlvblsnWkNfUEdTUUxfUEVSU0lTVEVOVCddLA0KICAgICAgICAgICAgKSkgPT0gZmFsc2UpIHsNCiAgICAgICAgICAgICAgICAkdGhpcy0+U2hvd0Vycm9yKDY3LCBfX0ZJTEVfXywgX19MSU5FX18pOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgYnJlYWs7DQogICAgICAgIGNhc2UgJ215c3FsJzoNCiAgICAgICAgY2FzZSAnbXlzcWxpJzoNCiAgICAgICAgY2FzZSAncGRvX215c3FsJzoNCiAgICAgICAgZGVmYXVsdDoNCiAgICAgICAgICAgICR0aGlzLT5kYiA9IFpCbG9nUEhQOjpJbml0aWFsaXplREIoJHRoaXMtPm9wdGlvblsnWkNfREFUQUJBU0VfVFlQRSddKTsNCiAgICAgICAgICAgIGlmICgkdGhpcy0+ZGItPk9wZW4oYXJyYXkoDQogICAgICAgICAgICAgICAgJHRoaXMtPm9wdGlvblsnWkNfTVlTUUxfU0VSVkVSJ10sDQogICAgICAgICAgICAgICAgJHRoaXMtPm9wdGlvblsnWkNfTVlTUUxfVVNFUk5BTUUnXSwNCiAgICAgICAgICAgICAgICAkdGhpcy0+b3B0aW9uWydaQ19NWVNRTF9QQVNTV09SRCddLA0KICAgICAgICAgICAgICAgICR0aGlzLT5vcHRpb25bJ1pDX01ZU1FMX05BTUUnXSwNCiAgICAgICAgICAgICAgICAkdGhpcy0+b3B0aW9uWydaQ19NWVNRTF9QUkUnXSwNCiAgICAgICAgICAgICAgICAkdGhpcy0+b3B0aW9uWydaQ19NWVNRTF9QT1JUJ10sDQogICAgICAgICAgICAgICAgJHRoaXMtPm9wdGlvblsnWkNfTVlTUUxfUEVSU0lTVEVOVCddLA0KICAgICAgICAgICAgICAgICR0aGlzLT5vcHRpb25bJ1pDX01ZU1FMX0VOR0lORSddLA0KICAgICAgICAgICAgKSkgPT0gZmFsc2UpIHsNCiAgICAgICAgICAgICAgICAkdGhpcy0+U2hvd0Vycm9yKDY3LCBfX0ZJTEVfXywgX19MSU5FX18pOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgYnJlYWs7DQogICAgICAgIH0NCiAgICAgICAgLy9hZGQgdXRmOG1iNA0KICAgICAgICBpZiAoJHRoaXMtPmRiLT50eXBlID09ICdteXNxbCcgJiYgKHZlcnNpb25fY29tcGFyZSgkdGhpcy0+ZGItPnZlcnNpb24sICc1LjUuMycpIDwgMCB8fCB2ZXJzaW9uX2NvbXBhcmUoUEhQX1ZFUlNJT04sICc1LjMuMCcpIDwgMCApICkgew0KICAgICAgICAgICAgQWRkX0ZpbHRlcl9QbHVnaW4oJ0ZpbHRlcl9QbHVnaW5fRGJTcWxfRmlsdGVyJywgJ3V0Zjg0bWJfZmlsdGVyJyk7DQogICAgICAgICAgICBBZGRfRmlsdGVyX1BsdWdpbignRmlsdGVyX1BsdWdpbl9FZGl0X0JlZ2luJywgJ3V0Zjg0bWJfZml4SHRtbFNwZWNpYWxDaGFycycpOw0KICAgICAgICB9DQogICAgICAgICR0aGlzLT5pc2Nvbm5lY3RlZCA9IHRydWU7DQoNCiAgICAgICAgcmV0dXJuIHRydWU7DQoNCiAgICB9DQoNCiAgICAvKioNCiAgICAgKiDlr7nooajlkI3lkozmlbDmja7nu5PmnoTov5vooYzpooTovazmjaINCiAgICAgKi8NCiAgICBwdWJsaWMgZnVuY3Rpb24gQ29udmVydFRhYmxlQW5kRGF0YWluZm8oKSB7DQogICAgICAgIGlmICgkdGhpcy0+ZGItPmRicHJlKSB7DQogICAgICAgICAgICAkdGhpcy0+dGFibGUgPSBzdHJfcmVwbGFjZSgnJXByZSUnLCAkdGhpcy0+ZGItPmRicHJlLCAkdGhpcy0+dGFibGUpOw0KICAgICAgICB9DQogICAgICAgIGlmICgkdGhpcy0+ZGItPnR5cGUgPT0gJ3Bnc3FsJykgew0KICAgICAgICAgICAgZm9yZWFjaCAoJHRoaXMtPmRhdGFpbmZvIGFzICRrZXkgPT4gJiR2YWx1ZSkgew0KICAgICAgICAgICAgICAgIGZvcmVhY2ggKCR2YWx1ZSBhcyAkazIgPT4gJiR2Mikgew0KICAgICAgICAgICAgICAgICAgICAkdjJbMF0gPSBzdHJ0b2xvd2VyKCR2MlswXSk7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfQ0KICAgICAgICB9DQogICAgfQ0KDQogICAgLyoqDQogICAgICog5YWz6Zet5pWw5o2u5bqT6L+e5o6lDQogICAgICovDQogICAgcHVibGljIGZ1bmN0aW9uIENsb3NlQ29ubmVjdCgpIHsNCiAgICAgICAgaWYgKCR0aGlzLT5pc2Nvbm5lY3RlZCkgew0KICAgICAgICAgICAgJHRoaXMtPmRiLT5DbG9zZSgpOw0KICAgICAgICAgICAgJHRoaXMtPmlzY29ubmVjdGVkID0gZmFsc2U7DQogICAgICAgIH0NCiAgICB9DQoNCiAgICAvKioNCiAgICAgKiDlkK/nlKhzZXNzaW9uDQogICAgICogQHJldHVybiBib29sDQogICAgICovDQogICAgcHVibGljIGZ1bmN0aW9uIFN0YXJ0U2Vzc2lvbigpIHsNCiAgICAgICAgaWYgKCR0aGlzLT5pc3Nlc3Npb24gPT0gdHJ1ZSkgew0KICAgICAgICAgICAgcmV0dXJuIGZhbHNlOw0KICAgICAgICB9DQoNCiAgICAgICAgc2Vzc2lvbl9zdGFydCgpOw0KICAgICAgICAkdGhpcy0+aXNzZXNzaW9uID0gdHJ1ZTsNCg0KICAgICAgICByZXR1cm4gdHJ1ZTsNCiAgICB9DQoNCiAgICAvKioNCiAgICAgKiDnu4jmraJzZXNzaW9uDQogICAgICogQHJldHVybiBib29sDQogICAgICovDQogICAgcHVibGljIGZ1bmN0aW9uIEVuZFNlc3Npb24oKSB7DQogICAgICAgIGlmICgkdGhpcy0+aXNzZXNzaW9uID09IGZhbHNlKSB7DQogICAgICAgICAgICByZXR1cm4gZmFsc2U7DQogICAgICAgIH0NCg0KICAgICAgICBzZXNzaW9uX3Vuc2V0KCk7DQogICAgICAgIHNlc3Npb25fZGVzdHJveSgpOw0KICAgICAgICAkdGhpcy0+aXNzZXNzaW9uID0gZmFsc2U7DQoNCiAgICAgICAgcmV0dXJuIHRydWU7DQogICAgfQ0KDQojIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjDQogICAgI+aPkuS7tueUqENvbmZpZ3Pooajnm7jlhbPorr7nva7lh73mlbANCg0KICAgIC8qKg0KICAgICAqIOi9veWFpeaPkuS7tkNvbmZpZ3PooagNCiAgICAgKi8NCiAgICBwdWJsaWMgZnVuY3Rpb24gTG9hZENvbmZpZ3MoKSB7DQogICAgICAgICR0aGlzLT5jb25maWdzID0gYXJyYXkoKTsNCiAgICAgICAgJHNxbCA9ICR0aGlzLT5kYi0+c3FsLT5TZWxlY3QoJHRoaXMtPnRhYmxlWydDb25maWcnXSwgYXJyYXkoJyonKSwgJycsICcnLCAnJywgJycpOw0KDQogICAgICAgICRhcnJheSA9ICR0aGlzLT5HZXRMaXN0VHlwZSgnQ29uZmlnJywgJHNxbCk7DQogICAgICAgIGZvcmVhY2ggKCRhcnJheSBhcyAkYykgew0KICAgICAgICAgICAgJG4gPSAkYy0+R2V0SXRlbU5hbWUoKTsNCiAgICAgICAgICAgICR0aGlzLT5jb25maWdzWyRuXSA9ICRjOw0KICAgICAgICB9DQoNCiAgICAgICAgcmV0dXJuOw0KDQogICAgICAgICRjb25maWdzX25hbWUgPSAkY29uZmlnc19uYW1ldmFsdWUgPSBhcnJheSgpOw0KICAgICAgICBmb3JlYWNoICgkYXJyYXkgYXMgJGMpIHsNCiAgICAgICAgICAgICRuID0gJGMtPkdldEl0ZW1OYW1lKCk7DQogICAgICAgICAgICAkY29uZmlnc19uYW1lWyRuXSA9ICRuOw0KICAgICAgICAgICAgJGNvbmZpZ3NfbmFtZXZhbHVlWyRuXSA9ICRjOw0KICAgICAgICB9DQogICAgICAgIG5hdGNhc2Vzb3J0KCRjb25maWdzX25hbWUpOw0KICAgICAgICBmb3JlYWNoICgkY29uZmlnc19uYW1lIGFzICRuYW1lKSB7DQogICAgICAgICAgICAkdGhpcy0+Y29uZmlnc1skbmFtZV0gPSAkY29uZmlnc19uYW1ldmFsdWVbJG5hbWVdOw0KICAgICAgICB9DQogICAgICAgIHVuc2V0KCRjb25maWdzX25hbWUsICRjb25maWdzX25hbWV2YWx1ZSk7DQogICAgfQ0KDQogICAgLyoqDQogICAgICog5L+d5a2YQ29uZmlnc+ihqA0KICAgICAqIEBwYXJhbSBzdHJpbmcgJG5hbWUgQ29uZmlnc+ihqOWQjQ0KICAgICAqIEByZXR1cm4gYm9vbA0KICAgICAqLw0KICAgIHB1YmxpYyBmdW5jdGlvbiBTYXZlQ29uZmlnKCRuYW1lKSB7DQogICAgICAgIGlmICghaXNzZXQoJHRoaXMtPmNvbmZpZ3NbJG5hbWVdKSkgew0KICAgICAgICAgICAgcmV0dXJuIGZhbHNlOw0KICAgICAgICB9DQoNCiAgICAgICAgJHRoaXMtPmNvbmZpZ3NbJG5hbWVdLT5TYXZlKCk7DQoNCiAgICAgICAgcmV0dXJuIHRydWU7DQogICAgfQ0KDQogICAgLyoqDQogICAgICog5Yig6ZmkQ29uZmlnc+ihqA0KICAgICAqIEBwYXJhbSBzdHJpbmcgJG5hbWUgQ29uZmlnc+ihqOWQjQ0KICAgICAqIEByZXR1cm4gYm9vbA0KICAgICAqLw0KICAgIHB1YmxpYyBmdW5jdGlvbiBEZWxDb25maWcoJG5hbWUpIHsNCiAgICAgICAgaWYgKCFpc3NldCgkdGhpcy0+Y29uZmlnc1skbmFtZV0pKSB7DQogICAgICAgICAgICByZXR1cm4gZmFsc2U7DQogICAgICAgIH0NCg0KICAgICAgICAkdGhpcy0+Y29uZmlnc1skbmFtZV0tPkRlbGV0ZSgpOw0KDQogICAgICAgIHJldHVybiB0cnVlOw0KICAgIH0NCg0KICAgIC8qKg0KICAgICAqIOiOt+WPlkNvbmZpZ3PooajlgLwNCiAgICAgKiBAcGFyYW0gc3RyaW5nICRuYW1lIENvbmZpZ3PooajlkI0NCiAgICAgKiBAcmV0dXJuIG1peGVkDQogICAgICovDQogICAgcHVibGljIGZ1bmN0aW9uIENvbmZpZygkbmFtZSkgew0KICAgICAgICBpZiAoIWlzc2V0KCR0aGlzLT5jb25maWdzWyRuYW1lXSkpIHsNCiAgICAgICAgICAgICRuYW1lID0gRmlsdGVyQ29ycmVjdE5hbWUoJG5hbWUpOw0KICAgICAgICAgICAgaWYgKCEkbmFtZSkgew0KICAgICAgICAgICAgICAgIHJldHVybjsNCiAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgJHRoaXMtPmNvbmZpZ3NbJG5hbWVdID0gbmV3IENvbmZpZygkbmFtZSk7DQogICAgICAgIH0NCg0KICAgICAgICByZXR1cm4gJHRoaXMtPmNvbmZpZ3NbJG5hbWVdOw0KICAgIH0NCg0KICAgIC8qKg0KICAgICAqIOafpeafkENvbmZpZ+aYr+WQpuWtmOWcqA0KICAgICAqIEBwYXJhbSBzdHJpbmcgJG5hbWUgQ29uZmlnc+ihqOWQjQ0KICAgICAqIEByZXR1cm4gYm9vbA0KICAgICAqLw0KICAgIHB1YmxpYyBmdW5jdGlvbiBIYXNDb25maWcoJG5hbWUpIHsNCiAgICAgICAgcmV0dXJuIGlzc2V0KCR0aGlzLT5jb25maWdzWyRuYW1lXSk7DQogICAgfQ0KDQojIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjDQogICAgI0NhY2hl55u45YWzDQogICAgcHJpdmF0ZSAkY2FjaGVfaGFzaCA9IG51bGw7DQoNCiAgICAvKioNCiAgICAgKiDkv53lrZjnvJPlrZgNCiAgICAgKiBAcmV0dXJuIGJvb2wNCiAgICAgKi8NCiAgICBwdWJsaWMgZnVuY3Rpb24gU2F2ZUNhY2hlKCkgew0KICAgICAgICAjJHM9JHRoaXMtPnVzZXJzZGlyIC4gJ2NhY2hlLycgLiAkdGhpcy0+Z3VpZCAuICcuY2FjaGUnOw0KICAgICAgICAjJGM9c2VyaWFsaXplKCR0aGlzLT5jYWNoZSk7DQogICAgICAgICNAZmlsZV9wdXRfY29udGVudHMoJHMsICRjKTsNCiAgICAgICAgLy8kdGhpcy0+Y29uZmlnc1snY2FjaGUnXT0kdGhpcy0+Y2FjaGU7DQogICAgICAgICRuZXdfaGFzaCA9IG1kNSgkdGhpcy0+Q29uZmlnKCdjYWNoZScpKTsNCiAgICAgICAgaWYgKCR0aGlzLT5jYWNoZV9oYXNoID09ICRuZXdfaGFzaCkgew0KICAgICAgICAgICAgcmV0dXJuIHRydWU7DQogICAgICAgIH0NCg0KICAgICAgICAkdGhpcy0+U2F2ZUNvbmZpZygnY2FjaGUnKTsNCiAgICAgICAgJHRoaXMtPmNhY2hlX2hhc2ggPSAkbmV3X2hhc2g7DQoNCiAgICAgICAgcmV0dXJuIHRydWU7DQogICAgfQ0KDQogICAgLyoqDQogICAgICog5Yqg6L2957yT5a2YDQogICAgICogQHJldHVybiBib29sDQogICAgICovDQogICAgcHVibGljIGZ1bmN0aW9uIExvYWRDYWNoZSgpIHsNCiAgICAgICAgIyRzPSR0aGlzLT51c2Vyc2RpciAuICdjYWNoZS8nIC4gJHRoaXMtPmd1aWQgLiAnLmNhY2hlJzsNCiAgICAgICAgI2lmIChmaWxlX2V4aXN0cygkcykpDQogICAgICAgICN7DQogICAgICAgICMJJHRoaXMtPmNhY2hlPXVuc2VyaWFsaXplKEBmaWxlX2dldF9jb250ZW50cygkcykpOw0KICAgICAgICAjfQ0KICAgICAgICAkdGhpcy0+Y2FjaGUgPSAkdGhpcy0+Q29uZmlnKCdjYWNoZScpOw0KICAgICAgICAkdGhpcy0+Y2FjaGVfaGFzaCA9IG1kNSgkdGhpcy0+Q29uZmlnKCdjYWNoZScpKTsNCg0KICAgICAgICByZXR1cm4gdHJ1ZTsNCiAgICB9DQoNCiMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMNCiAgICAj5L+d5a2YemJw6K6+572u5Ye95pWwDQoNCiAgICAvKioNCiAgICAgKiDkv53lrZjphY3nva4NCiAgICAgKiBAcmV0dXJuIGJvb2wNCiAgICAgKi8NCiAgICBwdWJsaWMgZnVuY3Rpb24gU2F2ZU9wdGlvbigpIHsNCg0KICAgICAgICAkdGhpcy0+b3B0aW9uWydaQ19CTE9HX0NMU0lEJ10gPSAkdGhpcy0+Z3VpZDsNCg0KICAgICAgICBpZiAoc3RycG9zKCd8U0FFfEJBRTJ8QUNFfFRYWXwnLCAnfCcgLiAkdGhpcy0+b3B0aW9uWydaQ19ZVU5fU0lURSddIC4gJ3wnKSA9PT0gZmFsc2UgJiYgZmlsZV9leGlzdHMoJHRoaXMtPnVzZXJzZGlyIC4gJ2Nfb3B0aW9uLnBocCcpID09IGZhbHNlKSB7DQogICAgICAgICAgICAkcyA9ICI8IiAuICI/IiAuICJwaHBcclxuIjsNCiAgICAgICAgICAgICRzIC49ICJyZXR1cm4gIjsNCiAgICAgICAgICAgICRvcHRpb24gPSBhcnJheSgpOw0KICAgICAgICAgICAgZm9yZWFjaCAoJHRoaXMtPm9wdGlvbiBhcyAka2V5ID0+ICR2YWx1ZSkgew0KICAgICAgICAgICAgICAgIGlmICgNCiAgICAgICAgICAgICAgICAgICAgKCRrZXkgPT0gJ1pDX1lVTl9TSVRFJykgfHwNCiAgICAgICAgICAgICAgICAgICAgKCRrZXkgPT0gJ1pDX0RBVEFCQVNFX1RZUEUnKSB8fA0KICAgICAgICAgICAgICAgICAgICAoJGtleSA9PSAnWkNfU1FMSVRFX05BTUUnKSB8fA0KICAgICAgICAgICAgICAgICAgICAoJGtleSA9PSAnWkNfU1FMSVRFX1BSRScpIHx8DQogICAgICAgICAgICAgICAgICAgICgka2V5ID09ICdaQ19NWVNRTF9TRVJWRVInKSB8fA0KICAgICAgICAgICAgICAgICAgICAoJGtleSA9PSAnWkNfTVlTUUxfVVNFUk5BTUUnKSB8fA0KICAgICAgICAgICAgICAgICAgICAoJGtleSA9PSAnWkNfTVlTUUxfUEFTU1dPUkQnKSB8fA0KICAgICAgICAgICAgICAgICAgICAoJGtleSA9PSAnWkNfTVlTUUxfTkFNRScpIHx8DQogICAgICAgICAgICAgICAgICAgICgka2V5ID09ICdaQ19NWVNRTF9DSEFSU0VUJykgfHwNCiAgICAgICAgICAgICAgICAgICAgKCRrZXkgPT0gJ1pDX01ZU1FMX1BSRScpIHx8DQogICAgICAgICAgICAgICAgICAgICgka2V5ID09ICdaQ19NWVNRTF9FTkdJTkUnKSB8fA0KICAgICAgICAgICAgICAgICAgICAoJGtleSA9PSAnWkNfTVlTUUxfUE9SVCcpIHx8DQogICAgICAgICAgICAgICAgICAgICgka2V5ID09ICdaQ19NWVNRTF9QRVJTSVNURU5UJykgfHwNCiAgICAgICAgICAgICAgICAgICAgKCRrZXkgPT0gJ1pDX1BHU1FMX1NFUlZFUicpIHx8DQogICAgICAgICAgICAgICAgICAgICgka2V5ID09ICdaQ19QR1NRTF9VU0VSTkFNRScpIHx8DQogICAgICAgICAgICAgICAgICAgICgka2V5ID09ICdaQ19QR1NRTF9QQVNTV09SRCcpIHx8DQogICAgICAgICAgICAgICAgICAgICgka2V5ID09ICdaQ19QR1NRTF9OQU1FJykgfHwNCiAgICAgICAgICAgICAgICAgICAgKCRrZXkgPT0gJ1pDX1BHU1FMX0NIQVJTRVQnKSB8fA0KICAgICAgICAgICAgICAgICAgICAoJGtleSA9PSAnWkNfUEdTUUxfUFJFJykgfHwNCiAgICAgICAgICAgICAgICAgICAgKCRrZXkgPT0gJ1pDX1BHU1FMX1BPUlQnKSB8fA0KICAgICAgICAgICAgICAgICAgICAoJGtleSA9PSAnWkNfUEdTUUxfUEVSU0lTVEVOVCcpIHx8DQogICAgICAgICAgICAgICAgICAgICgka2V5ID09ICdaQ19DTE9TRV9XSE9MRV9TSVRFJykNCiAgICAgICAgICAgICAgICApIHsNCiAgICAgICAgICAgICAgICAgICAgJG9wdGlvblska2V5XSA9ICR2YWx1ZTsNCiAgICAgICAgICAgICAgICB9DQoNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgICRzIC49IHZhcl9leHBvcnQoJG9wdGlvbiwgdHJ1ZSk7DQogICAgICAgICAgICAkcyAuPSAiOyI7DQogICAgICAgICAgICBAZmlsZV9wdXRfY29udGVudHMoJHRoaXMtPnVzZXJzZGlyIC4gJ2Nfb3B0aW9uLnBocCcsICRzKTsNCiAgICAgICAgfQ0KDQogICAgICAgIGZvcmVhY2ggKCR0aGlzLT5vcHRpb24gYXMgJGtleSA9PiAkdmFsdWUpIHsNCiAgICAgICAgICAgICR0aGlzLT5Db25maWcoJ3N5c3RlbScpLT4ka2V5ID0gJHZhbHVlOw0KICAgICAgICB9DQoNCiAgICAgICAgaWYoZnVuY3Rpb25fZXhpc3RzKCdtYl9zcGxpdCcpKXsNCiAgICAgICAgICAgICRhID0gbWJfc3BsaXQoJycsICR0aGlzLT5Db25maWcoJ3N5c3RlbScpLT5aQ19CTE9HX0hPU1QsIDEpOw0KICAgICAgICAgICAgJHRoaXMtPkNvbmZpZygnc3lzdGVtJyktPlpDX0JMT0dfSE9TVCA9IGltcGxvZGUoInwiLCAkYSk7DQogICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICAkdGhpcy0+Q29uZmlnKCdzeXN0ZW0nKS0+WkNfQkxPR19IT1NUID0gY2h1bmtfc3BsaXQoJHRoaXMtPkNvbmZpZygnc3lzdGVtJyktPlpDX0JMT0dfSE9TVCwgMSwgInwiKTsNCiAgICAgICAgfQ0KDQogICAgICAgICR0aGlzLT5TYXZlQ29uZmlnKCdzeXN0ZW0nKTsNCg0KICAgICAgICByZXR1cm4gdHJ1ZTsNCiAgICB9DQoNCiAgICAvKioNCiAgICAgKiDovb3lhaXphY3nva4NCiAgICAgKiBAcmV0dXJuIGJvb2wNCiAgICAgKi8NCiAgICBwdWJsaWMgZnVuY3Rpb24gTG9hZE9wdGlvbigpIHsNCg0KICAgICAgICAkYXJyYXkgPSAkdGhpcy0+Q29uZmlnKCdzeXN0ZW0nKS0+R2V0RGF0YSgpOw0KDQogICAgICAgIGlmIChlbXB0eSgkYXJyYXkpKSB7DQogICAgICAgICAgICByZXR1cm4gZmFsc2U7DQogICAgICAgIH0NCg0KICAgICAgICBpZiAoIWlzX2FycmF5KCRhcnJheSkpIHsNCiAgICAgICAgICAgIHJldHVybiBmYWxzZTsNCiAgICAgICAgfQ0KDQogICAgICAgIGZvcmVhY2ggKCRhcnJheSBhcyAka2V5ID0+ICR2YWx1ZSkgew0KICAgICAgICAgICAgLy9pZigka2V5PT0nWkNfUEVSTUFORU5UX0RPTUFJTl9FTkFCTEUnKWNvbnRpbnVlOw0KICAgICAgICAgICAgLy9pZigka2V5PT0nWkNfQkxPR19IT1NUJyljb250aW51ZTsNCiAgICAgICAgICAgIC8vaWYoJGtleT09J1pDX0JMT0dfQ0xTSUQnKWNvbnRpbnVlOw0KICAgICAgICAgICAgLy9pZigka2V5PT0nWkNfQkxPR19MQU5HVUFHRVBBQ0snKWNvbnRpbnVlOw0KICAgICAgICAgICAgaWYgKCRrZXkgPT0gJ1pDX0JMT0dfSE9TVCcpIHsNCiAgICAgICAgICAgICAgICAkdmFsdWUgPSBzdHJfcmVwbGFjZSgnfCcsICcnLCAkdmFsdWUpOw0KICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICBpZiAoDQogICAgICAgICAgICAgICAgKCRrZXkgPT0gJ1pDX1lVTl9TSVRFJykgfHwNCiAgICAgICAgICAgICAgICAoJGtleSA9PSAnWkNfREFUQUJBU0VfVFlQRScpIHx8DQogICAgICAgICAgICAgICAgKCRrZXkgPT0gJ1pDX1NRTElURV9OQU1FJykgfHwNCiAgICAgICAgICAgICAgICAoJGtleSA9PSAnWkNfU1FMSVRFX1BSRScpIHx8DQogICAgICAgICAgICAgICAgKCRrZXkgPT0gJ1pDX01ZU1FMX1NFUlZFUicpIHx8DQogICAgICAgICAgICAgICAgKCRrZXkgPT0gJ1pDX01ZU1FMX1VTRVJOQU1FJykgfHwNCiAgICAgICAgICAgICAgICAoJGtleSA9PSAnWkNfTVlTUUxfUEFTU1dPUkQnKSB8fA0KICAgICAgICAgICAgICAgICgka2V5ID09ICdaQ19NWVNRTF9OQU1FJykgfHwNCiAgICAgICAgICAgICAgICAoJGtleSA9PSAnWkNfTVlTUUxfQ0hBUlNFVCcpIHx8DQogICAgICAgICAgICAgICAgKCRrZXkgPT0gJ1pDX01ZU1FMX1BSRScpIHx8DQogICAgICAgICAgICAgICAgKCRrZXkgPT0gJ1pDX01ZU1FMX0VOR0lORScpIHx8DQogICAgICAgICAgICAgICAgKCRrZXkgPT0gJ1pDX01ZU1FMX1BPUlQnKSB8fA0KICAgICAgICAgICAgICAgICgka2V5ID09ICdaQ19NWVNRTF9QRVJTSVNURU5UJykgfHwNCiAgICAgICAgICAgICAgICAoJGtleSA9PSAnWkNfUEdTUUxfU0VSVkVSJykgfHwNCiAgICAgICAgICAgICAgICAoJGtleSA9PSAnWkNfUEdTUUxfVVNFUk5BTUUnKSB8fA0KICAgICAgICAgICAgICAgICgka2V5ID09ICdaQ19QR1NRTF9QQVNTV09SRCcpIHx8DQogICAgICAgICAgICAgICAgKCRrZXkgPT0gJ1pDX1BHU1FMX05BTUUnKSB8fA0KICAgICAgICAgICAgICAgICgka2V5ID09ICdaQ19QR1NRTF9DSEFSU0VUJykgfHwNCiAgICAgICAgICAgICAgICAoJGtleSA9PSAnWkNfUEdTUUxfUFJFJykgfHwNCiAgICAgICAgICAgICAgICAoJGtleSA9PSAnWkNfUEdTUUxfUE9SVCcpIHx8DQogICAgICAgICAgICAgICAgKCRrZXkgPT0gJ1pDX1BHU1FMX1BFUlNJU1RFTlQnKSB8fA0KICAgICAgICAgICAgICAgICgka2V5ID09ICdaQ19DTE9TRV9XSE9MRV9TSVRFJykNCiAgICAgICAgICAgICkgew0KICAgICAgICAgICAgICAgIGNvbnRpbnVlOw0KICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICAkdGhpcy0+b3B0aW9uWyRrZXldID0gJHZhbHVlOw0KICAgICAgICB9DQogICAgICAgIGlmICghZXh0ZW5zaW9uX2xvYWRlZCgnZ2QnKSkgew0KICAgICAgICAgICAgJHRoaXMtPm9wdGlvblsnWkNfQ09NTUVOVF9WRVJJRllfRU5BQkxFJ10gPSBmYWxzZTsNCiAgICAgICAgfQ0KDQogICAgICAgIHJldHVybiB0cnVlOw0KICAgIH0NCg0KIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIw0KICAgICPmnYPpmZDlj4rpqozor4HnsbsNCg0KICAgIC8qKg0KICAgICAqIOmqjOivgeaTjeS9nOadg+mZkA0KICAgICAqIEBwYXJhbSBzdHJpbmcgJGFjdGlvbiDmk43kvZwNCiAgICAgKiBAcmV0dXJuIGJvb2wNCiAgICAgKi8NCiAgICBwdWJsaWMgZnVuY3Rpb24gQ2hlY2tSaWdodHMoJGFjdGlvbiwgJGxldmVsID0gbnVsbCkgew0KDQogICAgICAgIGlmKCRsZXZlbCA9PT0gbnVsbCl7DQogICAgICAgICAgICAkbGV2ZWwgPSAkdGhpcy0+dXNlci0+TGV2ZWw7DQogICAgICAgIH0NCg0KICAgICAgICBmb3JlYWNoICgkR0xPQkFMU1snaG9va3MnXVsnRmlsdGVyX1BsdWdpbl9aYnBfQ2hlY2tSaWdodHMnXSBhcyAkZnBuYW1lID0+ICYkZnBzaWduYWwpIHsNCiAgICAgICAgICAgICRmcHNpZ25hbCA9IFBMVUdJTl9FWElUU0lHTkFMX05PTkU7DQogICAgICAgICAgICAkZnByZXR1cm4gPSAkZnBuYW1lKCRhY3Rpb24sICRsZXZlbCk7DQogICAgICAgICAgICBpZiAoJGZwc2lnbmFsID09IFBMVUdJTl9FWElUU0lHTkFMX1JFVFVSTikge3JldHVybiAkZnByZXR1cm47fQ0KICAgICAgICB9DQogICAgICAgIGlmICghaXNzZXQoJHRoaXMtPmFjdGlvbnNbJGFjdGlvbl0pKSB7DQogICAgICAgICAgICBpZiAoaXNfbnVtZXJpYygkYWN0aW9uKSkgew0KICAgICAgICAgICAgICAgIHJldHVybiAoJGxldmVsIDw9ICRhY3Rpb24pOw0KICAgICAgICAgICAgfQ0KICAgICAgICB9DQoNCiAgICAgICAgcmV0dXJuICgkbGV2ZWwgPD0gJHRoaXMtPmFjdGlvbnNbJGFjdGlvbl0pOw0KICAgIH0NCg0KICAgIC8qKg0KICAgICAqIOagueaNrueUqOaIt+etiee6p+mqjOivgeaTjeS9nOadg+mZkCAxLjXlvIDlp4vlj4LmlbDmjaLpobrluo8NCiAgICAgKiBAcGFyYW0gc3RyaW5nICRhY3Rpb24g5pON5L2cDQogICAgICogQHBhcmFtIGludCAkbGV2ZWwg55So5oi3562J57qnDQogICAgICogQHJldHVybiBib29sDQogICAgICovDQogICAgcHVibGljIGZ1bmN0aW9uIENoZWNrUmlnaHRzQnlMZXZlbCgkYWN0aW9uLCAkbGV2ZWwpIHsNCiAgICAgICAgcmV0dXJuICR0aGlzLT5DaGVja1JpZ2h0cygkYWN0aW9uLCAkbGV2ZWwpOw0KICAgIH0NCg0KICAgIC8qKg0KICAgICAqIOmqjOivgeeUqOaIt+eZu+W9lShDT09LSUXkuK3nmoTnlKjmiLflkI3lr4bnoIEpDQogICAgICogQHJldHVybiBib29sDQogICAgICovDQogICAgcHVibGljIGZ1bmN0aW9uIFZlcmlmeSgpIHsNCiAgICAgICAgJG0gPSBudWxsOw0KICAgICAgICAkdSA9IHRyaW0oR2V0VmFycygndXNlcm5hbWUnLCAnQ09PS0lFJykpOw0KICAgICAgICAkcCA9IHRyaW0oR2V0VmFycygncGFzc3dvcmQnLCAnQ09PS0lFJykpOw0KICAgICAgICBpZiAoJHRoaXMtPlZlcmlmeV9NRDVQYXRoKCR1LCAkcCwgJG0pID09IHRydWUpIHsNCiAgICAgICAgICAgICR0aGlzLT51c2VyID0gJG07DQoNCiAgICAgICAgICAgIHJldHVybiB0cnVlOw0KICAgICAgICB9DQogICAgICAgICR0aGlzLT51c2VyID0gbmV3IE1lbWJlcjsNCg0KICAgICAgICByZXR1cm4gZmFsc2U7DQogICAgfQ0KDQogICAgLyoqDQogICAgICog6aqM6K+B55So5oi355m75b2V77yITUQ15YqgemJwLT5ndWlk55uQ5ZCO55qE5a+G56CB77yJDQogICAgICogQHBhcmFtIHN0cmluZyAkbmFtZSDnlKjmiLflkI0NCiAgICAgKiBAcGFyYW0gc3RyaW5nICRwc19wYXRoX2hhc2ggTUQ15YqgemJwLT5ndWlk55uQ5ZCO55qE5a+G56CBDQogICAgICogQHBhcmFtIG9iamVjdCAkbWVtYmVyIOi/lOWbnuivu+WPluaIkOWKn+eahG1lbWJlcuWvueixoQ0KICAgICAqIEByZXR1cm4gYm9vbA0KICAgICAqLw0KICAgIHB1YmxpYyBmdW5jdGlvbiBWZXJpZnlfTUQ1UGF0aCgkbmFtZSwgJHBzX3BhdGhfaGFzaCwgJiRtZW1iZXIgPSBudWxsKSB7DQogICAgICAgIGlmICgkbmFtZSA9PSAnJyB8fCAkcHNfcGF0aF9oYXNoID09ICcnKSB7DQogICAgICAgICAgICByZXR1cm4gZmFsc2U7DQogICAgICAgIH0NCiAgICAgICAgJG0gPSAkdGhpcy0+R2V0TWVtYmVyQnlOYW1lKCRuYW1lKTsNCiAgICAgICAgaWYgKCRtLT5JRCA+IDApIHsNCiAgICAgICAgICAgIGlmICgkbS0+UGFzc1dvcmRfTUQ1UGF0aCA9PSAkcHNfcGF0aF9oYXNoKSB7DQogICAgICAgICAgICAgICAgJG1lbWJlciA9ICRtOw0KDQogICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7DQogICAgICAgICAgICB9DQogICAgICAgIH0NCg0KICAgICAgICByZXR1cm4gZmFsc2U7DQogICAgfQ0KDQogICAgLyoqDQogICAgICog6aqM6K+B55So5oi355m75b2V77yI5LiA5qyhTUQ15a+G56CB77yJDQogICAgICogQHBhcmFtIHN0cmluZyAkbmFtZSDnlKjmiLflkI0NCiAgICAgKiBAcGFyYW0gc3RyaW5nICRtZDVwdyBtZDXliqDlr4blkI7nmoTlr4bnoIENCiAgICAgKiBAcGFyYW0gb2JqZWN0ICRtZW1iZXIg6L+U5Zue6K+75Y+W5oiQ5Yqf55qEbWVtYmVy5a+56LGhDQogICAgICogQHJldHVybiBib29sDQogICAgICovDQogICAgcHVibGljIGZ1bmN0aW9uIFZlcmlmeV9NRDUoJG5hbWUsICRtZDVwdywgJiRtZW1iZXIgPSBudWxsKSB7DQogICAgICAgIGlmICgkbmFtZSA9PSAnJyB8fCAkbWQ1cHcgPT0gJycpIHsNCiAgICAgICAgICAgIHJldHVybiBmYWxzZTsNCiAgICAgICAgfQ0KICAgICAgICAkbSA9ICR0aGlzLT5HZXRNZW1iZXJCeU5hbWUoJG5hbWUpOw0KICAgICAgICBpZiAoJG0tPklEID4gMCkgew0KICAgICAgICAgICAgcmV0dXJuICR0aGlzLT5WZXJpZnlfRmluYWwoJG5hbWUsIG1kNSgkbWQ1cHcgLiAkbS0+R3VpZCksICRtZW1iZXIpOw0KICAgICAgICB9DQoNCiAgICAgICAgcmV0dXJuIGZhbHNlOw0KICAgICAgICANCiAgICB9DQoNCiAgICAvKioNCiAgICAgKiDpqozor4HnlKjmiLfnmbvlvZXvvIjljp/lp4vmmI7mloflr4bnoIHvvIkNCiAgICAgKiBAcGFyYW0gc3RyaW5nICRuYW1lIOeUqOaIt+WQjQ0KICAgICAqIEBwYXJhbSBzdHJpbmcgJG9yaWdpbmFscHcg5a+G56CB5piO5paHDQogICAgICogQHBhcmFtIG9iamVjdCAkbWVtYmVyIOi/lOWbnuivu+WPluaIkOWKn+eahG1lbWJlcuWvueixoQ0KICAgICAqIEByZXR1cm4gYm9vbA0KICAgICAqLw0KICAgIHB1YmxpYyBmdW5jdGlvbiBWZXJpZnlfT3JpZ2luYWwoJG5hbWUsICRvcmlnaW5hbHB3LCAmJG1lbWJlciA9IG51bGwpIHsNCiAgICAgICAgaWYgKCRuYW1lID09ICcnIHx8ICRvcmlnaW5hbHB3ID09ICcnKSB7DQogICAgICAgICAgICByZXR1cm4gZmFsc2U7DQogICAgICAgIH0NCiAgICAgICAgJG0gPSAkdGhpcy0+R2V0TWVtYmVyQnlOYW1lKCRuYW1lKTsNCiAgICAgICAgaWYgKCRtLT5JRCA+IDApIHsNCiAgICAgICAgICAgIHJldHVybiAkdGhpcy0+VmVyaWZ5X01ENSgkbmFtZSwgbWQ1KCRvcmlnaW5hbHB3KSwgJG1lbWJlcik7DQogICAgICAgIH0NCg0KICAgICAgICByZXR1cm4gZmFsc2U7DQogICAgfQ0KDQogICAgLyoqDQogICAgICog6aqM6K+B55So5oi355m75b2V77yI5pWw5o2u5bqT5L+d5a2Y55qE5pyA57uI6L+Q566X5ZCO5a+G56CB77yJDQogICAgICogQHBhcmFtIHN0cmluZyAkbmFtZSDnlKjmiLflkI0NCiAgICAgKiBAcGFyYW0gc3RyaW5nICRwYXNzd29yZCDkuozmrKHliqDlr4blkI7nmoTlr4bnoIENCiAgICAgKiBAcGFyYW0gb2JqZWN0ICRtZW1iZXIg6L+U5Zue6K+75Y+W5oiQ5Yqf55qEbWVtYmVy5a+56LGhDQogICAgICogQHJldHVybiBib29sDQogICAgICovDQogICAgcHVibGljIGZ1bmN0aW9uIFZlcmlmeV9GaW5hbCgkbmFtZSwgJHBhc3N3b3JkLCAmJG1lbWJlciA9IG51bGwpIHsNCiAgICAgICAgaWYgKCRuYW1lID09ICcnIHx8ICRwYXNzd29yZCA9PSAnJykgew0KICAgICAgICAgICAgcmV0dXJuIGZhbHNlOw0KICAgICAgICB9DQogICAgICAgICRtID0gJHRoaXMtPkdldE1lbWJlckJ5TmFtZSgkbmFtZSk7DQogICAgICAgIGlmICgkbS0+SUQgPiAwKSB7DQogICAgICAgICAgICBpZiAoc3RyY2FzZWNtcCgkbS0+UGFzc3dvcmQsICRwYXNzd29yZCkgPT0gMCkgew0KICAgICAgICAgICAgICAgICRtZW1iZXIgPSAkbTsNCg0KICAgICAgICAgICAgICAgIHJldHVybiB0cnVlOw0KICAgICAgICAgICAgfQ0KICAgICAgICB9DQoNCiAgICAgICAgcmV0dXJuIGZhbHNlOw0KICAgIH0NCg0KDQojIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjDQogICAgI+WKoOi9veWHveaVsA0KDQogICAgLyoqDQogICAgICrovb3lhaXnlKjmiLfliJfooagNCiAgICAgKi8NCiAgICBwdWJsaWMgZnVuY3Rpb24gTG9hZE1lbWJlcnMoJGxldmVsID0gMCkgew0KICAgICAgICBpZiAoJGxldmVsID09IC0xKSB7DQogICAgICAgICAgICByZXR1cm47DQogICAgICAgIH0NCg0KICAgICAgICAkd2hlcmUgPSBudWxsOw0KICAgICAgICBpZiAoJGxldmVsID4gMCkgew0KICAgICAgICAgICAgJHdoZXJlID0gYXJyYXkoYXJyYXkoJzw9JywgJ21lbV9MZXZlbCcsICRsZXZlbCkpOw0KICAgICAgICB9DQogICAgICAgICR0aGlzLT5tZW1iZXJzID0gYXJyYXkoKTsNCiAgICAgICAgJHRoaXMtPm1lbWJlcnNieW5hbWUgPSBhcnJheSgpOw0KICAgICAgICAkYXJyYXkgPSAkdGhpcy0+R2V0TWVtYmVyTGlzdChudWxsLCAkd2hlcmUpOw0KICAgICAgICBmb3JlYWNoICgkYXJyYXkgYXMgJG0pIHsNCiAgICAgICAgICAgICR0aGlzLT5tZW1iZXJzWyRtLT5JRF0gPSAkbTsNCiAgICAgICAgICAgICR0aGlzLT5tZW1iZXJzYnluYW1lWyRtLT5OYW1lXSA9ICYkdGhpcy0+bWVtYmVyc1skbS0+SURdOw0KICAgICAgICB9DQogICAgfQ0KDQogICAgLyoqDQogICAgICog6L295YWl5YiG57G75YiX6KGoDQogICAgICogQHJldHVybiBib29sDQogICAgICovDQogICAgcHVibGljIGZ1bmN0aW9uIExvYWRDYXRlZ29yeXMoKSB7DQoNCiAgICAgICAgJHRoaXMtPmNhdGVnb3JpZXMgPSBhcnJheSgpOw0KICAgICAgICAkbHYwID0gYXJyYXkoKTsNCiAgICAgICAgJGx2MSA9IGFycmF5KCk7DQogICAgICAgICRsdjIgPSBhcnJheSgpOw0KICAgICAgICAkbHYzID0gYXJyYXkoKTsNCiAgICAgICAgJGFycmF5ID0gJHRoaXMtPkdldENhdGVnb3J5TGlzdChudWxsLCBudWxsLCBhcnJheSgnY2F0ZV9PcmRlcicgPT4gJ0FTQycpLCBudWxsLCBudWxsKTsNCiAgICAgICAgaWYgKGNvdW50KCRhcnJheSkgPT0gMCkgew0KICAgICAgICAgICAgcmV0dXJuIGZhbHNlOw0KICAgICAgICB9DQoNCiAgICAgICAgZm9yZWFjaCAoJGFycmF5IGFzICRjKSB7DQogICAgICAgICAgICAkdGhpcy0+Y2F0ZWdvcmllc1skYy0+SURdID0gJGM7DQogICAgICAgIH0NCg0KDQogICAgICAgIGZvcmVhY2ggKCR0aGlzLT5jYXRlZ29yaWVzIGFzICRpZCA9PiAkYykgew0KICAgICAgICAgICAgJGwgPSAnbHYnIC4gJGMtPkxldmVsOw0KICAgICAgICAgICAgJHskbH1bJGMtPlBhcmVudElEXVtdID0gJGlkOw0KICAgICAgICB9DQoNCg0KICAgICAgICBpZiAoIWlzX2FycmF5KCRsdjBbMF0pKSB7DQogICAgICAgICAgICAkbHYwWzBdID0gYXJyYXkoKTsNCiAgICAgICAgfQ0KDQogICAgICAgIGZvcmVhY2ggKCRsdjBbMF0gYXMgJGlkMCkgew0KICAgICAgICAgICAgJHRoaXMtPmNhdGVnb3JpZXNieW9yZGVyWyRpZDBdID0gJiR0aGlzLT5jYXRlZ29yaWVzWyRpZDBdOw0KICAgICAgICAgICAgaWYgKCFpc3NldCgkbHYxWyRpZDBdKSkge2NvbnRpbnVlO30NCiAgICAgICAgICAgIGZvcmVhY2ggKCRsdjFbJGlkMF0gYXMgJGlkMSkgew0KICAgICAgICAgICAgICAgIGlmICgkdGhpcy0+Y2F0ZWdvcmllc1skaWQxXS0+UGFyZW50SUQgPT0gJGlkMCkgew0KICAgICAgICAgICAgICAgICAgICAkdGhpcy0+Y2F0ZWdvcmllc1skaWQwXS0+U3ViQ2F0ZWdvcmllc1tdID0gJHRoaXMtPmNhdGVnb3JpZXNbJGlkMV07DQogICAgICAgICAgICAgICAgICAgICR0aGlzLT5jYXRlZ29yaWVzWyRpZDBdLT5DaGlsZHJlbkNhdGVnb3JpZXNbXSA9ICR0aGlzLT5jYXRlZ29yaWVzWyRpZDFdOw0KICAgICAgICAgICAgICAgICAgICAkdGhpcy0+Y2F0ZWdvcmllc2J5b3JkZXJbJGlkMV0gPSAmJHRoaXMtPmNhdGVnb3JpZXNbJGlkMV07DQogICAgICAgICAgICAgICAgICAgIGlmICghaXNzZXQoJGx2MlskaWQxXSkpIHtjb250aW51ZTt9DQogICAgICAgICAgICAgICAgICAgIGZvcmVhY2ggKCRsdjJbJGlkMV0gYXMgJGlkMikgew0KICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCR0aGlzLT5jYXRlZ29yaWVzWyRpZDJdLT5QYXJlbnRJRCA9PSAkaWQxKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgJHRoaXMtPmNhdGVnb3JpZXNbJGlkMF0tPkNoaWxkcmVuQ2F0ZWdvcmllc1tdID0gJHRoaXMtPmNhdGVnb3JpZXNbJGlkMl07DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgJHRoaXMtPmNhdGVnb3JpZXNbJGlkMV0tPlN1YkNhdGVnb3J5c1tdID0gJHRoaXMtPmNhdGVnb3JpZXNbJGlkMl07DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgJHRoaXMtPmNhdGVnb3JpZXNbJGlkMV0tPkNoaWxkcmVuQ2F0ZWdvcmllc1tdID0gJHRoaXMtPmNhdGVnb3JpZXNbJGlkMl07DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgJHRoaXMtPmNhdGVnb3JpZXNieW9yZGVyWyRpZDJdID0gJiR0aGlzLT5jYXRlZ29yaWVzWyRpZDJdOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghaXNzZXQoJGx2M1skaWQyXSkpIHtjb250aW51ZTt9DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yZWFjaCAoJGx2M1skaWQyXSBhcyAkaWQzKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICgkdGhpcy0+Y2F0ZWdvcmllc1skaWQzXS0+UGFyZW50SUQgPT0gJGlkMikgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJHRoaXMtPmNhdGVnb3JpZXNbJGlkMF0tPkNoaWxkcmVuQ2F0ZWdvcmllc1tdID0gJHRoaXMtPmNhdGVnb3JpZXNbJGlkM107DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkdGhpcy0+Y2F0ZWdvcmllc1skaWQxXS0+Q2hpbGRyZW5DYXRlZ29yaWVzW10gPSAkdGhpcy0+Y2F0ZWdvcmllc1skaWQzXTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICR0aGlzLT5jYXRlZ29yaWVzWyRpZDJdLT5TdWJDYXRlZ29yeXNbXSA9ICR0aGlzLT5jYXRlZ29yaWVzWyRpZDNdOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJHRoaXMtPmNhdGVnb3JpZXNbJGlkMl0tPkNoaWxkcmVuQ2F0ZWdvcmllc1tdID0gJHRoaXMtPmNhdGVnb3JpZXNbJGlkM107DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkdGhpcy0+Y2F0ZWdvcmllc2J5b3JkZXJbJGlkM10gPSAmJHRoaXMtPmNhdGVnb3JpZXNbJGlkM107DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9DQogICAgICAgIH0NCiAgICB9DQoNCiAgICAvKioNCiAgICAgKui9veWFpeagh+etvuWIl+ihqA0KICAgICAqLw0KICAgIHB1YmxpYyBmdW5jdGlvbiBMb2FkVGFncygpIHsNCg0KICAgICAgICAkdGhpcy0+dGFncyA9IGFycmF5KCk7DQogICAgICAgICR0aGlzLT50YWdzYnluYW1lID0gYXJyYXkoKTsNCiAgICAgICAgJGFycmF5ID0gJHRoaXMtPkdldFRhZ0xpc3QoKTsNCiAgICAgICAgZm9yZWFjaCAoJGFycmF5IGFzICR0KSB7DQogICAgICAgICAgICAkdGhpcy0+dGFnc1skdC0+SURdID0gJHQ7DQogICAgICAgICAgICAkdGhpcy0+dGFnc2J5bmFtZVskdC0+TmFtZV0gPSAmJHRoaXMtPnRhZ3NbJHQtPklEXTsNCiAgICAgICAgfQ0KDQogICAgfQ0KDQogICAgLyoqDQogICAgICog6L295YWl5qih5Z2X5YiX6KGoDQogICAgICogQHJldHVybiBudWxsDQogICAgICovDQogICAgcHVibGljIGZ1bmN0aW9uIExvYWRNb2R1bGVzKCkgew0KDQogICAgICAgICR0aGlzLT5tb2R1bGVzID0gYXJyYXkoKTsNCiAgICAgICAgJHRoaXMtPm1vZHVsZXNieWZpbGVuYW1lID0gYXJyYXkoKTsNCiAgICAgICAgJGFycmF5ID0gJHRoaXMtPkdldE1vZHVsZUxpc3QoKTsNCiAgICAgICAgZm9yZWFjaCAoJGFycmF5IGFzICRtKSB7DQogICAgICAgICAgICAkdGhpcy0+bW9kdWxlc1tdID0gJG07DQogICAgICAgICAgICAkdGhpcy0+bW9kdWxlc2J5ZmlsZW5hbWVbJG0tPkZpbGVOYW1lXSA9ICRtOw0KICAgICAgICB9DQoNCiAgICAgICAgJGRpciA9ICR0aGlzLT51c2Vyc2RpciAuICd0aGVtZS8nIC4gJHRoaXMtPnRoZW1lIC4gJy9pbmNsdWRlLyc7DQogICAgICAgIGlmIChmaWxlX2V4aXN0cygkZGlyKSkgew0KCSAgICAgICAgJGZpbGVzID0gR2V0RmlsZXNJbkRpcigkZGlyLCAncGhwJyk7DQoJICAgICAgICBmb3JlYWNoICgkZmlsZXMgYXMgJHNvcnRuYW1lID0+ICRmdWxsbmFtZSkgew0KCSAgICAgICAgICAgICRtID0gbmV3IE1vZHVsZSgpOw0KCSAgICAgICAgICAgICRtLT5GaWxlTmFtZSA9ICRzb3J0bmFtZTsNCgkgICAgICAgICAgICAkbS0+Q29udGVudCA9IGZpbGVfZ2V0X2NvbnRlbnRzKCRmdWxsbmFtZSk7DQoJICAgICAgICAgICAgJG0tPlR5cGUgPSAnZGl2JzsNCgkgICAgICAgICAgICAkbS0+U291cmNlID0gJ3RoZW1lJzsNCgkgICAgICAgICAgICAkdGhpcy0+bW9kdWxlc1tdID0gJG07DQoJICAgICAgICAgICAgJHRoaXMtPm1vZHVsZXNieWZpbGVuYW1lWyRtLT5GaWxlTmFtZV0gPSAkbTsNCgkgICAgICAgIH0NCiAgICAgICAgfQ0KDQogICAgICAgIGZvcmVhY2ggKCR0aGlzLT5tb2R1bGVzIGFzICRtKSB7DQogICAgICAgICAgICAkbS0+Q29udGVudCA9IHN0cl9yZXBsYWNlKCd7JGhvc3R9JywgJHRoaXMtPmhvc3QsICRtLT5Db250ZW50KTsNCiAgICAgICAgfQ0KDQogICAgfQ0KDQogICAgLyoqDQogICAgICog6L295YWl5Li76aKY5YiX6KGoDQogICAgICovDQogICAgcHVibGljIGZ1bmN0aW9uIExvYWRUaGVtZXMoKSB7DQoNCiAgICAgICAgJGFsbHRoZW1lcyA9IGFycmF5KCk7DQogICAgICAgICRkaXJzID0gR2V0RGlyc0luRGlyKCR0aGlzLT51c2Vyc2RpciAuICd0aGVtZS8nKTsNCiAgICAgICAgbmF0Y2FzZXNvcnQoJGRpcnMpOw0KICAgICAgICBhcnJheV91bnNoaWZ0KCRkaXJzLCAkdGhpcy0+dGhlbWUpOw0KICAgICAgICAkZGlycyA9IGFycmF5X3VuaXF1ZSgkZGlycyk7DQogICAgICAgIGZvcmVhY2ggKCRkaXJzIGFzICRpZCkgew0KICAgICAgICAgICAgJGFwcCA9IG5ldyBBcHA7DQogICAgICAgICAgICBpZiAoJGFwcC0+TG9hZEluZm9CeVhtbCgndGhlbWUnLCAkaWQpID09IHRydWUpIHsNCiAgICAgICAgICAgICAgICAkYWxsdGhlbWVzW10gPSAkYXBwOw0KICAgICAgICAgICAgfQ0KICAgICAgICB9DQoNCiAgICAgICAgcmV0dXJuICRhbGx0aGVtZXM7DQoNCiAgICB9DQoNCiAgICAvKioNCiAgICAgKiDovb3lhaXmj5Lku7bliJfooagNCiAgICAgKi8NCiAgICBwdWJsaWMgZnVuY3Rpb24gTG9hZFBsdWdpbnMoKSB7DQoNCiAgICAgICAgJGFsbHBsdWdpbnMgPSBhcnJheSgpOw0KICAgICAgICAkZGlycyA9IEdldERpcnNJbkRpcigkdGhpcy0+dXNlcnNkaXIgLiAncGx1Z2luLycpOw0KICAgICAgICBuYXRjYXNlc29ydCgkZGlycyk7DQoNCiAgICAgICAgZm9yZWFjaCAoJGRpcnMgYXMgJGlkKSB7DQogICAgICAgICAgICAkYXBwID0gbmV3IEFwcDsNCiAgICAgICAgICAgIGlmICgkYXBwLT5Mb2FkSW5mb0J5WG1sKCdwbHVnaW4nLCAkaWQpID09IHRydWUpIHsNCiAgICAgICAgICAgICAgICAkYWxscGx1Z2luc1tdID0gJGFwcDsNCiAgICAgICAgICAgIH0NCiAgICAgICAgfQ0KDQogICAgICAgIHJldHVybiAkYWxscGx1Z2luczsNCg0KICAgIH0NCg0KICAgIC8qKg0KICAgICAqIOi9veWFpeaMh+WumuW6lOeUqA0KICAgICAqIEBwYXJhbSBzdHJpbmcgJHR5cGUg5bqU55So57G75Z6LKHRoZW1lfHBsdWdpbikNCiAgICAgKiBAcGFyYW0gc3RyaW5nICRpZCDlupTnlKhJRA0KICAgICAqIEByZXR1cm4gQXBwDQogICAgICovDQogICAgcHVibGljIGZ1bmN0aW9uIExvYWRBcHAoJHR5cGUsICRpZCkgew0KICAgICAgICAkYXBwID0gbmV3IEFwcDsNCiAgICAgICAgJGFwcC0+TG9hZEluZm9CeVhtbCgkdHlwZSwgJGlkKTsNCg0KICAgICAgICByZXR1cm4gJGFwcDsNCiAgICB9DQoNCiAgICAvKioNCiAgICAgKiDmo4Dmn6XlupTnlKjmmK/lkKblronoo4XlubblkK/nlKgNCiAgICAgKiBAcGFyYW0gc3RyaW5nICRuYW1lIOW6lOeUqO+8iOaPkuS7tuaIluS4u+mimO+8ieeahElEDQogICAgICogQHJldHVybiBib29sDQogICAgICovDQogICAgcHVibGljIGZ1bmN0aW9uIENoZWNrUGx1Z2luKCRuYW1lKSB7DQogICAgICAgIHJldHVybiBpbl9hcnJheSgkbmFtZSwgJHRoaXMtPmFjdGl2ZWRhcHBzKTsNCiAgICB9DQoNCiAgICAvKioNCiAgICAgKiDmo4Dmn6XlupTnlKjmmK/lkKblronoo4XlubblkK/nlKgNCiAgICAgKiBAcGFyYW0gc3RyaW5nICRuYW1lIOW6lOeUqElE77yI5o+S5Lu25oiW5Li76aKY77yJDQogICAgICogQHJldHVybiBib29sDQogICAgICovDQogICAgcHVibGljIGZ1bmN0aW9uIENoZWNrQXBwKCRuYW1lKSB7DQogICAgICAgIHJldHVybiAkdGhpcy0+Q2hlY2tQbHVnaW4oJG5hbWUpOw0KICAgIH0NCg0KICAgIC8qKg0KICAgICAqIOiOt+WPlumihOa/gOa0u+aPkuS7tuWQjeaVsOe7hA0KICAgICAqLw0KICAgIHB1YmxpYyBmdW5jdGlvbiBHZXRQcmVBY3RpdmVQbHVnaW4oKSB7DQogICAgICAgICRhcCA9IGV4cGxvZGUoInwiLCAkdGhpcy0+b3B0aW9uWydaQ19VU0lOR19QTFVHSU5fTElTVCddKTsNCiAgICAgICAgJGFwID0gYXJyYXlfdW5pcXVlKCRhcCk7DQoNCiAgICAgICAgcmV0dXJuICRhcDsNCiAgICB9DQoNCiAgICAvKioNCiAgICAgKiDovb3lhaXmjIflrprlupTnlKjor63oqIDljIUNCiAgICAgKiBAcGFyYW0gc3RyaW5nICR0eXBlIOW6lOeUqOexu+WeiyhzeXN0ZW18dGhlbWV8cGx1Z2luKQ0KICAgICAqIEBwYXJhbSBzdHJpbmcgJGlkIOW6lOeUqElEDQogICAgICogQHJldHVybiBudWxsDQogICAgICovDQogICAgcHVibGljIGZ1bmN0aW9uIExvYWRMYW5ndWFnZSgkdHlwZSwgJGlkLCAkZGVmYXVsdCA9ICcnKSB7DQoNCiAgICAgICAgJGxhbmd1YWdlUGF0aCA9ICR0aGlzLT5wYXRoOw0KICAgICAgICAkbGFuZ3VhZ2VSZWdFeCA9ICcvXihbMC05QS1aXC1fXSopXC5waHAkL3VpJzsNCiAgICAgICAgJGxhbmd1YWdlTGlzdCA9IGFycmF5KCk7DQogICAgICAgICRsYW5ndWFnZSA9ICcnOw0KICAgICAgICAkZGVmYXVsdCA9IHN0cl9yZXBsYWNlKGFycmF5KCcvJywgJ1xcJyksICcnLCAkZGVmYXVsdCk7DQogICAgICAgICRsYW5ndWFnZVB0ciA9ICYkdGhpcy0+bGFuZzsNCg0KICAgICAgICBpZiAoJGRlZmF1bHQgPT0gJycpIHsNCiAgICAgICAgICAgICRkZWZhdWx0ID0gJHRoaXMtPm9wdGlvblsnWkNfQkxPR19MQU5HVUFHRVBBQ0snXTsNCiAgICAgICAgfQ0KDQogICAgICAgICRkZWZhdWx0TGFuZ3VhZ2VMaXN0ID0gYXJyYXkoJGRlZmF1bHQsICd6aC1jbicsICd6aC10dycsICdlbicpOw0KDQogICAgICAgIHN3aXRjaCAoJHR5cGUpIHsNCiAgICAgICAgY2FzZSAnc3lzdGVtJzoNCiAgICAgICAgICAgICRsYW5ndWFnZVBhdGggLj0gJ3piX3VzZXJzL2xhbmd1YWdlLyc7DQogICAgICAgICAgICBicmVhazsNCiAgICAgICAgY2FzZSAncGx1Z2luJzoNCiAgICAgICAgY2FzZSAndGhlbWUnOg0KICAgICAgICAgICAgJGxhbmd1YWdlUGF0aCAuPSAnemJfdXNlcnMvJyAuICR0eXBlIC4gJy8nIC4gJGlkIC4gJy9sYW5ndWFnZS8nOw0KICAgICAgICAgICAgJGxhbmd1YWdlUHRyID0gJiR0aGlzLT5sYW5nWyRpZF07DQogICAgICAgICAgICBicmVhazsNCiAgICAgICAgZGVmYXVsdDoNCiAgICAgICAgICAgICRsYW5ndWFnZVBhdGggLj0gJHR5cGUgLiAnL2xhbmd1YWdlLyc7DQogICAgICAgICAgICAkbGFuZ3VhZ2VQdHIgPSAmJHRoaXMtPmxhbmdbJGlkXTsNCiAgICAgICAgICAgIGJyZWFrOw0KICAgICAgICB9DQoNCiAgICAgICAgJGhhbmRsZSA9IG9wZW5kaXIoJGxhbmd1YWdlUGF0aCk7DQogICAgICAgICRtYXRjaCA9IG51bGw7DQogICAgICAgIGlmICgkaGFuZGxlKSB7DQogICAgICAgICAgICB3aGlsZSAoZmFsc2UgIT09ICgkZmlsZSA9IHJlYWRkaXIoJGhhbmRsZSkpKSB7DQogICAgICAgICAgICAgICAgaWYgKHByZWdfbWF0Y2goJGxhbmd1YWdlUmVnRXgsICRmaWxlLCAkbWF0Y2gpKSB7DQogICAgICAgICAgICAgICAgICAgICRsYW5ndWFnZUxpc3RbXSA9ICRtYXRjaFsxXTsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9DQogICAgICAgICAgICBjbG9zZWRpcigkaGFuZGxlKTsNCiAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgIC8vIOi/memHjOS4jeS8muaJp+ihjOWIsO+8jOWcqG9wZW5kaXLml7blsLHlt7Lnu4/mipvlh7pFX1dBUk5JTkcNCiAgICAgICAgICAgIHRocm93IG5ldyBFeGNlcHRpb24oJ0Nhbm5vdCBvcGVuZGlyKCcgLiAkbGFuZ3VhZ2VQYXRoIC4gJyknKTsNCg0KICAgICAgICAgICAgcmV0dXJuIGZhbHNlOw0KICAgICAgICB9DQoNCiAgICAgICAgaWYgKGNvdW50KCRsYW5ndWFnZUxpc3QpID09PSAwKSB7DQogICAgICAgICAgICB0aHJvdyBuZXcgRXhjZXB0aW9uKCdObyBsYW5ndWFnZSBpbiAnIC4gJGxhbmd1YWdlUGF0aCk7DQoNCiAgICAgICAgICAgIHJldHVybiBmYWxzZTsNCiAgICAgICAgfQ0KDQogICAgICAgIGZvciAoJGkgPSAwOyAkaSA8IGNvdW50KCRkZWZhdWx0TGFuZ3VhZ2VMaXN0KTsgJGkrKykgew0KICAgICAgICAgICAgLy8g5Zyo5pWI546H5LiK77yMYXJyYXlfc2VhcmNo5ZKM5ZG95ZCN5pWw57uE5rKh5pyJ5pys6LSo5Yy65Yir77yM6Iez5bCR5Zyo6L+Z6YeM5aaC5q2k44CCDQogICAgICAgICAgICBpZiAoZmFsc2UgIT09IGFycmF5X3NlYXJjaCgkZGVmYXVsdExhbmd1YWdlTGlzdFskaV0sICRsYW5ndWFnZUxpc3QpKSB7DQogICAgICAgICAgICAgICAgJGxhbmd1YWdlID0gJGRlZmF1bHRMYW5ndWFnZUxpc3RbJGldOw0KICAgICAgICAgICAgICAgIGJyZWFrOw0KICAgICAgICAgICAgfQ0KICAgICAgICB9DQogICAgICAgIGlmICgkbGFuZ3VhZ2UgPT09ICcnKSB7DQogICAgICAgICAgICB0aHJvdyBuZXcgRXhjZXB0aW9uKCdMYW5ndWFnZSAnIC4gJGRlZmF1bHQgLiAnIGlzIG5vdCBmb3VuZCBpbiAnIC4gJGxhbmd1YWdlUGF0aCk7DQoNCiAgICAgICAgICAgIHJldHVybiBmYWxzZTsNCiAgICAgICAgfQ0KDQogICAgICAgICRsYW5ndWFnZVBhdGggLj0gJGxhbmd1YWdlIC4gJy5waHAnOw0KICAgICAgICAkbGFuZ3VhZ2VQdHIgPSByZXF1aXJlICRsYW5ndWFnZVBhdGg7DQogICAgICAgICR0aGlzLT5sYW5ncGFja2xpc3RbXSA9IGFycmF5KCR0eXBlLCAkaWQsICRsYW5ndWFnZSk7DQoNCiAgICAgICAgcmV0dXJuIHRydWU7DQogICAgfQ0KDQogICAgLyoqDQogICAgICog6YeN5paw6K+75Y+W6K+t6KiA5YyFDQogICAgICogQHBhcmFtIHN0cmluZyAkZGVmYXVsdCDpu5jorqTor63oqIANCiAgICAgKiBAcmV0dXJuICBudWxsDQogICAgICoqLw0KICAgIHB1YmxpYyBmdW5jdGlvbiBSZWxvYWRMYW5ndWFnZXMoJGRlZmF1bHQpIHsNCiAgICAgICAgJGFycmF5ID0gJHRoaXMtPmxhbmdwYWNrbGlzdDsNCiAgICAgICAgJHRoaXMtPmxhbmcgPSAkdGhpcy0+bGFuZ3BhY2tsaXN0ID0gYXJyYXkoKTsNCiAgICAgICAgZm9yZWFjaCAoJGFycmF5IGFzICR2KSB7DQogICAgICAgICAgICAkdGhpcy0+TG9hZExhbmd1YWdlKCR2WzBdLCAkdlsxXSwgJHZbMl0pOw0KICAgICAgICB9DQogICAgfQ0KDQojIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjDQogICAgI+aooeadv+ebuOWFs+WHveaVsA0KDQogICAgLyoqDQogICAgICog5Yib5bu65qih5p2/5a+56LGh77yM6aKE5Yqg6L295bey57yW6K+R5qih5p2/DQogICAgICogQHBhcmFtIHN0cmluZyAkdGhlbWUg5oyH5a6a5Li76aKY5ZCNDQogICAgICogQHJldHVybiBUZW1wbGF0ZQ0KICAgICAqLw0KICAgIHB1YmxpYyBmdW5jdGlvbiBQcmVwYXJlVGVtcGxhdGUoJHRoZW1lID0gbnVsbCkgew0KDQogICAgICAgIGlmIChpc19udWxsKCR0aGVtZSkpICR0aGVtZSA9ICYkdGhpcy0+dGhlbWU7DQoNCiAgICAgICAgJHRlbXBsYXRlID0gbmV3IFRlbXBsYXRlKCk7DQogICAgICAgICR0ZW1wbGF0ZS0+TWFrZVRlbXBsYXRlVGFncygpOw0KDQogICAgICAgIGZvcmVhY2ggKCRHTE9CQUxTWydob29rcyddWydGaWx0ZXJfUGx1Z2luX1picF9NYWtlVGVtcGxhdGV0YWdzJ10gYXMgJGZwbmFtZSA9PiAmJGZwc2lnbmFsKSB7DQogICAgICAgICAgICAkZnByZXR1cm4gPSAkZnBuYW1lKCR0ZW1wbGF0ZS0+dGVtcGxhdGVUYWdzKTsNCiAgICAgICAgfQ0KDQogICAgICAgICR0ZW1wbGF0ZS0+U2V0UGF0aCgkdGhpcy0+dXNlcnNkaXIgLiAnY2FjaGUvY29tcGlsZWQvJyAuICR0aGVtZSAuICcvJyk7DQogICAgICAgICR0ZW1wbGF0ZS0+dGhlbWUgPSAkdGhlbWU7DQoNCiAgICAgICAgcmV0dXJuICR0ZW1wbGF0ZTsNCiAgICB9DQoNCg0KICAgIC8qKg0KICAgICAqIOaooeadv+ino+aekA0KICAgICAqIEByZXR1cm4gYm9vbA0KICAgICAqLw0KICAgIHB1YmxpYyBmdW5jdGlvbiBCdWlsZFRlbXBsYXRlKCkgew0KDQogICAgICAgICR0aGlzLT50ZW1wbGF0ZS0+TG9hZFRlbXBsYXRlcygpOw0KDQogICAgICAgIGZvcmVhY2ggKCRHTE9CQUxTWydob29rcyddWydGaWx0ZXJfUGx1Z2luX1picF9CdWlsZFRlbXBsYXRlJ10gYXMgJGZwbmFtZSA9PiAmJGZwc2lnbmFsKXsNCiAgICAgICAgICAgICRmcG5hbWUoJHRoaXMtPnRlbXBsYXRlLT50ZW1wbGF0ZXMpOw0KICAgICAgICB9DQoNCiAgICAgICAgcmV0dXJuICR0aGlzLT50ZW1wbGF0ZS0+QnVpbGRUZW1wbGF0ZSgpOw0KICAgIH0NCg0KICAgIC8qKg0KICAgICAqIOabtOaWsOaooeadv+e8k+WtmA0KICAgICAqLw0KICAgIHB1YmxpYyBmdW5jdGlvbiBDaGVja1RlbXBsYXRlKCkgew0KDQogICAgICAgICR0aGlzLT50ZW1wbGF0ZS0+TG9hZFRlbXBsYXRlcygpOw0KICAgICAgICAkcyA9IGltcGxvZGUoJHRoaXMtPnRlbXBsYXRlLT50ZW1wbGF0ZXMpOw0KICAgICAgICAkbWQ1ID0gbWQ1KCRzKTsNCiAgICAgICAgaWYgKCRtZDUgIT0gJHRoaXMtPmNhY2hlLT50ZW1wbGF0ZXNfbWQ1KSB7DQogICAgICAgICAgICAkdGhpcy0+QnVpbGRUZW1wbGF0ZSgpOw0KICAgICAgICAgICAgJHRoaXMtPmNhY2hlLT50ZW1wbGF0ZXNfbWQ1ID0gJG1kNTsNCiAgICAgICAgICAgICR0aGlzLT5TYXZlQ2FjaGUoKTsNCiAgICAgICAgfQ0KDQogICAgfQ0KDQoNCiMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMNCiAgICAj5qih5Z2X5pON5L2cDQoNCiAgICAvKioNCiAgICAgKiDnlJ/miJDmqKHlnZcNCiAgICAgKi8NCiAgICBwdWJsaWMgZnVuY3Rpb24gQnVpbGRNb2R1bGUoKSB7DQoNCiAgICAgICAgZm9yZWFjaCAoJEdMT0JBTFNbJ2hvb2tzJ11bJ0ZpbHRlcl9QbHVnaW5fWmJwX0J1aWxkTW9kdWxlJ10gYXMgJGZwbmFtZSA9PiAmJGZwc2lnbmFsKSB7DQogICAgICAgICAgICAkZnBuYW1lKCk7DQogICAgICAgIH0NCiAgICAgICAgTW9kdWxlQnVpbGRlcjo6QnVpbGQoKTsNCiAgICB9DQoNCiAgICAvKioNCiAgICAgKiDph43lu7rmqKHlnZcNCiAgICAgKiBAcGFyYW0gc3RyaW5nICRtb2RmaWxlbmFtZSDmqKHlnZflkI0NCiAgICAgKiBAcGFyYW0gc3RyaW5nICR1c2VyZnVuYyDnlKjmiLflh73mlbANCiAgICAgKi8NCiAgICBwdWJsaWMgZnVuY3Rpb24gUmVnQnVpbGRNb2R1bGUoJG1vZGZpbGVuYW1lLCAkdXNlcmZ1bmMpIHsNCiAgICAgICAgTW9kdWxlQnVpbGRlcjo6UmVnKCRtb2RmaWxlbmFtZSwgJHVzZXJmdW5jKTsNCiAgICB9DQoNCiAgICAvKioNCiAgICAgKiDmt7vliqDmqKHlnZcNCiAgICAgKiBAcGFyYW0gc3RyaW5nICRtb2RmaWxlbmFtZSDmqKHlnZflkI0NCiAgICAgKiBAcGFyYW0gbnVsbCAkcGFyYW1ldGVycyDmqKHlnZflj4LmlbANCiAgICAgKi8NCiAgICBwdWJsaWMgZnVuY3Rpb24gQWRkQnVpbGRNb2R1bGUoJG1vZGZpbGVuYW1lLCAkcGFyYW1ldGVycyA9IG51bGwpIHsNCiAgICAgICAgTW9kdWxlQnVpbGRlcjo6QWRkKCRtb2RmaWxlbmFtZSwgJHBhcmFtZXRlcnMpOw0KICAgIH0NCg0KICAgIC8qKg0KICAgICAqIOWIoOmZpOaooeWdlw0KICAgICAqIEBwYXJhbSBzdHJpbmcgJG1vZGZpbGVuYW1lIOaooeWdl+WQjQ0KICAgICAqLw0KICAgIHB1YmxpYyBmdW5jdGlvbiBEZWxCdWlsZE1vZHVsZSgkbW9kZmlsZW5hbWUpIHsNCiAgICAgICAgTW9kdWxlQnVpbGRlcjo6RGVsKCRtb2RmaWxlbmFtZSk7DQogICAgfQ0KDQogICAgLyoqDQogICAgICog5omA5pyJ5qih5Z2X6YeN572uDQogICAgICovDQogICAgcHVibGljIGZ1bmN0aW9uIEFkZEJ1aWxkTW9kdWxlQWxsKCkgew0KICAgICAgICAvL2RlbCBmcm9tIDEuNQ0KICAgIH0NCg0KDQojIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjDQogICAgI+WKoOi9veaVsOaNruWvueWDj0xpc3Tlh73mlbANCg0KICAgIC8qKg0KICAgICAqIOafpeivouaMh+WumuaVsOaNrue7k+aehOeahHNxbOW5tui/lOWbnkJhc2Xlr7nosaHliJfooagNCiAgICAgKiBAcGFyYW0gc3RyaW5nICR0YWJsZSDmlbDmja7ooagNCiAgICAgKiBAcGFyYW0gc3RyaW5nICRkYXRhaW5mbyDmlbDmja7lrZfmrrUNCiAgICAgKiBAcGFyYW0gc3RyaW5nICRzcWwgU1FM5pON5L2c6K+t5Y+lDQogICAgICogQHJldHVybiBhcnJheQ0KICAgICAqLw0KICAgIHB1YmxpYyBmdW5jdGlvbiBHZXRMaXN0Q3VzdG9tKCR0YWJsZSwgJGRhdGFpbmZvLCAkc3FsKSB7DQoNCiAgICAgICAgJGFycmF5ID0gbnVsbDsNCiAgICAgICAgJGxpc3QgPSBhcnJheSgpOw0KICAgICAgICAkYXJyYXkgPSAkdGhpcy0+ZGItPlF1ZXJ5KCRzcWwpOw0KICAgICAgICBpZiAoIWlzc2V0KCRhcnJheSkpIHtyZXR1cm4gYXJyYXkoKTt9DQogICAgICAgIGZvcmVhY2ggKCRhcnJheSBhcyAkYSkgew0KICAgICAgICAgICAgJGwgPSBuZXcgQmFzZSgkdGFibGUsICRkYXRhaW5mbyk7DQogICAgICAgICAgICAkbC0+TG9hZEluZm9CeUFzc29jKCRhKTsNCiAgICAgICAgICAgICRsaXN0W10gPSAkbDsNCiAgICAgICAgfQ0KDQogICAgICAgIHJldHVybiAkbGlzdDsNCiAgICB9DQoNCiAgICAvKioNCiAgICAgKiDmn6Xor6JJROaVsOaNrueahOaMh+WumuaVsOaNrue7k+aehOeahHNxbOW5tui/lOWbnkJhc2Xlr7nosaHliJfooagNCiAgICAgKiBAcGFyYW0gc3RyaW5nICR0YWJsZSDmlbDmja7ooagNCiAgICAgKiBAcGFyYW0gc3RyaW5nICRkYXRhaW5mbyDmlbDmja7lrZfmrrUNCiAgICAgKiBAcGFyYW0gYXJyYXkgJGFycmF5IElE5pWw57uEDQogICAgICogQHJldHVybiBhcnJheQ0KICAgICAqLw0KICAgIHB1YmxpYyBmdW5jdGlvbiBHZXRMaXN0Q3VzdG9tQnlBcnJheSgkdGFibGUsICRkYXRhaW5mbywgJGFycmF5KSB7DQogICAgICAgIGlmICghaXNfYXJyYXkoJGFycmF5KSkgew0KICAgICAgICAgICAgcmV0dXJuIGFycmF5KCk7DQogICAgICAgIH0NCg0KICAgICAgICBpZiAoY291bnQoJGFycmF5KSA9PSAwKSB7DQogICAgICAgICAgICByZXR1cm4gYXJyYXkoKTsNCiAgICAgICAgfQ0KDQogICAgICAgICR3aGVyZSA9IGFycmF5KCk7DQogICAgICAgICR3aGVyZVtdID0gYXJyYXkoJ0lOJywgJGRhdGFpbmZvWydJRCddWzBdLCBpbXBsb2RlKCcsJywgJGFycmF5KSk7DQogICAgICAgICRzcWwgPSAkdGhpcy0+ZGItPnNxbC0+U2VsZWN0KCR0YWJsZSwgJyonLCAkd2hlcmUpOw0KICAgICAgICAkYXJyYXkgPSBudWxsOw0KICAgICAgICAkbGlzdCA9IGFycmF5KCk7DQogICAgICAgICRhcnJheSA9ICR0aGlzLT5kYi0+UXVlcnkoJHNxbCk7DQogICAgICAgIGlmICghaXNzZXQoJGFycmF5KSkge3JldHVybiBhcnJheSgpO30NCiAgICAgICAgZm9yZWFjaCAoJGFycmF5IGFzICRhKSB7DQogICAgICAgICAgICAkbCA9IG5ldyBCYXNlKCR0YWJsZSwgJGRhdGFpbmZvKTsNCiAgICAgICAgICAgICRsLT5Mb2FkSW5mb0J5QXNzb2MoJGEpOw0KICAgICAgICAgICAgJGxpc3RbXSA9ICRsOw0KICAgICAgICB9DQoNCiAgICAgICAgcmV0dXJuICRsaXN0Ow0KICAgIH0NCg0KICAgIC8qKg0KICAgICAqIOW3suaUueWQjUdldExpc3RUeXBlLDEuNeeJiOS4reaJlOaOieacieatp+S5ieeahEdldExpc3QNCiAgICAgKg0KICAgICAqIEBwYXJhbSAkdHlwZQ0KICAgICAqIEBwYXJhbSAkc3FsDQogICAgICogQHJldHVybiBhcnJheQ0KICAgICAqLw0KICAgIHB1YmxpYyBmdW5jdGlvbiBHZXRMaXN0VHlwZSgkdHlwZSwgJHNxbCkgew0KDQogICAgICAgICRhcnJheSA9IG51bGw7DQogICAgICAgICRsaXN0ID0gYXJyYXkoKTsNCiAgICAgICAgJGFycmF5ID0gJHRoaXMtPmRiLT5RdWVyeSgkc3FsKTsNCiAgICAgICAgaWYgKCFpc3NldCgkYXJyYXkpKSB7cmV0dXJuIGFycmF5KCk7fQ0KICAgICAgICBmb3JlYWNoICgkYXJyYXkgYXMgJGEpIHsNCiAgICAgICAgICAgICRsID0gbmV3ICR0eXBlKCk7DQogICAgICAgICAgICAkbC0+TG9hZEluZm9CeUFzc29jKCRhKTsNCiAgICAgICAgICAgICRsaXN0W10gPSAkbDsNCiAgICAgICAgfQ0KDQogICAgICAgIHJldHVybiAkbGlzdDsNCiAgICB9DQoNCiAgICAvKioNCiAgICAgKiDmn6Xor6JJROaVsOaNrueahOaMh+Wumuexu+Wei+eahHNxbOW5tui/lOWbnuaMh+Wumuexu+Wei+WvueixoeWIl+ihqA0KICAgICAqIEBwYXJhbSBzdHJpbmcgJHR5cGUg57G75Z6LDQogICAgICogQHBhcmFtIGFycmF5ICRhcnJheSBJROaVsOe7hA0KICAgICAqIEByZXR1cm4gYXJyYXkNCiAgICAgKi8NCiAgICBwdWJsaWMgZnVuY3Rpb24gR2V0TGlzdFR5cGVCeUFycmF5KCR0eXBlLCAkYXJyYXkpIHsNCiAgICAgICAgaWYgKCFpc19hcnJheSgkYXJyYXkpKSB7DQogICAgICAgICAgICByZXR1cm4gYXJyYXkoKTsNCiAgICAgICAgfQ0KDQogICAgICAgIGlmIChjb3VudCgkYXJyYXkpID09IDApIHsNCiAgICAgICAgICAgIHJldHVybiBhcnJheSgpOw0KICAgICAgICB9DQoNCiAgICAgICAgJHdoZXJlID0gYXJyYXkoKTsNCiAgICAgICAgJHdoZXJlW10gPSBhcnJheSgnSU4nLCAkdGhpcy0+ZGF0YWluZm9bJHR5cGVdWydJRCddWzBdLCBpbXBsb2RlKCcsJywgJGFycmF5KSk7DQogICAgICAgICRzcWwgPSAkdGhpcy0+ZGItPnNxbC0+U2VsZWN0KCR0aGlzLT50YWJsZVskdHlwZV0sICcqJywgJHdoZXJlKTsNCiAgICAgICAgJGFycmF5ID0gbnVsbDsNCiAgICAgICAgJGxpc3QgPSBhcnJheSgpOw0KICAgICAgICAkYXJyYXkgPSAkdGhpcy0+ZGItPlF1ZXJ5KCRzcWwpOw0KICAgICAgICBpZiAoIWlzc2V0KCRhcnJheSkpIHtyZXR1cm4gYXJyYXkoKTt9DQogICAgICAgIGZvcmVhY2ggKCRhcnJheSBhcyAkYSkgew0KICAgICAgICAgICAgJGwgPSBuZXcgJHR5cGUoKTsNCiAgICAgICAgICAgICRsLT5Mb2FkSW5mb0J5QXNzb2MoJGEpOw0KICAgICAgICAgICAgJGxpc3RbXSA9ICRsOw0KICAgICAgICB9DQoNCiAgICAgICAgcmV0dXJuICRsaXN0Ow0KICAgIH0NCg0KICAgIC8qKg0KICAgICAqIEBwYXJhbSBudWxsICRzZWxlY3QNCiAgICAgKiBAcGFyYW0gbnVsbCAkd2hlcmUNCiAgICAgKiBAcGFyYW0gbnVsbCAkb3JkZXINCiAgICAgKiBAcGFyYW0gbnVsbCAkbGltaXQNCiAgICAgKiBAcGFyYW0gbnVsbCAkb3B0aW9uDQogICAgICogQHJldHVybiBhcnJheQ0KICAgICAqLw0KICAgIHB1YmxpYyBmdW5jdGlvbiBHZXRQb3N0TGlzdCgkc2VsZWN0ID0gbnVsbCwgJHdoZXJlID0gbnVsbCwgJG9yZGVyID0gbnVsbCwgJGxpbWl0ID0gbnVsbCwgJG9wdGlvbiA9IG51bGwpIHsNCg0KICAgICAgICBpZiAoZW1wdHkoJHNlbGVjdCkpIHskc2VsZWN0ID0gYXJyYXkoJyonKTt9DQogICAgICAgIGlmIChlbXB0eSgkd2hlcmUpKSB7JHdoZXJlID0gYXJyYXkoKTt9DQogICAgICAgICRzcWwgPSAkdGhpcy0+ZGItPnNxbC0+U2VsZWN0KCR0aGlzLT50YWJsZVsnUG9zdCddLCAkc2VsZWN0LCAkd2hlcmUsICRvcmRlciwgJGxpbWl0LCAkb3B0aW9uKTsNCg0KICAgICAgICAkYXJyYXkgPSAkdGhpcy0+R2V0TGlzdFR5cGUoJ1Bvc3QnLCAkc3FsKTsNCiAgICAgICAgZm9yZWFjaCAoJGFycmF5IGFzICRhKSB7DQogICAgICAgICAgICAkdGhpcy0+cG9zdHNbJGEtPklEXSA9ICRhOw0KICAgICAgICB9DQoNCiAgICAgICAgcmV0dXJuICRhcnJheTsNCiAgICB9DQoNCiAgICAvKioNCiAgICAgKiDpgJrov4dJROaVsOe7hOiOt+WPluaWh+eroOWunuS+iw0KICAgICAqIEBwYXJhbSBhcnJheSAkYXJyYXkNCiAgICAgKiBAcmV0dXJuIGFycmF5IFBvc3RzDQogICAgICovDQogICAgcHVibGljIGZ1bmN0aW9uIEdldFBvc3RCeUFycmF5KCRhcnJheSkgew0KICAgICAgICByZXR1cm4gJHRoaXMtPkdldExpc3RUeXBlQnlBcnJheSgnUG9zdCcsICRhcnJheSk7DQogICAgfQ0KDQogICAgLyoqDQogICAgICogQHBhcmFtIG51bGwgJHNlbGVjdA0KICAgICAqIEBwYXJhbSBudWxsICR3aGVyZQ0KICAgICAqIEBwYXJhbSBudWxsICRvcmRlcg0KICAgICAqIEBwYXJhbSBudWxsICRsaW1pdA0KICAgICAqIEBwYXJhbSBudWxsICRvcHRpb24NCiAgICAgKiBAcGFyYW0gYm9vbCAkcmVhZHRhZ3MNCiAgICAgKiBAcmV0dXJuIGFycmF5DQogICAgICovDQogICAgcHVibGljIGZ1bmN0aW9uIEdldEFydGljbGVMaXN0KCRzZWxlY3QgPSBudWxsLCAkd2hlcmUgPSBudWxsLCAkb3JkZXIgPSBudWxsLCAkbGltaXQgPSBudWxsLCAkb3B0aW9uID0gbnVsbCwgJHJlYWR0YWdzID0gdHJ1ZSkgew0KDQogICAgICAgIGlmIChlbXB0eSgkc2VsZWN0KSkgeyRzZWxlY3QgPSBhcnJheSgnKicpO30NCiAgICAgICAgaWYgKGVtcHR5KCR3aGVyZSkpIHskd2hlcmUgPSBhcnJheSgpO30NCiAgICAgICAgaWYgKGlzX2FycmF5KCR3aGVyZSkpIHsNCiAgICAgICAgICAgIGFycmF5X3Vuc2hpZnQoJHdoZXJlLCBhcnJheSgnPScsICdsb2dfVHlwZScsICcwJykpOw0KICAgICAgICB9DQoNCiAgICAgICAgJHNxbCA9ICR0aGlzLT5kYi0+c3FsLT5TZWxlY3QoJHRoaXMtPnRhYmxlWydQb3N0J10sICRzZWxlY3QsICR3aGVyZSwgJG9yZGVyLCAkbGltaXQsICRvcHRpb24pOw0KICAgICAgICAkYXJyYXkgPSAkdGhpcy0+R2V0TGlzdFR5cGUoJ1Bvc3QnLCAkc3FsKTsNCg0KICAgICAgICBmb3JlYWNoICgkYXJyYXkgYXMgJGEpIHsNCiAgICAgICAgICAgICR0aGlzLT5wb3N0c1skYS0+SURdID0gJGE7DQogICAgICAgIH0NCg0KICAgICAgICBpZiAoJHJlYWR0YWdzKSB7DQogICAgICAgICAgICAkdGFnc3RyaW5nID0gJyc7DQogICAgICAgICAgICBmb3JlYWNoICgkYXJyYXkgYXMgJGEpIHsNCiAgICAgICAgICAgICAgICAkdGFnc3RyaW5nIC49ICRhLT5UYWc7DQogICAgICAgICAgICB9DQogICAgICAgICAgICAkdGhpcy0+TG9hZFRhZ3NCeUlEU3RyaW5nKCR0YWdzdHJpbmcpOw0KICAgICAgICB9DQoNCiAgICAgICAgcmV0dXJuICRhcnJheTsNCg0KICAgIH0NCg0KICAgIC8qKg0KICAgICAqIEBwYXJhbSBudWxsICRzZWxlY3QNCiAgICAgKiBAcGFyYW0gbnVsbCAkd2hlcmUNCiAgICAgKiBAcGFyYW0gbnVsbCAkb3JkZXINCiAgICAgKiBAcGFyYW0gbnVsbCAkbGltaXQNCiAgICAgKiBAcGFyYW0gbnVsbCAkb3B0aW9uDQogICAgICogQHJldHVybiBhcnJheQ0KICAgICAqLw0KICAgIHB1YmxpYyBmdW5jdGlvbiBHZXRQYWdlTGlzdCgkc2VsZWN0ID0gbnVsbCwgJHdoZXJlID0gbnVsbCwgJG9yZGVyID0gbnVsbCwgJGxpbWl0ID0gbnVsbCwgJG9wdGlvbiA9IG51bGwpIHsNCg0KICAgICAgICBpZiAoZW1wdHkoJHNlbGVjdCkpIHskc2VsZWN0ID0gYXJyYXkoJyonKTt9DQogICAgICAgIGlmIChlbXB0eSgkd2hlcmUpKSB7JHdoZXJlID0gYXJyYXkoKTt9DQogICAgICAgIGlmIChpc19hcnJheSgkd2hlcmUpKSB7DQogICAgICAgICAgICBhcnJheV91bnNoaWZ0KCR3aGVyZSwgYXJyYXkoJz0nLCAnbG9nX1R5cGUnLCAnMScpKTsNCiAgICAgICAgfQ0KDQogICAgICAgICRzcWwgPSAkdGhpcy0+ZGItPnNxbC0+U2VsZWN0KCR0aGlzLT50YWJsZVsnUG9zdCddLCAkc2VsZWN0LCAkd2hlcmUsICRvcmRlciwgJGxpbWl0LCAkb3B0aW9uKTsNCiAgICAgICAgJGFycmF5ID0gJHRoaXMtPkdldExpc3RUeXBlKCdQb3N0JywgJHNxbCk7DQogICAgICAgIGZvcmVhY2ggKCRhcnJheSBhcyAkYSkgew0KICAgICAgICAgICAgJHRoaXMtPnBvc3RzWyRhLT5JRF0gPSAkYTsNCiAgICAgICAgfQ0KDQogICAgICAgIHJldHVybiAkYXJyYXk7DQoNCiAgICB9DQoNCiAgICAvKioNCiAgICAgKiBAcGFyYW0gbnVsbCAkc2VsZWN0DQogICAgICogQHBhcmFtIG51bGwgJHdoZXJlDQogICAgICogQHBhcmFtIG51bGwgJG9yZGVyDQogICAgICogQHBhcmFtIG51bGwgJGxpbWl0DQogICAgICogQHBhcmFtIG51bGwgJG9wdGlvbg0KICAgICAqIEByZXR1cm4gYXJyYXkNCiAgICAgKi8NCiAgICBwdWJsaWMgZnVuY3Rpb24gR2V0Q29tbWVudExpc3QoJHNlbGVjdCA9IG51bGwsICR3aGVyZSA9IG51bGwsICRvcmRlciA9IG51bGwsICRsaW1pdCA9IG51bGwsICRvcHRpb24gPSBudWxsKSB7DQoNCiAgICAgICAgaWYgKGVtcHR5KCRzZWxlY3QpKSB7JHNlbGVjdCA9IGFycmF5KCcqJyk7fQ0KICAgICAgICAkc3FsID0gJHRoaXMtPmRiLT5zcWwtPlNlbGVjdCgkdGhpcy0+dGFibGVbJ0NvbW1lbnQnXSwgJHNlbGVjdCwgJHdoZXJlLCAkb3JkZXIsICRsaW1pdCwgJG9wdGlvbik7DQogICAgICAgICRhcnJheSA9ICR0aGlzLT5HZXRMaXN0VHlwZSgnQ29tbWVudCcsICRzcWwpOw0KICAgICAgICBmb3JlYWNoICgkYXJyYXkgYXMgJGNvbW1lbnQpIHsNCiAgICAgICAgICAgICR0aGlzLT5jb21tZW50c1skY29tbWVudC0+SURdID0gJGNvbW1lbnQ7DQogICAgICAgIH0NCg0KICAgICAgICByZXR1cm4gJGFycmF5Ow0KDQogICAgfQ0KDQogICAgLyoqDQogICAgICogQHBhcmFtIG51bGwgJHNlbGVjdA0KICAgICAqIEBwYXJhbSBudWxsICR3aGVyZQ0KICAgICAqIEBwYXJhbSBudWxsICRvcmRlcg0KICAgICAqIEBwYXJhbSBudWxsICRsaW1pdA0KICAgICAqIEBwYXJhbSBudWxsICRvcHRpb24NCiAgICAgKiBAcmV0dXJuIGFycmF5DQogICAgICovDQogICAgcHVibGljIGZ1bmN0aW9uIEdldE1lbWJlckxpc3QoJHNlbGVjdCA9IG51bGwsICR3aGVyZSA9IG51bGwsICRvcmRlciA9IG51bGwsICRsaW1pdCA9IG51bGwsICRvcHRpb24gPSBudWxsKSB7DQoNCiAgICAgICAgaWYgKGVtcHR5KCRzZWxlY3QpKSB7JHNlbGVjdCA9IGFycmF5KCcqJyk7fQ0KICAgICAgICAkc3FsID0gJHRoaXMtPmRiLT5zcWwtPlNlbGVjdCgkdGhpcy0+dGFibGVbJ01lbWJlciddLCAkc2VsZWN0LCAkd2hlcmUsICRvcmRlciwgJGxpbWl0LCAkb3B0aW9uKTsNCg0KICAgICAgICByZXR1cm4gJHRoaXMtPkdldExpc3RUeXBlKCdNZW1iZXInLCAkc3FsKTsNCg0KICAgIH0NCg0KICAgIC8qKg0KICAgICAqIEBwYXJhbSBudWxsICRzZWxlY3QNCiAgICAgKiBAcGFyYW0gbnVsbCAkd2hlcmUNCiAgICAgKiBAcGFyYW0gbnVsbCAkb3JkZXINCiAgICAgKiBAcGFyYW0gbnVsbCAkbGltaXQNCiAgICAgKiBAcGFyYW0gbnVsbCAkb3B0aW9uDQogICAgICogQHJldHVybiBhcnJheQ0KICAgICAqLw0KICAgIHB1YmxpYyBmdW5jdGlvbiBHZXRUYWdMaXN0KCRzZWxlY3QgPSBudWxsLCAkd2hlcmUgPSBudWxsLCAkb3JkZXIgPSBudWxsLCAkbGltaXQgPSBudWxsLCAkb3B0aW9uID0gbnVsbCkgew0KDQogICAgICAgIGlmIChlbXB0eSgkc2VsZWN0KSkgeyRzZWxlY3QgPSBhcnJheSgnKicpO30NCiAgICAgICAgJHNxbCA9ICR0aGlzLT5kYi0+c3FsLT5TZWxlY3QoJHRoaXMtPnRhYmxlWydUYWcnXSwgJHNlbGVjdCwgJHdoZXJlLCAkb3JkZXIsICRsaW1pdCwgJG9wdGlvbik7DQoNCiAgICAgICAgcmV0dXJuICR0aGlzLT5HZXRMaXN0VHlwZSgnVGFnJywgJHNxbCk7DQoNCiAgICB9DQoNCiAgICAvKioNCiAgICAgKiBAcGFyYW0gbnVsbCAkc2VsZWN0DQogICAgICogQHBhcmFtIG51bGwgJHdoZXJlDQogICAgICogQHBhcmFtIG51bGwgJG9yZGVyDQogICAgICogQHBhcmFtIG51bGwgJGxpbWl0DQogICAgICogQHBhcmFtIG51bGwgJG9wdGlvbg0KICAgICAqIEByZXR1cm4gYXJyYXkNCiAgICAgKi8NCiAgICBwdWJsaWMgZnVuY3Rpb24gR2V0Q2F0ZWdvcnlMaXN0KCRzZWxlY3QgPSBudWxsLCAkd2hlcmUgPSBudWxsLCAkb3JkZXIgPSBudWxsLCAkbGltaXQgPSBudWxsLCAkb3B0aW9uID0gbnVsbCkgew0KDQogICAgICAgIGlmIChlbXB0eSgkc2VsZWN0KSkgeyRzZWxlY3QgPSBhcnJheSgnKicpO30NCiAgICAgICAgJHNxbCA9ICR0aGlzLT5kYi0+c3FsLT5TZWxlY3QoJHRoaXMtPnRhYmxlWydDYXRlZ29yeSddLCAkc2VsZWN0LCAkd2hlcmUsICRvcmRlciwgJGxpbWl0LCAkb3B0aW9uKTsNCg0KICAgICAgICByZXR1cm4gJHRoaXMtPkdldExpc3RUeXBlKCdDYXRlZ29yeScsICRzcWwpOw0KDQogICAgfQ0KDQogICAgLyoqDQogICAgICogQHBhcmFtIG51bGwgJHNlbGVjdA0KICAgICAqIEBwYXJhbSBudWxsICR3aGVyZQ0KICAgICAqIEBwYXJhbSBudWxsICRvcmRlcg0KICAgICAqIEBwYXJhbSBudWxsICRsaW1pdA0KICAgICAqIEBwYXJhbSBudWxsICRvcHRpb24NCiAgICAgKiBAcmV0dXJuIGFycmF5DQogICAgICovDQogICAgcHVibGljIGZ1bmN0aW9uIEdldE1vZHVsZUxpc3QoJHNlbGVjdCA9IG51bGwsICR3aGVyZSA9IG51bGwsICRvcmRlciA9IG51bGwsICRsaW1pdCA9IG51bGwsICRvcHRpb24gPSBudWxsKSB7DQoNCiAgICAgICAgaWYgKGVtcHR5KCRzZWxlY3QpKSB7JHNlbGVjdCA9IGFycmF5KCcqJyk7fQ0KICAgICAgICAkc3FsID0gJHRoaXMtPmRiLT5zcWwtPlNlbGVjdCgkdGhpcy0+dGFibGVbJ01vZHVsZSddLCAkc2VsZWN0LCAkd2hlcmUsICRvcmRlciwgJGxpbWl0LCAkb3B0aW9uKTsNCg0KICAgICAgICByZXR1cm4gJHRoaXMtPkdldExpc3RUeXBlKCdNb2R1bGUnLCAkc3FsKTsNCiAgICB9DQoNCiAgICAvKioNCiAgICAgKiBAcGFyYW0gbnVsbCAkc2VsZWN0DQogICAgICogQHBhcmFtIG51bGwgJHdoZXJlDQogICAgICogQHBhcmFtIG51bGwgJG9yZGVyDQogICAgICogQHBhcmFtIG51bGwgJGxpbWl0DQogICAgICogQHBhcmFtIG51bGwgJG9wdGlvbg0KICAgICAqIEByZXR1cm4gYXJyYXkNCiAgICAgKi8NCiAgICBwdWJsaWMgZnVuY3Rpb24gR2V0VXBsb2FkTGlzdCgkc2VsZWN0ID0gbnVsbCwgJHdoZXJlID0gbnVsbCwgJG9yZGVyID0gbnVsbCwgJGxpbWl0ID0gbnVsbCwgJG9wdGlvbiA9IG51bGwpIHsNCg0KICAgICAgICBpZiAoZW1wdHkoJHNlbGVjdCkpIHskc2VsZWN0ID0gYXJyYXkoJyonKTt9DQogICAgICAgICRzcWwgPSAkdGhpcy0+ZGItPnNxbC0+U2VsZWN0KCR0aGlzLT50YWJsZVsnVXBsb2FkJ10sICRzZWxlY3QsICR3aGVyZSwgJG9yZGVyLCAkbGltaXQsICRvcHRpb24pOw0KDQogICAgICAgIHJldHVybiAkdGhpcy0+R2V0TGlzdFR5cGUoJ1VwbG9hZCcsICRzcWwpOw0KICAgIH0NCg0KIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIw0KICAgICN3cOexu+S8vA0KDQogICAgLyoqDQogICAgICogQHBhcmFtICRzcWwNCiAgICAgKiBAcmV0dXJuIG1peGVkDQogICAgICovDQogICAgcHVibGljIGZ1bmN0aW9uIGdldF9yZXN1bHRzKCRzcWwpIHsNCiAgICAgICAgcmV0dXJuICR0aGlzLT5kYi0+UXVlcnkoJHNxbCk7DQogICAgfQ0KDQojIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjDQogICAgI+ivu+WPluWvueixoeWHveaVsA0KDQogICAgLyoqDQogICAgICog5qC55o2u5Yir5ZCN5b6X5Yiw55u45bqU5pWw5o2uDQogICAgICogQHBhcmFtICYkb2JqZWN0ICAg57yT5a2Y5a+56LGhDQogICAgICogQHBhcmFtICR2YWwNCiAgICAgKiBAcGFyYW0gJGJhY2tBdHRyDQogICAgICovDQogICAgcHJpdmF0ZSBmdW5jdGlvbiBHZXRTb21lVGhpbmdCeUFsaWFzKCRvYmplY3QsICR2YWwsICRiYWNrQXR0ciA9IG51bGwsICRjbGFzc05hbWUgPSBudWxsKSB7DQogICAgICAgICRyZXQgPSAkdGhpcy0+R2V0U29tZVRoaW5nKCRvYmplY3QsICdBbGlhcycsICR2YWwpOw0KDQogICAgICAgIGlmICghaXNfbnVsbCgkcmV0KSkgew0KICAgICAgICAgICAgcmV0dXJuICRyZXQ7DQogICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICBpZiAoaXNfbnVsbCgkYmFja0F0dHIpKSB7DQogICAgICAgICAgICAgICAgJGJhY2tBdHRyID0gJHRoaXMtPm9wdGlvblsnWkNfQUxJQVNfQkFDS19BVFRSJ107DQogICAgICAgICAgICB9DQoNCiAgICAgICAgICAgIHJldHVybiAkdGhpcy0+R2V0U29tZVRoaW5nKCRvYmplY3QsICRiYWNrQXR0ciwgJHZhbCwgJGNsYXNzTmFtZSk7DQogICAgICAgIH0NCiAgICB9DQogICAgLyoqDQogICAgICog5qC55o2uSUTlvpfliLDnm7jlupTmlbDmja4NCiAgICAgKiBAcGFyYW0gJiRvYmplY3QgICDnvJPlrZjlr7nosaENCiAgICAgKiBAcGFyYW0gJGNsYXNzTmFtZSDmib7kuI3liLBJROaXtuWIneWni+WMluWvueixoQ0KICAgICAqIEBwYXJhbSAkaWQNCiAgICAgKi8NCiAgICBwcml2YXRlIGZ1bmN0aW9uIEdldFNvbWVUaGluZ0J5SWQoJiRvYmplY3QsICRjbGFzc05hbWUsICRpZCkgew0KICAgICAgICBpZiAoJGlkID09IDApIHsNCiAgICAgICAgICAgIHJldHVybiBudWxsOw0KICAgICAgICB9DQogICAgICAgIGlmICgkb2JqZWN0ICE9IG51bGwpIHsNCiAgICAgICAgICAgIC8vJG1vZHVsZXPpnZ5JROS4umtleQ0KICAgICAgICAgICAgaWYgKCRjbGFzc05hbWUgPT0gIk1vZHVsZSIpIHsNCiAgICAgICAgICAgICAgICBpZigkaWQgPiAwKXsNCiAgICAgICAgICAgICAgICAgICAgZm9yZWFjaCAoJG9iamVjdCBhcyAka2V5ID0+ICR2YWx1ZSkgew0KICAgICAgICAgICAgICAgICAgICAgICAgaWYoJHZhbHVlLT5JRCA9PSAkaWQpcmV0dXJuICR2YWx1ZTsNCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAkbSA9IG5ldyBNb2R1bGU7DQoNCiAgICAgICAgICAgICAgICByZXR1cm4gJG07DQogICAgICAgICAgICB9DQoNCiAgICAgICAgICAgIGlmIChpc3NldCgkb2JqZWN0WyRpZF0pKSB7DQogICAgICAgICAgICAgICAgcmV0dXJuICRvYmplY3RbJGlkXTsNCiAgICAgICAgICAgIH0gZWxzZWlmICgkY2xhc3NOYW1lID09ICJQb3N0IiB8fCAkY2xhc3NOYW1lID09ICJDb21tZW50IiB8fCAkY2xhc3NOYW1lID09ICJUYWciKSB7DQogICAgICAgICAgICAgICAgLy8g5paH56ug6ZyA6KaB6K+75Y+W77yM5YW25LuW55qE55u05o6l6L+U5Zue56m65a+56LGh5Y2z5Y+vDQogICAgICAgICAgICAgICAgJHAgPSBuZXcgJGNsYXNzTmFtZTsNCiAgICAgICAgICAgICAgICAkcC0+TG9hZEluZm9CeUlEKCRpZCk7DQogICAgICAgICAgICAgICAgJG9iamVjdFskaWRdID0gJHA7DQoNCiAgICAgICAgICAgICAgICByZXR1cm4gJHA7DQogICAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgICAgIHJldHVybiAkdGhpcy0+R2V0U29tZVRoaW5nQnlBdHRyKCRvYmplY3QsICdJRCcsICRpZCk7DQogICAgICAgICAgICB9DQogICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICAkcCA9IG5ldyAkY2xhc3NOYW1lOw0KICAgICAgICAgICAgJHAtPkxvYWRJbmZvQnlJRCgkaWQpOw0KDQogICAgICAgICAgICByZXR1cm4gJHA7DQogICAgICAgIH0NCg0KICAgICAgICByZXR1cm4gbnVsbDsNCiAgICB9DQoNCiAgICAvKioNCiAgICAgKiDmoLnmja7lsZ7mgKflgLzlvpfliLDnm7jlupTmlbDmja4NCiAgICAgKiBAcGFyYW0gJiRvYmplY3QgICDnvJPlrZjlr7nosaENCiAgICAgKiBAcGFyYW0gJGF0dHINCiAgICAgKiBAcGFyYW0gJHZhbA0KICAgICAqLw0KICAgIHByaXZhdGUgZnVuY3Rpb24gR2V0U29tZVRoaW5nQnlBdHRyKCYkb2JqZWN0LCAkYXR0ciwgJHZhbCkgew0KICAgICAgICAkdmFsID0gdHJpbSgkdmFsKTsNCiAgICAgICAgZm9yZWFjaCAoJG9iamVjdCBhcyAka2V5ID0+ICYkdmFsdWUpIHsNCiAgICAgICAgICAgIGlmIChpc19udWxsKCR2YWx1ZSkpIHsNCiAgICAgICAgICAgICAgICBjb250aW51ZTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIGlmICgkdmFsdWUtPiRhdHRyID09ICR2YWwpIHsNCiAgICAgICAgICAgICAgICByZXR1cm4gJHZhbHVlOw0KICAgICAgICAgICAgfQ0KICAgICAgICB9DQoNCiAgICAgICAgcmV0dXJuIG51bGw7DQogICAgfQ0KDQogICAgLyoqDQogICAgICog6I635Y+W5pWw5o2u6YCa55So5Ye95pWwDQogICAgICogQHBhcmFtICAkb2JqZWN0IOe8k+WtmOWvueixoe+8iHN0cmluZyAvIG9iamVjdO+8iQ0KICAgICAqIEBwYXJhbSAgJGF0dHIgICAgICAg5qyy5p+l5om+55qE5bGe5oCnDQogICAgICogQHBhcmFtICAkYXJndSAgICAgICDmn6Xmib7lhoXlrrkNCiAgICAgKiBAcGFyYW0gICRjbGFzc05hbWUgIOWvueixoeacquaJvuWIsOWIneWni+WMluWGheWuuQ0KICAgICAqLw0KICAgIHB1YmxpYyBmdW5jdGlvbiBHZXRTb21lVGhpbmcoJG9iamVjdCwgJGF0dHIsICRhcmd1LCAkY2xhc3NOYW1lID0gbnVsbCkgew0KICAgICAgICAkY2FjaGVPYmplY3QgPSBudWxsOw0KICAgICAgICBpZiAoaXNfb2JqZWN0KCRvYmplY3QpKSB7DQogICAgICAgICAgICAkY2FjaGVPYmplY3QgPSAkb2JqZWN0Ow0KICAgICAgICB9IGVsc2VpZiAoJG9iamVjdCAhPSAiIikgew0KICAgICAgICAgICAgJGNhY2hlT2JqZWN0ID0gJiR0aGlzLT4kb2JqZWN0Ow0KICAgICAgICB9DQogICAgICAgIGlmICgkYXR0ciA9PSAiSUQiKSB7DQogICAgICAgICAgICAkcmV0ID0gJHRoaXMtPkdldFNvbWVUaGluZ0J5SWQoJGNhY2hlT2JqZWN0LCAkY2xhc3NOYW1lLCAkYXJndSk7DQogICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICAkcmV0ID0gJHRoaXMtPkdldFNvbWVUaGluZ0J5QXR0cigkY2FjaGVPYmplY3QsICRhdHRyLCAkYXJndSk7DQogICAgICAgIH0NCiAgICAgICAgaWYgKCRyZXQgPT09IG51bGwgJiYgIWlzX251bGwoJGNsYXNzTmFtZSkpIHsNCiAgICAgICAgICAgICRyZXQgPSBuZXcgJGNsYXNzTmFtZTsNCiAgICAgICAgfQ0KDQogICAgICAgIHJldHVybiAkcmV0Ow0KICAgIH0NCg0KICAgIC8qKg0KICAgICAqIOmAmui/h0lE6I635Y+W5paH56ug5a6e5L6LDQogICAgICogQHBhcmFtIGludCAkaWQNCiAgICAgKiBAcmV0dXJuIFBvc3QNCiAgICAgKi8NCiAgICBwdWJsaWMgZnVuY3Rpb24gR2V0UG9zdEJ5SUQoJGlkKSB7DQogICAgICAgIHJldHVybiAkdGhpcy0+R2V0U29tZVRoaW5nKCdwb3N0cycsICdJRCcsICRpZCwgJ1Bvc3QnKTsNCiAgICB9DQoNCiAgICAvKioNCiAgICAgKiDpgJrov4dJROiOt+WPluWIhuexu+WunuS+iw0KICAgICAqIEBwYXJhbSBpbnQgJGlkDQogICAgICogQHJldHVybiBDYXRlZ29yeQ0KICAgICAqLw0KICAgIHB1YmxpYyBmdW5jdGlvbiBHZXRDYXRlZ29yeUJ5SUQoJGlkKSB7DQogICAgICAgIHJldHVybiAkdGhpcy0+R2V0U29tZVRoaW5nKCdjYXRlZ29yaWVzJywgJ0lEJywgJGlkLCAnQ2F0ZWdvcnknKTsNCiAgICB9DQoNCiAgICAvKioNCiAgICAgKiDpgJrov4fliIbnsbvlkI3ojrflj5bliIbnsbvlrp7kvosNCiAgICAgKiBAcGFyYW0gc3RyaW5nICRuYW1lDQogICAgICogQHJldHVybiBDYXRlZ29yeQ0KICAgICAqLw0KICAgIHB1YmxpYyBmdW5jdGlvbiBHZXRDYXRlZ29yeUJ5TmFtZSgkbmFtZSkgew0KICAgICAgICByZXR1cm4gJHRoaXMtPkdldFNvbWVUaGluZygnY2F0ZWdvcmllcycsICdOYW1lJywgJG5hbWUsICdDYXRlZ29yeScpOw0KICAgIH0NCg0KICAgIC8qKg0KICAgICAqIOmAmui/h+WIhuexu+WIq+WQjeiOt+WPluWIhuexu+WunuS+iw0KICAgICAqIEBwYXJhbSBzdHJpbmcgJG5hbWUNCiAgICAgKiBAcmV0dXJuIENhdGVnb3J5DQogICAgICovDQogICAgcHVibGljIGZ1bmN0aW9uIEdldENhdGVnb3J5QnlBbGlhcygkbmFtZSwgJGJhY2tLZXkgPSBudWxsKSB7DQogICAgICAgIHJldHVybiAkdGhpcy0+R2V0U29tZVRoaW5nQnlBbGlhcygnY2F0ZWdvcmllcycsICRuYW1lLCAkYmFja0tleSwgJ0NhdGVnb3J5Jyk7DQogICAgfQ0KDQogICAgLyoqDQogICAgICog5LiO6ICB54mI5pys5L+d5oyB5YW85a655Ye95pWwDQogICAgICogQHBhcmFtIHN0cmluZyAkbmFtZQ0KICAgICAqIEByZXR1cm4gQ2F0ZWdvcnkNCiAgICAgKi8NCiAgICBwdWJsaWMgZnVuY3Rpb24gR2V0Q2F0ZWdvcnlCeUFsaWFzT3JOYW1lKCRuYW1lKSB7DQogICAgICAgIHJldHVybiAkdGhpcy0+R2V0Q2F0ZWdvcnlCeUFsaWFzKCRuYW1lLCAnTmFtZScpOw0KICAgIH0NCg0KICAgIC8qKg0KICAgICAqIOmAmui/h0lE6I635Y+W5qih5Z2X5a6e5L6LDQogICAgICogQHBhcmFtIGludCAkaWQNCiAgICAgKiBAcmV0dXJuIE1vZHVsZQ0KICAgICAqLw0KICAgIHB1YmxpYyBmdW5jdGlvbiBHZXRNb2R1bGVCeUlEKCRpZCkgew0KICAgICAgICByZXR1cm4gJHRoaXMtPkdldFNvbWVUaGluZygnbW9kdWxlcycsICdJRCcsICRpZCwgJ01vZHVsZScpOyAvLyBXaGF0IHRoZSBmdWNrPw0KICAgIH0NCg0KICAgIC8qKg0KICAgICAqIOmAmui/h0ZpbGVOYW1l6I635Y+W5qih5Z2X5a6e5L6LDQogICAgICogQHBhcmFtIHN0cmluZyAkZm4NCiAgICAgKiBAcmV0dXJuIE1vZHVsZQ0KICAgICAqLw0KICAgIHB1YmxpYyBmdW5jdGlvbiBHZXRNb2R1bGVCeUZpbGVOYW1lKCRmbikgew0KICAgICAgICByZXR1cm4gJHRoaXMtPkdldFNvbWVUaGluZygnbW9kdWxlc2J5ZmlsZW5hbWUnLCAnRmlsZU5hbWUnLCAkZm4sICdNb2R1bGUnKTsNCiAgICB9DQoNCiAgICAvKioNCiAgICAgKiDpgJrov4dJROiOt+WPlueUqOaIt+WunuS+iw0KICAgICAqIEBwYXJhbSBpbnQgJGlkDQogICAgICogQHJldHVybiBNZW1iZXINCiAgICAgKi8NCiAgICBwdWJsaWMgZnVuY3Rpb24gR2V0TWVtYmVyQnlJRCgkaWQpIHsNCiAgICAgICAgJHJldCA9ICR0aGlzLT5HZXRTb21lVGhpbmcoJ21lbWJlcnMnLCAnSUQnLCAkaWQsICdNZW1iZXInKTsNCiAgICAgICAgaWYgKCRyZXQtPklEID09IDApIHsNCiAgICAgICAgICAgICRyZXQtPkd1aWQgPSBHZXRHdWlkKCk7DQogICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICAkdGhpcy0+bWVtYmVyc2J5bmFtZVskcmV0LT5OYW1lXSA9ICYkdGhpcy0+bWVtYmVyc1skcmV0LT5JRF07DQogICAgICAgIH0NCg0KICAgICAgICByZXR1cm4gJHJldDsNCiAgICB9DQoNCiAgICAvKioNCiAgICAgKiDpgJrov4fnlKjmiLflkI3ojrflj5bnlKjmiLflrp7kvoso5LiN5Yy65YiG5aSn5bCP5YaZKQ0KICAgICAqIEBwYXJhbSBzdHJpbmcgJG5hbWUNCiAgICAgKiBAcmV0dXJuIE1lbWJlcg0KICAgICAqLw0KICAgIHB1YmxpYyBmdW5jdGlvbiBHZXRNZW1iZXJCeU5hbWUoJG5hbWUpIHsNCiAgICAgICAgJG5hbWUgPSB0cmltKCRuYW1lKTsNCiAgICAgICAgaWYgKCEkbmFtZSB8fCAhQ2hlY2tSZWdFeHAoJG5hbWUsICdbdXNlcm5hbWVdJykpIHsNCiAgICAgICAgICAgIHJldHVybiBuZXcgTWVtYmVyOw0KICAgICAgICB9DQoNCiAgICAgICAgaWYgKGlzc2V0KCR0aGlzLT5tZW1iZXJzYnluYW1lWyRuYW1lXSkpIHsNCiAgICAgICAgICAgIHJldHVybiAkdGhpcy0+bWVtYmVyc2J5bmFtZVskbmFtZV07DQogICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICAkYXJyYXkgPSBhcnJheV9rZXlzKCR0aGlzLT5tZW1iZXJzYnluYW1lKTsNCiAgICAgICAgICAgIGZvcmVhY2ggKCRhcnJheSBhcyAkayA9PiAkdikgew0KICAgICAgICAgICAgICAgIGlmIChzdHJjYXNlY21wKCRuYW1lLCAkdikgPT0gMCkgew0KICAgICAgICAgICAgICAgICAgICByZXR1cm4gJHRoaXMtPm1lbWJlcnNieW5hbWVbJHZdOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0NCiAgICAgICAgfQ0KDQogICAgICAgICRsaWtlID0gKCR0aGlzLT5kYi0+dHlwZSA9PSAncGdzcWwnKSA/ICdJTElLRScgOiAnTElLRSc7DQogICAgICAgICRzcWwgPSAkdGhpcy0+ZGItPnNxbC0+U2VsZWN0KCR0aGlzLT50YWJsZVsnTWVtYmVyJ10sICcqJywgYXJyYXkoYXJyYXkoJGxpa2UsICdtZW1fTmFtZScsICRuYW1lKSksIG51bGwsIDEsIG51bGwpOw0KICAgICAgICAkYW0gPSAkdGhpcy0+R2V0TGlzdFR5cGUoJ01lbWJlcicsICRzcWwpOw0KICAgICAgICBpZiAoY291bnQoJGFtKSA+IDApIHsNCiAgICAgICAgICAgICRtID0gJGFtWzBdOw0KICAgICAgICAgICAgJHRoaXMtPm1lbWJlcnNbJG0tPklEXSA9ICRtOw0KICAgICAgICAgICAgJHRoaXMtPm1lbWJlcnNieW5hbWVbJG0tPk5hbWVdID0gJiR0aGlzLT5tZW1iZXJzWyRtLT5JRF07DQoNCiAgICAgICAgICAgIHJldHVybiAkbTsNCiAgICAgICAgfTsNCg0KICAgICAgICAkbSA9IG5ldyBNZW1iZXI7DQogICAgICAgICRtLT5HdWlkID0gR2V0R3VpZCgpOw0KDQogICAgICAgIHJldHVybiAkbTsNCiAgICB9DQoNCiAgICAvKioNCiAgICAgKiDpgJrov4fojrflj5bnlKjmiLflkI3miJbliKvlkI3lrp7kvoso5LiN5Yy65YiG5aSn5bCP5YaZKQ0KICAgICAqIEBwYXJhbSBzdHJpbmcgJG5hbWUNCiAgICAgKiBAcmV0dXJuIE1lbWJlcg0KICAgICAqLw0KICAgIHB1YmxpYyBmdW5jdGlvbiBHZXRNZW1iZXJCeU5hbWVPckFsaWFzKCRuYW1lKSB7DQogICAgICAgICRuYW1lID0gdHJpbSgkbmFtZSk7DQogICAgICAgIGlmICghJG5hbWUgfHwgIUNoZWNrUmVnRXhwKCRuYW1lLCAnW3VzZXJuYW1lXScpKSB7DQogICAgICAgICAgICByZXR1cm4gbmV3IE1lbWJlcjsNCiAgICAgICAgfQ0KDQogICAgICAgIGZvcmVhY2ggKCR0aGlzLT5tZW1iZXJzIGFzICRrZXkgPT4gJiR2YWx1ZSkgew0KICAgICAgICAgICAgaWYgKHN0cmNhc2VjbXAoJHZhbHVlLT5OYW1lLCAkbmFtZSkgPT0gMCB8fCBzdHJjYXNlY21wKCR2YWx1ZS0+QWxpYXMsICRuYW1lKSA9PSAwKSB7DQogICAgICAgICAgICAgICAgcmV0dXJuICR2YWx1ZTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgfQ0KDQogICAgICAgICRsaWtlID0gKCR0aGlzLT5kYi0+dHlwZSA9PSAncGdzcWwnKSA/ICdJTElLRScgOiAnTElLRSc7DQoNCiAgICAgICAgJHNxbCA9ICR0aGlzLT5kYi0+c3FsLT5nZXQoKS0+c2VsZWN0KCR0aGlzLT50YWJsZVsnTWVtYmVyJ10pLT53aGVyZShhcnJheSgiJGxpa2UgYXJyYXkiLCBhcnJheSgNCiAgICAgICAgICAgICAgICBhcnJheSgnbWVtX05hbWUnLCAkbmFtZSksDQogICAgICAgICAgICAgICAgYXJyYXkoJ21lbV9BbGlhcycsICRuYW1lKSwNCiAgICAgICAgICAgICkpKS0+bGltaXQoMSktPnNxbDsNCg0KDQogICAgICAgICRhbSA9ICR0aGlzLT5HZXRMaXN0VHlwZSgnTWVtYmVyJywgJHNxbCk7DQogICAgICAgIGlmIChjb3VudCgkYW0pID4gMCkgew0KICAgICAgICAgICAgJG0gPSAkYW1bMF07DQogICAgICAgICAgICAkdGhpcy0+bWVtYmVyc1skbS0+SURdID0gJG07DQogICAgICAgICAgICAkdGhpcy0+bWVtYmVyc2J5bmFtZVskbS0+TmFtZV0gPSAmJHRoaXMtPm1lbWJlcnNbJG0tPklEXTsNCg0KICAgICAgICAgICAgcmV0dXJuICRtOw0KICAgICAgICB9Ow0KDQogICAgICAgIHJldHVybiBuZXcgTWVtYmVyOw0KICAgIH0NCg0KICAgIC8qKg0KICAgICAqIOajgOafpeaMh+WumuWQjeensOeahOeUqOaIt+aYr+WQpuWtmOWcqCjkuI3ljLrliIblpKflsI/lhpkpDQogICAgICovDQogICAgcHVibGljIGZ1bmN0aW9uIENoZWNrTWVtYmVyTmFtZUV4aXN0KCRuYW1lKSB7DQogICAgICAgICRtID0gJHRoaXMtPkdldE1lbWJlckJ5TmFtZSgkbmFtZSk7DQoNCiAgICAgICAgcmV0dXJuICgkbS0+SUQgPiAwKTsNCiAgICB9DQoNCiAgICAvKioNCiAgICAgKiDmo4Dmn6XmjIflrprlkI3np7DmiJbliKvlkI3nmoTnlKjmiLfmmK/lkKblrZjlnKgo5LiN5Yy65YiG5aSn5bCP5YaZKQ0KICAgICAqLw0KICAgIHB1YmxpYyBmdW5jdGlvbiBDaGVja01lbWJlckJ5TmFtZU9yQWxpYXNFeGlzdCgkbmFtZSkgew0KICAgICAgICAkbSA9ICR0aGlzLT5HZXRNZW1iZXJCeU5hbWVPckFsaWFzKCRuYW1lKTsNCg0KICAgICAgICByZXR1cm4gKCRtLT5JRCA+IDApOw0KICAgIH0NCg0KICAgIC8qKg0KICAgICAqIOmAmui/h0lE6I635Y+W6K+E6K665a6e5L6LDQogICAgICogQHBhcmFtIGludCAkaWQNCiAgICAgKiBAcmV0dXJuIENvbW1lbnQNCiAgICAgKi8NCiAgICBwdWJsaWMgZnVuY3Rpb24gR2V0Q29tbWVudEJ5SUQoJGlkKSB7DQogICAgICAgIHJldHVybiAkdGhpcy0+R2V0U29tZVRoaW5nKCdjb21tZW50cycsICdJRCcsICRpZCwgJ0NvbW1lbnQnKTsNCiAgICB9DQoNCiAgICAvKioNCiAgICAgKiDpgJrov4dJROiOt+WPlumZhOS7tuWunuS+iw0KICAgICAqIEBwYXJhbSBpbnQgJGlkDQogICAgICogQHJldHVybiBVcGxvYWQNCiAgICAgKi8NCiAgICBwdWJsaWMgZnVuY3Rpb24gR2V0VXBsb2FkQnlJRCgkaWQpIHsNCiAgICAgICAgcmV0dXJuICR0aGlzLT5HZXRTb21lVGhpbmcoJycsICdJRCcsICRpZCwgJ1VwbG9hZCcpOw0KICAgIH0NCg0KICAgIC8qKg0KICAgICAqIOmAmui/h3RhZ+WQjeiOt+WPlnRhZ+WunuS+iw0KICAgICAqIEBwYXJhbSBzdHJpbmcgJG5hbWUNCiAgICAgKiBAcmV0dXJuIFRhZw0KICAgICAqLw0KICAgIHB1YmxpYyBmdW5jdGlvbiBHZXRUYWdCeUFsaWFzKCRuYW1lLCAkYmFja0tleSA9IG51bGwpIHsNCiAgICAgICAgJHJldCA9ICR0aGlzLT5HZXRTb21lVGhpbmdCeUFsaWFzKCd0YWdzJywgJG5hbWUsICRiYWNrS2V5LCAnVGFnJyk7DQogICAgICAgIGlmICgkcmV0LT5JRCA+PSAwKSB7DQogICAgICAgICAgICAkdGhpcy0+dGFnc2J5bmFtZVskcmV0LT5JRF0gPSAmJHRoaXMtPnRhZ3NbJHJldC0+SURdOw0KICAgICAgICB9DQoNCiAgICAgICAgcmV0dXJuICRyZXQ7DQogICAgfQ0KICAgIC8qKg0KICAgICAqIOmAmui/h3RhZ+WQjeiOt+WPlnRhZ+WunuS+iw0KICAgICAqIEBwYXJhbSBzdHJpbmcgJG5hbWUNCiAgICAgKiBAcmV0dXJuIFRhZw0KICAgICAqLw0KICAgIHB1YmxpYyBmdW5jdGlvbiBHZXRUYWdCeUFsaWFzT3JOYW1lKCRuYW1lKSB7DQogICAgICAgIC8vcmV0dXJuICR0aGlzLT5HZXRUYWdCeUFsaWFzKCRuYW1lLCAnTmFtZScpOw0KICAgICAgICAkYSA9IGFycmF5KCk7DQogICAgICAgICRhW10gPSBhcnJheSgndGFnX0FsaWFzJywgJG5hbWUpOw0KICAgICAgICAkYVtdID0gYXJyYXkoJ3RhZ19OYW1lJywgJG5hbWUpOw0KICAgICAgICAkYXJyYXkgPSAkdGhpcy0+R2V0VGFnTGlzdCgnKicsIGFycmF5KGFycmF5KCdhcnJheScsICRhKSksICcnLCAxLCAnJyk7DQogICAgICAgIGlmKGNvdW50KCRhcnJheSkgPT0gMCkgew0KICAgICAgICAgICAgcmV0dXJuIG5ldyBUYWc7DQogICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICAkdGhpcy0+dGFnc1skYXJyYXlbMF0tPklEXSA9ICRhcnJheVswXTsNCiAgICAgICAgICAgICR0aGlzLT50YWdzYnluYW1lWyRhcnJheVswXS0+SURdID0gJiR0aGlzLT50YWdzWyRhcnJheVswXS0+SURdOw0KDQogICAgICAgICAgICByZXR1cm4gJHRoaXMtPnRhZ3NbJGFycmF5WzBdLT5JRF07DQogICAgICAgIH0NCiAgICB9DQoNCiAgICAvKioNCiAgICAgKiDpgJrov4dJROiOt+WPlnRhZ+WunuS+iw0KICAgICAqIEBwYXJhbSBpbnQgJGlkDQogICAgICogQHJldHVybiBUYWcNCiAgICAgKi8NCiAgICBwdWJsaWMgZnVuY3Rpb24gR2V0VGFnQnlJRCgkaWQpIHsNCiAgICAgICAgJHJldCA9ICR0aGlzLT5HZXRTb21lVGhpbmcoJ3RhZ3MnLCAnSUQnLCAkaWQsICdUYWcnKTsNCiAgICAgICAgaWYgKCRyZXQtPklEID4gMCkgew0KICAgICAgICAgICAgJHRoaXMtPnRhZ3NieW5hbWVbJHJldC0+SURdID0gJiR0aGlzLT50YWdzWyRyZXQtPklEXTsNCiAgICAgICAgfQ0KDQogICAgICAgIHJldHVybiAkcmV0Ow0KICAgIH0NCg0KICAgIC8qKg0KICAgICAqIOmAmui/h+exu+S8vCd7MX17Mn17M317NH0n6L295YWldGFncw0KICAgICAqIEBwYXJhbSAkcw0KICAgICAqIEByZXR1cm4gYXJyYXkNCiAgICAgKi8NCiAgICBwdWJsaWMgZnVuY3Rpb24gTG9hZFRhZ3NCeUlEU3RyaW5nKCRzKSB7DQogICAgICAgICRzID0gdHJpbSgkcyk7DQogICAgICAgIGlmICgkcyA9PSAnJykgew0KICAgICAgICAgICAgcmV0dXJuIGFycmF5KCk7DQogICAgICAgIH0NCg0KICAgICAgICAkcyA9IHN0cl9yZXBsYWNlKCd9eycsICd8JywgJHMpOw0KICAgICAgICAkcyA9IHN0cl9yZXBsYWNlKCd7JywgJycsICRzKTsNCiAgICAgICAgJHMgPSBzdHJfcmVwbGFjZSgnfScsICcnLCAkcyk7DQogICAgICAgICRhID0gZXhwbG9kZSgnfCcsICRzKTsNCiAgICAgICAgJGIgPSBhcnJheSgpOw0KICAgICAgICBmb3JlYWNoICgkYSBhcyAmJHZhbHVlKSB7DQogICAgICAgICAgICAkdmFsdWUgPSB0cmltKCR2YWx1ZSk7DQogICAgICAgICAgICBpZiAoJHZhbHVlKSB7DQogICAgICAgICAgICAgICAgJGJbXSA9ICR2YWx1ZTsNCiAgICAgICAgICAgIH0NCg0KICAgICAgICB9DQogICAgICAgICR0ID0gYXJyYXlfdW5pcXVlKCRiKTsNCg0KICAgICAgICBpZiAoY291bnQoJHQpID09IDApIHsNCiAgICAgICAgICAgIHJldHVybiBhcnJheSgpOw0KICAgICAgICB9DQoNCiAgICAgICAgJGEgPSBhcnJheSgpOw0KICAgICAgICAkYiA9IGFycmF5KCk7DQogICAgICAgICRjID0gYXJyYXkoKTsNCiAgICAgICAgZm9yZWFjaCAoJHQgYXMgJHYpIHsNCiAgICAgICAgICAgIGlmIChpc3NldCgkdGhpcy0+dGFnc1skdl0pID09IGZhbHNlKSB7DQogICAgICAgICAgICAgICAgJGFbXSA9IGFycmF5KCd0YWdfSUQnLCAkdik7DQogICAgICAgICAgICAgICAgJGNbXSA9ICR2Ow0KICAgICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgICAgICAkYlskdl0gPSAmJHRoaXMtPnRhZ3NbJHZdOw0KICAgICAgICAgICAgfQ0KICAgICAgICB9DQoNCiAgICAgICAgaWYgKGNvdW50KCRhKSA9PSAwKSB7DQogICAgICAgICAgICByZXR1cm4gJGI7DQogICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICAkdCA9IGFycmF5KCk7DQogICAgICAgICAgICAvLyRhcnJheT0kdGhpcy0+R2V0VGFnTGlzdCgnJyxhcnJheShhcnJheSgnYXJyYXknLCRhKSksJycsJycsJycpOw0KICAgICAgICAgICAgJGFycmF5ID0gJHRoaXMtPkdldFRhZ0xpc3QoJycsIGFycmF5KGFycmF5KCdJTicsICd0YWdfSUQnLCAkYykpLCAnJywgJycsICcnKTsNCiAgICAgICAgICAgIGZvcmVhY2ggKCRhcnJheSBhcyAkdikgew0KICAgICAgICAgICAgICAgICR0aGlzLT50YWdzWyR2LT5JRF0gPSAkdjsNCiAgICAgICAgICAgICAgICAkdGhpcy0+dGFnc2J5bmFtZVskdi0+TmFtZV0gPSAmJHRoaXMtPnRhZ3NbJHYtPklEXTsNCiAgICAgICAgICAgICAgICAkdFskdi0+SURdID0gJiR0aGlzLT50YWdzWyR2LT5JRF07DQogICAgICAgICAgICB9DQoNCiAgICAgICAgICAgIHJldHVybiAkYiArICR0Ow0KICAgICAgICB9DQogICAgfQ0KDQogICAgLyoqDQogICAgICog6YCa6L+H57G75Ly8J2FhYSxiYmIsY2NjLGRkZCfovb3lhaV0YWdzDQogICAgICogQHBhcmFtIHN0cmluZyAkcyDmoIfnrb7lkI3lrZfnrKbkuLLvvIzlpoInYWFhLGJiYixjY2MsZGRkDQogICAgICogQHJldHVybiBhcnJheQ0KICAgICAqLw0KICAgIHB1YmxpYyBmdW5jdGlvbiBMb2FkVGFnc0J5TmFtZVN0cmluZygkcykgew0KICAgICAgICAkcyA9IHRyaW0oJHMpOw0KICAgICAgICAkcyA9IHN0cl9yZXBsYWNlKCc7JywgJywnLCAkcyk7DQogICAgICAgICRzID0gc3RyX3JlcGxhY2UoJ++8jCcsICcsJywgJHMpOw0KICAgICAgICAkcyA9IHN0cl9yZXBsYWNlKCfjgIEnLCAnLCcsICRzKTsNCiAgICAgICAgJHMgPSB0cmltKCRzKTsNCiAgICAgICAgJHMgPSBzdHJpcF90YWdzKCRzKTsNCiAgICAgICAgaWYgKCRzID09ICcnKSB7DQogICAgICAgICAgICByZXR1cm4gYXJyYXkoKTsNCiAgICAgICAgfQ0KDQogICAgICAgIGlmICgkcyA9PSAnLCcpIHsNCiAgICAgICAgICAgIHJldHVybiBhcnJheSgpOw0KICAgICAgICB9DQoNCiAgICAgICAgJGEgPSBleHBsb2RlKCcsJywgJHMpOw0KICAgICAgICAkdCA9IGFycmF5X3VuaXF1ZSgkYSk7DQoNCiAgICAgICAgaWYgKGNvdW50KCR0KSA9PSAwKSB7DQogICAgICAgICAgICByZXR1cm4gYXJyYXkoKTsNCiAgICAgICAgfQ0KDQogICAgICAgICRhID0gYXJyYXkoKTsNCiAgICAgICAgJGIgPSBhcnJheSgpOw0KICAgICAgICBmb3JlYWNoICgkdCBhcyAkdikgew0KICAgICAgICAgICAgaWYgKGlzc2V0KCR0aGlzLT50YWdzYnluYW1lWyR2XSkgPT0gZmFsc2UpIHsNCiAgICAgICAgICAgICAgICAkYVtdID0gYXJyYXkoJ3RhZ19OYW1lJywgJHYpOw0KICAgICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgICAgICAkYlskdl0gPSAmJHRoaXMtPnRhZ3NieW5hbWVbJHZdOw0KICAgICAgICAgICAgfQ0KICAgICAgICB9DQoNCiAgICAgICAgaWYgKGNvdW50KCRhKSA9PSAwKSB7DQogICAgICAgICAgICByZXR1cm4gJGI7DQogICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICAkdCA9IGFycmF5KCk7DQogICAgICAgICAgICAkYXJyYXkgPSAkdGhpcy0+R2V0VGFnTGlzdCgnJywgYXJyYXkoYXJyYXkoJ2FycmF5JywgJGEpKSwgJycsICcnLCAnJyk7DQogICAgICAgICAgICBmb3JlYWNoICgkYXJyYXkgYXMgJHYpIHsNCiAgICAgICAgICAgICAgICAkdGhpcy0+dGFnc1skdi0+SURdID0gJHY7DQogICAgICAgICAgICAgICAgJHRoaXMtPnRhZ3NieW5hbWVbJHYtPk5hbWVdID0gJiR0aGlzLT50YWdzWyR2LT5JRF07DQogICAgICAgICAgICAgICAgJHRbJHYtPk5hbWVdID0gJiR0aGlzLT50YWdzWyR2LT5JRF07DQogICAgICAgICAgICB9DQoNCiAgICAgICAgICAgIHJldHVybiAkYiArICR0Ow0KICAgICAgICB9DQogICAgfQ0KDQogICAgLyoqDQogICAgICog6YCa6L+H5pWw57uEYXJyYXlbMTExLDMzMyw0NDQsNTU1LDY2Nl3ovazmjaLmiJDlrZjlgqjkuLINCiAgICAgKiBAcGFyYW0gYXJyYXkgJGFycmF5IOagh+etvklE5pWw57uEDQogICAgICogQHJldHVybiBzdHJpbmcNCiAgICAgKi8NCiAgICBwdWJsaWMgZnVuY3Rpb24gQ29udmVydFRhZ0lEdG9TdHJpbmcoJGFycmF5KSB7DQogICAgICAgICRzID0gJyc7DQogICAgICAgIGZvcmVhY2ggKCRhcnJheSBhcyAkYSkgew0KICAgICAgICAgICAgJHMgLj0gJ3snIC4gJGEgLiAnfSc7DQogICAgICAgIH0NCg0KICAgICAgICByZXR1cm4gJHM7DQogICAgfQ0KDQogICAgLyoqDQogICAgICog6I635Y+W5YWo6YOo572u6aG25paH56ug77yI5LyY5YWI5LuOY2FjaGXph4zor7vmlbDnu4TvvIkNCiAgICAgKi8NCiAgICBwdWJsaWMgZnVuY3Rpb24gR2V0VG9wQXJ0aWNsZSgpIHsNCiAgICAgICAgaWYgKCR0aGlzLT5jYWNoZS0+SGFzS2V5KCd0b3BfcG9zdF9hcnJheScpID09IGZhbHNlKSB7DQogICAgICAgICAgICByZXR1cm4gYXJyYXkoKTsNCiAgICAgICAgfQ0KDQogICAgICAgICRhcnRpY2xlc190b3Bfbm90b3JkZXJfaWRhcnJheSA9IHVuc2VyaWFsaXplKCR0aGlzLT5jYWNoZS0+dG9wX3Bvc3RfYXJyYXkpOw0KICAgICAgICBpZiAoIWlzX2FycmF5KCRhcnRpY2xlc190b3Bfbm90b3JkZXJfaWRhcnJheSkpIHsNCiAgICAgICAgICAgIENvdW50VG9wQXJ0aWNsZShudWxsLCBudWxsKTsNCiAgICAgICAgICAgICRhcnRpY2xlc190b3Bfbm90b3JkZXJfaWRhcnJheSA9IHVuc2VyaWFsaXplKCR0aGlzLT5jYWNoZS0+dG9wX3Bvc3RfYXJyYXkpOw0KICAgICAgICB9DQogICAgICAgICRhcnRpY2xlc190b3Bfbm90b3JkZXIgPSAkdGhpcy0+R2V0UG9zdEJ5QXJyYXkoJGFydGljbGVzX3RvcF9ub3RvcmRlcl9pZGFycmF5KTsNCg0KICAgICAgICByZXR1cm4gJGFydGljbGVzX3RvcF9ub3RvcmRlcjsNCiAgICB9DQoNCg0KIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIw0KICAgICPpqozor4Hnm7jlhbMNCg0KICAgIC8qKg0KICAgICAqIOiOt+WPluivhOiuumtleQ0KICAgICAqIEBwYXJhbSAkaWQNCiAgICAgKiBAcmV0dXJuIHN0cmluZw0KICAgICAqLw0KICAgIHB1YmxpYyBmdW5jdGlvbiBHZXRDbXRLZXkoJGlkKSB7DQogICAgICAgIHJldHVybiBtZDUoJHRoaXMtPmd1aWQgLiAkaWQgLiBkYXRlKCdZbWRoJykpOw0KICAgIH0NCg0KICAgIC8qKg0KICAgICAqIOmqjOivgeivhOiuumtleQ0KICAgICAqIEBwYXJhbSAkaWQNCiAgICAgKiBAcGFyYW0gJGtleQ0KICAgICAqIEByZXR1cm4gYm9vbA0KICAgICAqLw0KICAgIHB1YmxpYyBmdW5jdGlvbiBWYWxpZENtdEtleSgkaWQsICRrZXkpIHsNCiAgICAgICAgJG5vd2tleSA9IG1kNSgkdGhpcy0+Z3VpZCAuICRpZCAuIGRhdGUoJ1ltZGgnKSk7DQogICAgICAgICRub3drZXkyID0gbWQ1KCR0aGlzLT5ndWlkIC4gJGlkIC4gZGF0ZSgnWW1kaCcsIHRpbWUoKSAtICgzNjAwICogMSkpKTsNCg0KICAgICAgICByZXR1cm4gKCRrZXkgPT0gJG5vd2tleSB8fCAka2V5ID09ICRub3drZXkyKTsNCiAgICB9DQoNCiAgICAvKioNCiAgICAgKiDojrflj5bkvJror51Ub2tlbg0KICAgICAqIEBwYXJhbSAkcw0KICAgICAqIEByZXR1cm4gc3RyaW5nDQogICAgICovDQogICAgcHVibGljIGZ1bmN0aW9uIEdldFRva2VuKCRzID0gJycpIHsNCiAgICAgICAgcmV0dXJuIG1kNSgkdGhpcy0+Z3VpZCAuICR0aGlzLT51c2VyLT5HdWlkIC4gJHMgLiBkYXRlKCdZbWRoJykpOw0KICAgIH0NCg0KICAgIC8qKg0KICAgICAqIOmqjOivgeS8muivnVRva2VuDQogICAgICogQHBhcmFtICR0DQogICAgICogQHBhcmFtICRzDQogICAgICogQHJldHVybiBib29sDQogICAgICovDQogICAgcHVibGljIGZ1bmN0aW9uIFZhbGlkVG9rZW4oJHQsICRzID0gJycpIHsNCiAgICAgICAgaWYgKCR0ID09IG1kNSgkdGhpcy0+Z3VpZCAuICR0aGlzLT51c2VyLT5HdWlkIC4gJHMgLiBkYXRlKCdZbWRoJykpKSB7DQogICAgICAgICAgICByZXR1cm4gdHJ1ZTsNCiAgICAgICAgfQ0KICAgICAgICBpZiAoJHQgPT0gbWQ1KCR0aGlzLT5ndWlkIC4gJHRoaXMtPnVzZXItPkd1aWQgLiAkcy4gZGF0ZSgnWW1kaCcsIHRpbWUoKSAtICgzNjAwICogMSkpKSkgew0KICAgICAgICAgICAgcmV0dXJuIHRydWU7DQogICAgICAgIH0NCg0KICAgICAgICByZXR1cm4gZmFsc2U7DQogICAgfQ0KDQogICAgLyoqDQogICAgICog5pi+56S66aqM6K+B56CBDQogICAgICoNCiAgICAgKiBAYXBpIEZpbHRlcl9QbHVnaW5fWmJwX1Nob3dWYWxpZENvZGUg5aaC6K+l5o6l5Y+j5pyq6KKr5oyC6L295YiZ5pi+56S66buY6K6k6aqM6K+B5Zu+54mHDQogICAgICogQHBhcmFtIHN0cmluZyAkaWQg5ZG95ZCN5LqL5Lu2DQogICAgICogQHJldHVybiBtaXhlZA0KICAgICAqLw0KICAgIHB1YmxpYyBmdW5jdGlvbiBTaG93VmFsaWRDb2RlKCRpZCA9ICcnKSB7DQoNCiAgICAgICAgZm9yZWFjaCAoJEdMT0JBTFNbJ2hvb2tzJ11bJ0ZpbHRlcl9QbHVnaW5fWmJwX1Nob3dWYWxpZENvZGUnXSBhcyAkZnBuYW1lID0+ICYkZnBzaWduYWwpIHsNCiAgICAgICAgICAgIHJldHVybiAkZnBuYW1lKCRpZCk7IC8vKg0KICAgICAgICB9DQoNCiAgICAgICAgJF92YyA9IG5ldyBWYWxpZGF0ZUNvZGUoKTsNCiAgICAgICAgJF92Yy0+R2V0SW1nKCk7DQogICAgICAgIHNldGNvb2tpZSgnY2FwdGNoYV8nIC4gY3JjMzIoJHRoaXMtPmd1aWQgLiAkaWQpLCBtZDUoJHRoaXMtPmd1aWQgLiBkYXRlKCJZbWRoIikgLiAkX3ZjLT5HZXRDb2RlKCkpLCBudWxsLCAkdGhpcy0+Y29va2llc3BhdGgpOw0KICAgIH0NCg0KICAgIC8qKg0KICAgICAqIOavlOWvuemqjOivgeeggQ0KICAgICAqDQogICAgICogQGFwaSBGaWx0ZXJfUGx1Z2luX1picF9DaGVja1ZhbGlkQ29kZSDlpoLor6XmjqXlj6PmnKrooqvmjILovb3liJnmr5Tlr7npu5jorqTpqozor4HnoIENCiAgICAgKiBAcGFyYW0gc3RyaW5nICR2YWlkY29kZSDpqozor4HnoIHmlbDlgLwNCiAgICAgKiBAcGFyYW0gc3RyaW5nICRpZCDlkb3lkI3kuovku7YNCiAgICAgKiBAcmV0dXJuIGJvb2wNCiAgICAgKi8NCiAgICBwdWJsaWMgZnVuY3Rpb24gQ2hlY2tWYWxpZENvZGUoJHZhaWRjb2RlLCAkaWQgPSAnJykgew0KICAgICAgICAkdmFpZGNvZGUgPSBzdHJ0b2xvd2VyKCR2YWlkY29kZSk7DQogICAgICAgIGZvcmVhY2ggKCRHTE9CQUxTWydob29rcyddWydGaWx0ZXJfUGx1Z2luX1picF9DaGVja1ZhbGlkQ29kZSddIGFzICRmcG5hbWUgPT4gJiRmcHNpZ25hbCkgew0KICAgICAgICAgICAgcmV0dXJuICRmcG5hbWUoJHZhaWRjb2RlLCAkaWQpOyAvLyoNCiAgICAgICAgfQ0KDQogICAgICAgICRvcmlnaW5hbCA9IEdldFZhcnMoJ2NhcHRjaGFfJyAuIGNyYzMyKCR0aGlzLT5ndWlkIC4gJGlkKSwgJ0NPT0tJRScpOw0KICAgICAgICBzZXRjb29raWUoJ2NhcHRjaGFfJyAuIGNyYzMyKCR0aGlzLT5ndWlkIC4gJGlkKSwgJycsIHRpbWUoKSAtIDM2MDAsICR0aGlzLT5jb29raWVzcGF0aCk7DQoNCiAgICAgICAgcmV0dXJuIChtZDUoJHRoaXMtPmd1aWQgLiBkYXRlKCJZbWRoIikgLiAkdmFpZGNvZGUpID09ICRvcmlnaW5hbA0KICAgICAgICAgICAgICAgIHx8DQogICAgICAgICAgICAgICAgbWQ1KCR0aGlzLT5ndWlkIC4gZGF0ZSgiWW1kaCIsIHRpbWUoKSAtICgzNjAwICogMSkpIC4gJHZhaWRjb2RlKSA9PSAkb3JpZ2luYWwNCiAgICAgICAgICAgICAgICApOw0KICAgIH0NCg0KDQoNCg0KIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIw0KICAgICPmnYLpobkNCiAgICAjJHR5cGU9Y2F0ZWdvcnksdGFnLHBhZ2UsaXRlbQ0KICAgIC8qKg0KICAgICAqIOWQkeWvvOiIquiPnOWNlea3u+WKoOebuOW6lOadoeebrg0KICAgICAqIEBwYXJhbSBzdHJpbmcgJHR5cGUgJHR5cGU9Y2F0ZWdvcnksdGFnLHBhZ2UsaXRlbQ0KICAgICAqIEBwYXJhbSBzdHJpbmcgJGlkDQogICAgICogQHBhcmFtIHN0cmluZyAkbmFtZQ0KICAgICAqIEBwYXJhbSBzdHJpbmcgJHVybA0KICAgICAqLw0KICAgIHB1YmxpYyBmdW5jdGlvbiBBZGRJdGVtVG9OYXZiYXIoJHR5cGUgPSAnaXRlbScsICRpZCwgJG5hbWUsICR1cmwpIHsNCg0KICAgICAgICBpZiAoISR0eXBlKSB7DQogICAgICAgICAgICAkdHlwZSA9ICdpdGVtJzsNCiAgICAgICAgfQ0KDQogICAgICAgICRtID0gJHRoaXMtPm1vZHVsZXNieWZpbGVuYW1lWyduYXZiYXInXTsNCiAgICAgICAgJHMgPSAkbS0+Q29udGVudDsNCg0KICAgICAgICAkYSA9ICc8bGkgaWQ9Im5hdmJhci0nIC4gJHR5cGUgLiAnLScgLiAkaWQgLiAnIj48YSBocmVmPSInIC4gJHVybCAuICciPicgLiAkbmFtZSAuICc8L2E+PC9saT4nOw0KDQogICAgICAgIGlmICgkdGhpcy0+Q2hlY2tJdGVtVG9OYXZiYXIoJHR5cGUsICRpZCkpIHsNCiAgICAgICAgICAgICRzID0gcHJlZ19yZXBsYWNlKCcvPGxpIGlkPSJuYXZiYXItJyAuICR0eXBlIC4gJy0nIC4gJGlkIC4gJyI+Lio/PFwvbGk+LycsICRhLCAkcyk7DQogICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICAkcyAuPSAnPGxpIGlkPSJuYXZiYXItJyAuICR0eXBlIC4gJy0nIC4gJGlkIC4gJyI+PGEgaHJlZj0iJyAuICR1cmwgLiAnIj4nIC4gJG5hbWUgLiAnPC9hPjwvbGk+JzsNCiAgICAgICAgfQ0KDQogICAgICAgICRtLT5Db250ZW50ID0gJHM7DQogICAgICAgICRtLT5TYXZlKCk7DQoNCiAgICB9DQoNCiAgICAvKioNCiAgICAgKiDliKDpmaTlr7zoiKroj5zljZXkuK3nm7jlupTmnaHnm64NCiAgICAgKiBAcGFyYW0gc3RyaW5nICR0eXBlDQogICAgICogQHBhcmFtICRpZA0KICAgICAqLw0KICAgIHB1YmxpYyBmdW5jdGlvbiBEZWxJdGVtVG9OYXZiYXIoJHR5cGUgPSAnaXRlbScsICRpZCkgew0KDQogICAgICAgIGlmICghJHR5cGUpIHsNCiAgICAgICAgICAgICR0eXBlID0gJ2l0ZW0nOw0KICAgICAgICB9DQoNCiAgICAgICAgJG0gPSAkdGhpcy0+bW9kdWxlc2J5ZmlsZW5hbWVbJ25hdmJhciddOw0KICAgICAgICAkcyA9ICRtLT5Db250ZW50Ow0KDQogICAgICAgICRzID0gcHJlZ19yZXBsYWNlKCcvPGxpIGlkPSJuYXZiYXItJyAuICR0eXBlIC4gJy0nIC4gJGlkIC4gJyI+Lio/PFwvbGk+LycsICcnLCAkcyk7DQoNCiAgICAgICAgJG0tPkNvbnRlbnQgPSAkczsNCiAgICAgICAgJG0tPlNhdmUoKTsNCg0KICAgIH0NCg0KICAgIC8qKg0KICAgICAqIOajgOafpeadoeebruaYr+WQpuWcqOWvvOiIquiPnOWNleS4rQ0KICAgICAqIEBwYXJhbSBzdHJpbmcgJHR5cGUNCiAgICAgKiBAcGFyYW0gJGlkDQogICAgICogQHJldHVybiBib29sDQogICAgICovDQogICAgcHVibGljIGZ1bmN0aW9uIENoZWNrSXRlbVRvTmF2YmFyKCR0eXBlID0gJ2l0ZW0nLCAkaWQpIHsNCg0KICAgICAgICBpZiAoISR0eXBlKSB7DQogICAgICAgICAgICAkdHlwZSA9ICdpdGVtJzsNCiAgICAgICAgfQ0KDQogICAgICAgICRtID0gJHRoaXMtPm1vZHVsZXNieWZpbGVuYW1lWyduYXZiYXInXTsNCiAgICAgICAgJHMgPSAkbS0+Q29udGVudDsNCg0KICAgICAgICByZXR1cm4gKGJvb2wpIHN0cnBvcygkcywgJ2lkPSJuYXZiYXItJyAuICR0eXBlIC4gJy0nIC4gJGlkIC4gJyInKTsNCg0KICAgIH0NCg0KDQogICAgIyRzaWduYWwgPSBnb29kLGJhZCx0aXBzDQogICAgcHJpdmF0ZSAkaGludDEgPSBudWxsLCAkaGludDIgPSBudWxsLCAkaGludDMgPSBudWxsLCAkaGludDQgPSBudWxsLCAkaGludDUgPSBudWxsOw0KICAgIC8qKg0KICAgICAqIOiuvue9ruaPkOekuua2iOaBr+W5tuWtmOWFpUNvb2tpZQ0KICAgICAqIEBwYXJhbSBzdHJpbmcgJHNpZ25hbCDmj5DnpLrnsbvlnovvvIhnb29kfGJhZHx0aXBz77yJDQogICAgICogQHBhcmFtIHN0cmluZyAkY29udGVudCDmj5DnpLrlhoXlrrkNCiAgICAgKi8NCiAgICBwdWJsaWMgZnVuY3Rpb24gU2V0SGludCgkc2lnbmFsLCAkY29udGVudCA9ICcnKSB7DQogICAgICAgIGlmICgkY29udGVudCA9PSAnJykgew0KICAgICAgICAgICAgaWYgKCRzaWduYWwgPT0gJ2dvb2QnKSB7DQogICAgICAgICAgICAgICAgJGNvbnRlbnQgPSAkdGhpcy0+bGFuZ1snbXNnJ11bJ29wZXJhdGlvbl9zdWNjZWVkJ107DQogICAgICAgICAgICB9DQoNCiAgICAgICAgICAgIGlmICgkc2lnbmFsID09ICdiYWQnKSB7DQogICAgICAgICAgICAgICAgJGNvbnRlbnQgPSAkdGhpcy0+bGFuZ1snbXNnJ11bJ29wZXJhdGlvbl9mYWlsZWQnXTsNCiAgICAgICAgICAgIH0NCg0KICAgICAgICB9DQogICAgICAgICRjb250ZW50ID0gc3Vic3RyKCRjb250ZW50LCAwLCAyNTUpOw0KICAgICAgICBpZiAoJHRoaXMtPmhpbnQxID09IG51bGwpIHsNCiAgICAgICAgICAgICR0aGlzLT5oaW50MSA9ICRzaWduYWwgLiAnfCcgLiAkY29udGVudDsNCiAgICAgICAgICAgIHNldGNvb2tpZSgiaGludF9zaWduYWwxIiwgJHNpZ25hbCAuICd8JyAuICRjb250ZW50LCAwLCAkdGhpcy0+Y29va2llc3BhdGgpOw0KICAgICAgICB9IGVsc2VpZiAoJHRoaXMtPmhpbnQyID09IG51bGwpIHsNCiAgICAgICAgICAgICR0aGlzLT5oaW50MiA9ICRzaWduYWwgLiAnfCcgLiAkY29udGVudDsNCiAgICAgICAgICAgIHNldGNvb2tpZSgiaGludF9zaWduYWwyIiwgJHNpZ25hbCAuICd8JyAuICRjb250ZW50LCAwLCAkdGhpcy0+Y29va2llc3BhdGgpOw0KICAgICAgICB9IGVsc2VpZiAoJHRoaXMtPmhpbnQzID09IG51bGwpIHsNCiAgICAgICAgICAgICR0aGlzLT5oaW50MyA9ICRzaWduYWwgLiAnfCcgLiAkY29udGVudDsNCiAgICAgICAgICAgIHNldGNvb2tpZSgiaGludF9zaWduYWwzIiwgJHNpZ25hbCAuICd8JyAuICRjb250ZW50LCAwLCAkdGhpcy0+Y29va2llc3BhdGgpOw0KICAgICAgICB9IGVsc2VpZiAoJHRoaXMtPmhpbnQ0ID09IG51bGwpIHsNCiAgICAgICAgICAgICR0aGlzLT5oaW50NCA9ICRzaWduYWwgLiAnfCcgLiAkY29udGVudDsNCiAgICAgICAgICAgIHNldGNvb2tpZSgiaGludF9zaWduYWw0IiwgJHNpZ25hbCAuICd8JyAuICRjb250ZW50LCAwLCAkdGhpcy0+Y29va2llc3BhdGgpOw0KICAgICAgICB9IGVsc2VpZiAoJHRoaXMtPmhpbnQ1ID09IG51bGwpIHsNCiAgICAgICAgICAgICR0aGlzLT5oaW50NSA9ICRzaWduYWwgLiAnfCcgLiAkY29udGVudDsNCiAgICAgICAgICAgIHNldGNvb2tpZSgiaGludF9zaWduYWw1IiwgJHNpZ25hbCAuICd8JyAuICRjb250ZW50LCAwLCAkdGhpcy0+Y29va2llc3BhdGgpOw0KICAgICAgICB9DQogICAgfQ0KDQogICAgLyoqDQogICAgICog5o+Q5Y+WQ29va2ll5Lit55qE5o+Q56S65raI5oGvDQogICAgICovDQogICAgcHVibGljIGZ1bmN0aW9uIEdldEhpbnQoKSB7DQogICAgICAgIGZvciAoJGkgPSAxOyAkaSA8PSA1OyAkaSsrKSB7DQogICAgICAgICAgICAkc2lnbmFsID0gJ2hpbnQnIC4gJGk7DQogICAgICAgICAgICAkc2lnbmFsID0gJHRoaXMtPiRzaWduYWw7DQogICAgICAgICAgICBpZiAoJHNpZ25hbCkgew0KICAgICAgICAgICAgICAgICRhID0gZXhwbG9kZSgnfCcsICRzaWduYWwpOw0KICAgICAgICAgICAgICAgICR0aGlzLT5TaG93SGludCgkYVswXSwgJGFbMV0pOw0KICAgICAgICAgICAgICAgIHNldGNvb2tpZSgiaGludF9zaWduYWwiIC4gJGksICcnLCB0aW1lKCkgLSAzNjAwLCAkdGhpcy0+Y29va2llc3BhdGgpOw0KICAgICAgICAgICAgfQ0KICAgICAgICB9DQogICAgICAgIGZvciAoJGkgPSAxOyAkaSA8PSA1OyAkaSsrKSB7DQogICAgICAgICAgICAkc2lnbmFsID0gR2V0VmFycygnaGludF9zaWduYWwnIC4gJGksICdDT09LSUUnKTsNCiAgICAgICAgICAgIGlmICgkc2lnbmFsKSB7DQogICAgICAgICAgICAgICAgJGEgPSBleHBsb2RlKCd8JywgJHNpZ25hbCk7DQogICAgICAgICAgICAgICAgJHRoaXMtPlNob3dIaW50KCRhWzBdLCAkYVsxXSk7DQogICAgICAgICAgICAgICAgc2V0Y29va2llKCJoaW50X3NpZ25hbCIgLiAkaSwgJycsIHRpbWUoKSAtIDM2MDAsICR0aGlzLT5jb29raWVzcGF0aCk7DQogICAgICAgICAgICB9DQogICAgICAgIH0NCiAgICB9DQoNCiAgICAvKioNCiAgICAgKiDmmL7npLrmj5DnpLrmtojmga8NCiAgICAgKiBAcGFyYW0gc3RyaW5nICRzaWduYWwg5o+Q56S657G75Z6L77yIZ29vZHxiYWR8dGlwc++8iQ0KICAgICAqIEBwYXJhbSBzdHJpbmcgJGNvbnRlbnQg5o+Q56S65YaF5a65DQogICAgICovDQogICAgcHVibGljIGZ1bmN0aW9uIFNob3dIaW50KCRzaWduYWwsICRjb250ZW50ID0gJycpIHsNCiAgICAgICAgaWYgKCRjb250ZW50ID09ICcnKSB7DQogICAgICAgICAgICBpZiAoJHNpZ25hbCA9PSAnZ29vZCcpIHsNCiAgICAgICAgICAgICAgICAkY29udGVudCA9ICR0aGlzLT5sYW5nWydtc2cnXVsnb3BlcmF0aW9uX3N1Y2NlZWQnXTsNCiAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgaWYgKCRzaWduYWwgPT0gJ2JhZCcpIHsNCiAgICAgICAgICAgICAgICAkY29udGVudCA9ICR0aGlzLT5sYW5nWydtc2cnXVsnb3BlcmF0aW9uX2ZhaWxlZCddOw0KICAgICAgICAgICAgfQ0KDQogICAgICAgIH0NCiAgICAgICAgZWNobyAiPGRpdiBjbGFzcz1cImhpbnRcIj48cCBjbGFzcz1cImhpbnQgaGludF8kc2lnbmFsXCI+JGNvbnRlbnQ8L3A+PC9kaXY+IjsNCiAgICB9DQoNCiAgICAvKioNCiAgICAgKiDmmL7npLrplJnor6/kv6Hmga8NCiAgICAgKiBAYXBpIEZpbHRlcl9QbHVnaW5fWmJwX1Nob3dFcnJvcg0KICAgICAqIEBwYXJhbSBzdHJpbmcvaW50ICRlcnJvclRleHQNCiAgICAgKiBAcGFyYW0gbnVsbCAkZmlsZQ0KICAgICAqIEBwYXJhbSBudWxsICRsaW5lDQogICAgICogQHJldHVybiBtaXhlZA0KICAgICAqIEB0aHJvd3MgRXhjZXB0aW9uDQogICAgICovDQogICAgcHVibGljIGZ1bmN0aW9uIFNob3dFcnJvcigkZXJyb3JUZXh0LCAkZmlsZSA9IG51bGwsICRsaW5lID0gbnVsbCkgew0KDQogICAgICAgICRlcnJvckNvZGUgPSAwOw0KICAgICAgICBpZiAoaXNfbnVtZXJpYygkZXJyb3JUZXh0KSkgew0KICAgICAgICAgICAgJGVycm9yQ29kZSA9IChpbnQpICRlcnJvclRleHQ7DQogICAgICAgICAgICAkZXJyb3JUZXh0ID0gJHRoaXMtPmxhbmdbJ2Vycm9yJ11bJGVycm9yVGV4dF07DQogICAgICAgIH0NCg0KICAgICAgICBpZiAoJGVycm9yQ29kZSA9PSAyKSB7DQogICAgICAgICAgICBIdHRwNDA0KCk7DQogICAgICAgIH0NCg0KICAgICAgICBaQmxvZ0V4Y2VwdGlvbjo6JGVycm9yX2lkID0gJGVycm9yQ29kZTsNCiAgICAgICAgWkJsb2dFeGNlcHRpb246OiRlcnJvcl9maWxlID0gJGZpbGU7DQogICAgICAgIFpCbG9nRXhjZXB0aW9uOjokZXJyb3JfbGluZSA9ICRsaW5lOw0KDQogICAgICAgIGZvcmVhY2ggKCRHTE9CQUxTWydob29rcyddWydGaWx0ZXJfUGx1Z2luX1picF9TaG93RXJyb3InXSBhcyAkZnBuYW1lID0+ICYkZnBzaWduYWwpIHsNCiAgICAgICAgICAgICRmcHNpZ25hbCA9IFBMVUdJTl9FWElUU0lHTkFMX05PTkU7DQogICAgICAgICAgICAkZnByZXR1cm4gPSAkZnBuYW1lKCRlcnJvckNvZGUsICRlcnJvclRleHQsICRmaWxlLCAkbGluZSk7DQogICAgICAgICAgICBpZiAoJGZwc2lnbmFsID09IFBMVUdJTl9FWElUU0lHTkFMX1JFVFVSTikgew0KICAgICAgICAgICAgICAgIHJldHVybiAkZnByZXR1cm47DQogICAgICAgICAgICB9DQogICAgICAgIH0NCg0KICAgICAgICB0aHJvdyBuZXcgRXhjZXB0aW9uKCRlcnJvclRleHQpOw0KICAgIH0NCg0KDQogICAgLyoqDQogICAgICog5qOA5p+l5bm25byA5ZCvR3ppcOWOi+e8qQ0KICAgICAqLw0KICAgIHB1YmxpYyBmdW5jdGlvbiBDaGVja0d6aXAoKSB7DQoNCiAgICAgICAgaWYgKGV4dGVuc2lvbl9sb2FkZWQoInpsaWIiKSAmJg0KICAgICAgICAgICAgaXNzZXQoJF9TRVJWRVJbIkhUVFBfQUNDRVBUX0VOQ09ESU5HIl0pICYmDQogICAgICAgICAgICBzdHJzdHIoJF9TRVJWRVJbIkhUVFBfQUNDRVBUX0VOQ09ESU5HIl0sICJnemlwIikNCiAgICAgICAgKSB7DQogICAgICAgICAgICAkdGhpcy0+aXNnemlwID0gdHJ1ZTsNCiAgICAgICAgfQ0KDQogICAgfQ0KDQogICAgLyoqDQogICAgICog5ZCv55SoR3ppcA0KICAgICAqLw0KICAgIHB1YmxpYyBmdW5jdGlvbiBTdGFydEd6aXAoKSB7DQoNCiAgICAgICAgaWYgKCFoZWFkZXJzX3NlbnQoKSAmJiAkdGhpcy0+aXNnemlwICYmICR0aGlzLT5vcHRpb25bJ1pDX0daSVBfRU5BQkxFJ10pIHsNCiAgICAgICAgICAgIGlmIChpbmlfZ2V0KCdvdXRwdXRfaGFuZGxlcicpKSB7DQogICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlOw0KICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICAkYSA9IG9iX2xpc3RfaGFuZGxlcnMoKTsNCiAgICAgICAgICAgIGlmIChpbl9hcnJheSgnb2JfZ3poYW5kbGVyJywgJGEpIHx8IGluX2FycmF5KCd6bGliIG91dHB1dCBjb21wcmVzc2lvbicsICRhKSkgew0KICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTsNCiAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgaWYgKGZ1bmN0aW9uX2V4aXN0cygnaW5pX3NldCcpICYmICR0aGlzLT5vcHRpb25bJ1pDX1lVTl9TSVRFJ10gIT09ICdTQUUnKSB7DQogICAgICAgICAgICAgICAgaW5pX3NldCgnemxpYi5vdXRwdXRfY29tcHJlc3Npb24nLCAnT24nKTsNCiAgICAgICAgICAgICAgICBpbmlfc2V0KCd6bGliLm91dHB1dF9jb21wcmVzc2lvbl9sZXZlbCcsICc1Jyk7DQogICAgICAgICAgICB9IGVsc2VpZiAoZnVuY3Rpb25fZXhpc3RzKCdvYl9nemhhbmRsZXInKSkgew0KICAgICAgICAgICAgICAgIG9iX3N0YXJ0KCdvYl9nemhhbmRsZXInKTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIG9iX3N0YXJ0KCk7DQoNCiAgICAgICAgICAgIHJldHVybiB0cnVlOw0KICAgICAgICB9DQoNCiAgICAgICAgcmV0dXJuIGZhbHNlOw0KICAgIH0NCg0KICAgIC8qKg0KICAgICAqIOajgOa1i+e9keermeWFs+mXrQ0KICAgICAqLw0KICAgIHB1YmxpYyBmdW5jdGlvbiBDaGVja1NpdGVDbG9zZWQoKSB7DQoNCiAgICAgICAgaWYgKCR0aGlzLT5vcHRpb25bJ1pDX0NMT1NFX1NJVEUnXSkgew0KICAgICAgICAgICAgJHRoaXMtPlNob3dFcnJvcig4MiwgX19GSUxFX18sIF9fTElORV9fKTsNCiAgICAgICAgICAgIGV4aXQ7DQogICAgICAgIH0NCiAgICB9DQoNCiAgICAvKioNCiAgICAgKiDot7PovazliLDlronoo4XpobXpnaINCiAgICAgKi8NCiAgICBwdWJsaWMgZnVuY3Rpb24gUmVkaXJlY3RJbnN0YWxsKCkgew0KDQogICAgICAgIGlmICghJHRoaXMtPm9wdGlvblsnWkNfREFUQUJBU0VfVFlQRSddKSB7DQogICAgICAgICAgICBSZWRpcmVjdCgnLi96Yl9pbnN0YWxsL2luZGV4LnBocCcpOw0KICAgICAgICB9DQoNCiAgICAgICAgaWYgKCR0aGlzLT5vcHRpb25bJ1pDX1lVTl9TSVRFJ10pIHsNCiAgICAgICAgICAgIGlmICgkdGhpcy0+Q29uZmlnKCdzeXN0ZW0nKS0+Q291bnRJdGVtKCkgPT0gMCkgew0KICAgICAgICAgICAgICAgIFJlZGlyZWN0KCcuL3piX2luc3RhbGwvaW5kZXgucGhwJyk7DQogICAgICAgICAgICB9DQoNCiAgICAgICAgfQ0KICAgIH0NCg0KICAgIC8qKg0KICAgICAqIOajgOa1i+W9k+WJjXVybO+8jOWmguaenOS4jeespuWQiOiuvue9ruWwsei3s+i9rOWIsOWbuuWumuWfn+WQjeeahOmTvuaOpQ0KICAgICAqLw0KICAgIHB1YmxpYyBmdW5jdGlvbiBSZWRpcmVjdFBlcm1hbmVudERvbWFpbigpIHsNCg0KICAgICAgICBpZiAoJHRoaXMtPm9wdGlvblsnWkNfUEVSTUFORU5UX0RPTUFJTl9FTkFCTEUnXSA9PSBmYWxzZSkgew0KICAgICAgICAgICAgcmV0dXJuOw0KICAgICAgICB9DQoNCiAgICAgICAgaWYgKCR0aGlzLT5vcHRpb25bJ1pDX1BFUk1BTkVOVF9ET01BSU5fUkVESVJFQ1QnXSA9PSBmYWxzZSkgew0KICAgICAgICAgICAgcmV0dXJuOw0KICAgICAgICB9DQoNCiAgICAgICAgJGhvc3QgPSBzdHJfcmVwbGFjZShhcnJheSgnaHR0cHM6Ly8nLCAnaHR0cDovLycpLCBhcnJheSgnJywgJycpLCBHZXRDdXJyZW50SG9zdChaQlBfUEFUSCwgJG51bGwpKTsNCiAgICAgICAgJGhvc3QyID0gc3RyX3JlcGxhY2UoYXJyYXkoJ2h0dHBzOi8vJywgJ2h0dHA6Ly8nKSwgYXJyYXkoJycsICcnKSwgJHRoaXMtPmhvc3QpOw0KDQogICAgICAgIGlmICgkaG9zdCAhPSAkaG9zdDIpIHsNCiAgICAgICAgICAgICR1ID0gR2V0UmVxdWVzdFVyaSgpOw0KICAgICAgICAgICAgJHUgPSAkdGhpcy0+aG9zdCAuIHN1YnN0cigkdSwgMSwgc3RybGVuKCR1KSk7DQogICAgICAgICAgICBSZWRpcmVjdDMwMSgkdSk7DQogICAgICAgIH0NCiAgICB9DQoNCg0KIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIw0KICAgICPmianlsZV75Yqo5L2c77yM57G75YirfQ0KICAgIC8qKg0KICAgICAqIOazqOWGjFBvc3RUeXBlDQogICAgICogaW50ICR0eXBlaWQg57O757uf5a6a5LmJ5ZyoMC05Oe+8jOaPkuS7tuiHquWumuS5iTEwMC0yNTUNCiAgICAgKiBzdHJpbmcgJHVybHJ1bGUg6buY6K6k5piv5Y+WUGFnZeexu+Wei+eahFVybCBSdWxlDQogICAgICogc3RyaW5nICR0ZW1wbGF0ZSDpu5jorqTmqKHmnb/lkI1wYWdlDQogICAgICovDQogICAgcHVibGljIGZ1bmN0aW9uIFJlZ1Bvc3RUeXBlKCR0eXBlaWQsICRuYW1lLCAkdXJscnVsZSA9ICcnLCAkdGVtcGxhdGUgPSAncGFnZScpIHsNCiAgICAgICAgaWYgKCR1cmxydWxlID09ICcnKSB7DQogICAgICAgICAgICAkdXJscnVsZSA9ICR0aGlzLT5vcHRpb25bJ1pDX1BBR0VfUkVHRVgnXTsNCiAgICAgICAgfQ0KDQogICAgICAgICR0eXBlaWQgPSAoaW50KSAkdHlwZWlkOw0KICAgICAgICAkbmFtZSA9IHN0cnRvbG93ZXIodHJpbSgkbmFtZSkpOw0KICAgICAgICBpZiAoJHR5cGVpZCA+IDk5KSB7DQogICAgICAgICAgICBpZiAoaXNzZXQoJHRoaXMtPnBvc3R0eXBlWyR0eXBlaWRdKSkgew0KICAgICAgICAgICAgICAgICR0aGlzLT5TaG93RXJyb3IoODcsIF9fRklMRV9fLCBfX0xJTkVfXyk7DQogICAgICAgICAgICB9DQoNCiAgICAgICAgfQ0KICAgICAgICAkdGhpcy0+cG9zdHR5cGVbJHR5cGVpZF0gPSBhcnJheSgkbmFtZSwgJHVybHJ1bGUsICR0ZW1wbGF0ZSk7DQogICAgfQ0KICAgIHB1YmxpYyBmdW5jdGlvbiBHZXRQb3N0VHlwZV9OYW1lKCR0eXBlaWQpIHsNCiAgICAgICAgaWYgKGlzc2V0KCR0aGlzLT5wb3N0dHlwZVskdHlwZWlkXSkpIHsNCiAgICAgICAgICAgIHJldHVybiAkdGhpcy0+cG9zdHR5cGVbJHR5cGVpZF1bMF07DQogICAgICAgIH0NCg0KICAgICAgICByZXR1cm4gJyc7DQogICAgfQ0KICAgIHB1YmxpYyBmdW5jdGlvbiBHZXRQb3N0VHlwZV9VcmxSdWxlKCR0eXBlaWQpIHsNCiAgICAgICAgaWYgKGlzc2V0KCR0aGlzLT5wb3N0dHlwZVskdHlwZWlkXSkpIHsNCiAgICAgICAgICAgIHJldHVybiAkdGhpcy0+cG9zdHR5cGVbJHR5cGVpZF1bMV07DQogICAgICAgIH0NCg0KICAgICAgICByZXR1cm4gJHRoaXMtPm9wdGlvblsnWkNfUEFHRV9SRUdFWCddOw0KICAgIH0NCiAgICBwdWJsaWMgZnVuY3Rpb24gR2V0UG9zdFR5cGVfVGVtcGxhdGUoJHR5cGVpZCkgew0KICAgICAgICBpZiAoaXNzZXQoJHRoaXMtPnBvc3R0eXBlWyR0eXBlaWRdKSkgew0KICAgICAgICAgICAgcmV0dXJuICR0aGlzLT5wb3N0dHlwZVskdHlwZWlkXVsyXTsNCiAgICAgICAgfQ0KDQogICAgICAgIHJldHVybiAnc2luZ2xlJzsNCiAgICB9DQoNCiAgICAvKioNCiAgICAgKiDms6jlhoxBY3Rpb24NCiAgICAgKi8NCiAgICBwdWJsaWMgZnVuY3Rpb24gUmVnQWN0aW9uKCRuYW1lLCAkbGV2ZWwsICR0aXRsZSkgew0KICAgICAgICAkdGhpcy0+YWN0aW9uc1skbmFtZV0gPSAkbGV2ZWw7DQogICAgICAgICR0aGlzLT5sYW5nWydhY3Rpb25zJ11bJG5hbWVdID0gJHRpdGxlOw0KICAgIH0NCiAgICBwdWJsaWMgZnVuY3Rpb24gR2V0QWN0aW9uX1RpdGxlKCRuYW1lKSB7DQogICAgICAgIGlmIChpc3NldCgkdGhpcy0+bGFuZ1snYWN0aW9ucyddWyRuYW1lXSkpIHsNCiAgICAgICAgICAgIHJldHVybiAkdGhpcy0+bGFuZ1snYWN0aW9ucyddWyRuYW1lXTsNCiAgICAgICAgfQ0KDQogICAgICAgIHJldHVybiAkbmFtZTsNCiAgICB9DQp9DQo=</file>
	<file name='zb_system\function\lib\module.php' crc32='26CEE292'  dt:dt='bin.base64'>PD9waHANCi8qKg0KICog5qih5Z2X57G7DQogKg0KICogQHBhY2thZ2UgWi1CbG9nUEhQDQogKiBAc3VicGFja2FnZSBDbGFzc0xpYi9Nb2R1bGUg57G75bqTDQogKi8NCmNsYXNzIE1vZHVsZSBleHRlbmRzIEJhc2Ugew0KDQogICAgLyoqDQogICAgICog5p6E6YCg5Ye95pWwDQogICAgICovDQogICAgcHVibGljIGZ1bmN0aW9uIF9fY29uc3RydWN0KCkgew0KICAgICAgICBnbG9iYWwgJHpicDsNCiAgICAgICAgcGFyZW50OjpfX2NvbnN0cnVjdCgkemJwLT50YWJsZVsnTW9kdWxlJ10sICR6YnAtPmRhdGFpbmZvWydNb2R1bGUnXSwgX19DTEFTU19fKTsNCiAgICB9DQoNCiAgICAvKioNCiAgICAgKiDorr7nva7lj4LmlbDlgLwNCiAgICAgKiBAcGFyYW0gc3RyaW5nICRuYW1lDQogICAgICogQHBhcmFtIG1peGVkICR2YWx1ZQ0KICAgICAqIEByZXR1cm4gbnVsbA0KICAgICAqLw0KICAgIHB1YmxpYyBmdW5jdGlvbiBfX3NldCgkbmFtZSwgJHZhbHVlKSB7DQogICAgICAgIGdsb2JhbCAkemJwOw0KICAgICAgICBpZiAoJG5hbWUgPT0gJ1NvdXJjZVR5cGUnKSB7DQogICAgICAgICAgICByZXR1cm4gbnVsbDsNCiAgICAgICAgfQ0KICAgICAgICBpZiAoJG5hbWUgPT0gJ05vUmVmcmVzaCcpIHsNCiAgICAgICAgICAgIGlmICgoYm9vbCkgJHZhbHVlKSB7DQogICAgICAgICAgICAgICAgJHRoaXMtPk1ldGFzLT5ub3JlZnJlc2ggPSAoYm9vbCkgJHZhbHVlOw0KICAgICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgICAgICAkdGhpcy0+TWV0YXMtPkRlbCgnbm9yZWZyZXNoJyk7DQogICAgICAgICAgICB9DQoNCiAgICAgICAgICAgIHJldHVybiBudWxsOw0KICAgICAgICB9DQogICAgICAgIHBhcmVudDo6X19zZXQoJG5hbWUsICR2YWx1ZSk7DQogICAgfQ0KDQogICAgLyoqDQogICAgICog6I635Y+W5Y+C5pWw5YC8DQogICAgICogQHBhcmFtICRuYW1lDQogICAgICogQHJldHVybiBib29sfG1peGVkfHN0cmluZw0KICAgICAqLw0KICAgIHB1YmxpYyBmdW5jdGlvbiBfX2dldCgkbmFtZSkgew0KICAgICAgICBnbG9iYWwgJHpicDsNCiAgICAgICAgaWYgKCRuYW1lID09ICdTb3VyY2VUeXBlJykgew0KICAgICAgICAgICAgaWYgKCR0aGlzLT5Tb3VyY2UgPT0gJ3N5c3RlbScpIHsNCiAgICAgICAgICAgICAgICByZXR1cm4gJ3N5c3RlbSc7DQogICAgICAgICAgICB9IGVsc2VpZiAoJHRoaXMtPlNvdXJjZSA9PSAndXNlcicpIHsNCiAgICAgICAgICAgICAgICByZXR1cm4gJ3VzZXInOw0KICAgICAgICAgICAgfSBlbHNlaWYgKCR0aGlzLT5Tb3VyY2UgPT0gJ3RoZW1lJykgew0KICAgICAgICAgICAgICAgIHJldHVybiAndGhlbWUnOw0KICAgICAgICAgICAgfSBlbHNlaWYgKCR0aGlzLT5Tb3VyY2UgPT0gJ3BsdWdpbl8nIC4gJHpicC0+dGhlbWUpIHsNCiAgICAgICAgICAgICAgICByZXR1cm4gJ3RoZW1lJzsNCiAgICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICAgICAgcmV0dXJuICdwbHVnaW4nOw0KICAgICAgICAgICAgfQ0KICAgICAgICB9DQogICAgICAgIGlmICgkbmFtZSA9PSAnTm9SZWZyZXNoJykgew0KICAgICAgICAgICAgcmV0dXJuIChib29sKSAkdGhpcy0+TWV0YXMtPm5vcmVmcmVzaDsNCiAgICAgICAgfQ0KICAgICAgICBpZiAoJG5hbWUgPT0gJ05hbWUnICYmICR0aGlzLT5Tb3VyY2UgPT0gJ3N5c3RlbScpIHsNCiAgICAgICAgICAgIHN3aXRjaCAoJHRoaXMtPkZpbGVOYW1lKSB7DQogICAgICAgICAgICAgICAgY2FzZSAnY2FsZW5kYXInOg0KICAgICAgICAgICAgICAgICAgICByZXR1cm4gJHpicC0+bGFuZ1snbXNnJ11bJ2NhbGVuZGFyJ107DQogICAgICAgICAgICAgICAgY2FzZSAnY29udHJvbHBhbmVsJzoNCiAgICAgICAgICAgICAgICAgICAgcmV0dXJuICR6YnAtPmxhbmdbJ21zZyddWydjb250cm9sX3BhbmVsJ107DQogICAgICAgICAgICAgICAgY2FzZSAnc2VhcmNocGFuZWwnOg0KICAgICAgICAgICAgICAgICAgICByZXR1cm4gJHpicC0+bGFuZ1snbXNnJ11bJ3NlYXJjaCddOw0KICAgICAgICAgICAgICAgIGRlZmF1bHQ6DQogICAgICAgICAgICAgICAgICAgIHJldHVybiAkemJwLT5sYW5nWydtc2cnXVsnbW9kdWxlXycuJHRoaXMtPkZpbGVOYW1lXTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgfQ0KDQogICAgICAgIHJldHVybiBwYXJlbnQ6Ol9fZ2V0KCRuYW1lKTsNCiAgICB9DQoNCiAgICAvKioNCiAgICAgKiBAcmV0dXJuIGJvb2wNCiAgICAgKi8NCiAgICBwdWJsaWMgZnVuY3Rpb24gU2F2ZSgpIHsNCiAgICAgICAgZ2xvYmFsICR6YnA7DQoNCiAgICAgICAgJHRoaXMtPkNvbnRlbnQgPSBzdHJfcmVwbGFjZSgkemJwLT5ob3N0LCAneyRob3N0fScsICR0aGlzLT5Db250ZW50KTsNCg0KICAgICAgICBmb3JlYWNoICgkR0xPQkFMU1snaG9va3MnXVsnRmlsdGVyX1BsdWdpbl9Nb2R1bGVfU2F2ZSddIGFzICRmcG5hbWUgPT4gJiRmcHNpZ25hbCkgew0KICAgICAgICAgICAgJGZwc2lnbmFsID0gUExVR0lOX0VYSVRTSUdOQUxfTk9ORTsNCiAgICAgICAgICAgICRmcHJldHVybiA9ICRmcG5hbWUoJHRoaXMpOw0KICAgICAgICAgICAgaWYgKCRmcHNpZ25hbCA9PSBQTFVHSU5fRVhJVFNJR05BTF9SRVRVUk4pIHtyZXR1cm4gJGZwcmV0dXJuO30NCiAgICAgICAgfQ0KICAgICAgICBpZiAoJHRoaXMtPlNvdXJjZSA9PSAndGhlbWUnKSB7DQogICAgICAgICAgICBpZiAoISR0aGlzLT5GaWxlTmFtZSkgew0KICAgICAgICAgICAgICAgIHJldHVybiB0cnVlOw0KICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICAkYyA9ICR0aGlzLT5Db250ZW50Ow0KICAgICAgICAgICAgJGQgPSAkemJwLT51c2Vyc2RpciAuICd0aGVtZS8nIC4gJHpicC0+dGhlbWUgLiAnL2luY2x1ZGUvJzsNCiAgICAgICAgICAgICRmID0gJGQgLiAkdGhpcy0+RmlsZU5hbWUgLiAnLnBocCc7DQogICAgICAgICAgICBpZiAoIWZpbGVfZXhpc3RzKCRkKSkgew0KICAgICAgICAgICAgICAgIEBta2RpcigkZCwgMDc1NSk7DQogICAgICAgICAgICB9DQogICAgICAgICAgICBAZmlsZV9wdXRfY29udGVudHMoJGYsICRjKTsNCg0KICAgICAgICAgICAgcmV0dXJuIHRydWU7DQogICAgICAgIH0NCiAgICAgICAgLy9yZXR1cm4gcGFyZW50OjpTYXZlKCk7DQogICAgICAgIC8v6ZiyTW9kdWxl6YeN5aSN5L+d5a2Y55qE5py65Yi2DQogICAgICAgICRtPSR6YnAtPkdldExpc3RUeXBlKCdNb2R1bGUnLA0KICAgICAgICAgICAgICAgICAgICAkemJwLT5kYi0+c3FsLT5nZXQoKS0+c2VsZWN0KCR6YnAtPnRhYmxlWydNb2R1bGUnXSkNCiAgICAgICAgICAgICAgICAgICAgLT53aGVyZShhcnJheSgnPScsICR6YnAtPmRhdGFpbmZvWydNb2R1bGUnXVsnRmlsZU5hbWUnXVswXSwgJHRoaXMtPkZpbGVOYW1lKSkNCiAgICAgICAgICAgICAgICAgICAgLT5zcWwNCiAgICAgICAgICAgICAgICApOw0KICAgICAgICBpZihjb3VudCgkbSk8MSl7DQogICAgICAgICAgICByZXR1cm4gcGFyZW50OjpTYXZlKCk7DQogICAgICAgIH1lbHNlew0KICAgICAgICAgICAgaWYoJHRoaXMtPklEPT0wKXsNCiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7DQogICAgICAgICAgICB9DQogICAgICAgICAgICByZXR1cm4gcGFyZW50OjpTYXZlKCk7DQogICAgICAgIH0NCiAgICB9DQoNCiAgICAvKioNCiAgICAgKiBAcmV0dXJuIGJvb2wNCiAgICAgKi8NCiAgICBwdWJsaWMgZnVuY3Rpb24gRGVsKCkgew0KICAgICAgICBnbG9iYWwgJHpicDsNCiAgICAgICAgZm9yZWFjaCAoJEdMT0JBTFNbJ2hvb2tzJ11bJ0ZpbHRlcl9QbHVnaW5fTW9kdWxlX0RlbCddIGFzICRmcG5hbWUgPT4gJiRmcHNpZ25hbCkgew0KICAgICAgICAgICAgJGZwc2lnbmFsID0gUExVR0lOX0VYSVRTSUdOQUxfTk9ORTsNCiAgICAgICAgICAgICRmcHJldHVybiA9ICRmcG5hbWUoJHRoaXMpOw0KICAgICAgICAgICAgaWYgKCRmcHNpZ25hbCA9PSBQTFVHSU5fRVhJVFNJR05BTF9SRVRVUk4pIHtyZXR1cm4gJGZwcmV0dXJuO30NCiAgICAgICAgfQ0KICAgICAgICBpZiAoJHRoaXMtPlNvdXJjZSA9PSAndGhlbWUnKSB7DQogICAgICAgICAgICBpZiAoISR0aGlzLT5GaWxlTmFtZSkgew0KICAgICAgICAgICAgICAgIHJldHVybiB0cnVlOw0KICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICAkZiA9ICR6YnAtPnVzZXJzZGlyIC4gJ3RoZW1lLycgLiAkemJwLT50aGVtZSAuICcvaW5jbHVkZS8nIC4gJHRoaXMtPkZpbGVOYW1lIC4gJy5waHAnOw0KICAgICAgICAgICAgaWYgKGZpbGVfZXhpc3RzKCRmKSkgew0KICAgICAgICAgICAgICAgIEB1bmxpbmsoJGYpOw0KICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICByZXR1cm4gdHJ1ZTsNCiAgICAgICAgfQ0KDQogICAgICAgIHJldHVybiBwYXJlbnQ6OkRlbCgpOw0KICAgIH0NCg0KICAgIHB1YmxpYyBmdW5jdGlvbiBCdWlsZCgpIHsNCg0KICAgICAgICBpZiAoJHRoaXMtPk5vUmVmcmVzaCA9PSB0cnVlKSB7DQogICAgICAgICAgICByZXR1cm47DQogICAgICAgIH0NCg0KICAgICAgICBpZiAoaXNzZXQoTW9kdWxlQnVpbGRlcjo6JExpc3RbJHRoaXMtPkZpbGVOYW1lXSkpIHsNCiAgICAgICAgICAgIGlmKGlzc2V0KE1vZHVsZUJ1aWxkZXI6OiRMaXN0WyR0aGlzLT5GaWxlTmFtZV1bJ2Z1bmN0aW9uJ10pKXsNCiAgICAgICAgICAgICAgICBpZihpc3NldChNb2R1bGVCdWlsZGVyOjokTGlzdFskdGhpcy0+RmlsZU5hbWVdWydwYXJhbWV0ZXJzJ10pKXsNCiAgICAgICAgICAgICAgICAgICAgJHRoaXMtPkNvbnRlbnQgPSBjYWxsX3VzZXJfZnVuYyhNb2R1bGVCdWlsZGVyOjokTGlzdFskdGhpcy0+RmlsZU5hbWVdWydmdW5jdGlvbiddLCBNb2R1bGVCdWlsZGVyOjokTGlzdFskdGhpcy0+RmlsZU5hbWVdWydwYXJhbWV0ZXJzJ10pOw0KICAgICAgICAgICAgICAgIH1lbHNlew0KICAgICAgICAgICAgICAgICAgICAkdGhpcy0+Q29udGVudCA9IGNhbGxfdXNlcl9mdW5jKE1vZHVsZUJ1aWxkZXI6OiRMaXN0WyR0aGlzLT5GaWxlTmFtZV1bJ2Z1bmN0aW9uJ10pOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgDQogICAgICAgICAgICB9DQoNCiAgICAgICAgfQ0KICAgIH0NCg0KfQ0K</file>
	<file name='zb_system\function\lib\sqlglobal.php' crc32='98037945'  dt:dt='bin.base64'>PD9waHANCmNsYXNzIFNRTEdsb2JhbCB7DQoNCiAgICBwcml2YXRlICRfc3FsID0gYXJyYXkoKTsNCiAgICBwcm90ZWN0ZWQgJG9wdGlvbiA9IGFycmF5KA0KICAgICAgICAnd2hlcmVLZXl3b3JkJyA9PiAnV0hFUkUnLA0KICAgICk7DQogICAgcHJvdGVjdGVkICRtZXRob2QgPSAnU0VMRUNUJzsNCiAgICBwcm90ZWN0ZWQgJHRhYmxlID0gYXJyYXkoKTsNCiAgICBwcm90ZWN0ZWQgJGRhdGEgPSBhcnJheSgpOw0KICAgIHByb3RlY3RlZCAkY29sdW1ucyA9IGFycmF5KCk7DQogICAgcHJvdGVjdGVkICR3aGVyZSA9IGFycmF5KCk7DQogICAgcHJvdGVjdGVkICRqb2luID0gYXJyYXkoKTsNCiAgICBwcm90ZWN0ZWQgJG9yZGVyQnkgPSBhcnJheSgpOw0KICAgIHByb3RlY3RlZCAkZ3JvdXBCeSA9IGFycmF5KCk7DQogICAgcHJvdGVjdGVkICRoYXZpbmcgPSBhcnJheSgpOw0KICAgIHByb3RlY3RlZCAkaW5kZXggPSBhcnJheSgpOw0KICAgIHByaXZhdGUgJG1ldGhvZEtleXdvcmQgPSBhcnJheSgnU0VMRUNUJywgJ0lOU0VSVCcsICdEUk9QJywgJ0RFTEVURScsICdDUkVBVEUnLCAnVVBEQVRFJyk7DQogICAgcHJpdmF0ZSAkc2VsZWN0RnVuY3Rpb25LZXl3b3JkID0gYXJyYXkoJ0NPVU5UJywgJ01JTicsICdNQVgnLCAnU1VNJyk7DQogICAgcHJpdmF0ZSAkb3RoZXJLZXl3b3JkID0gYXJyYXkoJ0ZJRUxEJywgJ0lOREVYJyk7DQoNCiAgICAvKioNCiAgICAgKiBAdmFyIG51bGwg5pWw5o2u5bqT6L+e5o6l5a6e5L6LDQogICAgICovDQogICAgcHJpdmF0ZSAkZGIgPSBudWxsOw0KICAgIC8qKg0KICAgICAqIEB2YXIgbnVsbHxzdHJpbmcg5pWw5o2u5bqT57G75Z6L5ZCN56ewDQogICAgICovDQogICAgcHJpdmF0ZSAkZGJjbGFzcyA9IG51bGw7DQoNCiAgICBwcml2YXRlIGZ1bmN0aW9uIHZhbGlkYXRlUGFyYW1hdGVyKCRwYXJhbSkgew0KICAgICAgICBpZiAoaXNfbnVsbCgkcGFyYW0pKSB7DQogICAgICAgICAgICByZXR1cm4gZmFsc2U7DQogICAgICAgIH0gZWxzZWlmIChpc19zdHJpbmcoJHBhcmFtKSkgew0KICAgICAgICAgICAgaWYgKCRwYXJhbSA9PSAiIikgew0KICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgfSBlbHNlaWYgKGlzX2FycmF5KCRwYXJhbSkgJiYgY291bnQoJHBhcmFtKSA9PSAwKSB7DQogICAgICAgICAgICByZXR1cm4gZmFsc2U7DQogICAgICAgIH0NCg0KICAgICAgICByZXR1cm4gdHJ1ZTsNCiAgICB9DQoNCiAgICAvKioNCiAgICAgKiBAcGFyYW0gb2JqZWN0ICRkYg0KICAgICAqLw0KICAgIHB1YmxpYyBmdW5jdGlvbiBfX2NvbnN0cnVjdCgmJGRiID0gbnVsbCkgew0KICAgICAgICAkdGhpcy0+ZGIgPSAmJGRiOw0KICAgICAgICAkdGhpcy0+ZGJjbGFzcyA9IGdldF9jbGFzcygkdGhpcy0+ZGIpOw0KICAgIH0NCg0KICAgIHB1YmxpYyBmdW5jdGlvbiBfX2NhbGwoJGNhbGxOYW1lLCAkYXJndSkgew0KICAgICAgICAkdXBwZXJLZXl3b3JkID0gc3RydG91cHBlcigkY2FsbE5hbWUpOw0KICAgICAgICBpZiAoaW5fYXJyYXkoJHVwcGVyS2V5d29yZCwgJHRoaXMtPm1ldGhvZEtleXdvcmQpKSB7DQogICAgICAgICAgICAkdGhpcy0+bWV0aG9kID0gJHVwcGVyS2V5d29yZDsNCiAgICAgICAgICAgICR0aGlzLT50YWJsZSA9IGlzX2FycmF5KCRhcmd1WzBdKSA/ICRhcmd1WzBdIDogJGFyZ3U7DQogICAgICAgICAgICAkdGhpcy0+dGFibGUgPSBzdHJfcmVwbGFjZSgnJXByZSUnLCAkdGhpcy0+ZGItPmRicHJlLCAkdGhpcy0+dGFibGUpOw0KDQogICAgICAgICAgICByZXR1cm4gJHRoaXM7DQogICAgICAgIH0gZWxzZWlmIChpbl9hcnJheSgkdXBwZXJLZXl3b3JkLCAkdGhpcy0+b3RoZXJLZXl3b3JkKSkgew0KICAgICAgICAgICAgaWYgKCR1cHBlcktleXdvcmQgPT0gJ0lOREVYJykgew0KICAgICAgICAgICAgICAgIGZvcmVhY2ggKCRhcmd1IGFzICRrZXkgPT4gJHZhbHVlKSB7DQogICAgICAgICAgICAgICAgICAgIC8vaXNfYXJyYXkoJGFyZ3VbMF0pID8gJGFyZ3VbMF0gOiAkYXJndTsNCiAgICAgICAgICAgICAgICAgICAgJHRoaXMtPmluZGV4W2tleSgkdmFsdWUpXSA9IGN1cnJlbnQoJHZhbHVlKTsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9DQogICAgICAgICAgICAvLyBAY29kZUNvdmVyYWdlSWdub3JlU3RhcnQNCiAgICAgICAgICAgIGVsc2Ugew0KICAgICAgICAgICAgICAgICR0aGlzLT5kYXRhID0gaXNfYXJyYXkoJGFyZ3VbMF0pID8gJGFyZ3VbMF0gOiAkYXJndTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIC8vIEBjb2RlQ292ZXJhZ2VJZ25vcmVFbmQNCg0KICAgICAgICAgICAgcmV0dXJuICR0aGlzOw0KICAgICAgICB9IGVsc2VpZiAoaW5fYXJyYXkoJHVwcGVyS2V5d29yZCwgJHRoaXMtPnNlbGVjdEZ1bmN0aW9uS2V5d29yZCkpIHsNCiAgICAgICAgICAgIC8qKg0KICAgICAgICAgICAgICogQ291bnQNCiAgICAgICAgICAgICAqIEBleGFtcGxlIGNvdW50KCdsb2dfSUQnKQ0KICAgICAgICAgICAgICogQGV4YW1wbGUgY291bnQoJ2xvZ19JRCcsICdjb3VudExvZ0lkJykNCiAgICAgICAgICAgICAqIEBleGFtcGxlIGNvdW50KGFycmF5KCdsb2dfSWQnLCAnY291bnRMb2dJZCcpKQ0KICAgICAgICAgICAgICogQHJldHVybiBbdHlwZV0gW2Rlc2NyaXB0aW9uXQ0KICAgICAgICAgICAgICovDQogICAgICAgICAgICBpZiAoY291bnQoJGFyZ3UpID09IDEpIHsNCiAgICAgICAgICAgICAgICAkYXJnID0gJGFyZ3VbMF07DQogICAgICAgICAgICAgICAgaWYgKGlzX3N0cmluZygkYXJnKSkgew0KICAgICAgICAgICAgICAgICAgICAkdGhpcy0+Y29sdW1uc1tdID0gIiR1cHBlcktleXdvcmQoJGFyZykiOw0KICAgICAgICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICAgICAgICAgICR0aGlzLT5jb2x1bW5zW10gPSAiJHVwcGVyS2V5d29yZCgkYXJnWzBdKSBBUyAkYXJnWzFdIjsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgICAgICR0aGlzLT5jb2x1bW5zW10gPSAiJHVwcGVyS2V5d29yZCgkYXJndVswXSkgQVMgJGFyZ3VbMV0iOw0KICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICByZXR1cm4gJHRoaXM7DQogICAgICAgIH0NCiAgICAgICAgLy8gQGNvZGVDb3ZlcmFnZUlnbm9yZVN0YXJ0DQogICAgICAgIGVsc2Ugew0KICAgICAgICAgICAgJGxvd2VyS2V5d29yZCA9IHN0cnRvbG93ZXIoJGNhbGxOYW1lKTsNCiAgICAgICAgICAgIGlmIChpc19jYWxsYWJsZSgkdGhpcywgJGxvd2VyS2V5d29yZCkpIHsNCiAgICAgICAgICAgICAgICByZXR1cm4gY2FsbF91c2VyX2Z1bmNfYXJyYXkoYXJyYXkoJHRoaXMsICRsb3dlcktleXdvcmQpLCAkYXJndSk7DQogICAgICAgICAgICB9DQogICAgICAgIH0NCiAgICAgICAgLy8gQGNvZGVDb3ZlcmFnZUlnbm9yZUVuZA0KICAgICAgICB0aHJvdyBuZXcgRXhjZXB0aW9uKCJVbmltcGxlbWVudGVkICRjYWxsTmFtZSIpOw0KICAgICAgICANCiAgICB9DQogICAgcHVibGljIGZ1bmN0aW9uIF9fZ2V0KCRnZXROYW1lKSB7DQogICAgICAgICR1cHBlcktleXdvcmQgPSBzdHJ0b3VwcGVyKCRnZXROYW1lKTsNCiAgICAgICAgaWYgKCR1cHBlcktleXdvcmQgPT0gIlNRTCIpIHsNCiAgICAgICAgICAgICRyZXQgPSAkdGhpcy0+c3FsKCk7DQogICAgICAgICAgICAkdGhpcy0+cmVzZXQoKTsNCg0KICAgICAgICAgICAgcmV0dXJuICRyZXQ7DQogICAgICAgIH0NCg0KICAgICAgICByZXR1cm4gJHRoaXMtPiRnZXROYW1lOw0KICAgIH0NCiAgICBwdWJsaWMgZnVuY3Rpb24gX19zZXQoJG5hbWUsICR2YWx1ZSkgew0KICAgICAgICBpZiAoaXNzZXQoJHRoaXMtPiRuYW1lKSkgew0KICAgICAgICAgICAgJHRoaXMtPiRuYW1lID0gJHZhbHVlOw0KICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgdGhyb3cgJ1Vua25vd24gYXR0cmlidXRlOiAnIC4gJG5hbWU7DQogICAgICAgIH0NCiAgICB9DQogICAgLyoqDQogICAgICogSWYgd2UgdXNlICR0aGlzLT4kZ2V0TmFtZSBkaXJlY3RseSwgUEhQIHdpbGwgdGhyb3cgW0luZGlyZWN0IG1vZGlmaWNhdGlvbiBvZiBvdmVybG9hZGVkIHByb3BlcnR5XQ0KICAgICAqIFNvIHdlIGhhdmUgdG8gd3JhcCBpdC4NCiAgICAgKiBJdCBtYXliZSBhIGJ1ZyBvZiBQSFAuDQogICAgICogQHNlZSAgaHR0cDovL3N0YWNrb3ZlcmZsb3cuY29tL3F1ZXN0aW9ucy8xMDQ1NDc3OS9waHAtaW5kaXJlY3QtbW9kaWZpY2F0aW9uLW9mLW92ZXJsb2FkZWQtcHJvcGVydHkNCiAgICAgKi8NCiAgICBwdWJsaWMgZnVuY3Rpb24gX3NxbFB1c2goJHNxbCkgew0KICAgICAgICAkdGhpcy0+X3NxbFtdID0gJHNxbDsNCiAgICB9DQogICAgLyoqDQogICAgICogUmUtaW5pdGlhbGl6ZSB0aGlzIGNsYXNzDQogICAgICogQHJldHVybiAkdGhpcw0KICAgICAqLw0KICAgIHB1YmxpYyBmdW5jdGlvbiByZXNldCgpIHsNCiAgICAgICAgZm9yZWFjaCAoZ2V0X2NsYXNzX3ZhcnMoZ2V0X2NsYXNzKCR0aGlzKSkgYXMgJHZhciA9PiAkZGVmVmFsKSB7DQogICAgICAgICAgICBpZiAoJHZhciA9PSAiZGIiIHx8ICR2YXIgPT0gImRiY2xhc3MiKSB7DQogICAgICAgICAgICAgICAgY29udGludWU7DQogICAgICAgICAgICB9DQogICAgICAgICAgICAkdGhpcy0+JHZhciA9ICRkZWZWYWw7DQogICAgICAgIH0NCg0KICAgICAgICByZXR1cm4gJHRoaXM7DQogICAgfQ0KICAgIC8qKg0KICAgICAqIFNldCBTUUwgcXVlcnkgb3B0aW9uDQogICAgICogQHJldHVybiAkdGhpcw0KICAgICAqLw0KICAgIHB1YmxpYyBmdW5jdGlvbiBvcHRpb24oJG9wdGlvbikgew0KICAgICAgICBpZiAoISR0aGlzLT52YWxpZGF0ZVBhcmFtYXRlcigkb3B0aW9uKSkgew0KICAgICAgICAgICAgcmV0dXJuICR0aGlzOw0KICAgICAgICB9DQoNCiAgICAgICAgJHRoaXMtPm9wdGlvbiA9IGFycmF5X21lcmdlX3JlY3Vyc2l2ZSgkdGhpcy0+b3B0aW9uLCBhcnJheV9jaGFuZ2Vfa2V5X2Nhc2UoJG9wdGlvbiwgQ0FTRV9MT1dFUikpOw0KDQogICAgICAgIHJldHVybiAkdGhpczsNCiAgICB9DQoNCiAgICBwcm90ZWN0ZWQgZnVuY3Rpb24gY29sdW1uTG9hZGVyQXJyYXkoJGNvbHVtbnMpIHsNCiAgICAgICAgZm9yZWFjaCAoJGNvbHVtbnMgYXMgJGNvbHVtbikgew0KICAgICAgICAgICAgaWYgKGlzX2FycmF5KCRjb2x1bW4pKSB7DQogICAgICAgICAgICAgICAgaWYgKGNvdW50KCRjb2x1bW4pID4gMSkgew0KICAgICAgICAgICAgICAgICAgICAkdGhpcy0+Y29sdW1uc1tdID0gIiRjb2x1bW5bMF0gQVMgJGNvbHVtblsxXSI7DQogICAgICAgICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgICAgICAgICAgJHRoaXMtPmNvbHVtbnNbXSA9ICRjb2x1bW5bMF07DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgICAgICAkdGhpcy0+Y29sdW1uc1tdID0gJGNvbHVtbjsNCiAgICAgICAgICAgIH0NCiAgICAgICAgfQ0KICAgIH0NCiAgICAvKioNCiAgICAgKiBTZXQgY29sdW1uIGZvciBxdWVyeQ0KICAgICAqIEByZXR1cm4gJHRoaXMNCiAgICAgKi8NCiAgICBwdWJsaWMgZnVuY3Rpb24gY29sdW1uKCRjb2x1bW5zKSB7DQogICAgICAgIGlmICghJHRoaXMtPnZhbGlkYXRlUGFyYW1hdGVyKCRjb2x1bW5zKSkgew0KICAgICAgICAgICAgcmV0dXJuICR0aGlzOw0KICAgICAgICB9DQogICAgICAgICRudW1zID0gZnVuY19udW1fYXJncygpOw0KICAgICAgICBpZiAoJG51bXMgPT0gMSkgew0KICAgICAgICAgICAgaWYgKGlzX2FycmF5KCRjb2x1bW5zKSkgew0KICAgICAgICAgICAgICAgIGlmIChjb3VudCgkY29sdW1ucykgPT0gMikgew0KICAgICAgICAgICAgICAgICAgICBpZiAoaXNfc3RyaW5nKCRjb2x1bW5zWzFdKSkgew0KICAgICAgICAgICAgICAgICAgICAgICAgJHRoaXMtPmNvbHVtbnNbXSA9ICIkY29sdW1uc1swXSBBUyAkY29sdW1uc1sxXSI7DQogICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICAgICAgICAgICAgICAkdGhpcy0+Y29sdW1uTG9hZGVyQXJyYXkoJGNvbHVtbnMpOw0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgfSBlbHNlaWYgKGNvdW50KCRjb2x1bW5zKSA9PSAxKSB7DQogICAgICAgICAgICAgICAgICAgICR0aGlzLT5jb2x1bW5zW10gPSAiJGNvbHVtbnNbMF0iOw0KICAgICAgICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICAgICAgICAgICR0aGlzLT5jb2x1bW5Mb2FkZXJBcnJheSgkY29sdW1ucyk7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgICAgICAkdGhpcy0+Y29sdW1uc1tdID0gJGNvbHVtbnM7DQogICAgICAgICAgICB9DQogICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICAkdGhpcy0+Y29sdW1uTG9hZGVyQXJyYXkoZnVuY19nZXRfYXJncygpKTsNCiAgICAgICAgfQ0KDQoNCg0KICAgICAgICByZXR1cm4gJHRoaXM7DQogICAgfQ0KICAgIC8qKg0KICAgICAqIFNldCBsaW1pdCAmIG9mZnNldA0KICAgICAqIEBleGFtcGxlIGxpbWl0KDUpDQogICAgICogQGV4YW1wbGUgbGltaXQoMTAsIDEpDQogICAgICogQGV4YW1wbGUgbGltaXQoYXJyYXkoMTAsIDEpKQ0KICAgICAqLw0KICAgIHB1YmxpYyBmdW5jdGlvbiBsaW1pdCgpIHsNCg0KICAgICAgICBpZiAoZnVuY19udW1fYXJncygpID09IDIpIHsNCiAgICAgICAgICAgICR0aGlzLT5vcHRpb25bJ2xpbWl0J10gPSBmdW5jX2dldF9hcmcoMSk7DQogICAgICAgICAgICAkdGhpcy0+b3B0aW9uWydvZmZzZXQnXSA9IGZ1bmNfZ2V0X2FyZygwKTsNCiAgICAgICAgfSBlbHNlaWYgKGZ1bmNfbnVtX2FyZ3MoKSA9PSAxKSB7DQogICAgICAgICAgICAkYXJnID0gZnVuY19nZXRfYXJnKDApOw0KDQogICAgICAgICAgICBpZiAoISR0aGlzLT52YWxpZGF0ZVBhcmFtYXRlcigkYXJnKSkgew0KICAgICAgICAgICAgICAgIHJldHVybiAkdGhpczsNCiAgICAgICAgICAgIH0gZWxzZWlmIChpc19hcnJheSgkYXJnKSkgew0KICAgICAgICAgICAgICAgIGlmIChjb3VudCgkYXJnKSA9PSAyKSB7DQogICAgICAgICAgICAgICAgICAgICR0aGlzLT5vcHRpb25bJ29mZnNldCddID0gJGFyZ1swXTsNCiAgICAgICAgICAgICAgICAgICAgJHRoaXMtPm9wdGlvblsnbGltaXQnXSA9ICRhcmdbMV07DQogICAgICAgICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgICAgICAgICAgJHRoaXMtPm9wdGlvblsnbGltaXQnXSA9ICRhcmdbMF07DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgICAgICAkdGhpcy0+b3B0aW9uWydsaW1pdCddID0gJGFyZzsNCiAgICAgICAgICAgIH0NCiAgICAgICAgfQ0KDQogICAgICAgIHJldHVybiAkdGhpczsNCiAgICB9DQogICAgLyoqDQogICAgICogU2V0IHdoZXJlIHF1ZXJ5DQogICAgICogQGV4YW1wbGUgYXJyYXkoYXJyYXkoJz0nLCAnYScsICdiJyksIGFycmF5KCc9JywgJ2EnLCAnYicpKQ0KICAgICAqIEBleGFtcGxlIGFycmF5KGFycmF5KCc9JywgJ2EnLCAnYicpKQ0KICAgICAqIEBleGFtcGxlIGFycmF5KCc9JywgJ2EnLCAnYicpLCBhcnJheSgnPScsICdhJywgJ2InKQ0KICAgICAqIEBleGFtcGxlIGFycmF5KCc9JywgJ2EnLCAnYicpDQogICAgICogQHJldHVybiAkdGhpcw0KICAgICAqLw0KICAgIHB1YmxpYyBmdW5jdGlvbiB3aGVyZSgpIHsNCiAgICAgICAgJHdoZXJlID0gZnVuY19udW1fYXJncygpID09IDEgPyBmdW5jX2dldF9hcmcoMCkgOiBmdW5jX2dldF9hcmdzKCk7DQogICAgICAgIGlmICghJHRoaXMtPnZhbGlkYXRlUGFyYW1hdGVyKCR3aGVyZSkpIHsNCiAgICAgICAgICAgIHJldHVybiAkdGhpczsNCiAgICAgICAgfQ0KDQogICAgICAgIGlmIChpc19hcnJheSgkd2hlcmVbMF0pKSB7DQogICAgICAgICAgICBpZiAoY291bnQoJHdoZXJlKSA9PSAxKSB7DQogICAgICAgICAgICAgICAgaWYgKGlzX2FycmF5KCR3aGVyZVswXVswXSkpIHsNCiAgICAgICAgICAgICAgICAgICAgJHdoZXJlID0gJHdoZXJlWzBdOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0NCiAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgICR3aGVyZSA9IGFycmF5KCR3aGVyZSk7DQogICAgICAgIH0NCiAgICAgICAgJHRoaXMtPndoZXJlID0gYXJyYXlfbWVyZ2VfcmVjdXJzaXZlKCR0aGlzLT53aGVyZSwgJHdoZXJlKTsNCg0KICAgICAgICByZXR1cm4gJHRoaXM7DQogICAgfQ0KICAgIC8qKg0KICAgICAqIFNldCBoYXZpbmcNCiAgICAgKiBAcmV0dXJuICR0aGlzDQogICAgICovDQogICAgcHVibGljIGZ1bmN0aW9uIGhhdmluZygkaGF2aW5nKSB7DQogICAgICAgIGlmICghJHRoaXMtPnZhbGlkYXRlUGFyYW1hdGVyKCRoYXZpbmcpKSB7DQogICAgICAgICAgICByZXR1cm4gJHRoaXM7DQogICAgICAgIH0gZWxzZWlmIChpc19hcnJheSgkaGF2aW5nKSkgew0KICAgICAgICAgICAgJHRoaXMtPmhhdmluZyA9IGFycmF5X21lcmdlKCR0aGlzLT5oYXZpbmcsICRoYXZpbmcpOw0KICAgICAgICB9IGVsc2VpZiAoZnVuY19udW1fYXJncygpID4gMSkgew0KICAgICAgICAgICAgJHRoaXMtPmhhdmluZyA9IGFycmF5X21lcmdlKCR0aGlzLT5oYXZpbmcsIGZ1bmNfZ2V0X2FyZ3MoKSk7DQogICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICAkdGhpcy0+aGF2aW5nW10gPSAkaGF2aW5nOw0KICAgICAgICB9DQoNCiAgICAgICAgcmV0dXJuICR0aGlzOw0KICAgIH0NCiAgICAvKioNCiAgICAgKiBHcm91cEJ5DQogICAgICogQHJldHVybiAkdGhpcw0KICAgICAqLw0KICAgIHB1YmxpYyBmdW5jdGlvbiBncm91cEJ5KCRncm91cEJ5KSB7DQogICAgICAgIGlmICghJHRoaXMtPnZhbGlkYXRlUGFyYW1hdGVyKCRncm91cEJ5KSkgew0KICAgICAgICAgICAgcmV0dXJuICR0aGlzOw0KICAgICAgICB9IGVsc2VpZiAoaXNfYXJyYXkoJGdyb3VwQnkpKSB7DQogICAgICAgICAgICAkdGhpcy0+Z3JvdXBCeSA9IGFycmF5X21lcmdlKCR0aGlzLT5ncm91cEJ5LCAkZ3JvdXBCeSk7DQogICAgICAgIH0gZWxzZWlmIChmdW5jX251bV9hcmdzKCkgPiAxKSB7DQogICAgICAgICAgICAkdGhpcy0+Z3JvdXBCeSA9IGFycmF5X21lcmdlKCR0aGlzLT5ncm91cEJ5LCBmdW5jX2dldF9hcmdzKCkpOw0KICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgJHRoaXMtPmdyb3VwQnlbXSA9ICRncm91cEJ5Ow0KICAgICAgICB9DQoNCiAgICAgICAgcmV0dXJuICR0aGlzOw0KICAgIH0NCiAgICAvKioNCiAgICAgKiBPcmRlciBieQ0KICAgICAqIEByZXR1cm4gICR0aGlzDQogICAgICovDQogICAgcHVibGljIGZ1bmN0aW9uIG9yZGVyQnkoKSB7DQogICAgICAgICRvcmRlciA9IGZ1bmNfZ2V0X2FyZ3MoKTsNCiAgICAgICAgaWYgKCEkdGhpcy0+dmFsaWRhdGVQYXJhbWF0ZXIoJG9yZGVyKSkgew0KICAgICAgICAgICAgcmV0dXJuICR0aGlzOw0KICAgICAgICB9DQogICAgICAgIGZvcmVhY2ggKCRvcmRlciBhcyAka2V5ID0+ICR2YWx1ZSkgew0KICAgICAgICAgICAgJHJldCA9ICR2YWx1ZTsNCiAgICAgICAgICAgIGlmICghJHRoaXMtPnZhbGlkYXRlUGFyYW1hdGVyKCRyZXQpKSB7DQogICAgICAgICAgICAgICAgY29udGludWU7DQogICAgICAgICAgICB9DQogICAgICAgICAgICBpZiAoIWlzX2FycmF5KCRyZXQpKSB7DQogICAgICAgICAgICAgICAgJHJldCA9IGFycmF5KCR2YWx1ZSA9PiAnJyk7DQogICAgICAgICAgICB9DQoNCiAgICAgICAgICAgICR0aGlzLT5vcmRlckJ5ID0gYXJyYXlfbWVyZ2VfcmVjdXJzaXZlKCR0aGlzLT5vcmRlckJ5LCAkcmV0KTsNCiAgICAgICAgfQ0KDQogICAgICAgIHJldHVybiAkdGhpczsNCiAgICB9DQogICAgLyoqDQogICAgICogU2V0IGRhdGEgZm9yIElOU0VSVCAmIFVQREFURQ0KICAgICAqIEBleGFtcGxlIGFycmF5KCdrZXknID0+ICd2YWx1ZScsICdrZXkyJyA9PiAndmFsdWUyJykNCiAgICAgKiBAcmV0dXJuICR0aGlzDQogICAgICovDQogICAgcHVibGljIGZ1bmN0aW9uIGRhdGEoKSB7DQogICAgICAgICRkYXRhID0gZnVuY19udW1fYXJncygpID09IDEgPyBmdW5jX2dldF9hcmcoMCkgOiBmdW5jX2dldF9hcmdzKCk7DQogICAgICAgIGlmICghJHRoaXMtPnZhbGlkYXRlUGFyYW1hdGVyKCRkYXRhKSkgew0KICAgICAgICAgICAgcmV0dXJuICR0aGlzOw0KICAgICAgICB9DQogICAgICAgICR0aGlzLT5kYXRhID0gYXJyYXlfbWVyZ2VfcmVjdXJzaXZlKCR0aGlzLT5kYXRhLCAkZGF0YSk7DQoNCiAgICAgICAgcmV0dXJuICR0aGlzOw0KICAgIH0NCiAgICAvKioNCiAgICAgKiBAdG9kbw0KICAgICAqLw0KICAgIHB1YmxpYyBmdW5jdGlvbiBleGlzdCgkdGFibGUpIHsNCiAgICAgICAgcmV0dXJuICR0aGlzLT5zcWwoKTsNCiAgICB9DQogICAgcHVibGljIGZ1bmN0aW9uIHF1ZXJ5KCRzcWwgPSBudWxsKSB7DQogICAgICAgIGlmIChpc19udWxsKCRzcWwpKSB7DQogICAgICAgICAgICAkc3FsID0gJHRoaXMtPnNxbCgpOw0KICAgICAgICB9DQoNCiAgICB9DQogICAgcHJpdmF0ZSBmdW5jdGlvbiBzcWwoKSB7DQoNCiAgICAgICAgJHNxbCA9ICYkdGhpcy0+X3NxbDsNCiAgICAgICAgaWYgKGNvdW50KCRzcWwpID09IDApIHsNCiAgICAgICAgICAgIA0KICAgICAgICAgICAgJHNxbCA9IGFycmF5KCIkdGhpcy0+bWV0aG9kIik7DQogICAgICAgICAgICAkY2FsbGFibGVNZXRob2QgPSAnYnVpbGQnIC4gdWNmaXJzdCgkdGhpcy0+bWV0aG9kKTsNCiAgICAgICAgICAgICR0aGlzLT4kY2FsbGFibGVNZXRob2QoKTsNCiAgICAgICAgfQ0KDQogICAgICAgIC8vbG9ncyhpbXBsb2RlKCcgJywgJHNxbCkgLiAiXHJcbiIpOw0KDQogICAgICAgIHJldHVybiBpbXBsb2RlKCcgJywgJHNxbCk7DQogICAgfQ0KDQogICAgcHJvdGVjdGVkIGZ1bmN0aW9uIGJ1aWxkVGFibGUoKSB7DQogICAgICAgICRzcWwgPSAmJHRoaXMtPl9zcWw7DQogICAgICAgICR0YWJsZSA9ICYkdGhpcy0+dGFibGU7DQogICAgICAgICR0YWJsZURhdGEgPSBhcnJheSgpOw0KDQogICAgICAgIC8vYXJyYXlfd2Fsaw0KICAgICAgICBmb3JlYWNoICgkdGFibGUgYXMgJGluZGV4ID0+ICR0YWJsZVZhbHVlKSB7DQogICAgICAgICAgICBpZiAoaXNfc3RyaW5nKCR0YWJsZVZhbHVlKSkgew0KICAgICAgICAgICAgICAgICR0YWJsZURhdGFbXSA9ICIgJHRhYmxlVmFsdWUgIjsgLy8g5Li65L+d6K+B5YW85a655oCn77yM5LiN5Yqg5Y+N5byV5Y+3DQogICAgICAgICAgICB9DQogICAgICAgICAgICBpZiAoaXNfYXJyYXkoJHRhYmxlVmFsdWUpKSB7DQogICAgICAgICAgICAgICAgJHRhYmxlRGF0YVtdID0gIiAkdGFibGVWYWx1ZVswXSAkdGFibGVWYWx1ZVsxXSAiOw0KICAgICAgICAgICAgfQ0KICAgICAgICB9DQogICAgICAgICRzcWxbXSA9IGltcGxvZGUoJHRhYmxlRGF0YSwgIiwgIik7DQogICAgfQ0KICAgIHByb3RlY3RlZCBmdW5jdGlvbiBidWlsZENvbHVtbigpIHsNCiAgICAgICAgJHNxbCA9ICYkdGhpcy0+X3NxbDsNCiAgICAgICAgJGNvbHVtbnMgPSAmJHRoaXMtPmNvbHVtbnM7DQogICAgICAgIGlmIChjb3VudCgkY29sdW1ucykgPiAwKSB7DQogICAgICAgICAgICAkc2VsZWN0U3RyID0gaW1wbG9kZSgkY29sdW1ucywgJywnKTsNCiAgICAgICAgICAgICRzcWxbXSA9ICIgeyRzZWxlY3RTdHJ9ICI7DQogICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICAkc3FsW10gPSAiKiI7DQogICAgICAgIH0NCiAgICB9DQogICAgcHJvdGVjdGVkIGZ1bmN0aW9uIGJ1aWxkV2hlcmUoJG9yaWdpbmFsV2hlcmUgPSBudWxsLCAkd2hlcmVLZXl3b3JkID0gbnVsbCkgew0KICAgICAgICAkc3FsID0gJiR0aGlzLT5fc3FsOw0KICAgICAgICAkd2hlcmUgPSBpc19udWxsKCRvcmlnaW5hbFdoZXJlKSA/ICR0aGlzLT53aGVyZSA6ICRvcmlnaW5hbFdoZXJlOw0KICAgICAgICBpZiAoY291bnQoJHdoZXJlKSA9PSAwKSB7DQogICAgICAgICAgICByZXR1cm47DQogICAgICAgIH0NCiAgICAgICAgJHNxbFtdID0gaXNfbnVsbCgkd2hlcmVLZXl3b3JkKSA/ICR0aGlzLT5vcHRpb25bJ3doZXJlS2V5d29yZCddIDogJHdoZXJlS2V5d29yZDsNCiAgICAgICAgJHdoZXJlRGF0YSA9IGFycmF5KCk7DQogICAgICAgIGZvcmVhY2ggKCR3aGVyZSBhcyAkaW5kZXggPT4gJHZhbHVlKSB7DQoNCiAgICAgICAgICAgIGlmIChpc19zdHJpbmcoJHZhbHVlKSkgew0KICAgICAgICAgICAgICAgICR3aGVyZURhdGFbXSA9ICR2YWx1ZTsNCiAgICAgICAgICAgICAgICBjb250aW51ZTsNCiAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgJGVxID0gc3RydG91cHBlcigkdmFsdWVbMF0pOw0KICAgICAgICAgICAgaWYgKGluX2FycmF5KCRlcSwgYXJyYXkoJz0nLCAnPD4nLCAnPicsICc8JywgJz49JywgJzw9JywgJ05PVCBMSUtFJywgJ0xJS0UnLCAnSUxJS0UnLCAnTk9UIElMSUtFJykpKSB7DQogICAgICAgICAgICAgICAgJHggPSAoc3RyaW5nKSAkdmFsdWVbMV07DQogICAgICAgICAgICAgICAgJHkgPSAkdGhpcy0+ZGItPkVzY2FwZVN0cmluZygoc3RyaW5nKSAkdmFsdWVbMl0pOw0KICAgICAgICAgICAgICAgICR3aGVyZURhdGFbXSA9ICIgJHggJGVxICckeScgIjsNCiAgICAgICAgICAgIH0gZWxzZWlmICgkZXEgPT0gJ0VYSVNUUycgfHwgJGVxID09ICdOT1QgRVhJU1RTJykgew0KICAgICAgICAgICAgICAgIGlmICghaXNzZXQoJHZhbHVlWzJdKSkgew0KICAgICAgICAgICAgICAgICAgICAkd2hlcmVEYXRhW10gPSAiICRlcSAoICR2YWx1ZVsxXSApICI7DQogICAgICAgICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgICAgICAgICAgJHdoZXJlRGF0YVtdID0gIiAoKCAkdmFsdWVbMV0gJGVxICR2YWx1ZVsyXSApKSAiOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0gZWxzZWlmICgkZXEgPT0gJ0JFVFdFRU4nKSB7DQogICAgICAgICAgICAgICAgJHdoZXJlRGF0YVtdID0gIiAoJHZhbHVlWzFdIEJFVFdFRU4gJyR2YWx1ZVsyXScgQU5EICckdmFsdWVbM10nKSAiOw0KICAgICAgICAgICAgfSBlbHNlaWYgKCRlcSA9PSAnU0VBUkNIJykgew0KICAgICAgICAgICAgICAgICRzZWFyY2hDb3VudCA9IGNvdW50KCR2YWx1ZSk7DQogICAgICAgICAgICAgICAgJHNxbFNlYXJjaCA9IGFycmF5KCk7DQogICAgICAgICAgICAgICAgZm9yICgkaSA9IDE7ICRpIDw9ICRzZWFyY2hDb3VudCAtIDEgLSAxOyAkaSsrKSB7DQogICAgICAgICAgICAgICAgICAgICR4ID0gKHN0cmluZykgJHZhbHVlWyRpXTsNCiAgICAgICAgICAgICAgICAgICAgJHkgPSAkdGhpcy0+ZGItPkVzY2FwZVN0cmluZygoc3RyaW5nKSAkdmFsdWVbJHNlYXJjaENvdW50IC0gMV0pOw0KICAgICAgICAgICAgICAgICAgICAkc3FsU2VhcmNoW10gPSAiICgkeCBMSUtFICclJHklJykgIjsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgJHdoZXJlRGF0YVtdID0gIiAoKDEgPSAxKSBBTkQgKCIgLiBpbXBsb2RlKCcgT1IgJywgJHNxbFNlYXJjaCkgLiAnKSApJzsNCiAgICAgICAgICAgIH0gZWxzZWlmICgkZXEgPT0gJ0FSUkFZJyB8fCAkZXEgPT0gJ05PVCBBUlJBWScgfHwgJGVxID09ICJMSUtFIEFSUkFZIiB8fCAkZXEgPT0gIklMSUtFIEFSUkFZIikgew0KICAgICAgICAgICAgICAgIGlmICgkZXEgPT0gJ0FSUkFZJykgew0KICAgICAgICAgICAgICAgICAgICAkc3ltYm9sID0gJz0nOw0KICAgICAgICAgICAgICAgIH0gZWxzZWlmKCRlcSA9PSAnTk9UIEFSUkFZJykgew0KICAgICAgICAgICAgICAgICAgICAkc3ltYm9sID0gJzw+JzsNCiAgICAgICAgICAgICAgICB9IGVsc2VpZiAoJGVxID09ICdMSUtFIEFSUkFZJykgew0KICAgICAgICAgICAgICAgICAgICAkc3ltYm9sID0gJ0xJS0UnOw0KICAgICAgICAgICAgICAgIH0gZWxzZWlmICgkZXEgPT0gJ0lMSUtFIEFSUkFZJykgew0KICAgICAgICAgICAgICAgICAgICAkc3ltYm9sID0gJ0lMSUtFJzsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgJHNxbEFycmF5ID0gYXJyYXkoKTsNCiAgICAgICAgICAgICAgICBpZiAoIWlzX2FycmF5KCR2YWx1ZVsxXSkpIHsNCiAgICAgICAgICAgICAgICAgICAgJHdoZXJlRGF0YVtdID0gIiAoMSA9IDEpICI7DQogICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICBpZiAoY291bnQoJHZhbHVlWzFdKSA9PSAwKSB7DQogICAgICAgICAgICAgICAgICAgICR3aGVyZURhdGFbXSA9ICIgKDEgPSAxKSAiOw0KICAgICAgICAgICAgICAgICAgICBjb250aW51ZTsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgZm9yZWFjaCAoJHZhbHVlWzFdIGFzICR4ID0+ICR5KSB7DQogICAgICAgICAgICAgICAgICAgICR5WzFdID0gJHRoaXMtPmRiLT5Fc2NhcGVTdHJpbmcoJHlbMV0pOw0KICAgICAgICAgICAgICAgICAgICAkc3FsQXJyYXlbXSA9ICIgJHlbMF0gJHN5bWJvbCAnJHlbMV0nICI7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICR3aGVyZURhdGFbXSA9ICIgKCgxID0gMSkgQU5EICgiIC4gaW1wbG9kZSgnIE9SICcsICRzcWxBcnJheSkgLiAnKSApJzsNCiAgICAgICAgICAgIH0gZWxzZWlmICgkZXEgPT0gJ0lOJyB8fCAkZXEgPT0gJ05PVCBJTicpIHsNCg0KICAgICAgICAgICAgICAgICRzcWxBcnJheSA9IGFycmF5KCk7DQogICAgICAgICAgICAgICAgaWYgKCFpc19hcnJheSgkdmFsdWVbMl0pKSB7DQogICAgICAgICAgICAgICAgICAgIGlmICgkdGhpcy0+dmFsaWRhdGVQYXJhbWF0ZXIoJHZhbHVlWzJdKSkgew0KICAgICAgICAgICAgICAgICAgICAgICAgJHdoZXJlRGF0YVtdID0gIiAoJHZhbHVlWzFdICRlcSAoJHZhbHVlWzJdKSkgIjsNCiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlOw0KICAgICAgICAgICAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgICAgICAgICAgICAgJHdoZXJlRGF0YVtdID0gIiAoMSA9IDEpICI7DQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgY29udGludWU7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIA0KICAgICAgICAgICAgICAgIGlmIChjb3VudCgkdmFsdWVbMl0pID09IDApIHsNCiAgICAgICAgICAgICAgICAgICAgJHdoZXJlRGF0YVtdID0gIiAoMSA9IDEpICI7DQogICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlOw0KICAgICAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgICAgIGZvcmVhY2ggKCR2YWx1ZVsyXSBhcyAkeCA9PiAkeSkgew0KICAgICAgICAgICAgICAgICAgICAkeSA9ICR0aGlzLT5kYi0+RXNjYXBlU3RyaW5nKCR5KTsNCiAgICAgICAgICAgICAgICAgICAgJHNxbEFycmF5W10gPSAiICckeScgIjsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgJHdoZXJlRGF0YVtdID0gIiAoKDEgPSAxKSBBTkQgKCR2YWx1ZVsxXSAkZXEgKCIgLiBpbXBsb2RlKCcsICcsICRzcWxBcnJheSkgLiAnKSApICknOw0KDQogICAgICAgICAgICB9IGVsc2VpZiAoJGVxID09ICdNRVRBX05BTUUnKSB7DQogICAgICAgICAgICAgICAgaWYgKGNvdW50KCR2YWx1ZSkgIT0gMykgew0KICAgICAgICAgICAgICAgICAgICAkd2hlcmVEYXRhW10gPSAiICgxID0gMSkgIjsNCiAgICAgICAgICAgICAgICAgICAgY29udGludWU7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICRzcWxNZXRhID0gJ3M6JyAuIHN0cmxlbigkdmFsdWVbMl0pIC4gJzoiJyAuICR2YWx1ZVsyXSAuICciOyc7DQogICAgICAgICAgICAgICAgJHNxbE1ldGEgPSAkdGhpcy0+ZGItPkVzY2FwZVN0cmluZygkc3FsTWV0YSk7DQogICAgICAgICAgICAgICAgJHdoZXJlRGF0YVtdID0gIigkdmFsdWVbMV0gTElLRSAnJSRzcWxNZXRhJScpIjsNCiAgICAgICAgICAgIH0gZWxzZWlmICgkZXEgPT0gJ01FVEFfTkFNRVZBTFVFJykgew0KICAgICAgICAgICAgICAgIGlmIChjb3VudCgkdmFsdWUpICE9IDQpIHsNCiAgICAgICAgICAgICAgICAgICAgJHdoZXJlRGF0YVtdID0gIiAoMSA9IDEpICI7DQogICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAkc3FsTWV0YSA9ICdzOicgLiBzdHJsZW4oJHZhbHVlWzJdKSAuICc6IicgLiAkdmFsdWVbMl0gLiAnIjsnIC4gJ3M6JyAuIHN0cmxlbigkdmFsdWVbM10pIC4gJzoiJyAuICR2YWx1ZVszXSAuICciJzsNCiAgICAgICAgICAgICAgICAkc3FsTWV0YSA9ICR0aGlzLT5kYi0+RXNjYXBlU3RyaW5nKCRzcWxNZXRhKTsNCiAgICAgICAgICAgICAgICAkd2hlcmVEYXRhW10gPSAiKCR2YWx1ZVsxXSBMSUtFICclJHNxbE1ldGElJykiOw0KICAgICAgICAgICAgfSBlbHNlaWYgKCRlcSA9PSAiQ1VTVE9NIikgew0KICAgICAgICAgICAgICAgICR3aGVyZURhdGFbXSA9ICR2YWx1ZVsxXTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgfQ0KICAgICAgICAkc3FsW10gPSBpbXBsb2RlKCcgQU5EICcsICR3aGVyZURhdGEpOw0KICAgIH0NCiAgICBwcm90ZWN0ZWQgZnVuY3Rpb24gYnVpbGRPcmRlckJ5KCkgew0KICAgICAgICAkc3FsID0gJiR0aGlzLT5fc3FsOw0KICAgICAgICBpZiAoY291bnQoJHRoaXMtPm9yZGVyQnkpID09IDApIHsNCiAgICAgICAgICAgIHJldHVybjsNCiAgICAgICAgfQ0KDQogICAgICAgICRzcWxbXSA9ICJPUkRFUiBCWSI7DQogICAgICAgICRvcmRlckJ5RGF0YSA9IGFycmF5KCk7DQoNCiAgICAgICAgZm9yZWFjaCAoJHRoaXMtPm9yZGVyQnkgYXMgJGtleSA9PiAkdmFsdWUpIHsNCiAgICAgICAgICAgIGlmIChpc19pbnQoJGtleSkpIHsNCiAgICAgICAgICAgICAgICAkb3JkZXJCeURhdGFbXSA9ICIkdmFsdWUiOw0KICAgICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgICAgICAkb3JkZXJCeURhdGFbXSA9ICIka2V5ICR2YWx1ZSI7DQogICAgICAgICAgICB9DQogICAgICAgICAgICANCiAgICAgICAgfQ0KICAgICAgICAkc3FsW10gPSBpbXBsb2RlKCcsICcsICRvcmRlckJ5RGF0YSk7DQogICAgfQ0KICAgIC8qKg0KICAgICAqIEB0b2RvDQogICAgICovDQogICAgcHJvdGVjdGVkIGZ1bmN0aW9uIGJ1aWxkSm9pbigpIHsNCiAgICAgICAgJHNxbCA9ICYkdGhpcy0+X3NxbDsNCiAgICB9DQogICAgcHJvdGVjdGVkIGZ1bmN0aW9uIGJ1aWxkR3JvdXBCeSgpIHsNCiAgICAgICAgJHNxbCA9ICYkdGhpcy0+X3NxbDsNCiAgICAgICAgaWYgKGNvdW50KCR0aGlzLT5ncm91cEJ5KSA9PSAwKSB7DQogICAgICAgICAgICByZXR1cm47DQogICAgICAgIH0NCg0KICAgICAgICAkc3FsW10gPSAiR1JPVVAgQlkiOw0KICAgICAgICAkZ3JvdXBCeURhdGEgPSBhcnJheSgpOw0KICAgICAgICBmb3JlYWNoICgkdGhpcy0+Z3JvdXBCeSBhcyAka2V5ID0+ICR2YWx1ZSkgew0KICAgICAgICAgICAgJGdyb3VwQnlEYXRhW10gPSAkdmFsdWU7DQogICAgICAgIH0NCiAgICAgICAgJHNxbFtdID0gaW1wbG9kZSgnLCAnLCAkZ3JvdXBCeURhdGEpOw0KICAgIH0NCiAgICBwcm90ZWN0ZWQgZnVuY3Rpb24gYnVpbGRIYXZpbmcoKSB7DQogICAgICAgICRzcWwgPSAmJHRoaXMtPl9zcWw7DQogICAgICAgIGlmIChjb3VudCgkdGhpcy0+aGF2aW5nKSA9PSAwKSB7DQogICAgICAgICAgICByZXR1cm47DQogICAgICAgIH0NCg0KICAgICAgICAkc3FsW10gPSAiSEFWSU5HIjsNCiAgICAgICAgJHRoaXMtPmJ1aWxkV2hlcmUoJHRoaXMtPmhhdmluZywgJyAnKTsNCiAgICB9DQogICAgcHJvdGVjdGVkIGZ1bmN0aW9uIGJ1aWxkTGltaXQoKSB7DQogICAgICAgICRzcWwgPSAmJHRoaXMtPl9zcWw7DQoNCiAgICAgICAgaWYgKGlzc2V0KCR0aGlzLT5vcHRpb25bJ2xpbWl0J10pKSB7DQogICAgICAgICAgICAkc3FsW10gPSAiTElNSVQgIiAuICR0aGlzLT5vcHRpb25bJ2xpbWl0J107DQogICAgICAgIH0NCiAgICAgICAgaWYgKGlzc2V0KCR0aGlzLT5vcHRpb25bJ29mZnNldCddKSkgew0KICAgICAgICAgICAgJHNxbFtdID0gIk9GRlNFVCAiIC4gJHRoaXMtPm9wdGlvblsnb2Zmc2V0J107DQogICAgICAgIH0NCiAgICB9DQogICAgLyoqDQogICAgICogQHRvZG8NCiAgICAgKiovDQogICAgcHJvdGVjdGVkIGZ1bmN0aW9uIGJ1aWxkUGFnZWJhcigpIHsNCg0KICAgIH0NCg0KICAgIHByb3RlY3RlZCBmdW5jdGlvbiBidWlsZEJlZm9yZVdoZXJlKCkgew0KICAgICAgICAvLyBEbyBub3RoaW5nIHlldA0KICAgIH0NCg0KDQogICAgcHJvdGVjdGVkIGZ1bmN0aW9uIGJ1aWxkT3RoZXJzKCkgew0KICAgICAgICAvLyBEbyBub3RoaW5nIHlldA0KICAgIH0NCg0KICAgIHByb3RlY3RlZCBmdW5jdGlvbiBidWlsZFNlbGVjdCgpIHsNCiAgICAgICAgJHNxbCA9ICYkdGhpcy0+X3NxbDsNCg0KICAgICAgICAvLyBVbmltcGxlbWVudGVkIHNlbGVjdDJjb3VudA0KICAgICAgICAkdGhpcy0+YnVpbGRDb2x1bW4oKTsNCiAgICAgICAgJHNxbFtdID0gJ0ZST00nOw0KICAgICAgICAkdGhpcy0+YnVpbGRUYWJsZSgpOw0KICAgICAgICAkdGhpcy0+YnVpbGRCZWZvcmVXaGVyZSgpOw0KICAgICAgICAkdGhpcy0+YnVpbGRXaGVyZSgpOw0KICAgICAgICAkdGhpcy0+YnVpbGRHcm91cEJ5KCk7DQogICAgICAgICR0aGlzLT5idWlsZEhhdmluZygpOw0KICAgICAgICAkdGhpcy0+YnVpbGRPcmRlckJ5KCk7DQogICAgICAgICR0aGlzLT5idWlsZExpbWl0KCk7DQogICAgICAgICR0aGlzLT5idWlsZE90aGVycygpOw0KICAgIH0NCiAgICBwcm90ZWN0ZWQgZnVuY3Rpb24gYnVpbGRVcGRhdGUoKSB7DQogICAgICAgICRzcWwgPSAmJHRoaXMtPl9zcWw7DQogICAgICAgICRzcWxbXSA9ICR0aGlzLT5idWlsZFRhYmxlKCk7DQogICAgICAgICRzcWxbXSA9ICdTRVQnOw0KICAgICAgICAkdXBkYXRlRGF0YSA9IGFycmF5KCk7DQogICAgICAgIGZvcmVhY2ggKCR0aGlzLT5kYXRhIGFzICRpbmRleCA9PiAkdmFsdWUpIHsNCiAgICAgICAgICAgIGlmIChpc19udWxsKCR2YWx1ZSkpIHsNCiAgICAgICAgICAgICAgICBjb250aW51ZTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgICRlc2NhcGVkVmFsdWUgPSAkdGhpcy0+ZGItPkVzY2FwZVN0cmluZygkdmFsdWUpOw0KICAgICAgICAgICAgJHVwZGF0ZURhdGFbXSA9ICIkaW5kZXggPSAnJGVzY2FwZWRWYWx1ZSciOw0KICAgICAgICB9DQogICAgICAgICRzcWxbXSA9IGltcGxvZGUoJywgJywgJHVwZGF0ZURhdGEpOw0KICAgICAgICAkdGhpcy0+YnVpbGRXaGVyZSgpOw0KDQogICAgICAgIHJldHVybiAkc3FsOw0KICAgIH0NCiAgICBwcm90ZWN0ZWQgZnVuY3Rpb24gYnVpbGREZWxldGUoKSB7DQogICAgICAgICRzcWwgPSAmJHRoaXMtPl9zcWw7DQogICAgICAgICRzcWxbXSA9ICdGUk9NJzsNCiAgICAgICAgJHRoaXMtPmJ1aWxkVGFibGUoKTsNCiAgICAgICAgJHRoaXMtPmJ1aWxkV2hlcmUoKTsNCiAgICB9DQogICAgcHJvdGVjdGVkIGZ1bmN0aW9uIGJ1aWxkSW5zZXJ0KCkgew0KICAgICAgICAkc3FsID0gJiR0aGlzLT5fc3FsOw0KICAgICAgICAkc3FsW10gPSAnSU5UTyc7DQogICAgICAgICR0aGlzLT5idWlsZFRhYmxlKCk7DQogICAgICAgICRrZXlEYXRhID0gYXJyYXkoKTsNCiAgICAgICAgJHZhbHVlRGF0YSA9IGFycmF5KCk7DQogICAgICAgIGZvcmVhY2ggKCR0aGlzLT5kYXRhIGFzICRrZXkgPT4gJHZhbHVlKSB7DQogICAgICAgICAgICBpZiAoaXNfbnVsbCgkdmFsdWUpKSB7DQogICAgICAgICAgICAgICAgY29udGludWU7DQogICAgICAgICAgICB9DQoNCiAgICAgICAgICAgICR2ID0gJHRoaXMtPmRiLT5Fc2NhcGVTdHJpbmcoJHZhbHVlKTsNCiAgICAgICAgICAgICRrZXlEYXRhW10gPSAiJGtleSI7DQogICAgICAgICAgICAkdmFsdWVEYXRhW10gPSAiICckdicgIjsNCiAgICAgICAgfQ0KICAgICAgICAkc3FsW10gPSAnKCcgLiBpbXBsb2RlKCRrZXlEYXRhLCAnLCcpIC4gJyknOw0KICAgICAgICAkc3FsW10gPSAnIFZBTFVFUyAoJzsNCiAgICAgICAgJHNxbFtdID0gaW1wbG9kZSgkdmFsdWVEYXRhLCAnLCcpOw0KICAgICAgICAkc3FsW10gPSAnKSc7DQogICAgfQ0KDQogICAgcHJvdGVjdGVkIGZ1bmN0aW9uIGJ1aWxkRHJvcCgpIHsNCiAgICAgICAgJHNxbCA9ICYkdGhpcy0+X3NxbDsNCiAgICAgICAgJHNxbFtdID0gJ1RBQkxFJzsNCiAgICAgICAgJHRoaXMtPmJ1aWxkVGFibGUoKTsNCiAgICB9DQoNCiAgICAvKioNCiAgICAgKiBAdG9kbw0KICAgICAqLw0KICAgIHByb3RlY3RlZCBmdW5jdGlvbiBidWlsZENyZWF0ZSgpIHsNCg0KICAgIH0NCg0KICAgIHByb3RlY3RlZCBmdW5jdGlvbiBidWlsZEluZGV4KCkgew0KDQogICAgfQ0KfQ0K</file>
	<file name='zb_system\function\lib\urlrule.php' crc32='5EA894B3'  dt:dt='bin.base64'>PD9waHANCi8qKg0KICogVXJs6KeE5YiZ57G7DQogKg0KICogQHBhY2thZ2UgWi1CbG9nUEhQDQogKiBAc3VicGFja2FnZSBDbGFzc0xpYiDnsbvlupMNCiAqLw0KY2xhc3MgVXJsUnVsZSB7DQoNCiAgICAvKioNCiAgICAgKiBAdmFyIGFycmF5DQogICAgICovDQogICAgcHVibGljICRSdWxlcyA9IGFycmF5KCk7DQogICAgLyoqDQogICAgICogQHZhciBzdHJpbmcNCiAgICAgKi8NCiAgICBwdWJsaWMgJFVybCA9ICcnOw0KICAgIHByaXZhdGUgJFByZVVybCA9ICcnOw0KICAgIC8qKg0KICAgICAqIEB2YXIgYm9vbA0KICAgICAqLw0KICAgIHB1YmxpYyAkTWFrZVJlcGxhY2UgPSB0cnVlOw0KDQogICAgcHVibGljIHN0YXRpYyAkY2F0ZWdvcnlsYXllciA9ICctMSc7DQoNCiAgICAvKioNCiAgICAgKiBAcGFyYW0gJHVybA0KICAgICAqLw0KICAgIHB1YmxpYyBmdW5jdGlvbiBfX2NvbnN0cnVjdCgkdXJsKSB7DQogICAgICAgICR0aGlzLT5QcmVVcmwgPSAkdXJsOw0KICAgIH0NCg0KICAgIC8qKg0KICAgICAqIEByZXR1cm4gc3RyaW5nDQogICAgICovDQogICAgcHJpdmF0ZSBmdW5jdGlvbiBNYWtlX1ByZWcoKSB7DQogICAgICAgIGdsb2JhbCAkemJwOw0KDQogICAgICAgICR0aGlzLT5SdWxlc1sneyVob3N0JX0nXSA9ICR6YnAtPmhvc3Q7DQogICAgICAgIGlmIChpc3NldCgkdGhpcy0+UnVsZXNbJ3slcGFnZSV9J10pKSB7DQogICAgICAgICAgICBpZiAoJHRoaXMtPlJ1bGVzWyd7JXBhZ2UlfSddID09ICcxJyB8fCAkdGhpcy0+UnVsZXNbJ3slcGFnZSV9J10gPT0gJzAnKSB7JHRoaXMtPlJ1bGVzWyd7JXBhZ2UlfSddID0gJyc7fQ0KICAgICAgICB9DQogICAgICAgICRzID0gJHRoaXMtPlByZVVybDsNCiAgICAgICAgZm9yZWFjaCAoJHRoaXMtPlJ1bGVzIGFzICRrZXkgPT4gJHZhbHVlKSB7DQogICAgICAgICAgICAkcyA9IHByZWdfcmVwbGFjZSgka2V5LCAkdmFsdWUsICRzKTsNCiAgICAgICAgfQ0KICAgICAgICAkcyA9IHByZWdfcmVwbGFjZSgnL1x7W1w/XC8mYS16MC05XSo9XH0vJywgJycsICRzKTsNCiAgICAgICAgJHMgPSBwcmVnX3JlcGxhY2UoJy9ce1wvP30vJywgJycsICRzKTsNCiAgICAgICAgJHMgPSBzdHJfcmVwbGFjZShhcnJheSgneycsICd9JyksIGFycmF5KCcnLCAnJyksICRzKTsNCg0KICAgICAgICAkdGhpcy0+VXJsID0gaHRtbHNwZWNpYWxjaGFycygkcyk7DQoNCiAgICAgICAgcmV0dXJuICR0aGlzLT5Vcmw7DQogICAgfQ0KDQogICAgLyoqDQogICAgICogQHJldHVybiBzdHJpbmcNCiAgICAgKi8NCiAgICBwcml2YXRlIGZ1bmN0aW9uIE1ha2VfUmVwbGFjZSgpIHsNCiAgICAgICAgZ2xvYmFsICR6YnA7DQogICAgICAgICRzID0gJHRoaXMtPlByZVVybDsNCg0KICAgICAgICBpZiAoaXNzZXQoJHRoaXMtPlJ1bGVzWyd7JXBhZ2UlfSddKSkgew0KICAgICAgICAgICAgaWYgKCR0aGlzLT5SdWxlc1sneyVwYWdlJX0nXSA9PSAnMScgfHwgJHRoaXMtPlJ1bGVzWyd7JXBhZ2UlfSddID09ICcwJykgew0KICAgICAgICAgICAgICAgICR0aGlzLT5SdWxlc1sneyVwYWdlJX0nXSA9ICcnOw0KICAgICAgICAgICAgfQ0KICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgJHRoaXMtPlJ1bGVzWyd7JXBhZ2UlfSddID0gJyc7DQogICAgICAgIH0NCiAgICAgICAgaWYgKCR0aGlzLT5SdWxlc1sneyVwYWdlJX0nXSA9PSAnJykgew0KICAgICAgICAgICAgaWYgKHN1YnN0cl9jb3VudCgkcywgJ3slcGFnZSV9JykgPT0gMSAmJiBzdWJzdHJfY291bnQoJHMsICd7JykgPT0gMiAmJiBzdWJzdHJfY291bnQoJHMsICcmJykgPT0gMCkgew0KICAgICAgICAgICAgICAgICRzID0gJHpicC0+aG9zdDsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIHByZWdfbWF0Y2goJy8oPzw9XH0pW15ce1x9JVwvJl0rKD89XHslcGFnZSVcfSkvaScsICRzLCAkbWF0Y2hlcyk7DQogICAgICAgICAgICBpZiAoaXNzZXQoJG1hdGNoZXNbMF0pKSB7DQogICAgICAgICAgICAgICAgJHMgPSBzdHJfcmVwbGFjZSgkbWF0Y2hlc1swXSwgJycsICRzKTsNCiAgICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICAgICAgcHJlZ19tYXRjaCgnLyg/PD0mKVteXHtcfSVcLyZdKyg/PVx7JXBhZ2UlXH0pL2knLCAkcywgJG1hdGNoZXMpOw0KICAgICAgICAgICAgICAgIGlmIChpc3NldCgkbWF0Y2hlc1swXSkpIHsNCiAgICAgICAgICAgICAgICAgICAgJHMgPSBzdHJfcmVwbGFjZSgkbWF0Y2hlc1swXSwgJycsICRzKTsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9DQogICAgICAgICAgICBpZiAoc3Vic3RyKCR0aGlzLT5QcmVVcmwsIC0xMCkgIT0gJ197JXBhZ2UlfS8nICYmIHN1YnN0cigkcywgLTkpID09ICd7JXBhZ2UlfS8nKSB7DQogICAgICAgICAgICAgICAgJHMgPSBzdWJzdHIoJHMsIDAsIHN0cmxlbigkcykgLSAxKTsNCiAgICAgICAgICAgIH0NCg0KICAgICAgICB9DQoNCiAgICAgICAgJHRoaXMtPlJ1bGVzWyd7JWhvc3QlfSddID0gJHpicC0+aG9zdDsNCiAgICAgICAgZm9yZWFjaCAoJHRoaXMtPlJ1bGVzIGFzICRrZXkgPT4gJHZhbHVlKSB7DQogICAgICAgICAgICBpZiggIWlzX2FycmF5KCR2YWx1ZSkgKQ0KICAgICAgICAgICAgICAgICRzID0gc3RyX3JlcGxhY2UoJGtleSwgJHZhbHVlLCAkcyk7DQogICAgICAgIH0NCg0KICAgICAgICBpZiAoc3Vic3RyKCR0aGlzLT5QcmVVcmwsIC0xKSAhPSAnLycgJiYgc3Vic3RyKCRzLCAtMSkgPT0gJy8nICYmICRzICE9ICR6YnAtPmhvc3QpIHsNCiAgICAgICAgICAgICRzID0gc3Vic3RyKCRzLCAwLCBzdHJsZW4oJHMpIC0gMSk7DQogICAgICAgIH0NCiAgICAgICAgaWYgKHN1YnN0cigkcywgLTEpID09ICcmJykgew0KICAgICAgICAgICAgJHMgPSBzdWJzdHIoJHMsIDAsIHN0cmxlbigkcykgLSAxKTsNCiAgICAgICAgfQ0KDQogICAgICAgICR0aGlzLT5VcmwgPSBodG1sc3BlY2lhbGNoYXJzKCRzKTsNCg0KICAgICAgICByZXR1cm4gJHRoaXMtPlVybDsNCiAgICB9DQoNCiAgICAvKioNCiAgICAgKiBAcmV0dXJuIHN0cmluZw0KICAgICAqLw0KICAgIHB1YmxpYyBmdW5jdGlvbiBNYWtlKCkgew0KICAgICAgICBpZiAoJHRoaXMtPk1ha2VSZXBsYWNlKSB7DQogICAgICAgICAgICByZXR1cm4gJHRoaXMtPk1ha2VfUmVwbGFjZSgpOw0KICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgcmV0dXJuICR0aGlzLT5NYWtlX1ByZWcoKTsNCiAgICAgICAgfQ0KICAgIH0NCg0KDQoNCiAgICAvKioNCiAgICAgKiBAcGFyYW0gJHVybA0KICAgICAqIEBwYXJhbSAkdHlwZQ0KICAgICAqIEBwYXJhbSAkaGFzcGFnZSBib29sZWFuDQogICAgICogQHJldHVybiBzdHJpbmcNCiAgICAgKi8NCiAgICBwdWJsaWMgc3RhdGljIGZ1bmN0aW9uIE91dHB1dFVybFJlZ0V4KCR1cmwsICR0eXBlLCAkaGFzcGFnZSA9IGZhbHNlKSB7DQogICAgICAgIGdsb2JhbCAkemJwOw0KDQogICAgICAgICRzID0gJHVybDsNCiAgICAgICAgJHMgPSBzdHJfcmVwbGFjZSgnJXBhZ2UlJywgJyVwb2FvZ29lJScsICRzKTsNCiAgICAgICAgJHVybCA9IHN0cl9yZXBsYWNlKCd7JWhvc3QlfScsICdeJywgJHVybCk7DQogICAgICAgICR1cmwgPSBzdHJfcmVwbGFjZSgnLicsICdcXC4nLCAkdXJsKTsNCiAgICAgICAgaWYgKCR0eXBlID09ICdpbmRleCcpIHsNCiAgICAgICAgICAgICR1cmwgPSBzdHJfcmVwbGFjZSgnJXBhZ2UlJywgJyVwb2FvZ29lJScsICR1cmwpOw0KICAgICAgICAgICAgcHJlZ19tYXRjaCgnL1teXHtcfV0rKD89XHslcG9hb2dvZSVcfSkvaScsICRzLCAkbWF0Y2hlcyk7DQogICAgICAgICAgICBpZiAoaXNzZXQoJG1hdGNoZXNbMF0pKSB7DQogICAgICAgICAgICAgICAgJHVybCA9IHN0cl9yZXBsYWNlKCRtYXRjaGVzWzBdLCAnKD86JyAuICRtYXRjaGVzWzBdIC4gJyk8OjE6PicsICR1cmwpOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgJHVybCA9ICR1cmwgLiAnJCc7DQogICAgICAgICAgICAkdXJsID0gc3RyX3JlcGxhY2UoJyVwb2FvZ29lJScsICcoP1A8cGFnZT5bMC05XSopJywgJHVybCk7DQogICAgICAgIH0NCiAgICAgICAgaWYgKCR0eXBlID09ICdjYXRlJyB8fCAkdHlwZSA9PSAndGFncycgfHwgJHR5cGUgPT0gJ2RhdGUnIHx8ICR0eXBlID09ICdhdXRoJykgew0KICAgICAgICAgICAgJHVybCA9IHN0cl9yZXBsYWNlKCclcGFnZSUnLCAnJXBvYW9nb2UlJywgJHVybCk7DQogICAgICAgICAgICBwcmVnX21hdGNoKCcvKD88PVx9KVteXHtcfV0rKD89XHslcG9hb2dvZSVcfSkvaScsICRzLCAkbWF0Y2hlcyk7DQogICAgICAgICAgICBpZiAoaXNzZXQoJG1hdGNoZXNbMF0pKSB7DQogICAgICAgICAgICAgICAgaWYgKCRoYXNwYWdlKSB7DQogICAgICAgICAgICAgICAgICAgIC8vJHVybCA9IHN0cl9yZXBsYWNlKCRtYXRjaGVzWzBdLCAnKD86JyAuICRtYXRjaGVzWzBdIC4gJyknLCAkdXJsKTsNCiAgICAgICAgICAgICAgICAgICAgJHVybCA9IHByZWdfcmVwbGFjZSgnLyg/PD1cfSlbXlx7XH1dKyg/PVx7JXBvYW9nb2UlXH0pL2knLCAnKD86JyAuICRtYXRjaGVzWzBdIC4gJyknLCAkdXJsLCAxKTsNCiAgICAgICAgICAgICAgICB9ZWxzZXsNCiAgICAgICAgICAgICAgICAgICAgLy8kdXJsID0gc3RyX3JlcGxhY2UoJG1hdGNoZXNbMF0sICcnLCAkdXJsKTsNCiAgICAgICAgICAgICAgICAgICAgJHVybCA9IHByZWdfcmVwbGFjZSgnLyg/PD1cfSlbXlx7XH1dKyg/PVx7JXBvYW9nb2UlXH0pL2knLCAnJywgJHVybCwgMSk7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgJHVybCA9ICR1cmwgLiAnJCc7DQogICAgICAgICAgICBpZiAoJGhhc3BhZ2UpIHsNCiAgICAgICAgICAgICAgICAgICAgJHVybCA9IHN0cl9yZXBsYWNlKCclcG9hb2dvZSUnLCAnKD9QPHBhZ2U+WzAtOV0qKScsICR1cmwpOw0KICAgICAgICAgICAgfWVsc2V7DQogICAgICAgICAgICAgICAgICAgICR1cmwgPSBzdHJfcmVwbGFjZSgnJXBvYW9nb2UlJywgJycsICR1cmwpOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgJHVybCA9IHN0cl9yZXBsYWNlKCclaWQlJywgJyg/UDxpZD5bMC05XSspJywgJHVybCk7DQogICAgICAgICAgICAkdXJsID0gc3RyX3JlcGxhY2UoJyVkYXRlJScsICcoP1A8ZGF0ZT5bMC05XC1dKyknLCAkdXJsKTsNCiAgICAgICAgICAgIGlmICgkdHlwZSA9PSAnY2F0ZScpIHsNCiAgICAgICAgICAgICAgICBpZihVcmxSdWxlOjokY2F0ZWdvcnlsYXllciA9PSAtMSl7DQogICAgICAgICAgICAgICAgICAgIGZvcmVhY2ggKCR6YnAtPmNhdGVnb3J5cyBhcyAkYykgew0KICAgICAgICAgICAgICAgICAgICAgICAgaWYoJGMtPkxldmVsID4gVXJsUnVsZTo6JGNhdGVnb3J5bGF5ZXIpIFVybFJ1bGU6OiRjYXRlZ29yeWxheWVyID0gJGMtPkxldmVsOw0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIHN3aXRjaCAoVXJsUnVsZTo6JGNhdGVnb3J5bGF5ZXIpIHsNCiAgICAgICAgICAgICAgICAgICAgY2FzZSAzOg0KICAgICAgICAgICAgICAgICAgICAgICAgJGZ1bGxjYXRlZ29yeT0nW15cLi9fXSp8W15cLi9fXSovW15cLi9fXSp8W15cLi9fXSovW15cLi9fXSovW15cLi9fXSp8W15cLi9fXSsvW15cLi9fXSovW15cLi9fXSovW15cLi9fXSonOw0KICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7DQogICAgICAgICAgICAgICAgICAgIGNhc2UgMjoNCiAgICAgICAgICAgICAgICAgICAgICAgICRmdWxsY2F0ZWdvcnk9J1teXC4vX10qfFteXC4vX10qL1teXC4vX10qfFteXC4vX10qL1teXC4vX10qL1teXC4vX10qJzsNCiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOw0KICAgICAgICAgICAgICAgICAgICBjYXNlIDE6DQogICAgICAgICAgICAgICAgICAgICAgICAkZnVsbGNhdGVnb3J5PSdbXlwuL19dKnxbXlwuL19dKi9bXlwuL19dKic7DQogICAgICAgICAgICAgICAgICAgICAgICBicmVhazsNCiAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDoNCiAgICAgICAgICAgICAgICAgICAgICAgICRmdWxsY2F0ZWdvcnk9J1teXC4vX10qJzsNCiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAkdXJsID0gc3RyX3JlcGxhY2UoJyVhbGlhcyUnLCAnKD9QPGFsaWFzPignIC4gJGZ1bGxjYXRlZ29yeSAuICcpKz8pJywgJHVybCk7DQogICAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgICAgICR1cmwgPSBzdHJfcmVwbGFjZSgnJWFsaWFzJScsICcoP1A8YWxpYXM+W15cLi9fXSs/KScsICR1cmwpOw0KICAgICAgICAgICAgfQ0KICAgICAgICB9DQogICAgICAgIGlmICgkdHlwZSA9PSAncGFnZScgfHwgJHR5cGUgPT0gJ2FydGljbGUnKSB7DQogICAgICAgICAgICBpZiAoc3RycG9zKCR1cmwsICclYWxpYXMlJykgPT09IGZhbHNlKSB7DQogICAgICAgICAgICAgICAgJHVybCA9ICR1cmwgLiAnJCc7DQogICAgICAgICAgICAgICAgJHVybCA9IHN0cl9yZXBsYWNlKCclaWQlJywgJyg/UDxpZD5bMC05XSspJywgJHVybCk7DQogICAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgICAgICR1cmwgPSAkdXJsIC4gJyQnOw0KICAgICAgICAgICAgICAgIGlmICgkdHlwZSA9PSAnYXJ0aWNsZScpIHsNCiAgICAgICAgICAgICAgICAgICAgJHVybCA9IHN0cl9yZXBsYWNlKCclYWxpYXMlJywgJyg/UDxhbGlhcz5bXi9dKyknLCAkdXJsKTsNCiAgICAgICAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgICAgICAgICAkdXJsID0gc3RyX3JlcGxhY2UoJyVhbGlhcyUnLCAnKD9QPGFsaWFzPi4rKScsICR1cmwpOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgICR1cmwgPSBzdHJfcmVwbGFjZSgnJWNhdGVnb3J5JScsICcoP1A8Y2F0ZWdvcnk+KChbXlwuL19dKi8/KTw6MSw0Oj4pKScsICR1cmwpOw0KICAgICAgICAgICAgJHVybCA9IHN0cl9yZXBsYWNlKCclYXV0aG9yJScsICcoP1A8YXV0aG9yPlteXC4vX10rKScsICR1cmwpOw0KICAgICAgICAgICAgJHVybCA9IHN0cl9yZXBsYWNlKCcleWVhciUnLCAnKD9QPHllYXI+WzAtOV08OjQ6PiknLCAkdXJsKTsNCiAgICAgICAgICAgICR1cmwgPSBzdHJfcmVwbGFjZSgnJW1vbnRoJScsICcoP1A8bW9udGg+WzAtOV08OjEsMjo+KScsICR1cmwpOw0KICAgICAgICAgICAgJHVybCA9IHN0cl9yZXBsYWNlKCclZGF5JScsICcoP1A8ZGF5PlswLTldPDoxLDI6PiknLCAkdXJsKTsNCiAgICAgICAgfQ0KICAgICAgICAkdXJsID0gc3RyX3JlcGxhY2UoJ3snLCAnJywgJHVybCk7DQogICAgICAgICR1cmwgPSBzdHJfcmVwbGFjZSgnfScsICcnLCAkdXJsKTsNCiAgICAgICAgJHVybCA9IHN0cl9yZXBsYWNlKCc8OicsICd7JywgJHVybCk7DQogICAgICAgICR1cmwgPSBzdHJfcmVwbGFjZSgnOj4nLCAnfScsICR1cmwpOw0KICAgICAgICAkdXJsID0gc3RyX3JlcGxhY2UoJy8nLCAnXC8nLCAkdXJsKTsNCiAgICAgICAgJHVybCA9IHN0cl9yZXBsYWNlKCdcLyQnLCAnJCcsICR1cmwpOw0KDQoNCiAgICAgICAgcmV0dXJuICcvKD9KKScgLiAkdXJsIC4gJy8nOw0KDQogICAgICAgIC8vIOWFs+S6jkrmoIfor4bnrKbnmoTkvb/nlKgNCiAgICAgICAgLy8gQHNlZSBodHRwczovL2J1Z3MucGhwLm5ldC9idWcucGhwP2lkPTQ3NDU2DQogICAgfQ0KDQogICAgLyoqDQogICAgICogQHJldHVybiBzdHJpbmcNCiAgICAgKi8NCiAgICBwdWJsaWMgZnVuY3Rpb24gTWFrZV9odGFjY2VzcygpIHsNCiAgICAgICAgZ2xvYmFsICR6YnA7DQogICAgICAgICRzID0gJzxJZk1vZHVsZSBtb2RfcmV3cml0ZS5jPicgLiAiXHJcbiI7DQogICAgICAgICRzIC49ICdSZXdyaXRlRW5naW5lIE9uJyAuICJcclxuIjsNCiAgICAgICAgJHMgLj0gIlJld3JpdGVCYXNlICIgLiAkemJwLT5jb29raWVzcGF0aCAuICJcclxuIjsNCg0KICAgICAgICAkcyAuPSAnUmV3cml0ZUNvbmQgJXtSRVFVRVNUX0ZJTEVOQU1FfSAhLWYnIC4gIlxyXG4iOw0KICAgICAgICAkcyAuPSAnUmV3cml0ZUNvbmQgJXtSRVFVRVNUX0ZJTEVOQU1FfSAhLWQnIC4gIlxyXG4iOw0KICAgICAgICAkcyAuPSAnUmV3cml0ZVJ1bGUgLiAnIC4gJHpicC0+Y29va2llc3BhdGggLiAnaW5kZXgucGhwIFtMXScgLiAiXHJcbiI7DQogICAgICAgICRzIC49ICc8L0lmTW9kdWxlPic7DQoNCiAgICAgICAgcmV0dXJuICRzOw0KICAgIH0NCg0KICAgIC8qKg0KICAgICAqIEByZXR1cm4gc3RyaW5nDQogICAgICovDQogICAgcHVibGljIGZ1bmN0aW9uIE1ha2Vfd2ViY29uZmlnKCkgew0KICAgICAgICBnbG9iYWwgJHpicDsNCg0KICAgICAgICAkcyA9ICc8P3htbCB2ZXJzaW9uPSIxLjAiIGVuY29kaW5nPSJVVEYtOCI/PicgLiAiXHJcbiI7DQogICAgICAgICRzIC49ICc8Y29uZmlndXJhdGlvbj4nIC4gIlxyXG4iOw0KICAgICAgICAkcyAuPSAnIDxzeXN0ZW0ud2ViU2VydmVyPicgLiAiXHJcbiI7DQoNCiAgICAgICAgJHMgLj0gJyAgPHJld3JpdGU+JyAuICJcclxuIjsNCiAgICAgICAgJHMgLj0gJyAgIDxydWxlcz4nIC4gIlxyXG4iOw0KDQogICAgICAgICRzIC49ICcJPHJ1bGUgbmFtZT0iJyAuICR6YnAtPmNvb2tpZXNwYXRoIC4gJyBaLUJsb2dQSFAgSW1wb3J0ZWQgUnVsZSIgc3RvcFByb2Nlc3Npbmc9InRydWUiPicgLiAiXHJcbiI7DQogICAgICAgICRzIC49ICcJIDxtYXRjaCB1cmw9Il4uKj8iIGlnbm9yZUNhc2U9ImZhbHNlIiAvPicgLiAiXHJcbiI7DQogICAgICAgICRzIC49ICcJICA8Y29uZGl0aW9ucyBsb2dpY2FsR3JvdXBpbmc9Ik1hdGNoQWxsIj4nIC4gIlxyXG4iOw0KICAgICAgICAkcyAuPSAnCSAgIDxhZGQgaW5wdXQ9IntSRVFVRVNUX0ZJTEVOQU1FfSIgbWF0Y2hUeXBlPSJJc0ZpbGUiIG5lZ2F0ZT0idHJ1ZSIgLz4nIC4gIlxyXG4iOw0KICAgICAgICAkcyAuPSAnCSAgIDxhZGQgaW5wdXQ9IntSRVFVRVNUX0ZJTEVOQU1FfSIgbWF0Y2hUeXBlPSJJc0RpcmVjdG9yeSIgbmVnYXRlPSJ0cnVlIiAvPicgLiAiXHJcbiI7DQogICAgICAgICRzIC49ICcJICA8L2NvbmRpdGlvbnM+JyAuICJcclxuIjsNCiAgICAgICAgJHMgLj0gJwkgPGFjdGlvbiB0eXBlPSJSZXdyaXRlIiB1cmw9ImluZGV4LnBocC97UjowfSIgLz4nIC4gIlxyXG4iOw0KICAgICAgICAkcyAuPSAnCTwvcnVsZT4nIC4gIlxyXG4iOw0KDQogICAgICAgICRzIC49ICcJPHJ1bGUgbmFtZT0iJyAuICR6YnAtPmNvb2tpZXNwYXRoIC4gJyBaLUJsb2dQSFAgSW1wb3J0ZWQgUnVsZSBpbmRleC5waHAiIHN0b3BQcm9jZXNzaW5nPSJ0cnVlIj4nIC4gIlxyXG4iOw0KICAgICAgICAkcyAuPSAnCSA8bWF0Y2ggdXJsPSJeaW5kZXgucGhwLy4qPyIgaWdub3JlQ2FzZT0iZmFsc2UiIC8+JyAuICJcclxuIjsNCiAgICAgICAgJHMgLj0gJwkgIDxjb25kaXRpb25zIGxvZ2ljYWxHcm91cGluZz0iTWF0Y2hBbGwiPicgLiAiXHJcbiI7DQogICAgICAgICRzIC49ICcJICAgPGFkZCBpbnB1dD0ie1JFUVVFU1RfRklMRU5BTUV9IiBtYXRjaFR5cGU9IklzRmlsZSIgLz4nIC4gIlxyXG4iOw0KICAgICAgICAkcyAuPSAnCSAgPC9jb25kaXRpb25zPicgLiAiXHJcbiI7DQogICAgICAgICRzIC49ICcJIDxhY3Rpb24gdHlwZT0iUmV3cml0ZSIgdXJsPSJpbmRleC5waHAve1I6MH0iIC8+JyAuICJcclxuIjsNCiAgICAgICAgJHMgLj0gJwk8L3J1bGU+JyAuICJcclxuIjsNCg0KICAgICAgICAkcyAuPSAnICAgPC9ydWxlcz4nIC4gIlxyXG4iOw0KICAgICAgICAkcyAuPSAnICA8L3Jld3JpdGU+JyAuICJcclxuIjsNCiAgICAgICAgJHMgLj0gJyA8L3N5c3RlbS53ZWJTZXJ2ZXI+JyAuICJcclxuIjsNCiAgICAgICAgJHMgLj0gJzwvY29uZmlndXJhdGlvbj4nIC4gIlxyXG4iOw0KDQogICAgICAgIHJldHVybiAkczsNCiAgICB9DQoNCiAgICAvKioNCiAgICAgKiBAcmV0dXJuIHN0cmluZw0KICAgICAqLw0KICAgIHB1YmxpYyBmdW5jdGlvbiBNYWtlX25naW54KCkgew0KICAgICAgICBnbG9iYWwgJHpicDsNCiAgICAgICAgJHMgPSAnJzsNCiAgICAgICAgJHMgLj0gJ2lmICgtZiAkcmVxdWVzdF9maWxlbmFtZS9pbmRleC5odG1sKXsnIC4gIlxyXG4iOw0KICAgICAgICAkcyAuPSAnCXJld3JpdGUgKC4qKSAkMS9pbmRleC5odG1sIGJyZWFrOycgLiAiXHJcbiI7DQogICAgICAgICRzIC49ICd9JyAuICJcclxuIjsNCiAgICAgICAgJHMgLj0gJ2lmICgtZiAkcmVxdWVzdF9maWxlbmFtZS9pbmRleC5waHApeycgLiAiXHJcbiI7DQogICAgICAgICRzIC49ICcJcmV3cml0ZSAoLiopICQxL2luZGV4LnBocDsnIC4gIlxyXG4iOw0KICAgICAgICAkcyAuPSAnfScgLiAiXHJcbiI7DQogICAgICAgICRzIC49ICdpZiAoIS1mICRyZXF1ZXN0X2ZpbGVuYW1lKXsnIC4gIlxyXG4iOw0KICAgICAgICAkcyAuPSAnCXJld3JpdGUgKC4qKSAnIC4gJHpicC0+Y29va2llc3BhdGggLiAnaW5kZXgucGhwOycgLiAiXHJcbiI7DQogICAgICAgICRzIC49ICd9JyAuICJcclxuIjsNCg0KICAgICAgICByZXR1cm4gJHM7DQogICAgfQ0KDQogICAgLyoqDQogICAgICogQHJldHVybiBzdHJpbmcNCiAgICAgKi8NCiAgICBwdWJsaWMgZnVuY3Rpb24gTWFrZV9saWdodHRwZCgpIHsNCiAgICAgICAgZ2xvYmFsICR6YnA7DQogICAgICAgICRzID0gJyc7DQoNCiAgICAgICAgLy8kcyAuPScjIEhhbmRsZSA0MDQgZXJyb3JzJyAuICJcclxuIjsNCiAgICAgICAgLy8kcyAuPSdzZXJ2ZXIuZXJyb3ItaGFuZGxlci00MDQgPSAiL2luZGV4LnBocCInIC4gIlxyXG4iOw0KICAgICAgICAvLyRzIC49JycgLiAiXHJcbiI7DQoNCiAgICAgICAgJHMgLj0gJyMgUmV3cml0ZSBydWxlcycgLiAiXHJcbiI7DQogICAgICAgICRzIC49ICd1cmwucmV3cml0ZS1pZi1ub3QtZmlsZSA9ICgnIC4gIlxyXG4iOw0KDQogICAgICAgICRzIC49ICcnIC4gIlxyXG4iOw0KICAgICAgICAkcyAuPSAnIl4nIC4gJHpicC0+Y29va2llc3BhdGggLiAnKHpiX2luc3RhbGx8emJfc3lzdGVtfHpiX3VzZXJzKS8oLiopIiA9PiAiJDAiLCcgLiAiXHJcbiI7DQoNCiAgICAgICAgJHMgLj0gJycgLiAiXHJcbiI7DQogICAgICAgICRzIC49ICciXicgLiAkemJwLT5jb29raWVzcGF0aCAuICcoLioucGhwKSIgPT4gIiQwIiwnIC4gIlxyXG4iOw0KDQogICAgICAgICRzIC49ICcnIC4gIlxyXG4iOw0KICAgICAgICAkcyAuPSAnIl4nIC4gJHpicC0+Y29va2llc3BhdGggLiAnKC4qKSQiID0+ICInIC4gJHpicC0+Y29va2llc3BhdGggLiAnaW5kZXgucGhwLyQwIicgLiAiXHJcbiI7DQoNCiAgICAgICAgJHMgLj0gJycgLiAiXHJcbiI7DQogICAgICAgICRzIC49ICcpJyAuICJcclxuIjsNCg0KICAgICAgICByZXR1cm4gJHM7DQogICAgfQ0KDQogICAgLyoqDQogICAgICogQHJldHVybiBzdHJpbmcNCiAgICAgKi8NCiAgICBwdWJsaWMgZnVuY3Rpb24gTWFrZV9odHRwZGluaSgpIHsNCiAgICAgICAgZ2xvYmFsICR6YnA7DQoNCiAgICAgICAgJHMgPSAnW0lTQVBJX1Jld3JpdGVdJyAuICJcclxuIjsNCiAgICAgICAgJHMgLj0gIlxyXG4iOw0KDQogICAgICAgICRzIC49ICR0aGlzLT5SZXdyaXRlX2h0dHBkaW5pKCR6YnAtPm9wdGlvblsnWkNfSU5ERVhfUkVHRVgnXSwgJ2luZGV4JykgLiAiXHJcbiI7DQogICAgICAgICRzIC49ICR0aGlzLT5SZXdyaXRlX2h0dHBkaW5pKCR6YnAtPm9wdGlvblsnWkNfREFURV9SRUdFWCddLCAnZGF0ZScpIC4gIlxyXG4iOw0KICAgICAgICAkcyAuPSAkdGhpcy0+UmV3cml0ZV9odHRwZGluaSgkemJwLT5vcHRpb25bJ1pDX0FVVEhPUl9SRUdFWCddLCAnYXV0aCcpIC4gIlxyXG4iOw0KICAgICAgICAkcyAuPSAkdGhpcy0+UmV3cml0ZV9odHRwZGluaSgkemJwLT5vcHRpb25bJ1pDX1RBR1NfUkVHRVgnXSwgJ3RhZ3MnKSAuICJcclxuIjsNCiAgICAgICAgJHMgLj0gJHRoaXMtPlJld3JpdGVfaHR0cGRpbmkoJHpicC0+b3B0aW9uWydaQ19DQVRFR09SWV9SRUdFWCddLCAnY2F0ZScpIC4gIlxyXG4iOw0KICAgICAgICAkcyAuPSAkdGhpcy0+UmV3cml0ZV9odHRwZGluaSgkemJwLT5vcHRpb25bJ1pDX0FSVElDTEVfUkVHRVgnXSwgJ2FydGljbGUnKSAuICJcclxuIjsNCiAgICAgICAgJHMgLj0gJHRoaXMtPlJld3JpdGVfaHR0cGRpbmkoJHpicC0+b3B0aW9uWydaQ19QQUdFX1JFR0VYJ10sICdwYWdlJykgLiAiXHJcbiI7DQoNCiAgICAgICAgcmV0dXJuICRzOw0KICAgIH0NCg0KICAgIC8qKg0KICAgICAqIEBwYXJhbSAkdXJsDQogICAgICogQHBhcmFtICR0eXBlDQogICAgICogQHJldHVybiBzdHJpbmcNCiAgICAgKi8NCiAgICBwdWJsaWMgZnVuY3Rpb24gUmV3cml0ZV9odHRwZGluaSgkdXJsLCAkdHlwZSkgew0KICAgICAgICBnbG9iYWwgJHpicDsNCg0KDQogICAgICAgICRzID0gJHVybDsNCiAgICAgICAgJHMgPSBzdHJfcmVwbGFjZSgnJXBhZ2UlJywgJyVwb2FvZ29lJScsICRzKTsNCiAgICAgICAgJHVybCA9IHN0cl9yZXBsYWNlKCd7JWhvc3QlfScsICcnLCAkdXJsKTsNCiAgICAgICAgJHVybCA9IHN0cl9yZXBsYWNlKCcuJywgJ1xcLicsICR1cmwpOw0KICAgICAgICBpZiAoJHR5cGUgPT0gJ2luZGV4Jykgew0KICAgICAgICAgICAgJHVybCA9IHN0cl9yZXBsYWNlKCclcGFnZSUnLCAnJXBvYW9nb2UlJywgJHVybCk7DQogICAgICAgICAgICBwcmVnX21hdGNoKCcvW15ce1x9XSsoPz1ceyUlcG9hb2dvZSUlXH0pL2knLCAkcywgJG1hdGNoZXMpOw0KICAgICAgICAgICAgaWYgKGlzc2V0KCRtYXRjaGVzWzBdKSkgew0KICAgICAgICAgICAgICAgICR1cmwgPSBzdHJfcmVwbGFjZSgkbWF0Y2hlc1swXSwgJyg/OicgLiAkbWF0Y2hlc1swXSAuICcpPDoxOj4nLCAkdXJsKTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgICR1cmwgPSAkdXJsIC4gJyAnIC4gJHpicC0+Y29va2llc3BhdGggLiAnaW5kZXhcLnBocFw/cGFnZT0kMSZyZXdyaXRlPTEnOw0KICAgICAgICAgICAgJHVybCA9IHN0cl9yZXBsYWNlKCclcG9hb2dvZSUnLCAnKFswLTldKiknLCAkdXJsKTsNCiAgICAgICAgfQ0KICAgICAgICBpZiAoJHR5cGUgPT0gJ2NhdGUnIHx8ICR0eXBlID09ICd0YWdzJyB8fCAkdHlwZSA9PSAnZGF0ZScgfHwgJHR5cGUgPT0gJ2F1dGgnKSB7DQogICAgICAgICAgICAkdXJsID0gc3RyX3JlcGxhY2UoJyVwYWdlJScsICclcG9hb2dvZSUnLCAkdXJsKTsNCiAgICAgICAgICAgIHByZWdfbWF0Y2goJy8oPzw9XH0pW15ce1x9XSsoPz1ceyVwb2FvZ29lJVx9KS9pJywgJHMsICRtYXRjaGVzKTsNCiAgICAgICAgICAgIGlmIChpc3NldCgkbWF0Y2hlc1swXSkpIHsNCiAgICAgICAgICAgICAgICAkdXJsID0gc3RyX3JlcGxhY2UoJG1hdGNoZXNbMF0sICcoPzonIC4gJG1hdGNoZXNbMF0gLiAnKT8nLCAkdXJsKTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgICR1cmwgPSAkdXJsIC4gJyAnIC4gJHpicC0+Y29va2llc3BhdGggLiAnaW5kZXhcLnBocFw/JyAuICR0eXBlIC4gJz0kMSZwYWdlPSQyJnJld3JpdGU9MSc7DQogICAgICAgICAgICAkdXJsID0gc3RyX3JlcGxhY2UoJyVwb2FvZ29lJScsICcoWzAtOV0qKScsICR1cmwpOw0KICAgICAgICAgICAgJHVybCA9IHN0cl9yZXBsYWNlKCclaWQlJywgJyhbMC05XSspJywgJHVybCk7DQogICAgICAgICAgICAkdXJsID0gc3RyX3JlcGxhY2UoJyVkYXRlJScsICcoWzAtOVwtXSspJywgJHVybCk7DQogICAgICAgICAgICBpZiAoJHR5cGUgPT0gJ2NhdGUnKSB7DQogICAgICAgICAgICAgICAgJHVybCA9IHN0cl9yZXBsYWNlKCclYWxpYXMlJywgJyhbXlwuL19dKi8/KSs/KScsICR1cmwpOw0KICAgICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgICAgICAkdXJsID0gc3RyX3JlcGxhY2UoJyVhbGlhcyUnLCAnKFteXC4vX10rPyknLCAkdXJsKTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgfQ0KICAgICAgICBpZiAoJHR5cGUgPT0gJ3BhZ2UnIHx8ICR0eXBlID09ICdhcnRpY2xlJykgew0KICAgICAgICAgICAgaWYgKHN0cnBvcygkdXJsLCAnJWFsaWFzJScpID09PSBmYWxzZSkgew0KICAgICAgICAgICAgICAgICR1cmwgPSAkdXJsIC4gJyhcPy4qKT8gJyAuICR6YnAtPmNvb2tpZXNwYXRoIC4gJ2luZGV4XC5waHBcP2lkPSQxJnJld3JpdGU9MSc7DQogICAgICAgICAgICAgICAgJHVybCA9IHN0cl9yZXBsYWNlKCclaWQlJywgJyhbMC05XSspJywgJHVybCk7DQogICAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgICAgICR1cmwgPSAkdXJsIC4gJyhcPy4qKT8gJyAuICR6YnAtPmNvb2tpZXNwYXRoIC4gJ2luZGV4XC5waHBcP2FsaWFzPSQxJnJld3JpdGU9MSc7DQogICAgICAgICAgICAgICAgaWYgKCR0eXBlID09ICdhcnRpY2xlJykgew0KICAgICAgICAgICAgICAgICAgICAkdXJsID0gc3RyX3JlcGxhY2UoJyVhbGlhcyUnLCAnKD8hemJfKShbXi9dKyknLCAkdXJsKTsNCiAgICAgICAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgICAgICAgICAkdXJsID0gc3RyX3JlcGxhY2UoJyVhbGlhcyUnLCAnKD8hemJfKSguKyknLCAkdXJsKTsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9DQogICAgICAgICAgICAkdXJsID0gc3RyX3JlcGxhY2UoJyVjYXRlZ29yeSUnLCAnKFteXC4vX10qLz8pKyknLCAkdXJsKTsNCiAgICAgICAgICAgICR1cmwgPSBzdHJfcmVwbGFjZSgnJWF1dGhvciUnLCAnKD86W15cLi9fXSspJywgJHVybCk7DQogICAgICAgICAgICAkdXJsID0gc3RyX3JlcGxhY2UoJyV5ZWFyJScsICcoPzpbMC05XTw6NDo+KScsICR1cmwpOw0KICAgICAgICAgICAgJHVybCA9IHN0cl9yZXBsYWNlKCclbW9udGglJywgJyg/OlswLTldPDoxLDI6PiknLCAkdXJsKTsNCiAgICAgICAgICAgICR1cmwgPSBzdHJfcmVwbGFjZSgnJWRheSUnLCAnKD86WzAtOV08OjEsMjo+KScsICR1cmwpOw0KICAgICAgICB9DQogICAgICAgICR1cmwgPSBzdHJfcmVwbGFjZSgneycsICcnLCAkdXJsKTsNCiAgICAgICAgJHVybCA9IHN0cl9yZXBsYWNlKCd9JywgJycsICR1cmwpOw0KICAgICAgICAkdXJsID0gc3RyX3JlcGxhY2UoJzw6JywgJ3snLCAkdXJsKTsNCiAgICAgICAgJHVybCA9IHN0cl9yZXBsYWNlKCc6PicsICd9JywgJHVybCk7DQoNCiAgICAgICAgcmV0dXJuICdSZXdyaXRlUnVsZSAnIC4gJHpicC0+Y29va2llc3BhdGggLiAkdXJsIC4gJyBbSSxMXSc7DQoNCiAgICB9DQoNCn0NCg==</file>
	<file name='zb_system\script\zblogphp.js' crc32='E819D81E'  dt:dt='bin.base64'>KGZ1bmN0aW9uKCl7dmFyIFpCUD1mdW5jdGlvbihvcHRpb25zLGpxdWVyeSl7aWYodHlwZW9mIGpRdWVyeT09InVuZGVmaW5lZCImJnR5cGVvZiBqcXVlcnk9PSJ1bmRlZmluZWQiKXRocm93IG5ldyBFcnJvcigiTm8galF1ZXJ5ISIpO3RoaXMuJD1qcXVlcnl8fGpRdWVyeTt2YXIgc2VsZj10aGlzO2luaXRNZXRob2RzKHRoaXMpO29wdGlvbnM9b3B0aW9uc3x8e307b3B0aW9ucy5jb29raWVwYXRoPW9wdGlvbnMuY29va2llcGF0aHx8Ii8iO29wdGlvbnMuYmxvZ2hvc3Q9b3B0aW9ucy5ibG9naG9zdHx8bG9jYXRpb24ub3JpZ2luO29wdGlvbnMuYWpheHVybD1vcHRpb25zLmFqYXh1cmx8fGxvY2F0aW9uLm9yaWdpbjtvcHRpb25zLmNvbW1lbnRtYXhsZW5ndGg9b3B0aW9ucy5jb21tZW50bWF4bGVuZ3RofHwxZTM7b3B0aW9ucy5sYW5nPW9wdGlvbnMubGFuZ3x8e307dGhpcy5vcHRpb25zPW9wdGlvbnM7dGhpcy51c2VyaW5mby51c2VybmFtZT10aGlzLmNvb2tpZS5nZXQoIm5hbWUiKTt0aGlzLnVzZXJpbmZvLm1haWw9dGhpcy5jb29raWUuZ2V0KCJlbWFpbCIpO3RoaXMudXNlcmluZm8uaG9tZXBhZ2U9dGhpcy5jb29raWUuZ2V0KCJob21lcGFnZSIpO3RoaXMucGx1Z2luLm9uKCJ1c2VyaW5mby5vdXRwdXQiLCJzeXN0ZW0iLGZ1bmN0aW9uKCl7dGhpcy4kKCIjaW5wTmFtZSIpLnZhbCh0aGlzLnVzZXJpbmZvLnVzZXJuYW1lKTt0aGlzLiQoIiNpbnBFbWFpbCIpLnZhbCh0aGlzLnVzZXJpbmZvLm1haWwpO3RoaXMuJCgiI2lucEhvbWVQYWdlIikudmFsKHRoaXMudXNlcmluZm8uaG9tZXBhZ2UpfSk7dGhpcy5wbHVnaW4ub24oInVzZXJpbmZvLnNhdmVmcm9taHRtbCIsInN5c3RlbSIsZnVuY3Rpb24oKXt0aGlzLnVzZXJpbmZvLnVzZXJuYW1lPXRoaXMuJCgiI2lucE5hbWUiKS52YWwoKTt0aGlzLnVzZXJpbmZvLm1haWw9dGhpcy4kKCIjaW5wRW1haWwiKS52YWwoKTt0aGlzLnVzZXJpbmZvLmhvbWVwYWdlPXRoaXMuJCgiI2lucEhvbWVQYWdlIikudmFsKCk7dGhpcy51c2VyaW5mby5zYXZlKCl9KTt0aGlzLnBsdWdpbi5vbigidXNlcmluZm8uc2F2ZSIsInN5c3RlbSIsZnVuY3Rpb24oKXt0aGlzLmNvb2tpZS5zZXQoIm5hbWUiLHRoaXMudXNlcmluZm8udXNlcm5hbWUpO3RoaXMuY29va2llLnNldCgiZW1haWwiLHRoaXMudXNlcmluZm8ubWFpbCk7dGhpcy5jb29raWUuc2V0KCJob21lcGFnZSIsdGhpcy51c2VyaW5mby5ob21lcGFnZSl9KTt0aGlzLnBsdWdpbi5vbigiY29tbWVudC52ZXJpZnlkYXRhIiwic3lzdGVtIixmdW5jdGlvbihlcnJvcixmb3JtRGF0YSl7dmFyIHJlZ0V4TGlzdD17bmFtZTpbZmFsc2UsNzIsL15bXC5cX0EtWmEtejAtOVx1NGUwMC1cdTlmYTVdKyQvZ2ldLGVtYWlsOlt0cnVlLDI5LC9eW1x3LV0rKFwuW1x3LV0rKSpAW1x3LV0rKFwuW1x3LV0rKSskL2dpXSxjb250ZW50OltmYWxzZSw0NiwvLi9dfTtmb3IodmFyIGl0ZW0gaW4gcmVnRXhMaXN0KXt2YXIgb2JqZWN0PXJlZ0V4TGlzdFtpdGVtXTtpZighb2JqZWN0WzBdJiZmb3JtRGF0YVtpdGVtXT09PSIifHwhb2JqZWN0WzJdLnRlc3QoZm9ybURhdGFbaXRlbV0pJiZmb3JtRGF0YVtpdGVtXSE9PSIiKXtlcnJvci5jb2RlPW9iamVjdFsxXTtlcnJvci5tc2c9dGhpcy5vcHRpb25zLmxhbmcuZXJyb3JbZXJyb3IuY29kZV07cmV0dXJuIGVycm9yfX12YXIgb2JqU3VibWl0PSQoIiNpbnBJZCIpLnBhcmVudCgiZm9ybSIpLmZpbmQoIjpzdWJtaXQiKTtvYmpTdWJtaXQuZGF0YSgib3JpZyIsb2JqU3VibWl0LnZhbCgpKS52YWwoIldhaXRpbmcuLi4iKS5hdHRyKCJkaXNhYmxlZCIsImRpc2FibGVkIikuYWRkQ2xhc3MoImxvYWRpbmciKX0pO3RoaXMucGx1Z2luLm9uKCJjb21tZW50LnBvc3RlcnJvciIsInN5c3RlbSIsZnVuY3Rpb24oZXJyb3IsZm9ybURhdGEpe3ZhciBvYmpTdWJtaXQ9JCgiI2lucElkIikucGFyZW50KCJmb3JtIikuZmluZCgiOnN1Ym1pdCIpO29ialN1Ym1pdC5yZW1vdmVDbGFzcygibG9hZGluZyIpLnJlbW92ZUF0dHIoImRpc2FibGVkIik7aWYob2JqU3VibWl0LmRhdGEoIm9yaWciKSl7b2JqU3VibWl0LnZhbChvYmpTdWJtaXQuZGF0YSgib3JpZyIpKX19KTt0aGlzLnBsdWdpbi5vbigiY29tbWVudC5wb3N0c3VjY2VzcyIsInN5c3RlbSIsZnVuY3Rpb24oZm9ybURhdGEscmV0U3RyaW5nLHRleHRTdGF0dXMsanFYaHIpe3ZhciBvYmpTdWJtaXQ9JCgiI2lucElkIikucGFyZW50KCJmb3JtIikuZmluZCgiOnN1Ym1pdCIpO29ialN1Ym1pdC5yZW1vdmVDbGFzcygibG9hZGluZyIpLnJlbW92ZUF0dHIoImRpc2FibGVkIikudmFsKG9ialN1Ym1pdC5kYXRhKCJvcmlnIikpO3ZhciBkYXRhPSQucGFyc2VKU09OKHJldFN0cmluZyk7aWYoZGF0YS5lcnIuY29kZSE9PTApe2FsZXJ0KGRhdGEuZXJyLm1zZyk7dGhyb3ciRVJST1IgLSAiK2RhdGEuZXJyLm1zZ31pZihmb3JtRGF0YS5yZXBseWlkPT0iMCIpe3RoaXMuJChkYXRhLmRhdGEuaHRtbCkuaW5zZXJ0QWZ0ZXIoIiNBamF4Q29tbWVudEJlZ2luIil9ZWxzZXt0aGlzLiQoZGF0YS5kYXRhLmh0bWwpLmluc2VydEFmdGVyKCIjQWpheENvbW1lbnQiK2Zvcm1EYXRhLnJlcGx5aWQpfWxvY2F0aW9uLmhhc2g9IiMiK2RhdGEuZGF0YS5JRDt0aGlzLiQoIiN0eGFBcnRpY2xlIikudmFsKCIiKTt0aGlzLnVzZXJpbmZvLnNhdmVGcm9tSHRtbCgpfSk7dGhpcy5wbHVnaW4ub24oImNvbW1lbnQuZ2V0Iiwic3lzdGVtIixmdW5jdGlvbihwb3N0aWQscGFnZSl7dmFyIHNlbGY9dGhpczt0aGlzLiQuZ2V0KHRoaXMub3B0aW9ucy5ibG9naG9zdCsiemJfc3lzdGVtL2NtZC5waHA/YWN0PWdldGNtdCZwb3N0aWQ9Iitwb3N0aWQrIiZwYWdlPSIrcGFnZSxmdW5jdGlvbihkYXRhLHRleHRTdGF0dXMsanFYaHIpe3NlbGYucGx1Z2luLmVtaXQoImNvbW1lbnQuZ290IixbcG9zdGlkLHBhZ2VdLGRhdGEsdGV4dFN0YXR1cyxqcVhocil9KX0pO3RoaXMucGx1Z2luLm9uKCJjb21tZW50LmdvdCIsInN5c3RlbSIsZnVuY3Rpb24oZm9ybURhdGEsZGF0YSx0ZXh0U3RhdHVzLGpxWGhyKXt0aGlzLiQoIiNBamF4Q29tbWVudEJlZ2luIikubmV4dFVudGlsKCIjQWpheENvbW1lbnRFbmQiKS5yZW1vdmUoKTt0aGlzLiQoIiNBamF4Q29tbWVudEJlZ2luIikuYWZ0ZXIoZGF0YSl9KTt0aGlzLnBsdWdpbi5vbigiY29tbWVudC5yZXBseSIsInN5c3RlbSIsZnVuY3Rpb24oaWQpe3ZhciBtZT10aGlzO3RoaXMuJCgiI2lucFJldklEIikudmFsKGlkKTt0aGlzLiQoIiNjYW5jZWwtcmVwbHkiKS5zaG93KCkuYmluZCgiY2xpY2siLGZ1bmN0aW9uKCl7bWUuJCgiI2lucFJldklEIikudmFsKDApO21lLiQodGhpcykuaGlkZSgpO3dpbmRvdy5sb2NhdGlvbi5oYXNoPSIjY29tbWVudCI7cmV0dXJuIGZhbHNlfSk7d2luZG93LmxvY2F0aW9uLmhhc2g9IiNjb21tZW50In0pO3JldHVybiB0aGlzfTtaQlAucHJvdG90eXBlLl9wbHVnaW5zPXt9O3ZhciBpbml0TWV0aG9kcz1mdW5jdGlvbihzZWxmKXt2YXIgUExVR0lOPWZ1bmN0aW9uKCl7fTtQTFVHSU4ucHJvdG90eXBlLmJpbmQ9UExVR0lOLnByb3RvdHlwZS5vbj1QTFVHSU4ucHJvdG90eXBlLmFkZExpc3RlbmVyPWZ1bmN0aW9uKGludGVyZmFjZU5hbWUscGx1Z2luTmFtZSxjYWxsYmFjayl7aWYodHlwZW9mIHNlbGYuX3BsdWdpbnNbaW50ZXJmYWNlTmFtZV09PSJ1bmRlZmluZWQiKXNlbGYuX3BsdWdpbnNbaW50ZXJmYWNlTmFtZV09e307c2VsZi5fcGx1Z2luc1tpbnRlcmZhY2VOYW1lXVtwbHVnaW5OYW1lXT1jYWxsYmFjaztyZXR1cm4gc2VsZn07UExVR0lOLnByb3RvdHlwZS51bmJpbmQ9UExVR0lOLnByb3RvdHlwZS5yZW1vdmVMaXN0ZW5lcj1mdW5jdGlvbihpbnRlcmZhY2VOYW1lLHBsdWdpbk5hbWUpe2lmKCFwbHVnaW5OYW1lKXBsdWdpbk5hbWU9IiI7aWYocGx1Z2luTmFtZT09PSIiKXtzZWxmLl9wbHVnaW5zW2ludGVyZmFjZU5hbWVdPXt9fWVsc2V7c2VsZi5fcGx1Z2luc1tpbnRlcmZhY2VOYW1lXVtwbHVnaW5OYW1lXT1udWxsO2RlbGV0ZSBzZWxmLl9wbHVnaW5zW2ludGVyZmFjZU5hbWVdW3BsdWdpbk5hbWVdfXJldHVybiBzZWxmfTtQTFVHSU4ucHJvdG90eXBlLmVtaXQ9ZnVuY3Rpb24oaW50ZXJmYWNlTmFtZSl7dmFyIGFyZ3U9W107Zm9yKHZhciBpPTE7aTxhcmd1bWVudHMubGVuZ3RoO2krKyl7YXJndS5wdXNoKGFyZ3VtZW50c1tpXSl9Zm9yKHZhciBpdGVtIGluIHNlbGYuX3BsdWdpbnNbaW50ZXJmYWNlTmFtZV0pe3NlbGYuX3BsdWdpbnNbaW50ZXJmYWNlTmFtZV1baXRlbV0uYXBwbHkoc2VsZixhcmd1KX1yZXR1cm4gc2VsZn07c2VsZi5wbHVnaW49bmV3IFBMVUdJTjt2YXIgQ09PS0lFPWZ1bmN0aW9uKCl7fTtDT09LSUUucHJvdG90eXBlLmdldD1mdW5jdGlvbihzQ29va2llTmFtZSl7dmFyIGFycj1kb2N1bWVudC5jb29raWUubWF0Y2gobmV3IFJlZ0V4cCgiKF58ICkiK3NDb29raWVOYW1lKyI9KFteO10qKSg7fCQpIikpO3JldHVybiBhcnI/dW5lc2NhcGUoYXJyWzJdKTpudWxsfTtDT09LSUUucHJvdG90eXBlLnNldD1mdW5jdGlvbihzQ29va2llTmFtZSxzQ29va2llVmFsdWUsaUV4cGlyZURheXMpe3ZhciBkRXhwaXJlPW5ldyBEYXRlO2lmKGlFeHBpcmVEYXlzKXtkRXhwaXJlLnNldFRpbWUoZEV4cGlyZS5nZXRUaW1lKCkrcGFyc2VJbnQoaUV4cGlyZURheXMqMjQqNjAqNjAqMWUzKSl9ZG9jdW1lbnQuY29va2llPXNDb29raWVOYW1lKyI9Iitlc2NhcGUoc0Nvb2tpZVZhbHVlKSsiOyAiKyhpRXhwaXJlRGF5cz8iZXhwaXJlcz0iK2RFeHBpcmUudG9HTVRTdHJpbmcoKSsiOyAiOiIiKSsicGF0aD0iK3NlbGYub3B0aW9ucy5jb29raWVwYXRoO3JldHVybiBzZWxmfTtzZWxmLmNvb2tpZT1uZXcgQ09PS0lFO3ZhciBVU0VSSU5GTz1mdW5jdGlvbigpe307VVNFUklORk8ucHJvdG90eXBlLm91dHB1dD1mdW5jdGlvbigpe3NlbGYucGx1Z2luLmVtaXQoInVzZXJpbmZvLm91dHB1dCIpO3JldHVybiBzZWxmfTtVU0VSSU5GTy5wcm90b3R5cGUuc2F2ZT1mdW5jdGlvbigpe3NlbGYucGx1Z2luLmVtaXQoInVzZXJpbmZvLnNhdmUiKTtyZXR1cm4gc2VsZn07VVNFUklORk8ucHJvdG90eXBlLnNhdmVGcm9tSHRtbD1mdW5jdGlvbigpe3NlbGYucGx1Z2luLmVtaXQoInVzZXJpbmZvLnNhdmVmcm9taHRtbCIpO3JldHVybiBzZWxmfTtzZWxmLnVzZXJpbmZvPW5ldyBVU0VSSU5GTzt2YXIgQ09NTUVOVD1mdW5jdGlvbigpe307Q09NTUVOVC5wcm90b3R5cGUuZ2V0PWZ1bmN0aW9uKHBvc3RpZCxwYWdlKXtzZWxmLnBsdWdpbi5lbWl0KCJjb21tZW50LmdldCIscG9zdGlkLHBhZ2UpO3JldHVybiBzZWxmfTtDT01NRU5ULnByb3RvdHlwZS5yZXBseT1mdW5jdGlvbihpZCl7c2VsZi5wbHVnaW4uZW1pdCgiY29tbWVudC5yZXBseSIsaWQpO3JldHVybiBzZWxmfTtDT01NRU5ULnByb3RvdHlwZS5wb3N0PWZ1bmN0aW9uKGZvcm1EYXRhKXtmb3JtRGF0YT1mb3JtRGF0YXx8e307Zm9ybURhdGEuYWN0aW9uPWZvcm1EYXRhLmFjdGlvbnx8JCgiI2lucElkIikucGFyZW50KCJmb3JtIikuYXR0cigiYWN0aW9uIik7Zm9ybURhdGEucG9zdGlkPWZvcm1EYXRhLnBvc3RpZHx8JCgiI2lucElkIikudmFsKCk7Zm9ybURhdGEudmVyaWZ5PWZvcm1EYXRhLnZlcmlmeXx8JCgiI2lucFZlcmlmeSIpLnZhbCgpO2Zvcm1EYXRhLm5hbWU9Zm9ybURhdGEubmFtZXx8JCgiI2lucE5hbWUiKS52YWwoKTtmb3JtRGF0YS5lbWFpbD1mb3JtRGF0YS5lbWFpbHx8JCgiI2lucEVtYWlsIikudmFsKCk7Zm9ybURhdGEuY29udGVudD1mb3JtRGF0YS5jb250ZW50fHwkKCIjdHhhQXJ0aWNsZSIpLnZhbCgpO2Zvcm1EYXRhLmhvbWVwYWdlPWZvcm1EYXRhLmhvbWVwYWdlfHwkKCIjaW5wSG9tZVBhZ2UiKS52YWwoKTtmb3JtRGF0YS5yZXBseWlkPWZvcm1EYXRhLnJlcGx5aWR8fCQoIiNpbnBSZXZJRCIpLnZhbCgpO2Zvcm1EYXRhLmZvcm1hdD1mb3JtRGF0YS5mb3JtYXR8fCJqc29uIjtpZighL14oLispXDpcL1wvLy50ZXN0KGZvcm1EYXRhLmhvbWVwYWdlKSYmZm9ybURhdGEuaG9tZXBhZ2UhPSIiKXskKCIjaW5wSG9tZVBhZ2UiKS52YWwoImh0dHA6Ly8iK2Zvcm1EYXRhLmhvbWVwYWdlKTtmb3JtRGF0YS5ob21lcGFnZT0iaHR0cDovLyIrZm9ybURhdGEuaG9tZXBhZ2V9dmFyIGVycm9yPXtjb2RlOjAsbXNnOiIifTtzZWxmLnBsdWdpbi5lbWl0KCJjb21tZW50LnZlcmlmeWRhdGEiLGVycm9yLGZvcm1EYXRhKTtpZihlcnJvci5jb2RlIT09MCl7YWxlcnQoZXJyb3IubXNnKTt0cnl7Y29uc29sZS5sb2coZm9ybURhdGEpO2NvbnNvbGUubG9nKCJFUlJPUiAtICIrZXJyb3IubXNnKX1jYXRjaChlKXt9c2VsZi5wbHVnaW4uZW1pdCgiY29tbWVudC5wb3N0ZXJyb3IiLGVycm9yLGZvcm1EYXRhKTtyZXR1cm4gZmFsc2V9c2VsZi4kLnBvc3QoZm9ybURhdGEuYWN0aW9uLGZvcm1EYXRhKS5kb25lKGZ1bmN0aW9uKGRhdGEsdGV4dFN0YXR1cyxqcVhocil7c2VsZi5wbHVnaW4uZW1pdCgiY29tbWVudC5wb3N0c3VjY2VzcyIsZm9ybURhdGEsZGF0YSx0ZXh0U3RhdHVzLGpxWGhyKX0pLmZhaWwoZnVuY3Rpb24oanFYSFIsdGV4dFN0YXR1cyl7c2VsZi5wbHVnaW4uZW1pdCgiY29tbWVudC5wb3N0ZXJyb3IiLHtqcVhIUjpqcVhIUixtc2c6dGV4dFN0YXR1cyxjb2RlOjI1NX0sZm9ybURhdGEpfSk7cmV0dXJuIGZhbHNlfTtzZWxmLmNvbW1lbnQ9bmV3IENPTU1FTlR9O2lmKHR5cGVvZiBkZWZpbmU9PT0iZnVuY3Rpb24iJiZkZWZpbmUuYW1kKXtkZWZpbmUoInpicCIsW10sZnVuY3Rpb24oKXtyZXR1cm4gWkJQfSl9ZWxzZSBpZih0eXBlb2YgZGVmaW5lPT09ImZ1bmN0aW9uIiYmZGVmaW5lLmNtZCl7ZGVmaW5lKCJ6YnAiLFtdLGZ1bmN0aW9uKHJlcXVpcmUsZXhwb3J0cyxtb2R1bGUpe21vZHVsZS5leHBvcnRzPVpCUH0pfWVsc2UgaWYodHlwZW9mIG1vZHVsZSE9PSJ1bmRlZmluZWQiKXttb2R1bGUuZXhwb3J0cz1aQlB9ZWxzZXt3aW5kb3cuWkJQPVpCUH19KSgpOw==</file>
	<file name='zb_users\language\en.php' crc32='8CC1CA28'  dt:dt='bin.base64'>PD9waHANCi8vPGxhbmd1YWdlPkVuZ2xpc2g8L2xhbmd1YWdlPg0KLy9UaGUgc2Vjb25kIGxpbmUgb2YgdGhpcyBmaWxlIGlzIHRoZSBuYW1lIG9mIHRoZSBsYW5ndWFnZQ0KLy9BdXRob3I6WWFuZyBZaXh1YW4NCi8vQXV0aG9yIFVSSTpodHRwOi8vd3d3Lnlhbmd5aXh1YW4uY29tDQovL0UtbWFpbDpzZW5AeWFuZ3lpeHVhbi5jb20NCi8vRGF0ZToyMDE1MDEyNg0KDQovLydDdXN0b20gSW5mb3JtYXRpb24NCi8vJ0Rvbid0IGRlbGV0ZSAlcyBhbmQgKCkNCg0KcmV0dXJuIGFycmF5KA0KDQogICAgJ2xhbmcnID0+ICdlbicsDQogICAgJ2xhbmdfYmNwNDcnID0+ICdlbicsIC8vIGh0dHA6Ly90b29scy5pZXRmLm9yZy9odG1sL2JjcDQ3DQogICAgJ2xhbmdfbmFtZScgPT4gJ0VuZ2xpc2gnLA0KICAgICdmb250X2ZhbWlseScgPT4gJ0hlbHZldGljYSxBcmlhbCxzYW5zLXNlcmlmJywNCiAgICAnZm9udF9zaXplJyA9PiAnJywNCiAgICAnd2luZG93c19jaGFyYWN0ZXJfc2V0JyA9PiAnSVNPLTg4NTktMScsDQoNCiNGcm9udC1FbmQgJiBCYWNrLUVuZA0KICAgICdtc2cnID0+IGFycmF5KA0KICAgICAgICAnaWQnID0+ICdJRCcsDQogICAgICAgICduYW1lJyA9PiAnTmFtZScsDQogICAgICAgICd0aXRsZScgPT4gJ1RpdGxlJywNCiAgICAgICAgJ2FsaWFzJyA9PiAnU2x1ZycsDQogICAgICAgICd0YWdzJyA9PiAnVGFncycsDQogICAgICAgICdzZWFyY2gnID0+ICdTZWFyY2gnLA0KICAgICAgICAnY29tbWVudCcgPT4gJ0NvbW1lbnRzJywNCiAgICAgICAgJ2NvbnRlbnQnID0+ICdDb250ZW50JywNCiAgICAgICAgJ2ludHJvJyA9PiAnU3VtbWFyeScsDQogICAgICAgICdkYXRlJyA9PiAnRGF0ZScsDQogICAgICAgICdjYXRlZ29yeScgPT4gJ0NhdGVnb3JpZXMnLA0KICAgICAgICAndG9wJyA9PiAnU3RpY2t5IFBvc3QnLA0KICAgICAgICAnc3RhdHVzJyA9PiAnU3RhdHVzJywNCiAgICAgICAgJ3RlbXBsYXRlJyA9PiAnVGVtcGxhdGUnLA0KICAgICAgICAnYXV0aG9yJyA9PiAnQXV0aG9yJywNCiAgICAgICAgJ3R5cGUnID0+ICdUeXBlJywNCiAgICAgICAgJ29yZGVyJyA9PiAnT3JkZXInLA0KICAgICAgICAnc3VibWl0JyA9PiAnU3VibWl0JywNCiAgICAgICAgJ3Jlc2V0JyA9PiAnUmVzZXQnLA0KICAgICAgICAnZXJyb3InID0+ICdFcnJvcicsDQogICAgICAgICdlbWFpbCcgPT4gJ0UtbWFpbCcsDQogICAgICAgICdob21lcGFnZScgPT4gJ0hvbWVwYWdlJywNCiAgICAgICAgJ2Fub255bW91cycgPT4gJ0Fub255bW91cycsDQogICAgICAgICd1bm5hbWVkJyA9PiAnVW5uYW1lZCcsDQogICAgICAgICdmaWxlbmFtZScgPT4gJ0ZpbGVuYW1lJywNCiAgICAgICAgJ2h0bWxpZCcgPT4gJ0hUTUwgSUQnLA0KICAgICAgICAnc2l6ZScgPT4gJ1NpemUnLA0KICAgICAgICAnbm9uZScgPT4gJ05vbmUnLA0KICAgICAgICAnYW55JyA9PiAnVW5saW1pdGVkJywNCiAgICAgICAgJ2VkaXQnID0+ICdFZGl0JywNCiAgICAgICAgJ2RlbCcgPT4gJ0RlbGV0ZScsDQogICAgICAgICdhbnknID0+ICdVbmxpbWl0ZWQnLA0KICAgICAgICAnbG9naW4nID0+ICdMb2cgSW4nLA0KICAgICAgICAnZW5hYmxlJyA9PiAnQWN0aXZhdGUnLA0KICAgICAgICAnZGlzYWJsZScgPT4gJ0RlYWN0aXZhdGUnLA0KICAgICAgICAnbWFuYWdlJyA9PiAnTWFuYWdlJywNCiAgICAgICAgJ2FkbWluJyA9PiAnQWRtaW4nLA0KICAgICAgICAnd2VsY29tZScgPT4gJ0hvd2R5LCAnLA0KICAgICAgICAnbG9nb3V0JyA9PiAnTG9nIE91dCcsDQogICAgICAgICdhdWRpdCcgPT4gJ1VuYXBwcm92ZScsDQogICAgICAgICdwYXNzJyA9PiAnQXBwcm92aW5nJywNCiAgICAgICAgJ2FydGljbGUnID0+ICdQdWJsaXNoZWQnLA0KICAgICAgICAncGFnZScgPT4gJ1BhZ2UnLA0KICAgICAgICAneWVhcl9tb250aCcgPT4gJyV5JS0lbSUnLA0KICAgICAgICAnbnVtYmVyX3BhZ2UnID0+ICdQYWdlICVudW0lJywNCiAgICAgICAgJ3BhcmVudF9jYXRlZ29yeScgPT4gJ1BhcmVudCcsDQogICAgICAgICdwYXNzd29yZCcgPT4gJ1Bhc3N3b3JkJywNCiAgICAgICAgJ3JlX3Bhc3N3b3JkJyA9PiAnUmVwZWF0IFBhc3N3b3JkJywNCiAgICAgICAgJ3VwbG9hZF9maWxlJyA9PiAnRmlsZSBVcGxvYWQnLA0KICAgICAgICAnYXV0b19yZW5hbWVfdXBsb2FkZmlsZScgPT4gJ0F1dG8gcmVuYW1lIGZpbGVuYW1lJywNCiAgICAgICAgJ3VzZXJuYW1lJyA9PiAnVXNlcm5hbWUnLA0KICAgICAgICAncmV0dXJuX3RvX3NpdGUnID0+ICdWaXNpdCBTaXRlJywNCiAgICAgICAgJ2NoZWNrX2NvbW1lbnQnID0+ICdQZW5kaW5nJywNCiAgICAgICAgJ2Rhc2hib2FyZCcgPT4gJ0Rhc2hib2FyZCBIb21lJywNCiAgICAgICAgJ3NldHRpbmdzJyA9PiAnU2V0dGluZ3MnLA0KICAgICAgICAnb2ZmaWNpYWxfd2Vic2l0ZScgPT4gJ1N1cHBvcnQnLA0KICAgICAgICAncGFyZW5kX2lkJyA9PiAnUGFyZW50IElEJywNCiAgICAgICAgJ3NlbGVjdF9hbGwnID0+ICdDaGVjayBBbGwnLA0KICAgICAgICAnbmV3X2FydGljbGUnID0+ICdBZGQgUG9zdCcsDQogICAgICAgICduZXdfcGFnZScgPT4gJ0FkZCBOZXcgUGFnZScsDQogICAgICAgICduZXdfdGFnJyA9PiAnQWRkIE5ldyBUYWcnLA0KICAgICAgICAnbmV3X21lbWJlcicgPT4gJ0FkZCBOZXcgVXNlcicsDQogICAgICAgICduZXdfY2F0ZWdvcnknID0+ICdBZGQgTmV3IENhdGVnb3J5JywNCiAgICAgICAgJ25ld19tb2R1bGUnID0+ICdBZGQgTmV3IE1vZHVsZScsDQogICAgICAgICdhcnRpY2xlX2VkaXQnID0+ICdFZGl0IFBvc3QnLA0KICAgICAgICAncGFnZV9lZGl0JyA9PiAnRWRpdCBQYWdlJywNCiAgICAgICAgJ3RhZ19lZGl0JyA9PiAnRWRpdCBUYWcnLA0KICAgICAgICAnY2F0ZWdvcnlfZWRpdCcgPT4gJ0VkaXQgQ2F0ZWdvcnknLA0KICAgICAgICAnYXJ0aWNsZV9tYW5hZ2UnID0+ICdQb3N0cycsDQogICAgICAgICdwYWdlX21hbmFnZScgPT4gJ1BhZ2VzJywNCiAgICAgICAgJ2NhdGVnb3J5X21hbmFnZScgPT4gJ0NhdGVnb3JpZXMnLA0KICAgICAgICAnY2F0ZWdvcnlfZWRpdCcgPT4gJ0VkaXQgQ2F0ZWdvcnknLA0KICAgICAgICAndGFnX21hbmFnZScgPT4gJ1RhZ3MnLA0KICAgICAgICAndGFnX2VkaXQnID0+ICdFZGl0IFRhZycsDQogICAgICAgICdtZW1iZXJfZWRpdCcgPT4gJ0VkaXQgVXNlcicsDQogICAgICAgICdtb2R1bGVfZWRpdCcgPT4gJ0VkaXQgTW9kdWxlJywNCiAgICAgICAgJ21vZHVsZV9uYXZiYXInID0+ICdOYXZpZ2F0aW9uIEJhcicsDQogICAgICAgICdtb2R1bGVfbWlzYycgPT4gJ0ljb25zJywNCiAgICAgICAgJ21vZHVsZV9saW5rJyA9PiAnTGlua3MnLA0KICAgICAgICAnbW9kdWxlX2Zhdm9yaXRlJyA9PiAnQm9va21hcmtzJywNCiAgICAgICAgJ2NvbW1lbnRfbWFuYWdlJyA9PiAnQ29tbWVudHMnLA0KICAgICAgICAndXBsb2FkX21hbmFnZScgPT4gJ0F0dGFjaG1lbnRzJywNCiAgICAgICAgJ21lbWJlcl9tYW5hZ2UnID0+ICdVc2VycycsDQogICAgICAgICd0aGVtZV9tYW5hZ2UnID0+ICdUaGVtZXMnLA0KICAgICAgICAncGx1Z2luX21hbmFnZScgPT4gJ1BsdWdpbnMnLA0KICAgICAgICAnbW9kdWxlX21hbmFnZScgPT4gJ01vZHVsZXMnLA0KICAgICAgICAnc2l0ZV9hbmFseXplJyA9PiAnU2l0ZSBJbmZvcm1hdGlvbicsDQogICAgICAgICdpbmZvX2ludHJvJyA9PiAnRGFzaGJvYXJkJywNCiAgICAgICAgJ3JlZnJlc2hfY2FjaGUnID0+ICdSZWZyZXNoIENhY2hlICZhbXA7IENvbXBpbGUgVGVtcGxhdGUnLA0KICAgICAgICAnbGF0ZXN0X25ld3MnID0+ICdaLUJsb2cgTmV3cycsDQogICAgICAgICdyZWZyZXNoJyA9PiAnUmVmcmVzaCcsDQogICAgICAgICdwb3N0X2NvdW50JyA9PiAnUG9zdHMnLA0KICAgICAgICAnYmFzaWNfc2V0dGluZycgPT4gJ0dlbmVyYWwgU2V0dGluZ3MnLA0KICAgICAgICAnZ2xvYmFsX3NldHRpbmcnID0+ICdHbG9iYWwgU2V0dGluZ3MnLA0KICAgICAgICAncGFnZV9zZXR0aW5nJyA9PiAnUmVhZGluZyBTZXR0aW5ncycsDQogICAgICAgICdjb21tZW50X3NldHRpbmcnID0+ICdEaXNjdXNzaW9uIFNldHRpbmdzJywNCiAgICAgICAgJ290aGVyX3NldHRpbmcnID0+ICdPdGhlciBTZXR0aW5ncycsDQogICAgICAgICdibG9nX2hvc3QnID0+ICdTaXRlIEFkZHJlc3MgKFNpdGUgVVJMKScsDQogICAgICAgICdibG9nX2hvc3RfYWRkJyA9PiAnRGVmYXVsdCBhdXRvbWF0aWMgcmVjb2duaXRpb24uIElmIHlvdSBuZWVkIHRvIHBlcm1hbmVudCB5b3VyIHNpdGUgYWRkcmVzcywgcGxlYXNlIGNsaWNrIG9uIHRoZSBidXR0b24gYW5kIGVudGVyIHlvdXIgZG9tYWluIG5hbWUuJywNCiAgICAgICAgJ2NvcHlyaWdodCcgPT4gJ0NvcHlyaWdodCBOb3RpY2UnLA0KICAgICAgICAnY29weXJpZ2h0X2FkZCcgPT4gJ1BsZWFzZSBmaWxsIGluIHRoZSBjb3B5cmlnaHQgbm90aWNlLCB3ZWJzaXRlIHN0YXRpc3RpY3MgY29kZSwgYW5kIHNvIG9uLicsDQogICAgICAgICdibG9nX25hbWUnID0+ICdTaXRlIFRpdGxlJywNCiAgICAgICAgJ2Jsb2dfc3VibmFtZScgPT4gJ1NpdGUgVGFnbGluZScsDQogICAgICAgICdwZXJtYW5lbnRfZG9tYWluJyA9PiAnUGVybWFuZW50IFNpdGUgVVJMJywNCiAgICAgICAgJ2Jsb2dfdGltZXpvbmUnID0+ICdTaXRlIFRpbWV6b25lJywNCiAgICAgICAgJ2Jsb2dfbGFuZ3VhZ2UnID0+ICdTaXRlIExhbmd1YWdlJywNCiAgICAgICAgJ2FsbG93X3VwbG9hZF90eXBlJyA9PiAnQWxsb3dzIHRvIFVwbG9hZCBhIEZpbGUgb2YgVHlwZScsDQogICAgICAgICdhbGxvd191cGxvYWRfc2l6ZScgPT4gJ0FsbG93IFVwbG9hZCBGaWxlIFNpemUgKGluIE1CKScsDQogICAgICAgICdkZWJ1Z19tb2RlJyA9PiAnRGV2ZWxvcG1lbnQgTW9kZScsDQogICAgICAgICdkaXNwbGF5X2NvdW50JyA9PiAnTGlzdCBQYWdlIERpc3BsYXlzIHRoZSBOdW1iZXIgb2YgUG9zdHMnLA0KICAgICAgICAncGFnZWJhcl9jb3VudCcgPT4gJ1BhZ2ViYXIgRGlzcGxheXMgdGhlIE51bWJlciBvZiBQYWdlcycsDQogICAgICAgICdzZWFyY2hfY291bnQnID0+ICdBbGxvd3MgdGhlIFNlYXJjaCB0byBSZXR1cm4gdGhlIE1heGltdW0gTnVtYmVyIG9mIFBvc3RzJywNCiAgICAgICAgJ21hbmFnZV9jb3VudCcgPT4gJ1RoZSBEYXNoYm9hcmQgRGlzcGxheXMgdGhlIE51bWJlciBvZiBQb3N0cycsDQogICAgICAgICdjb21tZW50X3R1cm5vZmYnID0+ICdUdXJuIE9mZiBDb21tZW50cycsDQogICAgICAgICdjb21tZW50X3JldmVyc2Vfb3JkZXInID0+ICdFbmFibGUgQ29tbWVudHMgT3V0cHV0IGluIFJldmVyc2UgT3JkZXInLA0KICAgICAgICAnY29tbWVudHNfZGlzcGxheV9jb3VudCcgPT4gJ051bWJlciBvZiBDb21tZW50cyBQZXIgUGFnZScsDQogICAgICAgICdjb21tZW50X3ZlcmlmeV9lbmFibGUnID0+ICdFbmFibGVkIENvbW1lbnRzIENhcHRjaGEnLA0KICAgICAgICAnc3RheV9zaWduZWRfaW4nID0+ICdSZW1lbWJlciBNZScsDQogICAgICAgICdub3RpZnknID0+ICdOb3RpZnknLA0KICAgICAgICAnY3VycmVudF9tZW1iZXInID0+ICdDdXJyZW50IFVzZXInLA0KICAgICAgICAnY3VycmVudF92ZXJzaW9uJyA9PiAnQ3VycmVudCBWZXJzaW9uJywNCiAgICAgICAgJ2FsbF9hcnRpbGVzJyA9PiAnUG9zdHMnLA0KICAgICAgICAnYWxsX3BhZ2VzJyA9PiAnUGFnZXMnLA0KICAgICAgICAnYWxsX3RhZ3MnID0+ICdUYWdzJywNCiAgICAgICAgJ2FsbF9jYXRlZ29yeXMnID0+ICdDYXRlZ29yaWVzJywNCiAgICAgICAgJ2FsbF9jb21tZW50cycgPT4gJ0NvbW1lbnRzJywNCiAgICAgICAgJ2FsbF9tZW1iZXJzJyA9PiAnVXNlcnMnLA0KICAgICAgICAnYWxsX3ZpZXdzJyA9PiAnVmlld3MnLA0KICAgICAgICAnYWxsX3VwbG9hZHMnID0+ICdBdHRhY2htZW50cycsDQogICAgICAgICdjdXJyZW50X3RoZW1lJyA9PiAnQ3VycmVudCBUaGVtZScsDQogICAgICAgICdjdXJyZW50X3N0eWxlJyA9PiAnQ3VycmVudCBTdHlsZScsDQogICAgICAgICdkZWZhdWx0X2F2YXRhcicgPT4gJ0RlZmF1bHQgQXZhdGFyJywNCiAgICAgICAgJ3N0eWxlJyA9PiAnU3R5bGUnLA0KICAgICAgICAndGhlbWUnID0+ICdUaGVtZScsDQogICAgICAgICdzeXN0ZW1fbW9kdWxlJyA9PiAnU3lzdGVtIE1vZHVsZScsDQogICAgICAgICd1c2VyX21vZHVsZScgPT4gJ1VzZXIgTW9kdWxlJywNCiAgICAgICAgJ3RoZW1lX21vZHVsZScgPT4gJ1RoZW1lIE1vZHVsZScsDQogICAgICAgICdwbHVnaW5fbW9kdWxlJyA9PiAnUGx1Z2luIE1vZHVsZScsDQogICAgICAgICdzaWRlYmFyJyA9PiAnRGVmYXVsdCBTaWRlYmFyJywNCiAgICAgICAgJ3NpZGViYXIyJyA9PiAnU2lkZWJhciAyJywNCiAgICAgICAgJ3NpZGViYXIzJyA9PiAnU2lkZWJhciAzJywNCiAgICAgICAgJ3NpZGViYXI0JyA9PiAnU2lkZWJhciA0JywNCiAgICAgICAgJ3NpZGViYXI1JyA9PiAnU2lkZWJhciA1JywNCiAgICAgICAgJ2Rpc3BsYXlfc3ViY2F0ZWdvcnlzJyA9PiAnU2hvdyBBbGwgU3ViY2F0ZWdvcmllcyBQb3N0cyBpbiB0aGUgQ2F0ZWdvcnknLA0KICAgICAgICAnZHJhZ19tb2R1bGVfdG9fc2lkZWJhcicgPT4gJ1RvIGFjdGl2YXRlIGEgbW9kdWxlIGRyYWcgaXQgdG8gYSBzaWRlYmFyLiBUbyBkZWFjdGl2YXRlIGEgbW9kdWxlIGRyYWcgaXQgYmFjay4nLA0KICAgICAgICAnc2lkZWJhcl9tb2R1bGVfY291bnQnID0+ICdCdWlsdC1pbiAlcyBNb2R1bGUnLA0KICAgICAgICAneG1scnBjX2FkZHJlc3MnID0+ICdQcm90b2NvbCBBZGRyZXNzIGZvciBYTUwtUlBDJywNCiAgICAgICAgJ3N5c3RlbV9lbnZpcm9ubWVudCcgPT4gJ1N5c3RlbSBFbnZpcm9ubWVudHMnLA0KICAgICAgICAndmlld19yaWdodHMnID0+ICdQZXJtaXNzaW9ucycsDQogICAgICAgICdtZW1iZXJfbGV2ZWwnID0+ICdVc2VyIExldmVsJywNCiAgICAgICAgJ2Rpc2FibGVfY29tbWVudCcgPT4gJ0Rpc2FibGUgQ29tbWVudHMnLA0KICAgICAgICAnZGVmYXVsdF90ZW1wbGF0ZScgPT4gJ0RlZmF1bHQgVGVtcGxhdGUnLA0KICAgICAgICAnZ2VuZXJhdGVfc3VtbWFyeScgPT4gJ0dlbmVyYXRlIFN1bW1hcnknLA0KICAgICAgICAnYWRkX3RvX25hdmJhcicgPT4gJ0FkZCB0byBOYXZpZ2F0aW9uIEJhcicsDQogICAgICAgICdoZWxwX2dlbmVyYXRlX3N1bW1hcnknID0+ICdXZVwnbGwgdXNlIHRoZSBjb250ZW50IGJlZm9yZSB0aGUgZmlyc3QgaG9yaXpvbnRhbCBhcyB0aGUgc3VtbWFyeS4gSW4gYWRkaXRpb24sIGJ5IGNsaWNraW5nIHRoZSBsaW5rIHlvdSBjYW4gbGV0IHN5c3RlbSAnLA0KICAgICAgICAndXNlX2NvbW1hc190b19zZXBhcmF0ZScgPT4gJ1NlcGFyYXRlZCBieSBDb21tYXMnLA0KICAgICAgICAnc2hvd19jb21tb25fdGFncycgPT4gJ0Nob29zZSBmcm9tIHRoZSBtb3N0IHVzZWQgdGFncycsDQogICAgICAgICdjYXRlZ29yeV9hcml0bGVzX2RlZmF1bHRfdGVtcGxhdGUnID0+ICdUaGUgRGVmYXVsdCBUZW1wbGF0ZSBmb3IgdGhlIENhdGVnb3J5JywNCiAgICAgICAgJ2NvbmZpcm1fb3BlcmF0aW5nJyA9PiAnQ2xpY2sgIk9LIiB0byBjb250aW51ZSBvciBjbGljayAiQ2FuY2VsIiB0byBzdG9wLicsDQogICAgICAgICdiYXRjaF9vcGVyYXRpb24nID0+ICdCdWxrIEFjdGlvbnMnLA0KICAgICAgICAnb3BlcmF0aW9uX3N1Y2NlZWQnID0+ICdTdWNjZXNzZnVsbHkgQ29tcGxldGVkJywNCiAgICAgICAgJ29wZXJhdGlvbl9mYWlsZWQnID0+ICdPcGVyYXRpb24gRmFpbHVyZScsDQogICAgICAgICdiYXRjaF9vcGVyYXRpb25faW5fcHJvZ3Jlc3MnID0+ICdCYXRjaCBQcm9jZXNzaW5nLi4uJywNCiAgICAgICAgJ3ByZXZpb3VzX29wZXJhdGlvbl9ub3RfZmluaXNoZWQnID0+ICdCZWZvcmUgYnVsayBvcGVyYXRpb25zIGhhdmUgbm90IHlldCBmdWxseSBpbXBsZW1lbnRlZCwgUGxlYXNlIGNsaWNrIDxhIGhyZWY9XCcjXCc+Q29udGludWU8L2E+LCBhbGwgb3BlcmF0aW9uIGlzIGV4ZWN1dGVkLicsDQogICAgICAgICdlcnJvcl90aXBzJyA9PiAnRXJyb3IgVGlwcycsDQogICAgICAgICdlcnJvcl9pbmZvJyA9PiAnRXJyb3IgTWVzc2FnZScsDQogICAgICAgICdmaWxlX2xpbmUnID0+ICdGaWxlIExvY2F0aW9uJywNCiAgICAgICAgJ3JlcXVlc3RfZGF0YScgPT4gJ1JlcXVlc3QgRGF0YScsDQogICAgICAgICdpbmNsdWRlX2ZpbGUnID0+ICdJbmNsdWRlIEZpbGUnLA0KICAgICAgICAnYmFjaycgPT4gJ0JhY2snLA0KICAgICAgICAndmFsaWRjb2RlJyA9PiAnQ2FwdGNoYScsDQogICAgICAgICdoaWRlX3RpdGxlJyA9PiAnSGlkZSBUaXRsZScsDQogICAgICAgICdjYXRhbG9nX3N0eWxlX25vcm1hbCcgPT4gJ05vcm1hbCcsDQogICAgICAgICdjYXRhbG9nX3N0eWxlX3RyZWUnID0+ICdUcmVlJywNCiAgICAgICAgJ2NhdGFsb2dfc3R5bGVfdWwnID0+ICdVTCcsDQogICAgICAgICdhbGxfZGVsJyA9PiAnQnVsayBEZWxldGUnLA0KICAgICAgICAnYWxsX3Bhc3MnID0+ICdCdWxrIEFwcHJvdmUnLA0KICAgICAgICAnYWxsX2F1ZGl0JyA9PiAnQnVsayBVbmFwcHJvdmUnLA0KICAgICAgICAnZ3ppcF9jb21wcmVzcycgPT4gJ0daaXAgQ29tcHJlc3Npb24nLA0KICAgICAgICAnc3ludGF4X2hpZ2hfbGlnaHRlcicgPT4gJ0NvZGUgSGlnaGxpZ2h0aW5nJywNCiAgICAgICAgJ2Nsb3NlX3NpdGUnID0+ICdDbG9zZSBzaXRlJywNCiAgICAgICAgJ21heF9saV9pbl91bCcgPT4gJ01heGltdW0gTnVtYmVyIG9mIExJIGluIFVMJywNCiAgICAgICAgJ25vX3JlZnJlc2hfY29udGVudCcgPT4gJ1ByZXZlbnQgU3lzdGVtIFVwZGF0ZSBNb2R1bGUgQ29udGVudCcsDQogICAgICAgICd1bmNhdGVnb3J5JyA9PiAnVW5jYXRlZ29yaXplZCcsDQogICAgICAgICdjYWxlbmRhcicgPT4gJ0NhbGVuZGFyJywNCiAgICAgICAgJ2NvbnRyb2xfcGFuZWwnID0+ICdEYXNoYm9hcmQnLA0KICAgICAgICAnbW9kdWxlX2NhdGFsb2cnID0+ICdDYXRlZ29yaWVzJywNCiAgICAgICAgJ21vZHVsZV9jb21tZW50cycgPT4gJ1JlY2VudCBDb21tZW50cycsDQogICAgICAgICdtb2R1bGVfYXJjaGl2ZXMnID0+ICdBcmNoaXZlcycsDQogICAgICAgICdtb2R1bGVfc3RhdGlzdGljcycgPT4gJ1NpdGUgSW5mb3JtYXRpb24nLA0KICAgICAgICAnbW9kdWxlX2F1dGhvcnMnID0+ICdBdXRob3JzJywNCiAgICAgICAgJ21vZHVsZV9wcmV2aW91cycgPT4gJ1JlY2VudCBQb3N0cycsDQogICAgICAgICdtb2R1bGVfdGFncycgPT4gJ1RhZ3MnLA0KICAgICAgICAnYWRtaW5fbG9naW4nID0+ICdMb2cgaW4nLA0KICAgICAgICAndG9wX2luZGV4JyA9PiAnSG9tZScsDQogICAgICAgICd0b3BfZ2xvYmFsJyA9PiAnR2xvYmFsJywNCiAgICAgICAgJ3RvcF9jYXRlZ29yeScgPT4gJ0NhdGVnb3J5cycsDQogICAgICAgICdqdW1wX2NvbW1lbnQnID0+ICdWaWV3IENvbW1lbnQgSUQ9JywNCiAgICAgICAgJ3llYXJfc3VmZml4JyA9PiAnJywNCiAgICAgICAgJ3dlZWtfc3VmZml4JyA9PiAnJywNCiAgICAgICAgJ3RpbWUnID0+ICdUaW1lJywNCiAgICAgICAgJ2hvdXInID0+ICdIb3VyJywNCiAgICAgICAgJ21pbnV0ZScgPT4gJ01pbicsDQogICAgICAgICdzZWNvbmQnID0+ICdTZWMnLA0KICAgICAgICAnbWlsbGlzZWMnID0+ICdNcycsDQogICAgICAgICdjbG9zZScgPT4gJ1VwZGF0ZScsDQogICAgICAgICdjdXJyZW50JyA9PiAnQ3VycmVudCcsDQogICAgICAgICdwcmV2X21vbnRoJyA9PiAnUHJldiBNb250aCcsDQogICAgICAgICduZXh0X21vbnRoJyA9PiAnTmV4dCBNb250aCcsDQogICAgICAgICdwcm9ncmFtJyA9PiAnUHJvZ3JhbW1lcnMnLA0KICAgICAgICAnaW50ZXJmYWNlJyA9PiAnRGVzaWduZXJzJywNCiAgICAgICAgJ3N1cHBvcnQnID0+ICdTdXBwb3J0ZXJzJywNCiAgICAgICAgJ3RoYW5rcycgPT4gJ0Fja25vd2xlZGdlbWVudHMnLA0KICAgICAgICAnd2Vic2l0ZScgPT4gJ09mZmljaWFsIFdlYnNpdGVzJywNCiAgICAgICAgJ2RldmVsb3BfaW50cm8nID0+ICdDb250cmlidXRvcnMnLA0KICAgICAgICAnZGVmYXVsdCcgPT4gJ0RlZmF1bHQnLA0KICAgICAgICAnZGVidWdfYmFja3RyYWNlJyA9PiAnRGVidWcgQmFja3RyYWNlJywNCiAgICAgICAgJ3Bvc3NpYmxlX2NhdXNlc19lcnJvcicgPT4gJ1Bvc3NpYmxlIGNhdXNlcyBvZiBlcnJvcnMnLA0KICAgICAgICAnZGlzcGxheV9tb3JlX2luZm8nID0+ICdEaXNwbGF5IG1vcmUgaW5mbycsDQogICAgICAgICdlcnJvcl9sb2FkX2pzJyA9PiAnRXJyb3Igd2hlbiBsb2FkaW5nIEphdmFTY3JpcHQuIE9LIGZvciBtb3JlIGluZm9ybWF0aW9uKENoaW5lc2Ugb25seSksIENhbmNlbCBmb3IgY29udGludWUuJywNCiAgICAgICAgJ2NvbW1lbnRfYXVkaXQnID0+ICdBZHVpdCBDb21tZW50cycsDQogICAgICAgICdjb21tZW50X2F1ZGl0X2NvbW1lbnQnID0+ICdBbGwgbmV3IGNvbW1lbnRzIHBvc3RlZCBieSBub24tcm9vdCB1c2VyIHdpbGwgYmUgYXVkaXRlZC4nLA0KICAgICAgICAnZGVidWdnaW5nX3dhcm5pbmcnID0+ICdJZiB5b3VyIHdlYnNpdGUgY2FuIGJlIGNvbm5lY3RlZCB2aWEgSW50ZXJuZXQsIHBsZWFzZSBkaXNhYmxlIHRoZSBEZXZlbG9wbWVudCBNb2RlLCBvciBpdCBtYXkgYmUgaGFja2VkLicsDQogICAgICAgICcnID0+ICcnLA0KICAgICksDQoNCi8vQWN0aW9uDQogICAgJ2FjdGlvbnMnID0+IGFycmF5KA0KICAgICAgICAnbG9naW4nID0+ICdMb2cgaW4nLA0KICAgICAgICAnbG9nb3V0JyA9PiAnTG9nIE91dCcsDQogICAgICAgICd2ZXJpZnknID0+ICdWZXJpZnknLA0KICAgICAgICAnYWRtaW4nID0+ICdBZG1pbicsDQogICAgICAgICdzZWFyY2gnID0+ICdTZWFyY2gnLA0KICAgICAgICAnbWlzYycgPT4gJ01pc2MnLA0KICAgICAgICAnZmVlZCcgPT4gJ0VudHJpZXMgUlNTJywNCiAgICAgICAgJ2NtdCcgPT4gJ1Bvc3QgQ29tbWVudCcsDQogICAgICAgICdnZXRjbXQnID0+ICdHZXQgUmVjZW50IENvbW1lbnRzJywNCiAgICAgICAgJ2FqYXgnID0+ICdBSkFYJywNCiAgICAgICAgJ0FydGljbGVFZHQnID0+ICdFZGl0IFBvc3QnLA0KICAgICAgICAnQXJ0aWNsZVBzdCcgPT4gJ0FkZCBOZXcgUG9zdCcsDQogICAgICAgICdBcnRpY2xlRGVsJyA9PiAnRGVsZXRlIFBvc3QnLA0KICAgICAgICAnQXJ0aWNsZVB1YicgPT4gJ1B1Ymxpc2ggUG9zdCcsDQogICAgICAgICdQYWdlRWR0JyA9PiAnRWRpdCBQYWdlJywNCiAgICAgICAgJ1BhZ2VQc3QnID0+ICdBZGQgTmV3IFBhZ2UnLA0KICAgICAgICAnUGFnZURlbCcgPT4gJ0RlbGV0ZSBQYWdlJywNCiAgICAgICAgJ0NhdGVnb3J5RWR0JyA9PiAnRWRpdCBDYXRlZ29yeScsDQogICAgICAgICdDYXRlZ29yeVBzdCcgPT4gJ1VwZGF0ZSBDYXRlZ29yeScsDQogICAgICAgICdDYXRlZ29yeURlbCcgPT4gJ0RlbGV0ZSBDYXRlZ29yeScsDQogICAgICAgICdDb21tZW50RWR0JyA9PiAnRWRpdCBDb21tZW50JywNCiAgICAgICAgJ0NvbW1lbnRTYXYnID0+ICdVcGRhdGUgQ29tbWVudCcsDQogICAgICAgICdDb21tZW50RGVsJyA9PiAnRGVsZXRlIENvbW1lbnQnLA0KICAgICAgICAnQ29tbWVudENoaycgPT4gJ0FwcHJvdmUgQ29tbWVudCcsDQogICAgICAgICdDb21tZW50QmF0JyA9PiAnQnVsayBDb21tZW50JywNCiAgICAgICAgJ01lbWJlckVkdCcgPT4gJ0VkaXQgVXNlcicsDQogICAgICAgICdNZW1iZXJQc3QnID0+ICdVcGRhdGUgVXNlcicsDQogICAgICAgICdNZW1iZXJEZWwnID0+ICdEZWxldGUgVXNlcicsDQogICAgICAgICdNZW1iZXJOZXcnID0+ICdBZGQgTmV3IFVzZXInLA0KICAgICAgICAnVGFnRWR0JyA9PiAnRWRpdCBUYWcnLA0KICAgICAgICAnVGFnUHN0JyA9PiAnVXBkYXRlIFRhZycsDQogICAgICAgICdUYWdEZWwnID0+ICdEZWxldGUgVGFnJywNCiAgICAgICAgJ1RhZ05ldycgPT4gJ0FkZCBOZXcgVGFnJywNCiAgICAgICAgJ1BsdWdpbkVuYicgPT4gJ0FjdGl2YXRlJywNCiAgICAgICAgJ1BsdWdpbkRpcycgPT4gJ0RlYWN0aXZhdGUnLA0KICAgICAgICAnVXBsb2FkUHN0JyA9PiAnVXBsb2FkIEF0dGFjaG1lbnQnLA0KICAgICAgICAnVXBsb2FkRGVsJyA9PiAnRGVsZXRlIEF0dGFjaG1lbnQnLA0KICAgICAgICAnTW9kdWxlRWR0JyA9PiAnRWRpdCBNb2R1bGUnLA0KICAgICAgICAnTW9kdWxlUHN0JyA9PiAnVXBkYXRlIE1vZHVsZScsDQogICAgICAgICdNb2R1bGVEZWwnID0+ICdEZWxldGUgTW9kdWxlJywNCiAgICAgICAgJ1RoZW1lU2V0JyA9PiAnVGhlbWUgU2V0dGluZ3MnLA0KICAgICAgICAnU2lkZWJhclNldCcgPT4gJ1NpZGViYXIgU2V0dGluZ3MnLA0KICAgICAgICAnU2V0dGluZ1NhdicgPT4gJ1VwZGF0ZSBTZXR0aW5ncycsDQogICAgICAgICdBcnRpY2xlTW5nJyA9PiAnUG9zdHMnLA0KICAgICAgICAnUGFnZU1uZycgPT4gJ1BhZ2VzJywNCiAgICAgICAgJ0NhdGVnb3J5TW5nJyA9PiAnQ2F0ZWdvcmllcycsDQogICAgICAgICdTZXR0aW5nTW5nJyA9PiAnU2V0dGluZ3MnLA0KICAgICAgICAnVGFnTW5nJyA9PiAnVGFncycsDQogICAgICAgICdDb21tZW50TW5nJyA9PiAnQ29tbWVudHMnLA0KICAgICAgICAnVXBsb2FkTW5nJyA9PiAnQXR0YWNobWVudHMnLA0KICAgICAgICAnTWVtYmVyTW5nJyA9PiAnVXNlcnMnLA0KICAgICAgICAnVGhlbWVNbmcnID0+ICdUaGVtZXMnLA0KICAgICAgICAnUGx1Z2luTW5nJyA9PiAnUGx1Z2lucycsDQogICAgICAgICdNb2R1bGVNbmcnID0+ICdNb2R1bGVzJywNCiAgICAgICAgJ0FydGljbGVBbGwnID0+ICdBbGwgUG9zdHMgUHJpdmlsZWdlIE1hbmFnZW1lbnQnLA0KICAgICAgICAnUGFnZUFsbCcgPT4gJ0FsbCBQYWdlcyBQcml2aWxlZ2UgTWFuYWdlbWVudCcsDQogICAgICAgICdDYXRlZ29yeUFsbCcgPT4gJ0FsbCBDYXRlZ29yaWVzIFByaXZpbGVnZSBNYW5hZ2VtZW50JywNCiAgICAgICAgJ0NvbW1lbnRBbGwnID0+ICdBbGwgQ29tbWVudHMgUHJpdmlsZWdlIE1hbmFnZW1lbnQnLA0KICAgICAgICAnTWVtYmVyQWxsJyA9PiAnQWxsIFVzZXJzIFByaXZpbGVnZSBNYW5hZ2VtZW50JywNCiAgICAgICAgJ1RhZ0FsbCcgPT4gJ0FsbCBUYWdlcyBQcml2aWxlZ2UgTWFuYWdlbWVudCcsDQogICAgICAgICdVcGxvYWRBbGwnID0+ICdBbGwgQXR0YWNobWVudHMgUHJpdmlsZWdlIE1hbmFnZW1lbnQnLA0KICAgICAgICAncm9vdCcgPT4gJ1N1cGVydXNlciBQcml2aWxlZ2UgTWFuYWdlbWVudCcsDQogICAgKSwNCg0KLy9BcnRpY2xlIExldmVsDQogICAgJ3Bvc3Rfc3RhdHVzX25hbWUnID0+IGFycmF5KA0KICAgICAgICAnMCcgPT4gJ1B1Ymxpc2hlZCcsDQogICAgICAgICcxJyA9PiAnRHJhZnQnLA0KICAgICAgICAnMicgPT4gJ1BlbmRpbmcnLA0KICAgICksDQoNCi8vVXNlciBMZXZlbA0KICAgICd1c2VyX2xldmVsX25hbWUnID0+IGFycmF5KA0KICAgICAgICAnMScgPT4gJ0FkbWluaXN0cmF0b3InLA0KICAgICAgICAnMicgPT4gJ1JlZGFjdG9yJywNCiAgICAgICAgJzMnID0+ICdBdXRob3InLA0KICAgICAgICAnNCcgPT4gJ1RlYW13b3JrZXInLA0KICAgICAgICAnNScgPT4gJ0NvbW1lbnRhdG9yJywNCiAgICAgICAgJzYnID0+ICdWaXNpdG9yJywNCiAgICApLA0KDQogICAgJ3VzZXJfc3RhdHVzX25hbWUnID0+IGFycmF5KA0KICAgICAgICAnMCcgPT4gJ05vcm1hbGl0eScsDQogICAgICAgICcxJyA9PiAnUGVuZGluZycsDQogICAgICAgICcyJyA9PiAnRGlzYWJsZWQnLA0KICAgICksDQoNCi8vSmFudWFyeSwgRmVicnVhcnkuLi4NCiAgICAnbW9udGgnID0+IGFycmF5KA0KICAgICAgICAnMScgPT4gJ0phbnVhcnknLA0KICAgICAgICAnMicgPT4gJ0ZlYnJ1YXJ5JywNCiAgICAgICAgJzMnID0+ICdNYXJjaCcsDQogICAgICAgICc0JyA9PiAnQXByaWwnLA0KICAgICAgICAnNScgPT4gJ01heScsDQogICAgICAgICc2JyA9PiAnSnVuZScsDQogICAgICAgICc3JyA9PiAnSnVseScsDQogICAgICAgICc4JyA9PiAnQXVndXN0JywNCiAgICAgICAgJzknID0+ICdTZXB0ZW1iZXInLA0KICAgICAgICAnMTAnID0+ICdPY3RvYmVyJywNCiAgICAgICAgJzExJyA9PiAnTm92ZW1iZXInLA0KICAgICAgICAnMTInID0+ICdEZWNlbWJlcicsDQogICAgKSwNCg0KLy9KYW4uLCBGZWIuIC4uLg0KICAgICdtb250aF9hYmJyJyA9PiBhcnJheSgNCiAgICAgICAgJzEnID0+ICdKYW4nLA0KICAgICAgICAnMicgPT4gJ0ZlYicsDQogICAgICAgICczJyA9PiAnTWFyJywNCiAgICAgICAgJzQnID0+ICdBcHInLA0KICAgICAgICAnNScgPT4gJ01heScsDQogICAgICAgICc2JyA9PiAnSnVuJywNCiAgICAgICAgJzcnID0+ICdKdWwnLA0KICAgICAgICAnOCcgPT4gJ0F1ZycsDQogICAgICAgICc5JyA9PiAnU2VwJywNCiAgICAgICAgJzEwJyA9PiAnT2N0JywNCiAgICAgICAgJzExJyA9PiAnTm92JywNCiAgICAgICAgJzEyJyA9PiAnRGVjJywNCiAgICApLA0KDQovL1N1bmRheSwgTW9uZGF5Li4NCiAgICAnd2VlaycgPT4gYXJyYXkoDQogICAgICAgICc3JyA9PiAnU3VuZGF5JywNCiAgICAgICAgJzEnID0+ICdNb25kYXknLA0KICAgICAgICAnMicgPT4gJ1R1ZXNkYXknLA0KICAgICAgICAnMycgPT4gJ1dlZG5lc2RheScsDQogICAgICAgICc0JyA9PiAnVGh1cnNkYXknLA0KICAgICAgICAnNScgPT4gJ0ZyaWRheScsDQogICAgICAgICc2JyA9PiAnU2F0dXJkYXknLA0KICAgICksDQoNCi8vU3VuLiwgTW9uLiAuLi4NCiAgICAnd2Vla19hYmJyJyA9PiBhcnJheSgNCiAgICAgICAgJzcnID0+ICdTdW4nLA0KICAgICAgICAnMScgPT4gJ01vbicsDQogICAgICAgICcyJyA9PiAnVHVlJywNCiAgICAgICAgJzMnID0+ICdXZWQnLA0KICAgICAgICAnNCcgPT4gJ1RodScsDQogICAgICAgICc1JyA9PiAnRnJpJywNCiAgICAgICAgJzYnID0+ICdTYXQnLA0KICAgICksDQoNCiAgICAnd2Vla19zaG9ydCcgPT4gYXJyYXkoDQogICAgICAgICc3JyA9PiAnUycsDQogICAgICAgICcxJyA9PiAnTScsDQogICAgICAgICcyJyA9PiAnVCcsDQogICAgICAgICczJyA9PiAnVycsDQogICAgICAgICc0JyA9PiAnVCcsDQogICAgICAgICc1JyA9PiAnRicsDQogICAgICAgICc2JyA9PiAnUycsDQogICAgKSwNCg0KLy9DdXN0b20gRXJyb3IgSW5mb3JtYXRpb24NCiAgICAnZXJyb3InID0+IGFycmF5KA0KICAgICAgICAnMCcgPT4gJ1Vua25vd24gRXJyb3InLA0KICAgICAgICAnMScgPT4gJ1Vua25vd24gQ29tbWFuZCcsDQogICAgICAgICcyJyA9PiAnU29ycnksIFRoaXMgcGFnZSBkb2VzIG5vdCBleGlzdC4nLA0KICAgICAgICAnMycgPT4gJ1JlcXVlc3Qgd2l0aCBlcnJvciBwYXJhbXMuJywNCiAgICAgICAgJzQnID0+ICdEYXRhYmFzZSBDb25uZWN0aW9uIEVycm9yJywNCiAgICAgICAgJzUnID0+ICdObyBVbmF1dGhvcml6ZWQgQWNjZXNzJywNCiAgICAgICAgJzYnID0+ICdOb3QgUGVybWl0dGVkJywNCiAgICAgICAgJzcnID0+ICdVc2VybmFtZSBpcyBub3QgaW4gdGhlIGNvcnJlY3QgZm9ybWF0LCBpdCBtYXkgYmUgdG9vIGxvbmcgb3IgaXMgZW1wdHkuJywNCiAgICAgICAgJzgnID0+ICdMb2dpbiBGYWlsZWQnLA0KICAgICAgICAnOScgPT4gJ1RoaXMgUG9zdCBkb2VzIG5vdCBleGlzdCwgb3IgcGVybWlzc2lvbiBpcyB0b28gbG93LicsDQogICAgICAgICcxMCcgPT4gJ1N5c3RlbSBJbml0aWFsaXphdGlvbiBGYWlsZWQnLA0KICAgICAgICAnMTEnID0+ICdVcGRhdGUgUG9zdCBGYWlsZWQnLA0KICAgICAgICAnMTInID0+ICdVcGRhdGUgQ2F0ZWdvcnkgRmFpbGVkJywNCiAgICAgICAgJzEzJyA9PiAnVGhlIFBvc3RzIGluIHRoaXMgY2F0ZWdvcnksIGRlbGV0ZSBmYWlsZWQuJywNCiAgICAgICAgJzE0JyA9PiAnWW91ciBjb21tZW50IGhhcyBiZWVuIGludGVyY2VwdG9yIHN5c3RlbSwgZGVsZXRlIGZhaWxlZC4nLA0KICAgICAgICAnMTUnID0+ICdOYW1lIGZvcm1hdCBpcyBpbmNvcnJlY3QsIGl0IG1heSBiZSB0b28gbG9uZyBvciBlbXB0eS4nLA0KICAgICAgICAnMTYnID0+ICdVcGRhdGUgVXNlciBGYWlsZWQnLA0KICAgICAgICAnMTcnID0+ICdEZWxldGUgVXNlciBGYWlsZWQnLA0KICAgICAgICAnMTgnID0+ICdEZWxldGUgQ29tbWVudCBGYWlsZWQnLA0KICAgICAgICAnMTknID0+ICdEZWxldGUgUGluZyBVUkwgRmFpbGVkJywNCiAgICAgICAgJzIwJyA9PiAnU2VuZCBQaW5nIFVSTCBGYWlsZWQnLA0KICAgICAgICAnMjEnID0+ICdGaWxlIFVwbG9hZCBGYWlsZWQnLA0KICAgICAgICAnMjInID0+ICdEZWxldGUgRmlsZSBGYWlsZWQnLA0KICAgICAgICAnMjMnID0+ICdTeXN0ZW0gUmVjb25zdHJ1Y3Rpb24gRmFpbGVkJywNCiAgICAgICAgJzI0JyA9PiAnU2VhcmNoIFN0cmluZyBGYWlsZWQnLA0KICAgICAgICAnMjUnID0+ICdVcGRhdGUgU2V0dGluZ3MgRmFpbGVkJywNCiAgICAgICAgJzI2JyA9PiAnRmlsZSBUeXBlIGJleW9uZCB0aGUgU2V0IFJhbmdlJywNCiAgICAgICAgJzI3JyA9PiAnRmlsZSBTaXplIGV4Y2VlZHMgdGhlIFNldCBSYW5nZScsDQogICAgICAgICcyOCcgPT4gJ1BsZWFzZSByZW1vdmUgdGhlIGV4aXN0aW5nIGZpbGUuJywNCiAgICAgICAgJzI5JyA9PiAnRS1tYWlsIGFkZHJlc3MgZm9ybWF0IGlzIGNvcnJlY3QsIGl0IG1heSBiZSB0b28gbG9uZyBvciBudWxsLicsDQogICAgICAgICczMCcgPT4gJ1VSTCBmb3JtYXQgaXMgbm90IGNvcnJlY3QsIGl0IG1heSBiZSB0b28gbG9uZyBvciBudWxsLicsDQogICAgICAgICczMScgPT4gJ0RvIG5vdCBpbXBlcnNvbmF0ZTsgaWYgeW91IGFyZSB0aGlzIHVzZXIsIHBsZWFzZSBsb2cgaW4gZmlyc3QgYW5kIHRoZW4gY29tbWVudC4nLA0KICAgICAgICAnMzInID0+ICdPcGVyYXRpbmcgVG9vIEZhc3QnLA0KICAgICAgICAnMzMnID0+ICdVcGRhdGUgS2V5d29yZCBGYWlsZWQnLA0KICAgICAgICAnMzQnID0+ICdEZWxldGUgS2V5d29yZCBGYWlsZWQnLA0KICAgICAgICAnMzUnID0+ICdVcGRhdGUgVGFnIEZhaWxlZCcsDQogICAgICAgICczNicgPT4gJ0RlbGV0ZSBUYWcgRmFpbGVkJywNCiAgICAgICAgJzM3JyA9PiAnRWRpdCBGaWxlIEZhaWxlZCcsDQogICAgICAgICczOCcgPT4gJ1lvdSBoYXZlIGVudGVyZWQgYSB3cm9uZyB2ZXJpZmljYXRpb24gY29kZSEnLA0KICAgICAgICAnMzknID0+ICdQbGVhc2UgZG8gbm90IHN1Ym1pdCB0aGUgc2FtZSBjb21tZW50LicsDQogICAgICAgICc0MCcgPT4gJ0NvbW1lbnQgRGlzYWJsZWQnLA0KICAgICAgICAnNDEnID0+ICdQaW5nIFVSTCBEaXNhYmxlZCcsDQogICAgICAgICc0MicgPT4gJ0Rpc2FibGVkIENvbW1lbnQgRmFpbGVkJywNCiAgICAgICAgJzQzJyA9PiAnQ2hlY2tzdW0gZXJyb3JzLCBkbyBub3QgcG9zdCBzcGFtLicsDQogICAgICAgICc0NCcgPT4gJ05vbi1wdWJsaXNoZWQgUG9zdHMgQ2Fubm90IENvbW1lbnQnLA0KICAgICAgICAnNDUnID0+ICdHdWVzdCBib29rIGFsbG93aW5nIG9ubHkgcmVnaXN0ZXJlZCB1c2VycywgdmlzaXRvcnMgY2FuIGxlYXZlIGEgbWVzc2FnZS4nLA0KICAgICAgICAnNDYnID0+ICdDb21tZW50IGNhbiBub3QgYmUgZW1wdHkgb3IgdG9vIGxvbmcuJywNCiAgICAgICAgJzQ3JyA9PiAnUmVwbHkgZmVhdHVyZSBpcyBvcGVuIHRvIHJlZ2lzdGVyZWQgdXNlcnMgb25seSwgdmlzaXRvcnMgY2FuIGxlYXZlIGEgbWVzc2FnZS4nLA0KICAgICAgICAnNDgnID0+ICdUaGUgcGx1Z2luIGlzIG5vdCBhY3RpdmF0ZWQsIHBsZWFzZSB0byBhY3RpdmF0ZSBhdCB0aGUgZGFzaGJvYXJkLicsDQogICAgICAgICc0OScgPT4gJ1RoZXJlIGFyZSBzdWJjYXRlZ29yaWVzIGluIHRoaXMgY2F0ZWdvcnksIGRlbGV0ZSBmYWlsZWQuJywNCiAgICAgICAgJzUwJyA9PiAnVGhlIHNwZWNpZmllZCBwYXJlbnQgY2F0ZWdvcnkgZG9lcyBub3QgZXhpc3QuJywNCiAgICAgICAgJzUxJyA9PiAnU3ViY2F0ZWdvcnkgY2Fubm90IGluY2x1ZGUgYW55IGNhdGVnb3J5LicsDQogICAgICAgICc1MicgPT4gJ0V4Y2VlZGVkIG1heGltdW0gbnVtYmVyIG9mIHJlcGxpZXMuJywNCiAgICAgICAgJzUzJyA9PiAnWW91ciBjb21tZW50IGhhcyBlbnRlcmVkIHRoZSBhcHByb3ZhbCBwcm9jZXNzLCBwbGVhc2UgZG8gbm90IHJlc3VibWl0LicsDQogICAgICAgICc1NCcgPT4gIlBhc3N3b3JkcyBzaG91bGQgYmUgYmV0d2VlbiA4IGFuZCAyMCBjaGFyYWN0ZXJzLiIsDQogICAgICAgICc1NScgPT4gJ0EgbGVuZ3RoIG9mIGVuY3J5cHRlZCBzdHJpbmcgaXMgbm90IGVxdWFsIHRvIDMyIGRpZ2l0cy4nLA0KICAgICAgICAnNTYnID0+ICdFeGNlZWRzIHRoZSBzZXQgbnVtYmVyIG9mIHJlcGxpZXMuJywNCiAgICAgICAgJzU3JyA9PiAnVGhlIHBhcmVudCBhbmQgdGhlIGNoaWxkIGNvbW1lbnRzIGFyZSBub3QgaW4gdGhlIHNhbWUgcG9zdC4nLA0KICAgICAgICAnNTgnID0+ICdQYXJlbnQgY2F0ZWdvcnkgZG9lcyBub3QgZXhpc3QuJywNCiAgICAgICAgJzU5JyA9PiAnU3ViY2F0ZWdvcnkgZG9lcyBub3QgZXhpc3QuJywNCiAgICAgICAgJzYwJyA9PiAnUmVwbHkgdG8gY29tbWVudCBmYWlsZWQuJywNCiAgICAgICAgJzYxJyA9PiAnUmVjb3JkIGRvZXMgbm90IGV4aXN0LicsDQogICAgICAgICc2MicgPT4gJ0EgdXNlciB3aXRoIHRoYXQgbmFtZSBhbHJlYWR5IGV4aXN0cywgcGxlYXNlIGNoYW5nZSB0aGUgdXNlciBuYW1lLicsDQogICAgICAgICc2MycgPT4gJ0Rpc2FibGUgYnJvd3NlIGRyYWZ0IHBvc3QuJywNCiAgICAgICAgJzY0JyA9PiAnQWN0aXZhdGUgZmFpbGVkLCB0aGUgYXBwbGljYXRpb24gZG9lcyBub3QgYXBwbHkgdG8gWi1CbG9nUEhQLicsDQogICAgICAgICc2NScgPT4gJ1dpbmRvd3MgUGhvbmUgdXNlcnMgdXBncmFkZSB0byBXaW5kb3dzIFBob25lIDguMSBiZWZvcmUgdXBsb2FkaW5nIGZpbGVzLicsDQogICAgICAgICc2NicgPT4gJ1VzZXJuYW1lIGFuZCBwYXNzd29yZCBjYW5ub3QgYmUgZW1wdHkuJywNCiAgICAgICAgJzY3JyA9PiAnTXlTUUwgZGF0YWJhc2UgaXMgbm90IGNvbm5lY3RlZC4nLA0KICAgICAgICAnNjgnID0+ICdTUUxpdGUgZGF0YWJhc2UgY291bGQgbm90IGJlIG9wZW5lZC4nLA0KICAgICAgICAnNjknID0+ICdOb3QgcXVlcnkgdG8gcmVsZXZhbnQgZGF0YS4nLA0KICAgICAgICAnNzAnID0+ICdDb250ZXh0IGNhbiBub3QgYmUgZW1wdHkuJywNCiAgICAgICAgJzcxJyA9PiAnQ3VycmVudCBlZGl0cyBub3Qgc2F2ZWQuJywNCiAgICAgICAgJzcyJyA9PiAnTmFtZSBjYW4gbm90IGJlIG51bGwgb3Igbm90IGluIHRoZSBjb3JyZWN0IGZvcm1hdC4nLA0KICAgICAgICAnNzMnID0+ICdQbGVhc2UgY29uZmlybSBwYXNzd29yZCBpcyBzZXQgY29ycmVjdGx5LicsDQogICAgICAgICc3NCcgPT4gJ0FyZSB5b3Ugc3RpbGwgdXNpbmcgdGhlIG9sZCBicm93c2VyIHZlcnNpb24gd2l0aCBJRSBrZXJuZWw/IFBsZWFzZSB1cGdyYWRlIHRvIElFMTEhIFxyXG5Zb3UgY2FuIGNoYW5nZSB0byBhIGRpZmZlcmVudCBicm93c2VyIGlmIHlvdSB3YW50IHRvLicsDQogICAgICAgICc3NScgPT4gJ0ZpbGUgbmFtZSBjYW4gbm90IGJlIGVtcHR5IScsDQogICAgICAgICc3NicgPT4gJ0h0bWwgSUQgY2FuIG5vdCBiZSBlbXB0eSEnLA0KICAgICAgICAnNzcnID0+ICdVc2VybmFtZSBzaG91bGQgYmUgYmV0d2VlbiAzIGFuZCAyMCBjaGFyYWN0ZXJzLicsDQogICAgICAgICc3OCcgPT4gJ1RoaXMgYXBwbGljYXRpb24gcmVxdWlyZXMlcyBhbmQgYWJvdmUgdmVyc2lvbiBvZiBaLUJsb2dQSFAuJywNCiAgICAgICAgJzc5JyA9PiAnVXNlciBBY2NvdW50cyBub3QgQXBwcm92ZWQnLA0KICAgICAgICAnODAnID0+ICdVc2VyIEFjY291bnQgTG9ja2VkJywNCiAgICAgICAgJzgxJyA9PiAnVW5rbm93biBNZXRob2RzIG9yIFByb3BlcnRpZXMnLA0KICAgICAgICAnODInID0+ICdTaXRlIGhhcyBiZWVuIGNsb3NlZC4nLA0KICAgICAgICAnODMnID0+ICdBY3RpdmF0ZSB0aGUgYXBwbGljYXRpb24sIG5lZWQgdG8gcmVseSBvbiB0aGUgYXBwbGljYXRpb24gb2YgJXMgYWN0aXZhdGVkLicsDQogICAgICAgICc4NCcgPT4gJ0RlYWN0aXZhdGUgdGhlIGFwcGxpY2F0aW9uLCBuZWVkIHRvIHJlbHkgb24gdGhlIGFwcGxpY2F0aW9uIG9mICVzIGlzIGRlYWN0aXZhdGVkLicsDQogICAgICAgICc4NScgPT4gJ0FjdGl2YXRlIHRoZSBhcHBsaWNhdGlvbiwgbmVlZCB0byBkZWFjdGl2YXRlIHRoZSBjb25mbGljdCBvZiBhcHBsaWNhdGlvbiBvZiAlcy4nLA0KICAgICAgICAnODYnID0+ICdUaGVtZSB0ZW1wbGF0ZXMgY29tcGlsZWQgZmlsZSBkb2VzIG5vdCBleGlzdC4nLA0KICAgICAgICAnODcnID0+ICdSZWdpc3RlcmVkIFR5cGUgRmFpbGVkJywNCiAgICAgICAgJzg4JyA9PiAnVGhlIGZpbGUgdGhhdCB5b3UgdXBsb2FkZWQgbm90IGV4aXN0LCBtYXliZSBleGNlZWQgdGhlIG1heGltdW0gdXBsb2FkIGxpbWl0IG9mIHRoZSBzZXJ2ZXIuJywNCiAgICAgICAgJzg5JyA9PiAnRXJyb3Igd2hlbiBsb2FkaW5nIEphdmFTY3JpcHQuJywNCiAgICApLA0KDQogICAgJ29mZmljYWxfdXJscycgPT4gYXJyYXkoDQogICAgICAgICdtb3JlX2hlbHAnID0+ICdodHRwczovL3d3dy56YmxvZ2NuLmNvbS9oZWxwLz9pZD17JWlkJX0mbWVzc2FnZT17JW1lc3NhZ2UlfScsDQogICAgKSwNCg0KLy8gUG9zc2libGUgY2F1c2VzIG9mIHRoZSBlcnJvcg0KICAgICdlcnJvcl9yZWFzb25zJyA9PiBhcnJheSgNCiAgICAgICAgLy8gLTEgZm9yIGRlZmF1bHQNCiAgICAgICAgJ2RlZmF1bHQnID0+ICcnLA0KDQogICAgICAgIC8vIFpCUCBlcnJvcnMgZmlyc3QNCiAgICAgICAgJzYnID0+ICcNCgkJCURpZCB5b3UgYWxyZWFkeSBsb2dpbmVkPyBQbGVhc2UgbG9naW4sIGFuZCB0aGVuIHJldHJ5IHRoZSBvcGVyYXRpb24uIDxici8+DQoJCQlEbyB5b3UgaGF2ZSB0aGUgcGVybWlzc2lvbnM/IFlvdSBjYW4gPGEgaHJlZj0ieyVCbG9nSG9zdCV9emJfc3lzdGVtL2NtZC5waHA/YWN0PW1pc2MmdHlwZT12cnMiIHRhcmdldD0iX2JsYW5rIj4gQ2xpY2sgaGVyZSB0byBzZWUgeW91ciBwZXJtaXNzaW9ucyA8L2E+LiA8YnIvPg0KCQkJPGJyLz4NCgkJJywNCiAgICAgICAgJzgnID0+ICcNCgkJCUhhdmUgeW91IGVudGVyZWQgdGhlIGNvcnJlY3QgbmFtZSBhbmQgcGFzc3dvcmQ/IDxici8+DQoJCQlJZiB5b3UgYXJlIHRoZSB3ZWJtYXN0ZXIgYW5kIGhhdmUgZm9yZ290dGVuIHlvdXIgcGFzc3dvcmQsIHlvdSBjYW4gY2xpY2sgdG8gZG93bmxvYWQgPGEgaHJlZj0iaHR0cHM6Ly93aWtpLnpibG9nY24uY29tL2Rva3UucGhwP2lkPXpibG9ncGhwOmVycm9yOiVFOSVBNiU5NiVFOSVBMSVCNSNlcnJvci04IiB0YXJnZXQ9Il9ibGFuayI+W0xvZ2luIEZhaWxlZF08L2E+LiA8YnIvPg0KCQkJPGJyLz4NCgkJJywNCg0KICAgICAgICAnb3RoZXInID0+IGFycmF5KA0KICAgICAgICAgICAgLy8gT3RoZXIgZXJyb3JzIHRoZW4NCiAgICAgICAgICAgICdteXNxbCcgPT4gJw0KCQkJCQlQbGVhc2UgY2hlY2sgeW91ciBNeVNRTCBjb25maWd1cmF0aW9uIGluIHpiX3VzZXJzL2Nfb3B0aW9uLnBocCwgb3IgY2hlY2sgdGhlIE15U1FMIGNvbm5lY3Rpb24gaW5mb3JtYXRpb24gdGhhdCB5b3UganVzdCBmaWxsLiA8YnIvPg0KCQkJCQlBbmQgeW91ciBNeVNRTCBkYXRhYmFzZSBoYXMgYmVlbiBzdWNjZXNzZnVsbHkgc3RhcnRlZD8gPGJyLz4NCgkJCTxici8+DQoJCQknLA0KDQogICAgICAgICAgICAnc3FsaXRlJyA9PiAnDQoJCQlQbGVhc2UgY2hlY2sgeW91ciBTUUxpdGUgY29uZmlndXJhdGlvbiBpbiB6Yl91c2Vycy9jX29wdGlvbi5waHAuIDxici8+DQoJCQlPciBjaGVjayB5b3UgaGF2ZSByZWFkIGFuZCB3cml0ZSBwZXJtaXNzaW9ucyBvZiB0aGF0IFNRTGl0ZSBmaWxlLiA8YnIvPg0KCQkJPGJyLz4NCgkJCScsDQoNCiAgICAgICAgICAgICdkaXNhYmxlZCBmb3Igc2VjdXJpdHkgcmVhc29ucycgPT4gJw0KCQkJCVlvdSBjYW4gZGlzYWJsZSB0aGUgU2FmZSBNb2RlIG9mIFBIUC48YnIvPg0KCQkJCU90aGVyd2lzZSB5b3UgY2FuIGRpc2FibGUgdGhlIHBsdWdpbiB3aGljaCBjYXVzZWQgdGhpcyBlcnJvciBhbmQgY29udGFjdCB0aGUgYXV0aG9yIG9mIHdoaWNoLg0KCQkJCTxici8+DQoJCQknLA0KDQogICAgICAgICksDQoNCiAgICAgICAgJ2VuZCcgPT4gJw0KCQkJSWYgeW91IGFyZSBhIHZpc2l0b3IsIHRoaXMgbWF5IGJlIHNvbWV0aGluZyBoYXBwZW5lZC4gUGxlYXNlIHRyeSBhZ2FpbiBsYXRlciwgb3IgY29udGFjdCB0aGUgd2VibWFzdGVyLiA8YnIvPg0KCQkJSWYgeW91IGFyZSB0aGUgd2VibWFzdGVyLCBZb3UgY2FuIGNsaWNrIG9uIDxhIGhyZWY9InslbW9yZWhlbHAlfSIgdGFyZ2V0PSJfYmxhbmsiPiBbbW9yZV0gPC9hPiB0byBnZXQgbW9yZSBoZWxwIGZyb20gWi1CbG9nIFdpa2koQ2hpbmVzZSBvbmx5KS4gVGhlcmVmb3JlLCB0byBwdWJsaXNoIGEgdGhyZWFkIGluIEVuZ2xpc2ggaW4gPGEgaHJlZj0iaHR0cHM6Ly9iYnMuemJsb2djbi5jb20vIiB0YXJnZXQ9Il9ibGFuayI+Wi1CbG9nIG9mZmljaWFsIGZvcnVtIDwvYT4gd2l0aCBkZXRhaWxlZCBlcnJvciBkZXNjcmlwdGlvbiBhbmQgc2NyZWVuc2hvdHMgZm9yIGhlbHAgaXMgYSBjaG9pY2UuDQoJCScsDQogICAgKSwNCik7DQo=</file>
	<file name='readme.txt' crc32='25289A57'  dt:dt='bin.base64'>77u/Wi1CbG9nUEhQ5a6J6KOF6K+05piODQoNCjEuWi1CbG9nUEhQ6ZyA6KaBUEhQIDUuMuWPiuS7peS4iueJiOacrOeahFBIUOeOr+Wig+OAgg0KMi7mlK/mjIFJSVMsQXBhY2hlLExpZ2h0dHBkLE5naW54562JV2Vi5pyN5Yqh5Zmo44CCDQozLuS4iuS8oFotQmxvZ1BIUOOAgg0KNC7miZPlvIBodHRwOi8v5L2g55qE572R56uZL+OAgg0KNS7lkIzmhI9aLUJsb2forrjlj6/ljY/orq7jgIINCjYu5bu656uL5pWw5o2u5bqTDQogICAgWi1CbG9nUEhQ5pSv5oyBTXlTUUzku6Xlj4pTUUxpdGXmlbDmja7lupPjgILlhbfkvZPmgqjor6Xkvb/nlKjlk6rkuIDnp43pnIDopoHlj4LogIPnqbrpl7TphY3nva7jgIINCiAgICDkuIDoiKzmg4XlhrXkuIvpgInmi6lNeVNRTOaVsOaNruW6k++8jOi+k+WFpeepuumXtOWVhuS4uuaCqOaPkOS+m+eahE15U1FM5biQ5Y+35a+G56CB44CCDQogICAg5oiW5piv5L2/55So5Y2V5pWw5o2u5bqT55qEU1FMaXRl77yM56iL5bqP5bCG6Ieq5Yqo5Yib5bu644CCDQogICAg54S25ZCO6L6T5YWl5L2g5Li656uZ54K56K6+572u55qE566h55CG5ZGY5biQ5Y+35a+G56CB44CCDQo3LuWuieijheaIkOWKn++8jOi/m+WFpee9keermeOAgg0KOC7lronoo4XlrozmiJDlkI7or7fliKDpmaR6Yl9pbnN0YWxs5paH5Lu25aS544CCDQo5Luezu+e7n+m7mOiupOmbhuaIkOeahOaYr1VFZGl0b3LnvJbovpHlmajvvIzlpoLpnIBNYXJrZG93bu+8jEtpbmRFZGl0b3LnrYnor7fliLDlupTnlKjkuK3lv4PmkJzntKLlubblronoo4XjgII=</file>
	<file name='zb_system\script\jquery.tagto.js' crc32='2ECADB6D'  dt:dt='bin.base64'>Ly9BdXRob3I6IFJlYWxhenkNCi8vaHR0cDovL3JlYWxhenkub3JnL2Jsb2cvIChjaGluZXNlKQ0KDQpqUXVlcnkuYXJyUmVtb3ZlID0gZnVuY3Rpb24oYXJyLCBybSl7DQogICAgZm9yICh2YXIgaSA9IDAsIG4gPSAwOyBpIDwgYXJyLmxlbmd0aDsgKytpKXsNCiAgICAgICAgaWYgKGFycltpXSAhPSBybSkNCiAgICAgICAgICAgIGFycltuKytdID0gYXJyW2ldOw0KICAgIH0NCiAgICBhcnIubGVuZ3RoLS07DQp9DQoNCi8vdXNhZ2U6IGpRdWVyeShmcm9tKS50YWdUbyh0YXJnZXQsIHNlcGVyYXRvcikNCi8vZnJvbSBjb250YWluIHRoZSB0YWdzKHVzZSBhIGxpbmtzKSwgdGFyZ2V0IG11c3QgYmUgYXNzaWduZWQgYW5kIGl0cyB0eXBlIG11c3QgYmUgaW5wdXQgdHlwZT0idGV4dCIgb3IgdGV4dGFyZWENCi8vc2VwZXJhdG9yIGNhbiBiZSAiLSIsICIsIiBhbmQgc3BhY2UgZXRjLCBpZiBub3QgYXNzaWduLCB0aGUgZGVmYXVsdCBzZXBlcmF0b3IgaXMgIiwiDQovL3RjbGFzcyBpcyB0aGUgY2xhc3MgbmFtZSBvZiB0aGUgdGFnIHdoaWNoIGlzIGN1cnJlbnRseSBzZWxlY3RlZCwgaWYgbm90IGFzc2lnbiwgdGhlIGRlZmF1bHQgY2xhc3MgbmFtZSBpcyAic2VsZWN0ZWQiDQoNCmpRdWVyeS5mbi50YWdUbyA9IGZ1bmN0aW9uKHRhcmdldCwgc2VwZXJhdG9yLCB0Y2xhc3Mpew0KICAgIGlmICgic3RyaW5nIiA9PSB0eXBlb2YgdGFyZ2V0KSB0YXJnZXQgPSBqUXVlcnkodGFyZ2V0KTsNCiAgICBzZXBlcmF0b3IgPSBhcmd1bWVudHNbMV0gfHwgIiwiOw0KICAgIHRjbGFzcyA9IGFyZ3VtZW50c1syXSB8fCAic2VsZWN0ZWQiOw0KDQogICAgdmFyIHRhZ25hbWUgPSB0YXJnZXQuZ2V0KDApLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCk7DQogICAgaWYgKHRhZ25hbWUgPT0gImlucHV0IiB8fCB0YWduYW1lID09ICJ0ZXh0YXJlYSIpew0KICAgICAgICBqUXVlcnkoJ2EnLCB0aGlzKS5jbGljayhmdW5jdGlvbigpew0KICAgICAgICAgICAgaWYgKGpRdWVyeS50cmltKHRhcmdldC52YWwoKSkgPT0gJycpew0KICAgICAgICAgICAgICAgIHRhcmdldC52YWwoalF1ZXJ5KHRoaXMpLnRleHQoKSk7DQogICAgICAgICAgICAgICAgalF1ZXJ5KHRoaXMpLmFkZENsYXNzKHRjbGFzcyk7DQogICAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgICAgIHZhciBhcnIgPSB0YXJnZXQudmFsKCkuc3BsaXQoc2VwZXJhdG9yKTsNCiAgICAgICAgICAgICAgICB2YXIgaXNJbkFyciA9IGZhbHNlOw0KICAgICAgICAgICAgICAgIHZhciBwb3NpdGlvbjsNCiAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMCwgbiA9IGFyci5sZW5ndGg7IGkgPCBuOyArK2kpIHsNCiAgICAgICAgICAgICAgICAgICAgaWYgKGpRdWVyeS50cmltKGFycltpXSkgPT0galF1ZXJ5KHRoaXMpLnRleHQoKSl7DQogICAgICAgICAgICAgICAgICAgICAgICBpc0luQXJyID0gdHJ1ZTsNCiAgICAgICAgICAgICAgICAgICAgICAgIHBvc2l0aW9uID0gaTsNCiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOw0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIGlmIChpc0luQXJyID09IHRydWUpew0KICAgICAgICAgICAgICAgICAgICBqUXVlcnkuYXJyUmVtb3ZlKGFyciwgYXJyW3Bvc2l0aW9uXSk7DQogICAgICAgICAgICAgICAgICAgIGpRdWVyeSh0aGlzKS5yZW1vdmVDbGFzcyh0Y2xhc3MpOw0KICAgICAgICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICAgICAgICAgIGFyci5wdXNoKGpRdWVyeSh0aGlzKS50ZXh0KCkpOw0KICAgICAgICAgICAgICAgICAgICBqUXVlcnkodGhpcykuYWRkQ2xhc3ModGNsYXNzKTsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgdGFyZ2V0LnZhbChhcnIuam9pbihzZXBlcmF0b3IpKTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIHJldHVybiBmYWxzZTsNCiAgICAgICAgfSk7DQogICAgfSBlbHNlIHsNCiAgICAgICAgdGhyb3cgInRhcmdldCBtdXN0IGJlIGFuIHRleHQgYXJlYSI7DQogICAgfQ0KfQ0K</file>
	<file name='zb_system\script\md5.js' crc32='52FBF277'  dt:dt='bin.base64'>LyogTUQ1IE1lc3NhZ2UtRGlnZXN0IEFsZ29yaXRobSAtIEphdmFTY3JpcHQNCicgTU9ESUZJQ0FUSU9OIEhJU1RPUlk6DQonIDEuMCAxNi1GZWItMjAwMSAtIFBoaWwgRnJlc2xlIChzYWxlc0BmcmV6LmNvLnVrKSAtIEluaXRpYWwgVmVyc2lvbiAoVkIvQVNQIGNvZGUpDQonIDEuMCAyMS1GZWItMjAwMSAtIEVucmljbyBNb3NhbmdoaW5pIChlcmlrNTA0QHlhaG9vLmNvbSkgLSBKYXZhU2NyaXB0IHBvcnRpbmcNCiovDQpmdW5jdGlvbiBNRDUoc01lc3NhZ2UpIHsNCmZ1bmN0aW9uIFJvdGF0ZUxlZnQobFZhbHVlLCBpU2hpZnRCaXRzKSB7IHJldHVybiAobFZhbHVlPDxpU2hpZnRCaXRzKSB8IChsVmFsdWU+Pj4oMzItaVNoaWZ0Qml0cykpOyB9DQpmdW5jdGlvbiBBZGRVbnNpZ25lZChsWCxsWSkgew0KdmFyIGxYNCxsWTQsbFg4LGxZOCxsUmVzdWx0Ow0KbFg4ID0gKGxYICYgMHg4MDAwMDAwMCk7DQpsWTggPSAobFkgJiAweDgwMDAwMDAwKTsNCmxYNCA9IChsWCAmIDB4NDAwMDAwMDApOw0KbFk0ID0gKGxZICYgMHg0MDAwMDAwMCk7DQpsUmVzdWx0ID0gKGxYICYgMHgzRkZGRkZGRikrKGxZICYgMHgzRkZGRkZGRik7DQppZiAobFg0ICYgbFk0KSByZXR1cm4gKGxSZXN1bHQgXiAweDgwMDAwMDAwIF4gbFg4IF4gbFk4KTsNCmlmIChsWDQgfCBsWTQpIHsNCmlmIChsUmVzdWx0ICYgMHg0MDAwMDAwMCkgcmV0dXJuIChsUmVzdWx0IF4gMHhDMDAwMDAwMCBeIGxYOCBeIGxZOCk7DQplbHNlIHJldHVybiAobFJlc3VsdCBeIDB4NDAwMDAwMDAgXiBsWDggXiBsWTgpOw0KfSBlbHNlIHJldHVybiAobFJlc3VsdCBeIGxYOCBeIGxZOCk7DQp9DQpmdW5jdGlvbiBGKHgseSx6KSB7IHJldHVybiAoeCAmIHkpIHwgKCh+eCkgJiB6KTsgfQ0KZnVuY3Rpb24gRyh4LHkseikgeyByZXR1cm4gKHggJiB6KSB8ICh5ICYgKH56KSk7IH0NCmZ1bmN0aW9uIEgoeCx5LHopIHsgcmV0dXJuICh4IF4geSBeIHopOyB9DQpmdW5jdGlvbiBJKHgseSx6KSB7IHJldHVybiAoeSBeICh4IHwgKH56KSkpOyB9DQpmdW5jdGlvbiBGRihhLGIsYyxkLHgscyxhYykgew0KYSA9IEFkZFVuc2lnbmVkKGEsIEFkZFVuc2lnbmVkKEFkZFVuc2lnbmVkKEYoYiwgYywgZCksIHgpLCBhYykpOw0KcmV0dXJuIEFkZFVuc2lnbmVkKFJvdGF0ZUxlZnQoYSwgcyksIGIpOw0KfQ0KZnVuY3Rpb24gR0coYSxiLGMsZCx4LHMsYWMpIHsNCmEgPSBBZGRVbnNpZ25lZChhLCBBZGRVbnNpZ25lZChBZGRVbnNpZ25lZChHKGIsIGMsIGQpLCB4KSwgYWMpKTsNCnJldHVybiBBZGRVbnNpZ25lZChSb3RhdGVMZWZ0KGEsIHMpLCBiKTsNCn0NCmZ1bmN0aW9uIEhIKGEsYixjLGQseCxzLGFjKSB7DQphID0gQWRkVW5zaWduZWQoYSwgQWRkVW5zaWduZWQoQWRkVW5zaWduZWQoSChiLCBjLCBkKSwgeCksIGFjKSk7DQpyZXR1cm4gQWRkVW5zaWduZWQoUm90YXRlTGVmdChhLCBzKSwgYik7DQp9DQpmdW5jdGlvbiBJSShhLGIsYyxkLHgscyxhYykgew0KYSA9IEFkZFVuc2lnbmVkKGEsIEFkZFVuc2lnbmVkKEFkZFVuc2lnbmVkKEkoYiwgYywgZCksIHgpLCBhYykpOw0KcmV0dXJuIEFkZFVuc2lnbmVkKFJvdGF0ZUxlZnQoYSwgcyksIGIpOw0KfQ0KZnVuY3Rpb24gQ29udmVydFRvV29yZEFycmF5KHNNZXNzYWdlKSB7DQp2YXIgbFdvcmRDb3VudDsNCnZhciBsTWVzc2FnZUxlbmd0aCA9IHNNZXNzYWdlLmxlbmd0aDsNCnZhciBsTnVtYmVyT2ZXb3Jkc190ZW1wMT1sTWVzc2FnZUxlbmd0aCArIDg7DQp2YXIgbE51bWJlck9mV29yZHNfdGVtcDI9KGxOdW1iZXJPZldvcmRzX3RlbXAxLShsTnVtYmVyT2ZXb3Jkc190ZW1wMSAlIDY0KSkvNjQ7DQp2YXIgbE51bWJlck9mV29yZHMgPSAobE51bWJlck9mV29yZHNfdGVtcDIrMSkqMTY7DQp2YXIgbFdvcmRBcnJheT1BcnJheShsTnVtYmVyT2ZXb3Jkcy0xKTsNCnZhciBsQnl0ZVBvc2l0aW9uID0gMDsNCnZhciBsQnl0ZUNvdW50ID0gMDsNCndoaWxlICggbEJ5dGVDb3VudCA8IGxNZXNzYWdlTGVuZ3RoICkgew0KbFdvcmRDb3VudCA9IChsQnl0ZUNvdW50LShsQnl0ZUNvdW50ICUgNCkpLzQ7DQpsQnl0ZVBvc2l0aW9uID0gKGxCeXRlQ291bnQgJSA0KSo4Ow0KbFdvcmRBcnJheVtsV29yZENvdW50XSA9IChsV29yZEFycmF5W2xXb3JkQ291bnRdIHwgKHNNZXNzYWdlLmNoYXJDb2RlQXQobEJ5dGVDb3VudCk8PGxCeXRlUG9zaXRpb24pKTsNCmxCeXRlQ291bnQrKzsNCn0NCmxXb3JkQ291bnQgPSAobEJ5dGVDb3VudC0obEJ5dGVDb3VudCAlIDQpKS80Ow0KbEJ5dGVQb3NpdGlvbiA9IChsQnl0ZUNvdW50ICUgNCkqODsNCmxXb3JkQXJyYXlbbFdvcmRDb3VudF0gPSBsV29yZEFycmF5W2xXb3JkQ291bnRdIHwgKDB4ODA8PGxCeXRlUG9zaXRpb24pOw0KbFdvcmRBcnJheVtsTnVtYmVyT2ZXb3Jkcy0yXSA9IGxNZXNzYWdlTGVuZ3RoPDwzOw0KbFdvcmRBcnJheVtsTnVtYmVyT2ZXb3Jkcy0xXSA9IGxNZXNzYWdlTGVuZ3RoPj4+Mjk7DQpyZXR1cm4gbFdvcmRBcnJheTsNCn0NCmZ1bmN0aW9uIFdvcmRUb0hleChsVmFsdWUpIHsNCnZhciBXb3JkVG9IZXhWYWx1ZT0iIixXb3JkVG9IZXhWYWx1ZV90ZW1wPSIiLGxCeXRlLGxDb3VudDsNCmZvciAobENvdW50ID0gMDtsQ291bnQ8PTM7bENvdW50KyspIHsNCmxCeXRlID0gKGxWYWx1ZT4+PihsQ291bnQqOCkpICYgMjU1Ow0KV29yZFRvSGV4VmFsdWVfdGVtcCA9ICIwIiArIGxCeXRlLnRvU3RyaW5nKDE2KTsNCldvcmRUb0hleFZhbHVlID0gV29yZFRvSGV4VmFsdWUgKyBXb3JkVG9IZXhWYWx1ZV90ZW1wLnN1YnN0cihXb3JkVG9IZXhWYWx1ZV90ZW1wLmxlbmd0aC0yLDIpOw0KfQ0KcmV0dXJuIFdvcmRUb0hleFZhbHVlOw0KfQ0KdmFyIHg9QXJyYXkoKTsNCnZhciBrLEFBLEJCLENDLERELGEsYixjLGQNCnZhciBTMTE9NywgUzEyPTEyLCBTMTM9MTcsIFMxND0yMjsNCnZhciBTMjE9NSwgUzIyPTkgLCBTMjM9MTQsIFMyND0yMDsNCnZhciBTMzE9NCwgUzMyPTExLCBTMzM9MTYsIFMzND0yMzsNCnZhciBTNDE9NiwgUzQyPTEwLCBTNDM9MTUsIFM0ND0yMTsNCi8vIFN0ZXBzIDEgYW5kIDIuIEFwcGVuZCBwYWRkaW5nIGJpdHMgYW5kIGxlbmd0aCBhbmQgY29udmVydCB0byB3b3Jkcw0KeCA9IENvbnZlcnRUb1dvcmRBcnJheShzTWVzc2FnZSk7DQovLyBTdGVwIDMuIEluaXRpYWxpc2UNCmEgPSAweDY3NDUyMzAxOyBiID0gMHhFRkNEQUI4OTsgYyA9IDB4OThCQURDRkU7IGQgPSAweDEwMzI1NDc2Ow0KLy8gU3RlcCA0LiBQcm9jZXNzIHRoZSBtZXNzYWdlIGluIDE2LXdvcmQgYmxvY2tzDQpmb3IgKGs9MDtrPHgubGVuZ3RoO2srPTE2KSB7DQpBQT1hOyBCQj1iOyBDQz1jOyBERD1kOw0KYT1GRihhLGIsYyxkLHhbayswXSwgUzExLDB4RDc2QUE0NzgpOw0KZD1GRihkLGEsYixjLHhbaysxXSwgUzEyLDB4RThDN0I3NTYpOw0KYz1GRihjLGQsYSxiLHhbaysyXSwgUzEzLDB4MjQyMDcwREIpOw0KYj1GRihiLGMsZCxhLHhbayszXSwgUzE0LDB4QzFCRENFRUUpOw0KYT1GRihhLGIsYyxkLHhbays0XSwgUzExLDB4RjU3QzBGQUYpOw0KZD1GRihkLGEsYixjLHhbays1XSwgUzEyLDB4NDc4N0M2MkEpOw0KYz1GRihjLGQsYSxiLHhbays2XSwgUzEzLDB4QTgzMDQ2MTMpOw0KYj1GRihiLGMsZCxhLHhbays3XSwgUzE0LDB4RkQ0Njk1MDEpOw0KYT1GRihhLGIsYyxkLHhbays4XSwgUzExLDB4Njk4MDk4RDgpOw0KZD1GRihkLGEsYixjLHhbays5XSwgUzEyLDB4OEI0NEY3QUYpOw0KYz1GRihjLGQsYSxiLHhbaysxMF0sUzEzLDB4RkZGRjVCQjEpOw0KYj1GRihiLGMsZCxhLHhbaysxMV0sUzE0LDB4ODk1Q0Q3QkUpOw0KYT1GRihhLGIsYyxkLHhbaysxMl0sUzExLDB4NkI5MDExMjIpOw0KZD1GRihkLGEsYixjLHhbaysxM10sUzEyLDB4RkQ5ODcxOTMpOw0KYz1GRihjLGQsYSxiLHhbaysxNF0sUzEzLDB4QTY3OTQzOEUpOw0KYj1GRihiLGMsZCxhLHhbaysxNV0sUzE0LDB4NDlCNDA4MjEpOw0KYT1HRyhhLGIsYyxkLHhbaysxXSwgUzIxLDB4RjYxRTI1NjIpOw0KZD1HRyhkLGEsYixjLHhbays2XSwgUzIyLDB4QzA0MEIzNDApOw0KYz1HRyhjLGQsYSxiLHhbaysxMV0sUzIzLDB4MjY1RTVBNTEpOw0KYj1HRyhiLGMsZCxhLHhbayswXSwgUzI0LDB4RTlCNkM3QUEpOw0KYT1HRyhhLGIsYyxkLHhbays1XSwgUzIxLDB4RDYyRjEwNUQpOw0KZD1HRyhkLGEsYixjLHhbaysxMF0sUzIyLDB4MjQ0MTQ1Myk7DQpjPUdHKGMsZCxhLGIseFtrKzE1XSxTMjMsMHhEOEExRTY4MSk7DQpiPUdHKGIsYyxkLGEseFtrKzRdLCBTMjQsMHhFN0QzRkJDOCk7DQphPUdHKGEsYixjLGQseFtrKzldLCBTMjEsMHgyMUUxQ0RFNik7DQpkPUdHKGQsYSxiLGMseFtrKzE0XSxTMjIsMHhDMzM3MDdENik7DQpjPUdHKGMsZCxhLGIseFtrKzNdLCBTMjMsMHhGNEQ1MEQ4Nyk7DQpiPUdHKGIsYyxkLGEseFtrKzhdLCBTMjQsMHg0NTVBMTRFRCk7DQphPUdHKGEsYixjLGQseFtrKzEzXSxTMjEsMHhBOUUzRTkwNSk7DQpkPUdHKGQsYSxiLGMseFtrKzJdLCBTMjIsMHhGQ0VGQTNGOCk7DQpjPUdHKGMsZCxhLGIseFtrKzddLCBTMjMsMHg2NzZGMDJEOSk7DQpiPUdHKGIsYyxkLGEseFtrKzEyXSxTMjQsMHg4RDJBNEM4QSk7DQphPUhIKGEsYixjLGQseFtrKzVdLCBTMzEsMHhGRkZBMzk0Mik7DQpkPUhIKGQsYSxiLGMseFtrKzhdLCBTMzIsMHg4NzcxRjY4MSk7DQpjPUhIKGMsZCxhLGIseFtrKzExXSxTMzMsMHg2RDlENjEyMik7DQpiPUhIKGIsYyxkLGEseFtrKzE0XSxTMzQsMHhGREU1MzgwQyk7DQphPUhIKGEsYixjLGQseFtrKzFdLCBTMzEsMHhBNEJFRUE0NCk7DQpkPUhIKGQsYSxiLGMseFtrKzRdLCBTMzIsMHg0QkRFQ0ZBOSk7DQpjPUhIKGMsZCxhLGIseFtrKzddLCBTMzMsMHhGNkJCNEI2MCk7DQpiPUhIKGIsYyxkLGEseFtrKzEwXSxTMzQsMHhCRUJGQkM3MCk7DQphPUhIKGEsYixjLGQseFtrKzEzXSxTMzEsMHgyODlCN0VDNik7DQpkPUhIKGQsYSxiLGMseFtrKzBdLCBTMzIsMHhFQUExMjdGQSk7DQpjPUhIKGMsZCxhLGIseFtrKzNdLCBTMzMsMHhENEVGMzA4NSk7DQpiPUhIKGIsYyxkLGEseFtrKzZdLCBTMzQsMHg0ODgxRDA1KTsNCmE9SEgoYSxiLGMsZCx4W2srOV0sIFMzMSwweEQ5RDREMDM5KTsNCmQ9SEgoZCxhLGIsYyx4W2srMTJdLFMzMiwweEU2REI5OUU1KTsNCmM9SEgoYyxkLGEsYix4W2srMTVdLFMzMywweDFGQTI3Q0Y4KTsNCmI9SEgoYixjLGQsYSx4W2srMl0sIFMzNCwweEM0QUM1NjY1KTsNCmE9SUkoYSxiLGMsZCx4W2srMF0sIFM0MSwweEY0MjkyMjQ0KTsNCmQ9SUkoZCxhLGIsYyx4W2srN10sIFM0MiwweDQzMkFGRjk3KTsNCmM9SUkoYyxkLGEsYix4W2srMTRdLFM0MywweEFCOTQyM0E3KTsNCmI9SUkoYixjLGQsYSx4W2srNV0sIFM0NCwweEZDOTNBMDM5KTsNCmE9SUkoYSxiLGMsZCx4W2srMTJdLFM0MSwweDY1NUI1OUMzKTsNCmQ9SUkoZCxhLGIsYyx4W2srM10sIFM0MiwweDhGMENDQzkyKTsNCmM9SUkoYyxkLGEsYix4W2srMTBdLFM0MywweEZGRUZGNDdEKTsNCmI9SUkoYixjLGQsYSx4W2srMV0sIFM0NCwweDg1ODQ1REQxKTsNCmE9SUkoYSxiLGMsZCx4W2srOF0sIFM0MSwweDZGQTg3RTRGKTsNCmQ9SUkoZCxhLGIsYyx4W2srMTVdLFM0MiwweEZFMkNFNkUwKTsNCmM9SUkoYyxkLGEsYix4W2srNl0sIFM0MywweEEzMDE0MzE0KTsNCmI9SUkoYixjLGQsYSx4W2srMTNdLFM0NCwweDRFMDgxMUExKTsNCmE9SUkoYSxiLGMsZCx4W2srNF0sIFM0MSwweEY3NTM3RTgyKTsNCmQ9SUkoZCxhLGIsYyx4W2srMTFdLFM0MiwweEJEM0FGMjM1KTsNCmM9SUkoYyxkLGEsYix4W2srMl0sIFM0MywweDJBRDdEMkJCKTsNCmI9SUkoYixjLGQsYSx4W2srOV0sIFM0NCwweEVCODZEMzkxKTsNCmE9QWRkVW5zaWduZWQoYSxBQSk7IGI9QWRkVW5zaWduZWQoYixCQik7IGM9QWRkVW5zaWduZWQoYyxDQyk7IGQ9QWRkVW5zaWduZWQoZCxERCk7DQp9DQovLyBTdGVwIDUuIE91dHB1dCB0aGUgMTI4IGJpdCBkaWdlc3QNCnZhciB0ZW1wPSBXb3JkVG9IZXgoYSkrV29yZFRvSGV4KGIpK1dvcmRUb0hleChjKStXb3JkVG9IZXgoZCk7DQpyZXR1cm4gdGVtcC50b0xvd2VyQ2FzZSgpOw0KfQ==</file>
</files>